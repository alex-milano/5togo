function iI(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function oI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Uv={exports:{}},Fu={},Bv={exports:{}},ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ya=Symbol.for("react.element"),aI=Symbol.for("react.portal"),lI=Symbol.for("react.fragment"),uI=Symbol.for("react.strict_mode"),cI=Symbol.for("react.profiler"),dI=Symbol.for("react.provider"),hI=Symbol.for("react.context"),fI=Symbol.for("react.forward_ref"),pI=Symbol.for("react.suspense"),mI=Symbol.for("react.memo"),gI=Symbol.for("react.lazy"),qm=Symbol.iterator;function yI(t){return t===null||typeof t!="object"?null:(t=qm&&t[qm]||t["@@iterator"],typeof t=="function"?t:null)}var zv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$v=Object.assign,Wv={};function Pi(t,e,n){this.props=t,this.context=e,this.refs=Wv,this.updater=n||zv}Pi.prototype.isReactComponent={};Pi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Pi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Hv(){}Hv.prototype=Pi.prototype;function ef(t,e,n){this.props=t,this.context=e,this.refs=Wv,this.updater=n||zv}var tf=ef.prototype=new Hv;tf.constructor=ef;$v(tf,Pi.prototype);tf.isPureReactComponent=!0;var Km=Array.isArray,qv=Object.prototype.hasOwnProperty,nf={current:null},Kv={key:!0,ref:!0,__self:!0,__source:!0};function Gv(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)qv.call(e,r)&&!Kv.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:ya,type:t,key:i,ref:o,props:s,_owner:nf.current}}function vI(t,e){return{$$typeof:ya,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function rf(t){return typeof t=="object"&&t!==null&&t.$$typeof===ya}function _I(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Gm=/\/+/g;function Wc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?_I(""+t.key):e.toString(36)}function Cl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ya:case aI:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Wc(o,0):r,Km(s)?(n="",t!=null&&(n=t.replace(Gm,"$&/")+"/"),Cl(s,e,n,"",function(d){return d})):s!=null&&(rf(s)&&(s=vI(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Gm,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Km(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+Wc(i,l);o+=Cl(i,e,n,u,s)}else if(u=yI(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+Wc(i,l++),o+=Cl(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function il(t,e,n){if(t==null)return t;var r=[],s=0;return Cl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function wI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Rt={current:null},Nl={transition:null},EI={ReactCurrentDispatcher:Rt,ReactCurrentBatchConfig:Nl,ReactCurrentOwner:nf};function Qv(){throw Error("act(...) is not supported in production builds of React.")}ae.Children={map:il,forEach:function(t,e,n){il(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return il(t,function(){e++}),e},toArray:function(t){return il(t,function(e){return e})||[]},only:function(t){if(!rf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ae.Component=Pi;ae.Fragment=lI;ae.Profiler=cI;ae.PureComponent=ef;ae.StrictMode=uI;ae.Suspense=pI;ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EI;ae.act=Qv;ae.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=$v({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=nf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)qv.call(e,u)&&!Kv.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:ya,type:t.type,key:s,ref:i,props:r,_owner:o}};ae.createContext=function(t){return t={$$typeof:hI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:dI,_context:t},t.Consumer=t};ae.createElement=Gv;ae.createFactory=function(t){var e=Gv.bind(null,t);return e.type=t,e};ae.createRef=function(){return{current:null}};ae.forwardRef=function(t){return{$$typeof:fI,render:t}};ae.isValidElement=rf;ae.lazy=function(t){return{$$typeof:gI,_payload:{_status:-1,_result:t},_init:wI}};ae.memo=function(t,e){return{$$typeof:mI,type:t,compare:e===void 0?null:e}};ae.startTransition=function(t){var e=Nl.transition;Nl.transition={};try{t()}finally{Nl.transition=e}};ae.unstable_act=Qv;ae.useCallback=function(t,e){return Rt.current.useCallback(t,e)};ae.useContext=function(t){return Rt.current.useContext(t)};ae.useDebugValue=function(){};ae.useDeferredValue=function(t){return Rt.current.useDeferredValue(t)};ae.useEffect=function(t,e){return Rt.current.useEffect(t,e)};ae.useId=function(){return Rt.current.useId()};ae.useImperativeHandle=function(t,e,n){return Rt.current.useImperativeHandle(t,e,n)};ae.useInsertionEffect=function(t,e){return Rt.current.useInsertionEffect(t,e)};ae.useLayoutEffect=function(t,e){return Rt.current.useLayoutEffect(t,e)};ae.useMemo=function(t,e){return Rt.current.useMemo(t,e)};ae.useReducer=function(t,e,n){return Rt.current.useReducer(t,e,n)};ae.useRef=function(t){return Rt.current.useRef(t)};ae.useState=function(t){return Rt.current.useState(t)};ae.useSyncExternalStore=function(t,e,n){return Rt.current.useSyncExternalStore(t,e,n)};ae.useTransition=function(){return Rt.current.useTransition()};ae.version="18.3.1";Bv.exports=ae;var A=Bv.exports;const Yv=oI(A),TI=iI({__proto__:null,default:Yv},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var II=A,SI=Symbol.for("react.element"),kI=Symbol.for("react.fragment"),xI=Object.prototype.hasOwnProperty,AI=II.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,CI={key:!0,ref:!0,__self:!0,__source:!0};function Xv(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)xI.call(e,r)&&!CI.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:SI,type:t,key:i,ref:o,props:s,_owner:AI.current}}Fu.Fragment=kI;Fu.jsx=Xv;Fu.jsxs=Xv;Uv.exports=Fu;var c=Uv.exports,Rd={},Jv={exports:{}},qt={},Zv={exports:{}},e_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,W){var G=V.length;V.push(W);e:for(;0<G;){var oe=G-1>>>1,le=V[oe];if(0<s(le,W))V[oe]=W,V[G]=le,G=oe;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var W=V[0],G=V.pop();if(G!==W){V[0]=G;e:for(var oe=0,le=V.length,ie=le>>>1;oe<ie;){var Ce=2*(oe+1)-1,ne=V[Ce],X=Ce+1,ue=V[X];if(0>s(ne,G))X<le&&0>s(ue,ne)?(V[oe]=ue,V[X]=G,oe=X):(V[oe]=ne,V[Ce]=G,oe=Ce);else if(X<le&&0>s(ue,G))V[oe]=ue,V[X]=G,oe=X;else break e}}return W}function s(V,W){var G=V.sortIndex-W.sortIndex;return G!==0?G:V.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],f=1,m=null,g=3,x=!1,C=!1,P=!1,N=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(V){for(var W=n(d);W!==null;){if(W.callback===null)r(d);else if(W.startTime<=V)r(d),W.sortIndex=W.expirationTime,e(u,W);else break;W=n(d)}}function D(V){if(P=!1,E(V),!C)if(n(u)!==null)C=!0,Le(O);else{var W=n(d);W!==null&&Pe(D,W.startTime-V)}}function O(V,W){C=!1,P&&(P=!1,w(y),y=-1),x=!0;var G=g;try{for(E(W),m=n(u);m!==null&&(!(m.expirationTime>W)||V&&!b());){var oe=m.callback;if(typeof oe=="function"){m.callback=null,g=m.priorityLevel;var le=oe(m.expirationTime<=W);W=t.unstable_now(),typeof le=="function"?m.callback=le:m===n(u)&&r(u),E(W)}else r(u);m=n(u)}if(m!==null)var ie=!0;else{var Ce=n(d);Ce!==null&&Pe(D,Ce.startTime-W),ie=!1}return ie}finally{m=null,g=G,x=!1}}var M=!1,S=null,y=-1,k=5,T=-1;function b(){return!(t.unstable_now()-T<k)}function R(){if(S!==null){var V=t.unstable_now();T=V;var W=!0;try{W=S(!0,V)}finally{W?I():(M=!1,S=null)}}else M=!1}var I;if(typeof _=="function")I=function(){_(R)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,$e=pe.port2;pe.port1.onmessage=R,I=function(){$e.postMessage(null)}}else I=function(){N(R,0)};function Le(V){S=V,M||(M=!0,I())}function Pe(V,W){y=N(function(){V(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){C||x||(C=!0,Le(O))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(V){switch(g){case 1:case 2:case 3:var W=3;break;default:W=g}var G=g;g=W;try{return V()}finally{g=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,W){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var G=g;g=V;try{return W()}finally{g=G}},t.unstable_scheduleCallback=function(V,W,G){var oe=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?oe+G:oe):G=oe,V){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=G+le,V={id:f++,callback:W,priorityLevel:V,startTime:G,expirationTime:le,sortIndex:-1},G>oe?(V.sortIndex=G,e(d,V),n(u)===null&&V===n(d)&&(P?(w(y),y=-1):P=!0,Pe(D,G-oe))):(V.sortIndex=le,e(u,V),C||x||(C=!0,Le(O))),V},t.unstable_shouldYield=b,t.unstable_wrapCallback=function(V){var W=g;return function(){var G=g;g=W;try{return V.apply(this,arguments)}finally{g=G}}}})(e_);Zv.exports=e_;var NI=Zv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RI=A,Ht=NI;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var t_=new Set,Uo={};function ks(t,e){hi(t,e),hi(t+"Capture",e)}function hi(t,e){for(Uo[t]=e,t=0;t<e.length;t++)t_.add(e[t])}var Kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pd=Object.prototype.hasOwnProperty,PI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Qm={},Ym={};function bI(t){return Pd.call(Ym,t)?!0:Pd.call(Qm,t)?!1:PI.test(t)?Ym[t]=!0:(Qm[t]=!0,!1)}function DI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function jI(t,e,n,r){if(e===null||typeof e>"u"||DI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Pt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){dt[t]=new Pt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];dt[e]=new Pt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){dt[t]=new Pt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){dt[t]=new Pt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){dt[t]=new Pt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){dt[t]=new Pt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){dt[t]=new Pt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){dt[t]=new Pt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){dt[t]=new Pt(t,5,!1,t.toLowerCase(),null,!1,!1)});var sf=/[\-:]([a-z])/g;function of(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(sf,of);dt[e]=new Pt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(sf,of);dt[e]=new Pt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(sf,of);dt[e]=new Pt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){dt[t]=new Pt(t,1,!1,t.toLowerCase(),null,!1,!1)});dt.xlinkHref=new Pt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){dt[t]=new Pt(t,1,!1,t.toLowerCase(),null,!0,!0)});function af(t,e,n,r){var s=dt.hasOwnProperty(e)?dt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(jI(e,n,s,r)&&(n=null),r||s===null?bI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var nr=RI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ol=Symbol.for("react.element"),$s=Symbol.for("react.portal"),Ws=Symbol.for("react.fragment"),lf=Symbol.for("react.strict_mode"),bd=Symbol.for("react.profiler"),n_=Symbol.for("react.provider"),r_=Symbol.for("react.context"),uf=Symbol.for("react.forward_ref"),Dd=Symbol.for("react.suspense"),jd=Symbol.for("react.suspense_list"),cf=Symbol.for("react.memo"),hr=Symbol.for("react.lazy"),s_=Symbol.for("react.offscreen"),Xm=Symbol.iterator;function oo(t){return t===null||typeof t!="object"?null:(t=Xm&&t[Xm]||t["@@iterator"],typeof t=="function"?t:null)}var je=Object.assign,Hc;function go(t){if(Hc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Hc=e&&e[1]||""}return`
`+Hc+t}var qc=!1;function Kc(t,e){if(!t||qc)return"";qc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{qc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?go(t):""}function OI(t){switch(t.tag){case 5:return go(t.type);case 16:return go("Lazy");case 13:return go("Suspense");case 19:return go("SuspenseList");case 0:case 2:case 15:return t=Kc(t.type,!1),t;case 11:return t=Kc(t.type.render,!1),t;case 1:return t=Kc(t.type,!0),t;default:return""}}function Od(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ws:return"Fragment";case $s:return"Portal";case bd:return"Profiler";case lf:return"StrictMode";case Dd:return"Suspense";case jd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case r_:return(t.displayName||"Context")+".Consumer";case n_:return(t._context.displayName||"Context")+".Provider";case uf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case cf:return e=t.displayName||null,e!==null?e:Od(t.type)||"Memo";case hr:e=t._payload,t=t._init;try{return Od(t(e))}catch{}}return null}function LI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Od(e);case 8:return e===lf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Vr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function i_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function VI(t){var e=i_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function al(t){t._valueTracker||(t._valueTracker=VI(t))}function o_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=i_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ql(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ld(t,e){var n=e.checked;return je({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Jm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Vr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function a_(t,e){e=e.checked,e!=null&&af(t,"checked",e,!1)}function Vd(t,e){a_(t,e);var n=Vr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Md(t,e.type,n):e.hasOwnProperty("defaultValue")&&Md(t,e.type,Vr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Zm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Md(t,e,n){(e!=="number"||Ql(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var yo=Array.isArray;function ni(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Vr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Fd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return je({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function eg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(yo(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Vr(n)}}function l_(t,e){var n=Vr(e.value),r=Vr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function tg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function u_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ud(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?u_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ll,c_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ll=ll||document.createElement("div"),ll.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ll.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Bo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var xo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},MI=["Webkit","ms","Moz","O"];Object.keys(xo).forEach(function(t){MI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),xo[e]=xo[t]})});function d_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||xo.hasOwnProperty(t)&&xo[t]?(""+e).trim():e+"px"}function h_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=d_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var FI=je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bd(t,e){if(e){if(FI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function zd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $d=null;function df(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Wd=null,ri=null,si=null;function ng(t){if(t=wa(t)){if(typeof Wd!="function")throw Error(B(280));var e=t.stateNode;e&&(e=Wu(e),Wd(t.stateNode,t.type,e))}}function f_(t){ri?si?si.push(t):si=[t]:ri=t}function p_(){if(ri){var t=ri,e=si;if(si=ri=null,ng(t),e)for(t=0;t<e.length;t++)ng(e[t])}}function m_(t,e){return t(e)}function g_(){}var Gc=!1;function y_(t,e,n){if(Gc)return t(e,n);Gc=!0;try{return m_(t,e,n)}finally{Gc=!1,(ri!==null||si!==null)&&(g_(),p_())}}function zo(t,e){var n=t.stateNode;if(n===null)return null;var r=Wu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var Hd=!1;if(Kn)try{var ao={};Object.defineProperty(ao,"passive",{get:function(){Hd=!0}}),window.addEventListener("test",ao,ao),window.removeEventListener("test",ao,ao)}catch{Hd=!1}function UI(t,e,n,r,s,i,o,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var Ao=!1,Yl=null,Xl=!1,qd=null,BI={onError:function(t){Ao=!0,Yl=t}};function zI(t,e,n,r,s,i,o,l,u){Ao=!1,Yl=null,UI.apply(BI,arguments)}function $I(t,e,n,r,s,i,o,l,u){if(zI.apply(this,arguments),Ao){if(Ao){var d=Yl;Ao=!1,Yl=null}else throw Error(B(198));Xl||(Xl=!0,qd=d)}}function xs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function v_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function rg(t){if(xs(t)!==t)throw Error(B(188))}function WI(t){var e=t.alternate;if(!e){if(e=xs(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return rg(s),t;if(i===r)return rg(s),e;i=i.sibling}throw Error(B(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function __(t){return t=WI(t),t!==null?w_(t):null}function w_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=w_(t);if(e!==null)return e;t=t.sibling}return null}var E_=Ht.unstable_scheduleCallback,sg=Ht.unstable_cancelCallback,HI=Ht.unstable_shouldYield,qI=Ht.unstable_requestPaint,Ue=Ht.unstable_now,KI=Ht.unstable_getCurrentPriorityLevel,hf=Ht.unstable_ImmediatePriority,T_=Ht.unstable_UserBlockingPriority,Jl=Ht.unstable_NormalPriority,GI=Ht.unstable_LowPriority,I_=Ht.unstable_IdlePriority,Uu=null,Sn=null;function QI(t){if(Sn&&typeof Sn.onCommitFiberRoot=="function")try{Sn.onCommitFiberRoot(Uu,t,void 0,(t.current.flags&128)===128)}catch{}}var hn=Math.clz32?Math.clz32:JI,YI=Math.log,XI=Math.LN2;function JI(t){return t>>>=0,t===0?32:31-(YI(t)/XI|0)|0}var ul=64,cl=4194304;function vo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Zl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=vo(l):(i&=o,i!==0&&(r=vo(i)))}else o=n&~s,o!==0?r=vo(o):i!==0&&(r=vo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-hn(e),s=1<<n,r|=t[n],e&=~s;return r}function ZI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function eS(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-hn(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=ZI(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function Kd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function S_(){var t=ul;return ul<<=1,!(ul&4194240)&&(ul=64),t}function Qc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function va(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-hn(e),t[e]=n}function tS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-hn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function ff(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-hn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ve=0;function k_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var x_,pf,A_,C_,N_,Gd=!1,dl=[],Sr=null,kr=null,xr=null,$o=new Map,Wo=new Map,pr=[],nS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ig(t,e){switch(t){case"focusin":case"focusout":Sr=null;break;case"dragenter":case"dragleave":kr=null;break;case"mouseover":case"mouseout":xr=null;break;case"pointerover":case"pointerout":$o.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wo.delete(e.pointerId)}}function lo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=wa(e),e!==null&&pf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function rS(t,e,n,r,s){switch(e){case"focusin":return Sr=lo(Sr,t,e,n,r,s),!0;case"dragenter":return kr=lo(kr,t,e,n,r,s),!0;case"mouseover":return xr=lo(xr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return $o.set(i,lo($o.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Wo.set(i,lo(Wo.get(i)||null,t,e,n,r,s)),!0}return!1}function R_(t){var e=os(t.target);if(e!==null){var n=xs(e);if(n!==null){if(e=n.tag,e===13){if(e=v_(n),e!==null){t.blockedOn=e,N_(t.priority,function(){A_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Rl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Qd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);$d=r,n.target.dispatchEvent(r),$d=null}else return e=wa(n),e!==null&&pf(e),t.blockedOn=n,!1;e.shift()}return!0}function og(t,e,n){Rl(t)&&n.delete(e)}function sS(){Gd=!1,Sr!==null&&Rl(Sr)&&(Sr=null),kr!==null&&Rl(kr)&&(kr=null),xr!==null&&Rl(xr)&&(xr=null),$o.forEach(og),Wo.forEach(og)}function uo(t,e){t.blockedOn===e&&(t.blockedOn=null,Gd||(Gd=!0,Ht.unstable_scheduleCallback(Ht.unstable_NormalPriority,sS)))}function Ho(t){function e(s){return uo(s,t)}if(0<dl.length){uo(dl[0],t);for(var n=1;n<dl.length;n++){var r=dl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Sr!==null&&uo(Sr,t),kr!==null&&uo(kr,t),xr!==null&&uo(xr,t),$o.forEach(e),Wo.forEach(e),n=0;n<pr.length;n++)r=pr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<pr.length&&(n=pr[0],n.blockedOn===null);)R_(n),n.blockedOn===null&&pr.shift()}var ii=nr.ReactCurrentBatchConfig,eu=!0;function iS(t,e,n,r){var s=ve,i=ii.transition;ii.transition=null;try{ve=1,mf(t,e,n,r)}finally{ve=s,ii.transition=i}}function oS(t,e,n,r){var s=ve,i=ii.transition;ii.transition=null;try{ve=4,mf(t,e,n,r)}finally{ve=s,ii.transition=i}}function mf(t,e,n,r){if(eu){var s=Qd(t,e,n,r);if(s===null)id(t,e,r,tu,n),ig(t,r);else if(rS(s,t,e,n,r))r.stopPropagation();else if(ig(t,r),e&4&&-1<nS.indexOf(t)){for(;s!==null;){var i=wa(s);if(i!==null&&x_(i),i=Qd(t,e,n,r),i===null&&id(t,e,r,tu,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else id(t,e,r,null,n)}}var tu=null;function Qd(t,e,n,r){if(tu=null,t=df(r),t=os(t),t!==null)if(e=xs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=v_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return tu=t,null}function P_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(KI()){case hf:return 1;case T_:return 4;case Jl:case GI:return 16;case I_:return 536870912;default:return 16}default:return 16}}var wr=null,gf=null,Pl=null;function b_(){if(Pl)return Pl;var t,e=gf,n=e.length,r,s="value"in wr?wr.value:wr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Pl=s.slice(t,1<r?1-r:void 0)}function bl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function hl(){return!0}function ag(){return!1}function Kt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?hl:ag,this.isPropagationStopped=ag,this}return je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=hl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=hl)},persist:function(){},isPersistent:hl}),e}var bi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yf=Kt(bi),_a=je({},bi,{view:0,detail:0}),aS=Kt(_a),Yc,Xc,co,Bu=je({},_a,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==co&&(co&&t.type==="mousemove"?(Yc=t.screenX-co.screenX,Xc=t.screenY-co.screenY):Xc=Yc=0,co=t),Yc)},movementY:function(t){return"movementY"in t?t.movementY:Xc}}),lg=Kt(Bu),lS=je({},Bu,{dataTransfer:0}),uS=Kt(lS),cS=je({},_a,{relatedTarget:0}),Jc=Kt(cS),dS=je({},bi,{animationName:0,elapsedTime:0,pseudoElement:0}),hS=Kt(dS),fS=je({},bi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),pS=Kt(fS),mS=je({},bi,{data:0}),ug=Kt(mS),gS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _S(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=vS[t])?!!e[t]:!1}function vf(){return _S}var wS=je({},_a,{key:function(t){if(t.key){var e=gS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=bl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?yS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vf,charCode:function(t){return t.type==="keypress"?bl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?bl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ES=Kt(wS),TS=je({},Bu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cg=Kt(TS),IS=je({},_a,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vf}),SS=Kt(IS),kS=je({},bi,{propertyName:0,elapsedTime:0,pseudoElement:0}),xS=Kt(kS),AS=je({},Bu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),CS=Kt(AS),NS=[9,13,27,32],_f=Kn&&"CompositionEvent"in window,Co=null;Kn&&"documentMode"in document&&(Co=document.documentMode);var RS=Kn&&"TextEvent"in window&&!Co,D_=Kn&&(!_f||Co&&8<Co&&11>=Co),dg=" ",hg=!1;function j_(t,e){switch(t){case"keyup":return NS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function O_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Hs=!1;function PS(t,e){switch(t){case"compositionend":return O_(e);case"keypress":return e.which!==32?null:(hg=!0,dg);case"textInput":return t=e.data,t===dg&&hg?null:t;default:return null}}function bS(t,e){if(Hs)return t==="compositionend"||!_f&&j_(t,e)?(t=b_(),Pl=gf=wr=null,Hs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return D_&&e.locale!=="ko"?null:e.data;default:return null}}var DS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!DS[t.type]:e==="textarea"}function L_(t,e,n,r){f_(r),e=nu(e,"onChange"),0<e.length&&(n=new yf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var No=null,qo=null;function jS(t){K_(t,0)}function zu(t){var e=Gs(t);if(o_(e))return t}function OS(t,e){if(t==="change")return e}var V_=!1;if(Kn){var Zc;if(Kn){var ed="oninput"in document;if(!ed){var pg=document.createElement("div");pg.setAttribute("oninput","return;"),ed=typeof pg.oninput=="function"}Zc=ed}else Zc=!1;V_=Zc&&(!document.documentMode||9<document.documentMode)}function mg(){No&&(No.detachEvent("onpropertychange",M_),qo=No=null)}function M_(t){if(t.propertyName==="value"&&zu(qo)){var e=[];L_(e,qo,t,df(t)),y_(jS,e)}}function LS(t,e,n){t==="focusin"?(mg(),No=e,qo=n,No.attachEvent("onpropertychange",M_)):t==="focusout"&&mg()}function VS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return zu(qo)}function MS(t,e){if(t==="click")return zu(e)}function FS(t,e){if(t==="input"||t==="change")return zu(e)}function US(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var pn=typeof Object.is=="function"?Object.is:US;function Ko(t,e){if(pn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Pd.call(e,s)||!pn(t[s],e[s]))return!1}return!0}function gg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function yg(t,e){var n=gg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=gg(n)}}function F_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?F_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function U_(){for(var t=window,e=Ql();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ql(t.document)}return e}function wf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function BS(t){var e=U_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&F_(n.ownerDocument.documentElement,n)){if(r!==null&&wf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=yg(n,i);var o=yg(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var zS=Kn&&"documentMode"in document&&11>=document.documentMode,qs=null,Yd=null,Ro=null,Xd=!1;function vg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Xd||qs==null||qs!==Ql(r)||(r=qs,"selectionStart"in r&&wf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ro&&Ko(Ro,r)||(Ro=r,r=nu(Yd,"onSelect"),0<r.length&&(e=new yf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=qs)))}function fl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ks={animationend:fl("Animation","AnimationEnd"),animationiteration:fl("Animation","AnimationIteration"),animationstart:fl("Animation","AnimationStart"),transitionend:fl("Transition","TransitionEnd")},td={},B_={};Kn&&(B_=document.createElement("div").style,"AnimationEvent"in window||(delete Ks.animationend.animation,delete Ks.animationiteration.animation,delete Ks.animationstart.animation),"TransitionEvent"in window||delete Ks.transitionend.transition);function $u(t){if(td[t])return td[t];if(!Ks[t])return t;var e=Ks[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in B_)return td[t]=e[n];return t}var z_=$u("animationend"),$_=$u("animationiteration"),W_=$u("animationstart"),H_=$u("transitionend"),q_=new Map,_g="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zr(t,e){q_.set(t,e),ks(e,[t])}for(var nd=0;nd<_g.length;nd++){var rd=_g[nd],$S=rd.toLowerCase(),WS=rd[0].toUpperCase()+rd.slice(1);zr($S,"on"+WS)}zr(z_,"onAnimationEnd");zr($_,"onAnimationIteration");zr(W_,"onAnimationStart");zr("dblclick","onDoubleClick");zr("focusin","onFocus");zr("focusout","onBlur");zr(H_,"onTransitionEnd");hi("onMouseEnter",["mouseout","mouseover"]);hi("onMouseLeave",["mouseout","mouseover"]);hi("onPointerEnter",["pointerout","pointerover"]);hi("onPointerLeave",["pointerout","pointerover"]);ks("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ks("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ks("onBeforeInput",["compositionend","keypress","textInput","paste"]);ks("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ks("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ks("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _o="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),HS=new Set("cancel close invalid load scroll toggle".split(" ").concat(_o));function wg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,$I(r,e,void 0,t),t.currentTarget=null}function K_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;wg(s,l,d),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,d=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;wg(s,l,d),i=u}}}if(Xl)throw t=qd,Xl=!1,qd=null,t}function ke(t,e){var n=e[nh];n===void 0&&(n=e[nh]=new Set);var r=t+"__bubble";n.has(r)||(G_(e,t,2,!1),n.add(r))}function sd(t,e,n){var r=0;e&&(r|=4),G_(n,t,r,e)}var pl="_reactListening"+Math.random().toString(36).slice(2);function Go(t){if(!t[pl]){t[pl]=!0,t_.forEach(function(n){n!=="selectionchange"&&(HS.has(n)||sd(n,!1,t),sd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[pl]||(e[pl]=!0,sd("selectionchange",!1,e))}}function G_(t,e,n,r){switch(P_(e)){case 1:var s=iS;break;case 4:s=oS;break;default:s=mf}n=s.bind(null,e,n,t),s=void 0,!Hd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function id(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=os(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}y_(function(){var d=i,f=df(n),m=[];e:{var g=q_.get(t);if(g!==void 0){var x=yf,C=t;switch(t){case"keypress":if(bl(n)===0)break e;case"keydown":case"keyup":x=ES;break;case"focusin":C="focus",x=Jc;break;case"focusout":C="blur",x=Jc;break;case"beforeblur":case"afterblur":x=Jc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=lg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=uS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=SS;break;case z_:case $_:case W_:x=hS;break;case H_:x=xS;break;case"scroll":x=aS;break;case"wheel":x=CS;break;case"copy":case"cut":case"paste":x=pS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=cg}var P=(e&4)!==0,N=!P&&t==="scroll",w=P?g!==null?g+"Capture":null:g;P=[];for(var _=d,E;_!==null;){E=_;var D=E.stateNode;if(E.tag===5&&D!==null&&(E=D,w!==null&&(D=zo(_,w),D!=null&&P.push(Qo(_,D,E)))),N)break;_=_.return}0<P.length&&(g=new x(g,C,null,n,f),m.push({event:g,listeners:P}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",g&&n!==$d&&(C=n.relatedTarget||n.fromElement)&&(os(C)||C[Gn]))break e;if((x||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,x?(C=n.relatedTarget||n.toElement,x=d,C=C?os(C):null,C!==null&&(N=xs(C),C!==N||C.tag!==5&&C.tag!==6)&&(C=null)):(x=null,C=d),x!==C)){if(P=lg,D="onMouseLeave",w="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(P=cg,D="onPointerLeave",w="onPointerEnter",_="pointer"),N=x==null?g:Gs(x),E=C==null?g:Gs(C),g=new P(D,_+"leave",x,n,f),g.target=N,g.relatedTarget=E,D=null,os(f)===d&&(P=new P(w,_+"enter",C,n,f),P.target=E,P.relatedTarget=N,D=P),N=D,x&&C)t:{for(P=x,w=C,_=0,E=P;E;E=Ms(E))_++;for(E=0,D=w;D;D=Ms(D))E++;for(;0<_-E;)P=Ms(P),_--;for(;0<E-_;)w=Ms(w),E--;for(;_--;){if(P===w||w!==null&&P===w.alternate)break t;P=Ms(P),w=Ms(w)}P=null}else P=null;x!==null&&Eg(m,g,x,P,!1),C!==null&&N!==null&&Eg(m,N,C,P,!0)}}e:{if(g=d?Gs(d):window,x=g.nodeName&&g.nodeName.toLowerCase(),x==="select"||x==="input"&&g.type==="file")var O=OS;else if(fg(g))if(V_)O=FS;else{O=VS;var M=LS}else(x=g.nodeName)&&x.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(O=MS);if(O&&(O=O(t,d))){L_(m,O,n,f);break e}M&&M(t,g,d),t==="focusout"&&(M=g._wrapperState)&&M.controlled&&g.type==="number"&&Md(g,"number",g.value)}switch(M=d?Gs(d):window,t){case"focusin":(fg(M)||M.contentEditable==="true")&&(qs=M,Yd=d,Ro=null);break;case"focusout":Ro=Yd=qs=null;break;case"mousedown":Xd=!0;break;case"contextmenu":case"mouseup":case"dragend":Xd=!1,vg(m,n,f);break;case"selectionchange":if(zS)break;case"keydown":case"keyup":vg(m,n,f)}var S;if(_f)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Hs?j_(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(D_&&n.locale!=="ko"&&(Hs||y!=="onCompositionStart"?y==="onCompositionEnd"&&Hs&&(S=b_()):(wr=f,gf="value"in wr?wr.value:wr.textContent,Hs=!0)),M=nu(d,y),0<M.length&&(y=new ug(y,t,null,n,f),m.push({event:y,listeners:M}),S?y.data=S:(S=O_(n),S!==null&&(y.data=S)))),(S=RS?PS(t,n):bS(t,n))&&(d=nu(d,"onBeforeInput"),0<d.length&&(f=new ug("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:d}),f.data=S))}K_(m,e)})}function Qo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function nu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=zo(t,n),i!=null&&r.unshift(Qo(t,i,s)),i=zo(t,e),i!=null&&r.push(Qo(t,i,s))),t=t.return}return r}function Ms(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Eg(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,s?(u=zo(n,i),u!=null&&o.unshift(Qo(n,u,l))):s||(u=zo(n,i),u!=null&&o.push(Qo(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var qS=/\r\n?/g,KS=/\u0000|\uFFFD/g;function Tg(t){return(typeof t=="string"?t:""+t).replace(qS,`
`).replace(KS,"")}function ml(t,e,n){if(e=Tg(e),Tg(t)!==e&&n)throw Error(B(425))}function ru(){}var Jd=null,Zd=null;function eh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var th=typeof setTimeout=="function"?setTimeout:void 0,GS=typeof clearTimeout=="function"?clearTimeout:void 0,Ig=typeof Promise=="function"?Promise:void 0,QS=typeof queueMicrotask=="function"?queueMicrotask:typeof Ig<"u"?function(t){return Ig.resolve(null).then(t).catch(YS)}:th;function YS(t){setTimeout(function(){throw t})}function od(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ho(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ho(e)}function Ar(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Sg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Di=Math.random().toString(36).slice(2),Tn="__reactFiber$"+Di,Yo="__reactProps$"+Di,Gn="__reactContainer$"+Di,nh="__reactEvents$"+Di,XS="__reactListeners$"+Di,JS="__reactHandles$"+Di;function os(t){var e=t[Tn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Gn]||n[Tn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Sg(t);t!==null;){if(n=t[Tn])return n;t=Sg(t)}return e}t=n,n=t.parentNode}return null}function wa(t){return t=t[Tn]||t[Gn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Gs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function Wu(t){return t[Yo]||null}var rh=[],Qs=-1;function $r(t){return{current:t}}function Ae(t){0>Qs||(t.current=rh[Qs],rh[Qs]=null,Qs--)}function Ie(t,e){Qs++,rh[Qs]=t.current,t.current=e}var Mr={},It=$r(Mr),Ot=$r(!1),ps=Mr;function fi(t,e){var n=t.type.contextTypes;if(!n)return Mr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Lt(t){return t=t.childContextTypes,t!=null}function su(){Ae(Ot),Ae(It)}function kg(t,e,n){if(It.current!==Mr)throw Error(B(168));Ie(It,e),Ie(Ot,n)}function Q_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(B(108,LI(t)||"Unknown",s));return je({},n,r)}function iu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Mr,ps=It.current,Ie(It,t),Ie(Ot,Ot.current),!0}function xg(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=Q_(t,e,ps),r.__reactInternalMemoizedMergedChildContext=t,Ae(Ot),Ae(It),Ie(It,t)):Ae(Ot),Ie(Ot,n)}var Mn=null,Hu=!1,ad=!1;function Y_(t){Mn===null?Mn=[t]:Mn.push(t)}function ZS(t){Hu=!0,Y_(t)}function Wr(){if(!ad&&Mn!==null){ad=!0;var t=0,e=ve;try{var n=Mn;for(ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Mn=null,Hu=!1}catch(s){throw Mn!==null&&(Mn=Mn.slice(t+1)),E_(hf,Wr),s}finally{ve=e,ad=!1}}return null}var Ys=[],Xs=0,ou=null,au=0,Qt=[],Yt=0,ms=null,Fn=1,Un="";function ns(t,e){Ys[Xs++]=au,Ys[Xs++]=ou,ou=t,au=e}function X_(t,e,n){Qt[Yt++]=Fn,Qt[Yt++]=Un,Qt[Yt++]=ms,ms=t;var r=Fn;t=Un;var s=32-hn(r)-1;r&=~(1<<s),n+=1;var i=32-hn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Fn=1<<32-hn(e)+s|n<<s|r,Un=i+t}else Fn=1<<i|n<<s|r,Un=t}function Ef(t){t.return!==null&&(ns(t,1),X_(t,1,0))}function Tf(t){for(;t===ou;)ou=Ys[--Xs],Ys[Xs]=null,au=Ys[--Xs],Ys[Xs]=null;for(;t===ms;)ms=Qt[--Yt],Qt[Yt]=null,Un=Qt[--Yt],Qt[Yt]=null,Fn=Qt[--Yt],Qt[Yt]=null}var Wt=null,zt=null,Ne=!1,cn=null;function J_(t,e){var n=Jt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ag(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Wt=t,zt=Ar(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Wt=t,zt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ms!==null?{id:Fn,overflow:Un}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Jt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Wt=t,zt=null,!0):!1;default:return!1}}function sh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ih(t){if(Ne){var e=zt;if(e){var n=e;if(!Ag(t,e)){if(sh(t))throw Error(B(418));e=Ar(n.nextSibling);var r=Wt;e&&Ag(t,e)?J_(r,n):(t.flags=t.flags&-4097|2,Ne=!1,Wt=t)}}else{if(sh(t))throw Error(B(418));t.flags=t.flags&-4097|2,Ne=!1,Wt=t}}}function Cg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Wt=t}function gl(t){if(t!==Wt)return!1;if(!Ne)return Cg(t),Ne=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!eh(t.type,t.memoizedProps)),e&&(e=zt)){if(sh(t))throw Z_(),Error(B(418));for(;e;)J_(t,e),e=Ar(e.nextSibling)}if(Cg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){zt=Ar(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}zt=null}}else zt=Wt?Ar(t.stateNode.nextSibling):null;return!0}function Z_(){for(var t=zt;t;)t=Ar(t.nextSibling)}function pi(){zt=Wt=null,Ne=!1}function If(t){cn===null?cn=[t]:cn.push(t)}var ek=nr.ReactCurrentBatchConfig;function ho(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function yl(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ng(t){var e=t._init;return e(t._payload)}function ew(t){function e(w,_){if(t){var E=w.deletions;E===null?(w.deletions=[_],w.flags|=16):E.push(_)}}function n(w,_){if(!t)return null;for(;_!==null;)e(w,_),_=_.sibling;return null}function r(w,_){for(w=new Map;_!==null;)_.key!==null?w.set(_.key,_):w.set(_.index,_),_=_.sibling;return w}function s(w,_){return w=Pr(w,_),w.index=0,w.sibling=null,w}function i(w,_,E){return w.index=E,t?(E=w.alternate,E!==null?(E=E.index,E<_?(w.flags|=2,_):E):(w.flags|=2,_)):(w.flags|=1048576,_)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function l(w,_,E,D){return _===null||_.tag!==6?(_=pd(E,w.mode,D),_.return=w,_):(_=s(_,E),_.return=w,_)}function u(w,_,E,D){var O=E.type;return O===Ws?f(w,_,E.props.children,D,E.key):_!==null&&(_.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===hr&&Ng(O)===_.type)?(D=s(_,E.props),D.ref=ho(w,_,E),D.return=w,D):(D=Fl(E.type,E.key,E.props,null,w.mode,D),D.ref=ho(w,_,E),D.return=w,D)}function d(w,_,E,D){return _===null||_.tag!==4||_.stateNode.containerInfo!==E.containerInfo||_.stateNode.implementation!==E.implementation?(_=md(E,w.mode,D),_.return=w,_):(_=s(_,E.children||[]),_.return=w,_)}function f(w,_,E,D,O){return _===null||_.tag!==7?(_=ds(E,w.mode,D,O),_.return=w,_):(_=s(_,E),_.return=w,_)}function m(w,_,E){if(typeof _=="string"&&_!==""||typeof _=="number")return _=pd(""+_,w.mode,E),_.return=w,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ol:return E=Fl(_.type,_.key,_.props,null,w.mode,E),E.ref=ho(w,null,_),E.return=w,E;case $s:return _=md(_,w.mode,E),_.return=w,_;case hr:var D=_._init;return m(w,D(_._payload),E)}if(yo(_)||oo(_))return _=ds(_,w.mode,E,null),_.return=w,_;yl(w,_)}return null}function g(w,_,E,D){var O=_!==null?_.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return O!==null?null:l(w,_,""+E,D);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case ol:return E.key===O?u(w,_,E,D):null;case $s:return E.key===O?d(w,_,E,D):null;case hr:return O=E._init,g(w,_,O(E._payload),D)}if(yo(E)||oo(E))return O!==null?null:f(w,_,E,D,null);yl(w,E)}return null}function x(w,_,E,D,O){if(typeof D=="string"&&D!==""||typeof D=="number")return w=w.get(E)||null,l(_,w,""+D,O);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case ol:return w=w.get(D.key===null?E:D.key)||null,u(_,w,D,O);case $s:return w=w.get(D.key===null?E:D.key)||null,d(_,w,D,O);case hr:var M=D._init;return x(w,_,E,M(D._payload),O)}if(yo(D)||oo(D))return w=w.get(E)||null,f(_,w,D,O,null);yl(_,D)}return null}function C(w,_,E,D){for(var O=null,M=null,S=_,y=_=0,k=null;S!==null&&y<E.length;y++){S.index>y?(k=S,S=null):k=S.sibling;var T=g(w,S,E[y],D);if(T===null){S===null&&(S=k);break}t&&S&&T.alternate===null&&e(w,S),_=i(T,_,y),M===null?O=T:M.sibling=T,M=T,S=k}if(y===E.length)return n(w,S),Ne&&ns(w,y),O;if(S===null){for(;y<E.length;y++)S=m(w,E[y],D),S!==null&&(_=i(S,_,y),M===null?O=S:M.sibling=S,M=S);return Ne&&ns(w,y),O}for(S=r(w,S);y<E.length;y++)k=x(S,w,y,E[y],D),k!==null&&(t&&k.alternate!==null&&S.delete(k.key===null?y:k.key),_=i(k,_,y),M===null?O=k:M.sibling=k,M=k);return t&&S.forEach(function(b){return e(w,b)}),Ne&&ns(w,y),O}function P(w,_,E,D){var O=oo(E);if(typeof O!="function")throw Error(B(150));if(E=O.call(E),E==null)throw Error(B(151));for(var M=O=null,S=_,y=_=0,k=null,T=E.next();S!==null&&!T.done;y++,T=E.next()){S.index>y?(k=S,S=null):k=S.sibling;var b=g(w,S,T.value,D);if(b===null){S===null&&(S=k);break}t&&S&&b.alternate===null&&e(w,S),_=i(b,_,y),M===null?O=b:M.sibling=b,M=b,S=k}if(T.done)return n(w,S),Ne&&ns(w,y),O;if(S===null){for(;!T.done;y++,T=E.next())T=m(w,T.value,D),T!==null&&(_=i(T,_,y),M===null?O=T:M.sibling=T,M=T);return Ne&&ns(w,y),O}for(S=r(w,S);!T.done;y++,T=E.next())T=x(S,w,y,T.value,D),T!==null&&(t&&T.alternate!==null&&S.delete(T.key===null?y:T.key),_=i(T,_,y),M===null?O=T:M.sibling=T,M=T);return t&&S.forEach(function(R){return e(w,R)}),Ne&&ns(w,y),O}function N(w,_,E,D){if(typeof E=="object"&&E!==null&&E.type===Ws&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case ol:e:{for(var O=E.key,M=_;M!==null;){if(M.key===O){if(O=E.type,O===Ws){if(M.tag===7){n(w,M.sibling),_=s(M,E.props.children),_.return=w,w=_;break e}}else if(M.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===hr&&Ng(O)===M.type){n(w,M.sibling),_=s(M,E.props),_.ref=ho(w,M,E),_.return=w,w=_;break e}n(w,M);break}else e(w,M);M=M.sibling}E.type===Ws?(_=ds(E.props.children,w.mode,D,E.key),_.return=w,w=_):(D=Fl(E.type,E.key,E.props,null,w.mode,D),D.ref=ho(w,_,E),D.return=w,w=D)}return o(w);case $s:e:{for(M=E.key;_!==null;){if(_.key===M)if(_.tag===4&&_.stateNode.containerInfo===E.containerInfo&&_.stateNode.implementation===E.implementation){n(w,_.sibling),_=s(_,E.children||[]),_.return=w,w=_;break e}else{n(w,_);break}else e(w,_);_=_.sibling}_=md(E,w.mode,D),_.return=w,w=_}return o(w);case hr:return M=E._init,N(w,_,M(E._payload),D)}if(yo(E))return C(w,_,E,D);if(oo(E))return P(w,_,E,D);yl(w,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,_!==null&&_.tag===6?(n(w,_.sibling),_=s(_,E),_.return=w,w=_):(n(w,_),_=pd(E,w.mode,D),_.return=w,w=_),o(w)):n(w,_)}return N}var mi=ew(!0),tw=ew(!1),lu=$r(null),uu=null,Js=null,Sf=null;function kf(){Sf=Js=uu=null}function xf(t){var e=lu.current;Ae(lu),t._currentValue=e}function oh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function oi(t,e){uu=t,Sf=Js=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(jt=!0),t.firstContext=null)}function nn(t){var e=t._currentValue;if(Sf!==t)if(t={context:t,memoizedValue:e,next:null},Js===null){if(uu===null)throw Error(B(308));Js=t,uu.dependencies={lanes:0,firstContext:t}}else Js=Js.next=t;return e}var as=null;function Af(t){as===null?as=[t]:as.push(t)}function nw(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Af(e)):(n.next=s.next,s.next=n),e.interleaved=n,Qn(t,r)}function Qn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var fr=!1;function Cf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Wn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Cr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,me&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Qn(t,n)}return s=r.interleaved,s===null?(e.next=e,Af(r)):(e.next=s.next,s.next=e),r.interleaved=e,Qn(t,n)}function Dl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ff(t,n)}}function Rg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function cu(t,e,n,r){var s=t.updateQueue;fr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;o=0,f=d=u=null,l=i;do{var g=l.lane,x=l.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var C=t,P=l;switch(g=e,x=n,P.tag){case 1:if(C=P.payload,typeof C=="function"){m=C.call(x,m,g);break e}m=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=P.payload,g=typeof C=="function"?C.call(x,m,g):C,g==null)break e;m=je({},m,g);break e;case 2:fr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else x={eventTime:x,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=x,u=m):f=f.next=x,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ys|=o,t.lanes=o,t.memoizedState=m}}function Pg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(B(191,s));s.call(r)}}}var Ea={},kn=$r(Ea),Xo=$r(Ea),Jo=$r(Ea);function ls(t){if(t===Ea)throw Error(B(174));return t}function Nf(t,e){switch(Ie(Jo,e),Ie(Xo,t),Ie(kn,Ea),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ud(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ud(e,t)}Ae(kn),Ie(kn,e)}function gi(){Ae(kn),Ae(Xo),Ae(Jo)}function sw(t){ls(Jo.current);var e=ls(kn.current),n=Ud(e,t.type);e!==n&&(Ie(Xo,t),Ie(kn,n))}function Rf(t){Xo.current===t&&(Ae(kn),Ae(Xo))}var be=$r(0);function du(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ld=[];function Pf(){for(var t=0;t<ld.length;t++)ld[t]._workInProgressVersionPrimary=null;ld.length=0}var jl=nr.ReactCurrentDispatcher,ud=nr.ReactCurrentBatchConfig,gs=0,De=null,Ge=null,tt=null,hu=!1,Po=!1,Zo=0,tk=0;function gt(){throw Error(B(321))}function bf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!pn(t[n],e[n]))return!1;return!0}function Df(t,e,n,r,s,i){if(gs=i,De=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,jl.current=t===null||t.memoizedState===null?ik:ok,t=n(r,s),Po){i=0;do{if(Po=!1,Zo=0,25<=i)throw Error(B(301));i+=1,tt=Ge=null,e.updateQueue=null,jl.current=ak,t=n(r,s)}while(Po)}if(jl.current=fu,e=Ge!==null&&Ge.next!==null,gs=0,tt=Ge=De=null,hu=!1,e)throw Error(B(300));return t}function jf(){var t=Zo!==0;return Zo=0,t}function En(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?De.memoizedState=tt=t:tt=tt.next=t,tt}function rn(){if(Ge===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=Ge.next;var e=tt===null?De.memoizedState:tt.next;if(e!==null)tt=e,Ge=t;else{if(t===null)throw Error(B(310));Ge=t,t={memoizedState:Ge.memoizedState,baseState:Ge.baseState,baseQueue:Ge.baseQueue,queue:Ge.queue,next:null},tt===null?De.memoizedState=tt=t:tt=tt.next=t}return tt}function ea(t,e){return typeof e=="function"?e(t):e}function cd(t){var e=rn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=Ge,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,d=i;do{var f=d.lane;if((gs&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,De.lanes|=f,ys|=f}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=l,pn(r,e.memoizedState)||(jt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,De.lanes|=i,ys|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function dd(t){var e=rn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);pn(i,e.memoizedState)||(jt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function iw(){}function ow(t,e){var n=De,r=rn(),s=e(),i=!pn(r.memoizedState,s);if(i&&(r.memoizedState=s,jt=!0),r=r.queue,Of(uw.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||tt!==null&&tt.memoizedState.tag&1){if(n.flags|=2048,ta(9,lw.bind(null,n,r,s,e),void 0,null),rt===null)throw Error(B(349));gs&30||aw(n,e,s)}return s}function aw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function lw(t,e,n,r){e.value=n,e.getSnapshot=r,cw(e)&&dw(t)}function uw(t,e,n){return n(function(){cw(e)&&dw(t)})}function cw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!pn(t,n)}catch{return!0}}function dw(t){var e=Qn(t,1);e!==null&&fn(e,t,1,-1)}function bg(t){var e=En();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ea,lastRenderedState:t},e.queue=t,t=t.dispatch=sk.bind(null,De,t),[e.memoizedState,t]}function ta(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function hw(){return rn().memoizedState}function Ol(t,e,n,r){var s=En();De.flags|=t,s.memoizedState=ta(1|e,n,void 0,r===void 0?null:r)}function qu(t,e,n,r){var s=rn();r=r===void 0?null:r;var i=void 0;if(Ge!==null){var o=Ge.memoizedState;if(i=o.destroy,r!==null&&bf(r,o.deps)){s.memoizedState=ta(e,n,i,r);return}}De.flags|=t,s.memoizedState=ta(1|e,n,i,r)}function Dg(t,e){return Ol(8390656,8,t,e)}function Of(t,e){return qu(2048,8,t,e)}function fw(t,e){return qu(4,2,t,e)}function pw(t,e){return qu(4,4,t,e)}function mw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function gw(t,e,n){return n=n!=null?n.concat([t]):null,qu(4,4,mw.bind(null,e,t),n)}function Lf(){}function yw(t,e){var n=rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function vw(t,e){var n=rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function _w(t,e,n){return gs&21?(pn(n,e)||(n=S_(),De.lanes|=n,ys|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,jt=!0),t.memoizedState=n)}function nk(t,e){var n=ve;ve=n!==0&&4>n?n:4,t(!0);var r=ud.transition;ud.transition={};try{t(!1),e()}finally{ve=n,ud.transition=r}}function ww(){return rn().memoizedState}function rk(t,e,n){var r=Rr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ew(t))Tw(e,n);else if(n=nw(t,e,n,r),n!==null){var s=Ct();fn(n,t,r,s),Iw(n,e,r)}}function sk(t,e,n){var r=Rr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ew(t))Tw(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,pn(l,o)){var u=e.interleaved;u===null?(s.next=s,Af(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=nw(t,e,s,r),n!==null&&(s=Ct(),fn(n,t,r,s),Iw(n,e,r))}}function Ew(t){var e=t.alternate;return t===De||e!==null&&e===De}function Tw(t,e){Po=hu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Iw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ff(t,n)}}var fu={readContext:nn,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useInsertionEffect:gt,useLayoutEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useMutableSource:gt,useSyncExternalStore:gt,useId:gt,unstable_isNewReconciler:!1},ik={readContext:nn,useCallback:function(t,e){return En().memoizedState=[t,e===void 0?null:e],t},useContext:nn,useEffect:Dg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ol(4194308,4,mw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ol(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ol(4,2,t,e)},useMemo:function(t,e){var n=En();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=En();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=rk.bind(null,De,t),[r.memoizedState,t]},useRef:function(t){var e=En();return t={current:t},e.memoizedState=t},useState:bg,useDebugValue:Lf,useDeferredValue:function(t){return En().memoizedState=t},useTransition:function(){var t=bg(!1),e=t[0];return t=nk.bind(null,t[1]),En().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=De,s=En();if(Ne){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),rt===null)throw Error(B(349));gs&30||aw(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Dg(uw.bind(null,r,i,t),[t]),r.flags|=2048,ta(9,lw.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=En(),e=rt.identifierPrefix;if(Ne){var n=Un,r=Fn;n=(r&~(1<<32-hn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Zo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=tk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ok={readContext:nn,useCallback:yw,useContext:nn,useEffect:Of,useImperativeHandle:gw,useInsertionEffect:fw,useLayoutEffect:pw,useMemo:vw,useReducer:cd,useRef:hw,useState:function(){return cd(ea)},useDebugValue:Lf,useDeferredValue:function(t){var e=rn();return _w(e,Ge.memoizedState,t)},useTransition:function(){var t=cd(ea)[0],e=rn().memoizedState;return[t,e]},useMutableSource:iw,useSyncExternalStore:ow,useId:ww,unstable_isNewReconciler:!1},ak={readContext:nn,useCallback:yw,useContext:nn,useEffect:Of,useImperativeHandle:gw,useInsertionEffect:fw,useLayoutEffect:pw,useMemo:vw,useReducer:dd,useRef:hw,useState:function(){return dd(ea)},useDebugValue:Lf,useDeferredValue:function(t){var e=rn();return Ge===null?e.memoizedState=t:_w(e,Ge.memoizedState,t)},useTransition:function(){var t=dd(ea)[0],e=rn().memoizedState;return[t,e]},useMutableSource:iw,useSyncExternalStore:ow,useId:ww,unstable_isNewReconciler:!1};function ln(t,e){if(t&&t.defaultProps){e=je({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ah(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:je({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ku={isMounted:function(t){return(t=t._reactInternals)?xs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ct(),s=Rr(t),i=Wn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Cr(t,i,s),e!==null&&(fn(e,t,s,r),Dl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ct(),s=Rr(t),i=Wn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Cr(t,i,s),e!==null&&(fn(e,t,s,r),Dl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ct(),r=Rr(t),s=Wn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Cr(t,s,r),e!==null&&(fn(e,t,r,n),Dl(e,t,r))}};function jg(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ko(n,r)||!Ko(s,i):!0}function Sw(t,e,n){var r=!1,s=Mr,i=e.contextType;return typeof i=="object"&&i!==null?i=nn(i):(s=Lt(e)?ps:It.current,r=e.contextTypes,i=(r=r!=null)?fi(t,s):Mr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ku,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Og(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ku.enqueueReplaceState(e,e.state,null)}function lh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Cf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=nn(i):(i=Lt(e)?ps:It.current,s.context=fi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(ah(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Ku.enqueueReplaceState(s,s.state,null),cu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function yi(t,e){try{var n="",r=e;do n+=OI(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function hd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function uh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var lk=typeof WeakMap=="function"?WeakMap:Map;function kw(t,e,n){n=Wn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){mu||(mu=!0,_h=r),uh(t,e)},n}function xw(t,e,n){n=Wn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){uh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){uh(t,e),typeof r!="function"&&(Nr===null?Nr=new Set([this]):Nr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Lg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new lk;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Tk.bind(null,t,e,n),e.then(t,t))}function Vg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Mg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Wn(-1,1),e.tag=2,Cr(n,e,1))),n.lanes|=1),t)}var uk=nr.ReactCurrentOwner,jt=!1;function At(t,e,n,r){e.child=t===null?tw(e,null,n,r):mi(e,t.child,n,r)}function Fg(t,e,n,r,s){n=n.render;var i=e.ref;return oi(e,s),r=Df(t,e,n,r,i,s),n=jf(),t!==null&&!jt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Yn(t,e,s)):(Ne&&n&&Ef(e),e.flags|=1,At(t,e,r,s),e.child)}function Ug(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Wf(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Aw(t,e,i,r,s)):(t=Fl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ko,n(o,r)&&t.ref===e.ref)return Yn(t,e,s)}return e.flags|=1,t=Pr(i,r),t.ref=e.ref,t.return=e,e.child=t}function Aw(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ko(i,r)&&t.ref===e.ref)if(jt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(jt=!0);else return e.lanes=t.lanes,Yn(t,e,s)}return ch(t,e,n,r,s)}function Cw(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ie(ei,Bt),Bt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ie(ei,Bt),Bt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ie(ei,Bt),Bt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ie(ei,Bt),Bt|=r;return At(t,e,s,n),e.child}function Nw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ch(t,e,n,r,s){var i=Lt(n)?ps:It.current;return i=fi(e,i),oi(e,s),n=Df(t,e,n,r,i,s),r=jf(),t!==null&&!jt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Yn(t,e,s)):(Ne&&r&&Ef(e),e.flags|=1,At(t,e,n,s),e.child)}function Bg(t,e,n,r,s){if(Lt(n)){var i=!0;iu(e)}else i=!1;if(oi(e,s),e.stateNode===null)Ll(t,e),Sw(e,n,r),lh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=nn(d):(d=Lt(n)?ps:It.current,d=fi(e,d));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==d)&&Og(e,o,r,d),fr=!1;var g=e.memoizedState;o.state=g,cu(e,r,o,s),u=e.memoizedState,l!==r||g!==u||Ot.current||fr?(typeof f=="function"&&(ah(e,n,f,r),u=e.memoizedState),(l=fr||jg(e,n,l,r,g,u,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,rw(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:ln(e.type,l),o.props=d,m=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=nn(u):(u=Lt(n)?ps:It.current,u=fi(e,u));var x=n.getDerivedStateFromProps;(f=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||g!==u)&&Og(e,o,r,u),fr=!1,g=e.memoizedState,o.state=g,cu(e,r,o,s);var C=e.memoizedState;l!==m||g!==C||Ot.current||fr?(typeof x=="function"&&(ah(e,n,x,r),C=e.memoizedState),(d=fr||jg(e,n,d,r,g,C,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,C,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,C,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=C),o.props=r,o.state=C,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return dh(t,e,n,r,i,s)}function dh(t,e,n,r,s,i){Nw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&xg(e,n,!1),Yn(t,e,i);r=e.stateNode,uk.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=mi(e,t.child,null,i),e.child=mi(e,null,l,i)):At(t,e,l,i),e.memoizedState=r.state,s&&xg(e,n,!0),e.child}function Rw(t){var e=t.stateNode;e.pendingContext?kg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&kg(t,e.context,!1),Nf(t,e.containerInfo)}function zg(t,e,n,r,s){return pi(),If(s),e.flags|=256,At(t,e,n,r),e.child}var hh={dehydrated:null,treeContext:null,retryLane:0};function fh(t){return{baseLanes:t,cachePool:null,transitions:null}}function Pw(t,e,n){var r=e.pendingProps,s=be.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ie(be,s&1),t===null)return ih(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Yu(o,r,0,null),t=ds(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=fh(n),e.memoizedState=hh,t):Vf(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return ck(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Pr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Pr(l,i):(i=ds(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?fh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=hh,r}return i=t.child,t=i.sibling,r=Pr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Vf(t,e){return e=Yu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function vl(t,e,n,r){return r!==null&&If(r),mi(e,t.child,null,n),t=Vf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ck(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=hd(Error(B(422))),vl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Yu({mode:"visible",children:r.children},s,0,null),i=ds(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&mi(e,t.child,null,o),e.child.memoizedState=fh(o),e.memoizedState=hh,i);if(!(e.mode&1))return vl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(B(419)),r=hd(i,r,void 0),vl(t,e,o,r)}if(l=(o&t.childLanes)!==0,jt||l){if(r=rt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Qn(t,s),fn(r,t,s,-1))}return $f(),r=hd(Error(B(421))),vl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Ik.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,zt=Ar(s.nextSibling),Wt=e,Ne=!0,cn=null,t!==null&&(Qt[Yt++]=Fn,Qt[Yt++]=Un,Qt[Yt++]=ms,Fn=t.id,Un=t.overflow,ms=e),e=Vf(e,r.children),e.flags|=4096,e)}function $g(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),oh(t.return,e,n)}function fd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function bw(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(At(t,e,r.children,n),r=be.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$g(t,n,e);else if(t.tag===19)$g(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ie(be,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&du(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),fd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&du(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}fd(e,!0,n,null,i);break;case"together":fd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ll(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Yn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ys|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=Pr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Pr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function dk(t,e,n){switch(e.tag){case 3:Rw(e),pi();break;case 5:sw(e);break;case 1:Lt(e.type)&&iu(e);break;case 4:Nf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ie(lu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ie(be,be.current&1),e.flags|=128,null):n&e.child.childLanes?Pw(t,e,n):(Ie(be,be.current&1),t=Yn(t,e,n),t!==null?t.sibling:null);Ie(be,be.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return bw(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ie(be,be.current),r)break;return null;case 22:case 23:return e.lanes=0,Cw(t,e,n)}return Yn(t,e,n)}var Dw,ph,jw,Ow;Dw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ph=function(){};jw=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ls(kn.current);var i=null;switch(n){case"input":s=Ld(t,s),r=Ld(t,r),i=[];break;case"select":s=je({},s,{value:void 0}),r=je({},r,{value:void 0}),i=[];break;case"textarea":s=Fd(t,s),r=Fd(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ru)}Bd(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Uo.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Uo.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&ke("scroll",t),i||l===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};Ow=function(t,e,n,r){n!==r&&(e.flags|=4)};function fo(t,e){if(!Ne)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function yt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function hk(t,e,n){var r=e.pendingProps;switch(Tf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(e),null;case 1:return Lt(e.type)&&su(),yt(e),null;case 3:return r=e.stateNode,gi(),Ae(Ot),Ae(It),Pf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(gl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,cn!==null&&(Th(cn),cn=null))),ph(t,e),yt(e),null;case 5:Rf(e);var s=ls(Jo.current);if(n=e.type,t!==null&&e.stateNode!=null)jw(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return yt(e),null}if(t=ls(kn.current),gl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Tn]=e,r[Yo]=i,t=(e.mode&1)!==0,n){case"dialog":ke("cancel",r),ke("close",r);break;case"iframe":case"object":case"embed":ke("load",r);break;case"video":case"audio":for(s=0;s<_o.length;s++)ke(_o[s],r);break;case"source":ke("error",r);break;case"img":case"image":case"link":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"input":Jm(r,i),ke("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ke("invalid",r);break;case"textarea":eg(r,i),ke("invalid",r)}Bd(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&ml(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&ml(r.textContent,l,t),s=["children",""+l]):Uo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ke("scroll",r)}switch(n){case"input":al(r),Zm(r,i,!0);break;case"textarea":al(r),tg(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ru)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=u_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Tn]=e,t[Yo]=r,Dw(t,e,!1,!1),e.stateNode=t;e:{switch(o=zd(n,r),n){case"dialog":ke("cancel",t),ke("close",t),s=r;break;case"iframe":case"object":case"embed":ke("load",t),s=r;break;case"video":case"audio":for(s=0;s<_o.length;s++)ke(_o[s],t);s=r;break;case"source":ke("error",t),s=r;break;case"img":case"image":case"link":ke("error",t),ke("load",t),s=r;break;case"details":ke("toggle",t),s=r;break;case"input":Jm(t,r),s=Ld(t,r),ke("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=je({},r,{value:void 0}),ke("invalid",t);break;case"textarea":eg(t,r),s=Fd(t,r),ke("invalid",t);break;default:s=r}Bd(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?h_(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&c_(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Bo(t,u):typeof u=="number"&&Bo(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Uo.hasOwnProperty(i)?u!=null&&i==="onScroll"&&ke("scroll",t):u!=null&&af(t,i,u,o))}switch(n){case"input":al(t),Zm(t,r,!1);break;case"textarea":al(t),tg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Vr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ni(t,!!r.multiple,i,!1):r.defaultValue!=null&&ni(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ru)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return yt(e),null;case 6:if(t&&e.stateNode!=null)Ow(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=ls(Jo.current),ls(kn.current),gl(e)){if(r=e.stateNode,n=e.memoizedProps,r[Tn]=e,(i=r.nodeValue!==n)&&(t=Wt,t!==null))switch(t.tag){case 3:ml(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ml(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Tn]=e,e.stateNode=r}return yt(e),null;case 13:if(Ae(be),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ne&&zt!==null&&e.mode&1&&!(e.flags&128))Z_(),pi(),e.flags|=98560,i=!1;else if(i=gl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(B(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(B(317));i[Tn]=e}else pi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;yt(e),i=!1}else cn!==null&&(Th(cn),cn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||be.current&1?Qe===0&&(Qe=3):$f())),e.updateQueue!==null&&(e.flags|=4),yt(e),null);case 4:return gi(),ph(t,e),t===null&&Go(e.stateNode.containerInfo),yt(e),null;case 10:return xf(e.type._context),yt(e),null;case 17:return Lt(e.type)&&su(),yt(e),null;case 19:if(Ae(be),i=e.memoizedState,i===null)return yt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)fo(i,!1);else{if(Qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=du(t),o!==null){for(e.flags|=128,fo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ie(be,be.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ue()>vi&&(e.flags|=128,r=!0,fo(i,!1),e.lanes=4194304)}else{if(!r)if(t=du(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),fo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ne)return yt(e),null}else 2*Ue()-i.renderingStartTime>vi&&n!==1073741824&&(e.flags|=128,r=!0,fo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ue(),e.sibling=null,n=be.current,Ie(be,r?n&1|2:n&1),e):(yt(e),null);case 22:case 23:return zf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Bt&1073741824&&(yt(e),e.subtreeFlags&6&&(e.flags|=8192)):yt(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function fk(t,e){switch(Tf(e),e.tag){case 1:return Lt(e.type)&&su(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return gi(),Ae(Ot),Ae(It),Pf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Rf(e),null;case 13:if(Ae(be),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));pi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ae(be),null;case 4:return gi(),null;case 10:return xf(e.type._context),null;case 22:case 23:return zf(),null;case 24:return null;default:return null}}var _l=!1,wt=!1,pk=typeof WeakSet=="function"?WeakSet:Set,q=null;function Zs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Me(t,e,r)}else n.current=null}function mh(t,e,n){try{n()}catch(r){Me(t,e,r)}}var Wg=!1;function mk(t,e){if(Jd=eu,t=U_(),wf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,d=0,f=0,m=t,g=null;t:for(;;){for(var x;m!==n||s!==0&&m.nodeType!==3||(l=o+s),m!==i||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(x=m.firstChild)!==null;)g=m,m=x;for(;;){if(m===t)break t;if(g===n&&++d===s&&(l=o),g===i&&++f===r&&(u=o),(x=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=x}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Zd={focusedElem:t,selectionRange:n},eu=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var P=C.memoizedProps,N=C.memoizedState,w=e.stateNode,_=w.getSnapshotBeforeUpdate(e.elementType===e.type?P:ln(e.type,P),N);w.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(D){Me(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return C=Wg,Wg=!1,C}function bo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&mh(e,n,i)}s=s.next}while(s!==r)}}function Gu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function gh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Lw(t){var e=t.alternate;e!==null&&(t.alternate=null,Lw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Tn],delete e[Yo],delete e[nh],delete e[XS],delete e[JS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Vw(t){return t.tag===5||t.tag===3||t.tag===4}function Hg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Vw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ru));else if(r!==4&&(t=t.child,t!==null))for(yh(t,e,n),t=t.sibling;t!==null;)yh(t,e,n),t=t.sibling}function vh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(vh(t,e,n),t=t.sibling;t!==null;)vh(t,e,n),t=t.sibling}var ot=null,un=!1;function cr(t,e,n){for(n=n.child;n!==null;)Mw(t,e,n),n=n.sibling}function Mw(t,e,n){if(Sn&&typeof Sn.onCommitFiberUnmount=="function")try{Sn.onCommitFiberUnmount(Uu,n)}catch{}switch(n.tag){case 5:wt||Zs(n,e);case 6:var r=ot,s=un;ot=null,cr(t,e,n),ot=r,un=s,ot!==null&&(un?(t=ot,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ot.removeChild(n.stateNode));break;case 18:ot!==null&&(un?(t=ot,n=n.stateNode,t.nodeType===8?od(t.parentNode,n):t.nodeType===1&&od(t,n),Ho(t)):od(ot,n.stateNode));break;case 4:r=ot,s=un,ot=n.stateNode.containerInfo,un=!0,cr(t,e,n),ot=r,un=s;break;case 0:case 11:case 14:case 15:if(!wt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&mh(n,e,o),s=s.next}while(s!==r)}cr(t,e,n);break;case 1:if(!wt&&(Zs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Me(n,e,l)}cr(t,e,n);break;case 21:cr(t,e,n);break;case 22:n.mode&1?(wt=(r=wt)||n.memoizedState!==null,cr(t,e,n),wt=r):cr(t,e,n);break;default:cr(t,e,n)}}function qg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new pk),e.forEach(function(r){var s=Sk.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function an(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:ot=l.stateNode,un=!1;break e;case 3:ot=l.stateNode.containerInfo,un=!0;break e;case 4:ot=l.stateNode.containerInfo,un=!0;break e}l=l.return}if(ot===null)throw Error(B(160));Mw(i,o,s),ot=null,un=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Me(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Fw(e,t),e=e.sibling}function Fw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(an(e,t),wn(t),r&4){try{bo(3,t,t.return),Gu(3,t)}catch(P){Me(t,t.return,P)}try{bo(5,t,t.return)}catch(P){Me(t,t.return,P)}}break;case 1:an(e,t),wn(t),r&512&&n!==null&&Zs(n,n.return);break;case 5:if(an(e,t),wn(t),r&512&&n!==null&&Zs(n,n.return),t.flags&32){var s=t.stateNode;try{Bo(s,"")}catch(P){Me(t,t.return,P)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&a_(s,i),zd(l,o);var d=zd(l,i);for(o=0;o<u.length;o+=2){var f=u[o],m=u[o+1];f==="style"?h_(s,m):f==="dangerouslySetInnerHTML"?c_(s,m):f==="children"?Bo(s,m):af(s,f,m,d)}switch(l){case"input":Vd(s,i);break;case"textarea":l_(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?ni(s,!!i.multiple,x,!1):g!==!!i.multiple&&(i.defaultValue!=null?ni(s,!!i.multiple,i.defaultValue,!0):ni(s,!!i.multiple,i.multiple?[]:"",!1))}s[Yo]=i}catch(P){Me(t,t.return,P)}}break;case 6:if(an(e,t),wn(t),r&4){if(t.stateNode===null)throw Error(B(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(P){Me(t,t.return,P)}}break;case 3:if(an(e,t),wn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ho(e.containerInfo)}catch(P){Me(t,t.return,P)}break;case 4:an(e,t),wn(t);break;case 13:an(e,t),wn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Uf=Ue())),r&4&&qg(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(wt=(d=wt)||f,an(e,t),wt=d):an(e,t),wn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(q=t,f=t.child;f!==null;){for(m=q=f;q!==null;){switch(g=q,x=g.child,g.tag){case 0:case 11:case 14:case 15:bo(4,g,g.return);break;case 1:Zs(g,g.return);var C=g.stateNode;if(typeof C.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(P){Me(r,n,P)}}break;case 5:Zs(g,g.return);break;case 22:if(g.memoizedState!==null){Gg(m);continue}}x!==null?(x.return=g,q=x):Gg(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=d_("display",o))}catch(P){Me(t,t.return,P)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(P){Me(t,t.return,P)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:an(e,t),wn(t),r&4&&qg(t);break;case 21:break;default:an(e,t),wn(t)}}function wn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Vw(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Bo(s,""),r.flags&=-33);var i=Hg(t);vh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Hg(t);yh(t,l,o);break;default:throw Error(B(161))}}catch(u){Me(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function gk(t,e,n){q=t,Uw(t)}function Uw(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var s=q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||_l;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||wt;l=_l;var d=wt;if(_l=o,(wt=u)&&!d)for(q=s;q!==null;)o=q,u=o.child,o.tag===22&&o.memoizedState!==null?Qg(s):u!==null?(u.return=o,q=u):Qg(s);for(;i!==null;)q=i,Uw(i),i=i.sibling;q=s,_l=l,wt=d}Kg(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,q=i):Kg(t)}}function Kg(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:wt||Gu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!wt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:ln(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Pg(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Pg(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&Ho(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}wt||e.flags&512&&gh(e)}catch(g){Me(e,e.return,g)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function Gg(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function Qg(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Gu(4,e)}catch(u){Me(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Me(e,s,u)}}var i=e.return;try{gh(e)}catch(u){Me(e,i,u)}break;case 5:var o=e.return;try{gh(e)}catch(u){Me(e,o,u)}}}catch(u){Me(e,e.return,u)}if(e===t){q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,q=l;break}q=e.return}}var yk=Math.ceil,pu=nr.ReactCurrentDispatcher,Mf=nr.ReactCurrentOwner,Zt=nr.ReactCurrentBatchConfig,me=0,rt=null,He=null,ut=0,Bt=0,ei=$r(0),Qe=0,na=null,ys=0,Qu=0,Ff=0,Do=null,bt=null,Uf=0,vi=1/0,Vn=null,mu=!1,_h=null,Nr=null,wl=!1,Er=null,gu=0,jo=0,wh=null,Vl=-1,Ml=0;function Ct(){return me&6?Ue():Vl!==-1?Vl:Vl=Ue()}function Rr(t){return t.mode&1?me&2&&ut!==0?ut&-ut:ek.transition!==null?(Ml===0&&(Ml=S_()),Ml):(t=ve,t!==0||(t=window.event,t=t===void 0?16:P_(t.type)),t):1}function fn(t,e,n,r){if(50<jo)throw jo=0,wh=null,Error(B(185));va(t,n,r),(!(me&2)||t!==rt)&&(t===rt&&(!(me&2)&&(Qu|=n),Qe===4&&mr(t,ut)),Vt(t,r),n===1&&me===0&&!(e.mode&1)&&(vi=Ue()+500,Hu&&Wr()))}function Vt(t,e){var n=t.callbackNode;eS(t,e);var r=Zl(t,t===rt?ut:0);if(r===0)n!==null&&sg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&sg(n),e===1)t.tag===0?ZS(Yg.bind(null,t)):Y_(Yg.bind(null,t)),QS(function(){!(me&6)&&Wr()}),n=null;else{switch(k_(r)){case 1:n=hf;break;case 4:n=T_;break;case 16:n=Jl;break;case 536870912:n=I_;break;default:n=Jl}n=Gw(n,Bw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Bw(t,e){if(Vl=-1,Ml=0,me&6)throw Error(B(327));var n=t.callbackNode;if(ai()&&t.callbackNode!==n)return null;var r=Zl(t,t===rt?ut:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=yu(t,r);else{e=r;var s=me;me|=2;var i=$w();(rt!==t||ut!==e)&&(Vn=null,vi=Ue()+500,cs(t,e));do try{wk();break}catch(l){zw(t,l)}while(!0);kf(),pu.current=i,me=s,He!==null?e=0:(rt=null,ut=0,e=Qe)}if(e!==0){if(e===2&&(s=Kd(t),s!==0&&(r=s,e=Eh(t,s))),e===1)throw n=na,cs(t,0),mr(t,r),Vt(t,Ue()),n;if(e===6)mr(t,r);else{if(s=t.current.alternate,!(r&30)&&!vk(s)&&(e=yu(t,r),e===2&&(i=Kd(t),i!==0&&(r=i,e=Eh(t,i))),e===1))throw n=na,cs(t,0),mr(t,r),Vt(t,Ue()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:rs(t,bt,Vn);break;case 3:if(mr(t,r),(r&130023424)===r&&(e=Uf+500-Ue(),10<e)){if(Zl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ct(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=th(rs.bind(null,t,bt,Vn),e);break}rs(t,bt,Vn);break;case 4:if(mr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-hn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ue()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*yk(r/1960))-r,10<r){t.timeoutHandle=th(rs.bind(null,t,bt,Vn),r);break}rs(t,bt,Vn);break;case 5:rs(t,bt,Vn);break;default:throw Error(B(329))}}}return Vt(t,Ue()),t.callbackNode===n?Bw.bind(null,t):null}function Eh(t,e){var n=Do;return t.current.memoizedState.isDehydrated&&(cs(t,e).flags|=256),t=yu(t,e),t!==2&&(e=bt,bt=n,e!==null&&Th(e)),t}function Th(t){bt===null?bt=t:bt.push.apply(bt,t)}function vk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!pn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function mr(t,e){for(e&=~Ff,e&=~Qu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-hn(e),r=1<<n;t[n]=-1,e&=~r}}function Yg(t){if(me&6)throw Error(B(327));ai();var e=Zl(t,0);if(!(e&1))return Vt(t,Ue()),null;var n=yu(t,e);if(t.tag!==0&&n===2){var r=Kd(t);r!==0&&(e=r,n=Eh(t,r))}if(n===1)throw n=na,cs(t,0),mr(t,e),Vt(t,Ue()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,rs(t,bt,Vn),Vt(t,Ue()),null}function Bf(t,e){var n=me;me|=1;try{return t(e)}finally{me=n,me===0&&(vi=Ue()+500,Hu&&Wr())}}function vs(t){Er!==null&&Er.tag===0&&!(me&6)&&ai();var e=me;me|=1;var n=Zt.transition,r=ve;try{if(Zt.transition=null,ve=1,t)return t()}finally{ve=r,Zt.transition=n,me=e,!(me&6)&&Wr()}}function zf(){Bt=ei.current,Ae(ei)}function cs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,GS(n)),He!==null)for(n=He.return;n!==null;){var r=n;switch(Tf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&su();break;case 3:gi(),Ae(Ot),Ae(It),Pf();break;case 5:Rf(r);break;case 4:gi();break;case 13:Ae(be);break;case 19:Ae(be);break;case 10:xf(r.type._context);break;case 22:case 23:zf()}n=n.return}if(rt=t,He=t=Pr(t.current,null),ut=Bt=e,Qe=0,na=null,Ff=Qu=ys=0,bt=Do=null,as!==null){for(e=0;e<as.length;e++)if(n=as[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}as=null}return t}function zw(t,e){do{var n=He;try{if(kf(),jl.current=fu,hu){for(var r=De.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}hu=!1}if(gs=0,tt=Ge=De=null,Po=!1,Zo=0,Mf.current=null,n===null||n.return===null){Qe=1,na=e,He=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=ut,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=l,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var x=Vg(o);if(x!==null){x.flags&=-257,Mg(x,o,l,i,e),x.mode&1&&Lg(i,d,e),e=x,u=d;var C=e.updateQueue;if(C===null){var P=new Set;P.add(u),e.updateQueue=P}else C.add(u);break e}else{if(!(e&1)){Lg(i,d,e),$f();break e}u=Error(B(426))}}else if(Ne&&l.mode&1){var N=Vg(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),Mg(N,o,l,i,e),If(yi(u,l));break e}}i=u=yi(u,l),Qe!==4&&(Qe=2),Do===null?Do=[i]:Do.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=kw(i,u,e);Rg(i,w);break e;case 1:l=u;var _=i.type,E=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Nr===null||!Nr.has(E)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=xw(i,l,e);Rg(i,D);break e}}i=i.return}while(i!==null)}Hw(n)}catch(O){e=O,He===n&&n!==null&&(He=n=n.return);continue}break}while(!0)}function $w(){var t=pu.current;return pu.current=fu,t===null?fu:t}function $f(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),rt===null||!(ys&268435455)&&!(Qu&268435455)||mr(rt,ut)}function yu(t,e){var n=me;me|=2;var r=$w();(rt!==t||ut!==e)&&(Vn=null,cs(t,e));do try{_k();break}catch(s){zw(t,s)}while(!0);if(kf(),me=n,pu.current=r,He!==null)throw Error(B(261));return rt=null,ut=0,Qe}function _k(){for(;He!==null;)Ww(He)}function wk(){for(;He!==null&&!HI();)Ww(He)}function Ww(t){var e=Kw(t.alternate,t,Bt);t.memoizedProps=t.pendingProps,e===null?Hw(t):He=e,Mf.current=null}function Hw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=fk(n,e),n!==null){n.flags&=32767,He=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Qe=6,He=null;return}}else if(n=hk(n,e,Bt),n!==null){He=n;return}if(e=e.sibling,e!==null){He=e;return}He=e=t}while(e!==null);Qe===0&&(Qe=5)}function rs(t,e,n){var r=ve,s=Zt.transition;try{Zt.transition=null,ve=1,Ek(t,e,n,r)}finally{Zt.transition=s,ve=r}return null}function Ek(t,e,n,r){do ai();while(Er!==null);if(me&6)throw Error(B(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(tS(t,i),t===rt&&(He=rt=null,ut=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||wl||(wl=!0,Gw(Jl,function(){return ai(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Zt.transition,Zt.transition=null;var o=ve;ve=1;var l=me;me|=4,Mf.current=null,mk(t,n),Fw(n,t),BS(Zd),eu=!!Jd,Zd=Jd=null,t.current=n,gk(n),qI(),me=l,ve=o,Zt.transition=i}else t.current=n;if(wl&&(wl=!1,Er=t,gu=s),i=t.pendingLanes,i===0&&(Nr=null),QI(n.stateNode),Vt(t,Ue()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(mu)throw mu=!1,t=_h,_h=null,t;return gu&1&&t.tag!==0&&ai(),i=t.pendingLanes,i&1?t===wh?jo++:(jo=0,wh=t):jo=0,Wr(),null}function ai(){if(Er!==null){var t=k_(gu),e=Zt.transition,n=ve;try{if(Zt.transition=null,ve=16>t?16:t,Er===null)var r=!1;else{if(t=Er,Er=null,gu=0,me&6)throw Error(B(331));var s=me;for(me|=4,q=t.current;q!==null;){var i=q,o=i.child;if(q.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(q=d;q!==null;){var f=q;switch(f.tag){case 0:case 11:case 15:bo(8,f,i)}var m=f.child;if(m!==null)m.return=f,q=m;else for(;q!==null;){f=q;var g=f.sibling,x=f.return;if(Lw(f),f===d){q=null;break}if(g!==null){g.return=x,q=g;break}q=x}}}var C=i.alternate;if(C!==null){var P=C.child;if(P!==null){C.child=null;do{var N=P.sibling;P.sibling=null,P=N}while(P!==null)}}q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,q=o;else e:for(;q!==null;){if(i=q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:bo(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,q=w;break e}q=i.return}}var _=t.current;for(q=_;q!==null;){o=q;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,q=E;else e:for(o=_;q!==null;){if(l=q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Gu(9,l)}}catch(O){Me(l,l.return,O)}if(l===o){q=null;break e}var D=l.sibling;if(D!==null){D.return=l.return,q=D;break e}q=l.return}}if(me=s,Wr(),Sn&&typeof Sn.onPostCommitFiberRoot=="function")try{Sn.onPostCommitFiberRoot(Uu,t)}catch{}r=!0}return r}finally{ve=n,Zt.transition=e}}return!1}function Xg(t,e,n){e=yi(n,e),e=kw(t,e,1),t=Cr(t,e,1),e=Ct(),t!==null&&(va(t,1,e),Vt(t,e))}function Me(t,e,n){if(t.tag===3)Xg(t,t,n);else for(;e!==null;){if(e.tag===3){Xg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Nr===null||!Nr.has(r))){t=yi(n,t),t=xw(e,t,1),e=Cr(e,t,1),t=Ct(),e!==null&&(va(e,1,t),Vt(e,t));break}}e=e.return}}function Tk(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ct(),t.pingedLanes|=t.suspendedLanes&n,rt===t&&(ut&n)===n&&(Qe===4||Qe===3&&(ut&130023424)===ut&&500>Ue()-Uf?cs(t,0):Ff|=n),Vt(t,e)}function qw(t,e){e===0&&(t.mode&1?(e=cl,cl<<=1,!(cl&130023424)&&(cl=4194304)):e=1);var n=Ct();t=Qn(t,e),t!==null&&(va(t,e,n),Vt(t,n))}function Ik(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),qw(t,n)}function Sk(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),qw(t,n)}var Kw;Kw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ot.current)jt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return jt=!1,dk(t,e,n);jt=!!(t.flags&131072)}else jt=!1,Ne&&e.flags&1048576&&X_(e,au,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ll(t,e),t=e.pendingProps;var s=fi(e,It.current);oi(e,n),s=Df(null,e,r,t,s,n);var i=jf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Lt(r)?(i=!0,iu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Cf(e),s.updater=Ku,e.stateNode=s,s._reactInternals=e,lh(e,r,t,n),e=dh(null,e,r,!0,i,n)):(e.tag=0,Ne&&i&&Ef(e),At(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ll(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=xk(r),t=ln(r,t),s){case 0:e=ch(null,e,r,t,n);break e;case 1:e=Bg(null,e,r,t,n);break e;case 11:e=Fg(null,e,r,t,n);break e;case 14:e=Ug(null,e,r,ln(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ln(r,s),ch(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ln(r,s),Bg(t,e,r,s,n);case 3:e:{if(Rw(e),t===null)throw Error(B(387));r=e.pendingProps,i=e.memoizedState,s=i.element,rw(t,e),cu(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=yi(Error(B(423)),e),e=zg(t,e,r,n,s);break e}else if(r!==s){s=yi(Error(B(424)),e),e=zg(t,e,r,n,s);break e}else for(zt=Ar(e.stateNode.containerInfo.firstChild),Wt=e,Ne=!0,cn=null,n=tw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(pi(),r===s){e=Yn(t,e,n);break e}At(t,e,r,n)}e=e.child}return e;case 5:return sw(e),t===null&&ih(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,eh(r,s)?o=null:i!==null&&eh(r,i)&&(e.flags|=32),Nw(t,e),At(t,e,o,n),e.child;case 6:return t===null&&ih(e),null;case 13:return Pw(t,e,n);case 4:return Nf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=mi(e,null,r,n):At(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ln(r,s),Fg(t,e,r,s,n);case 7:return At(t,e,e.pendingProps,n),e.child;case 8:return At(t,e,e.pendingProps.children,n),e.child;case 12:return At(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ie(lu,r._currentValue),r._currentValue=o,i!==null)if(pn(i.value,o)){if(i.children===s.children&&!Ot.current){e=Yn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Wn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),oh(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(B(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),oh(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}At(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,oi(e,n),s=nn(s),r=r(s),e.flags|=1,At(t,e,r,n),e.child;case 14:return r=e.type,s=ln(r,e.pendingProps),s=ln(r.type,s),Ug(t,e,r,s,n);case 15:return Aw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ln(r,s),Ll(t,e),e.tag=1,Lt(r)?(t=!0,iu(e)):t=!1,oi(e,n),Sw(e,r,s),lh(e,r,s,n),dh(null,e,r,!0,t,n);case 19:return bw(t,e,n);case 22:return Cw(t,e,n)}throw Error(B(156,e.tag))};function Gw(t,e){return E_(t,e)}function kk(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jt(t,e,n,r){return new kk(t,e,n,r)}function Wf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function xk(t){if(typeof t=="function")return Wf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===uf)return 11;if(t===cf)return 14}return 2}function Pr(t,e){var n=t.alternate;return n===null?(n=Jt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Fl(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Wf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ws:return ds(n.children,s,i,e);case lf:o=8,s|=8;break;case bd:return t=Jt(12,n,e,s|2),t.elementType=bd,t.lanes=i,t;case Dd:return t=Jt(13,n,e,s),t.elementType=Dd,t.lanes=i,t;case jd:return t=Jt(19,n,e,s),t.elementType=jd,t.lanes=i,t;case s_:return Yu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case n_:o=10;break e;case r_:o=9;break e;case uf:o=11;break e;case cf:o=14;break e;case hr:o=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=Jt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ds(t,e,n,r){return t=Jt(7,t,r,e),t.lanes=n,t}function Yu(t,e,n,r){return t=Jt(22,t,r,e),t.elementType=s_,t.lanes=n,t.stateNode={isHidden:!1},t}function pd(t,e,n){return t=Jt(6,t,null,e),t.lanes=n,t}function md(t,e,n){return e=Jt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ak(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qc(0),this.expirationTimes=Qc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qc(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Hf(t,e,n,r,s,i,o,l,u){return t=new Ak(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Jt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cf(i),t}function Ck(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$s,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Qw(t){if(!t)return Mr;t=t._reactInternals;e:{if(xs(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Lt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(Lt(n))return Q_(t,n,e)}return e}function Yw(t,e,n,r,s,i,o,l,u){return t=Hf(n,r,!0,t,s,i,o,l,u),t.context=Qw(null),n=t.current,r=Ct(),s=Rr(n),i=Wn(r,s),i.callback=e??null,Cr(n,i,s),t.current.lanes=s,va(t,s,r),Vt(t,r),t}function Xu(t,e,n,r){var s=e.current,i=Ct(),o=Rr(s);return n=Qw(n),e.context===null?e.context=n:e.pendingContext=n,e=Wn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Cr(s,e,o),t!==null&&(fn(t,s,o,i),Dl(t,s,o)),o}function vu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Jg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function qf(t,e){Jg(t,e),(t=t.alternate)&&Jg(t,e)}function Nk(){return null}var Xw=typeof reportError=="function"?reportError:function(t){console.error(t)};function Kf(t){this._internalRoot=t}Ju.prototype.render=Kf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));Xu(t,e,null,null)};Ju.prototype.unmount=Kf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;vs(function(){Xu(null,t,null,null)}),e[Gn]=null}};function Ju(t){this._internalRoot=t}Ju.prototype.unstable_scheduleHydration=function(t){if(t){var e=C_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<pr.length&&e!==0&&e<pr[n].priority;n++);pr.splice(n,0,t),n===0&&R_(t)}};function Gf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Zg(){}function Rk(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=vu(o);i.call(d)}}var o=Yw(e,r,t,0,null,!1,!1,"",Zg);return t._reactRootContainer=o,t[Gn]=o.current,Go(t.nodeType===8?t.parentNode:t),vs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=vu(u);l.call(d)}}var u=Hf(t,0,!1,null,null,!1,!1,"",Zg);return t._reactRootContainer=u,t[Gn]=u.current,Go(t.nodeType===8?t.parentNode:t),vs(function(){Xu(e,u,n,r)}),u}function ec(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=vu(o);l.call(u)}}Xu(e,o,t,s)}else o=Rk(n,e,t,s,r);return vu(o)}x_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=vo(e.pendingLanes);n!==0&&(ff(e,n|1),Vt(e,Ue()),!(me&6)&&(vi=Ue()+500,Wr()))}break;case 13:vs(function(){var r=Qn(t,1);if(r!==null){var s=Ct();fn(r,t,1,s)}}),qf(t,1)}};pf=function(t){if(t.tag===13){var e=Qn(t,134217728);if(e!==null){var n=Ct();fn(e,t,134217728,n)}qf(t,134217728)}};A_=function(t){if(t.tag===13){var e=Rr(t),n=Qn(t,e);if(n!==null){var r=Ct();fn(n,t,e,r)}qf(t,e)}};C_=function(){return ve};N_=function(t,e){var n=ve;try{return ve=t,e()}finally{ve=n}};Wd=function(t,e,n){switch(e){case"input":if(Vd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Wu(r);if(!s)throw Error(B(90));o_(r),Vd(r,s)}}}break;case"textarea":l_(t,n);break;case"select":e=n.value,e!=null&&ni(t,!!n.multiple,e,!1)}};m_=Bf;g_=vs;var Pk={usingClientEntryPoint:!1,Events:[wa,Gs,Wu,f_,p_,Bf]},po={findFiberByHostInstance:os,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},bk={bundleType:po.bundleType,version:po.version,rendererPackageName:po.rendererPackageName,rendererConfig:po.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:nr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=__(t),t===null?null:t.stateNode},findFiberByHostInstance:po.findFiberByHostInstance||Nk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var El=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!El.isDisabled&&El.supportsFiber)try{Uu=El.inject(bk),Sn=El}catch{}}qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pk;qt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gf(e))throw Error(B(200));return Ck(t,e,null,n)};qt.createRoot=function(t,e){if(!Gf(t))throw Error(B(299));var n=!1,r="",s=Xw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Hf(t,1,!1,null,null,n,!1,r,s),t[Gn]=e.current,Go(t.nodeType===8?t.parentNode:t),new Kf(e)};qt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=__(e),t=t===null?null:t.stateNode,t};qt.flushSync=function(t){return vs(t)};qt.hydrate=function(t,e,n){if(!Zu(e))throw Error(B(200));return ec(null,t,e,!0,n)};qt.hydrateRoot=function(t,e,n){if(!Gf(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Xw;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Yw(e,null,t,1,n??null,s,!1,i,o),t[Gn]=e.current,Go(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Ju(e)};qt.render=function(t,e,n){if(!Zu(e))throw Error(B(200));return ec(null,t,e,!1,n)};qt.unmountComponentAtNode=function(t){if(!Zu(t))throw Error(B(40));return t._reactRootContainer?(vs(function(){ec(null,null,t,!1,function(){t._reactRootContainer=null,t[Gn]=null})}),!0):!1};qt.unstable_batchedUpdates=Bf;qt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Zu(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return ec(t,e,n,!1,r)};qt.version="18.3.1-next-f1338f8080-20240426";function Jw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Jw)}catch(t){console.error(t)}}Jw(),Jv.exports=qt;var Dk=Jv.exports,ey=Dk;Rd.createRoot=ey.createRoot,Rd.hydrateRoot=ey.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ra(){return ra=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ra.apply(this,arguments)}var Tr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Tr||(Tr={}));const ty="popstate";function jk(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return Ih("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:_u(s)}return Lk(e,n,null,t)}function ze(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Qf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Ok(){return Math.random().toString(36).substr(2,8)}function ny(t,e){return{usr:t.state,key:t.key,idx:e}}function Ih(t,e,n,r){return n===void 0&&(n=null),ra({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ji(e):e,{state:n,key:e&&e.key||r||Ok()})}function _u(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ji(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Lk(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=Tr.Pop,u=null,d=f();d==null&&(d=0,o.replaceState(ra({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function m(){l=Tr.Pop;let N=f(),w=N==null?null:N-d;d=N,u&&u({action:l,location:P.location,delta:w})}function g(N,w){l=Tr.Push;let _=Ih(P.location,N,w);d=f()+1;let E=ny(_,d),D=P.createHref(_);try{o.pushState(E,"",D)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(D)}i&&u&&u({action:l,location:P.location,delta:1})}function x(N,w){l=Tr.Replace;let _=Ih(P.location,N,w);d=f();let E=ny(_,d),D=P.createHref(_);o.replaceState(E,"",D),i&&u&&u({action:l,location:P.location,delta:0})}function C(N){let w=s.location.origin!=="null"?s.location.origin:s.location.href,_=typeof N=="string"?N:_u(N);return _=_.replace(/ $/,"%20"),ze(w,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,w)}let P={get action(){return l},get location(){return t(s,o)},listen(N){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(ty,m),u=N,()=>{s.removeEventListener(ty,m),u=null}},createHref(N){return e(s,N)},createURL:C,encodeLocation(N){let w=C(N);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:g,replace:x,go(N){return o.go(N)}};return P}var ry;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ry||(ry={}));function Vk(t,e,n){return n===void 0&&(n="/"),Mk(t,e,n)}function Mk(t,e,n,r){let s=typeof e=="string"?ji(e):e,i=Yf(s.pathname||"/",n);if(i==null)return null;let o=Zw(t);Fk(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let d=Xk(i);l=Gk(o[u],d)}return l}function Zw(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let u={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(ze(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=br([r,u.relativePath]),f=n.concat(u);i.children&&i.children.length>0&&(ze(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Zw(i.children,e,f,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:qk(d,i.index),routesMeta:f})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let u of e0(i.path))s(i,o,u)}),e}function e0(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=e0(r.join("/")),l=[];return l.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function Fk(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Kk(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Uk=/^:[\w-]+$/,Bk=3,zk=2,$k=1,Wk=10,Hk=-2,sy=t=>t==="*";function qk(t,e){let n=t.split("/"),r=n.length;return n.some(sy)&&(r+=Hk),e&&(r+=zk),n.filter(s=>!sy(s)).reduce((s,i)=>s+(Uk.test(i)?Bk:i===""?$k:Wk),r)}function Kk(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Gk(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],d=l===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",m=Qk({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),g=u.route;if(!m)return null;Object.assign(s,m.params),o.push({params:s,pathname:br([i,m.pathname]),pathnameBase:nx(br([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=br([i,m.pathnameBase]))}return o}function Qk(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Yk(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,f,m)=>{let{paramName:g,isOptional:x}=f;if(g==="*"){let P=l[m]||"";o=i.slice(0,i.length-P.length).replace(/(.)\/+$/,"$1")}const C=l[m];return x&&!C?d[g]=void 0:d[g]=(C||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function Yk(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Qf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Xk(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Qf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Yf(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const Jk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zk=t=>Jk.test(t);function ex(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?ji(t):t,i;if(n)if(Zk(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Qf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=iy(n.substring(1),"/"):i=iy(n,e)}else i=e;return{pathname:i,search:rx(r),hash:sx(s)}}function iy(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function gd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function tx(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Xf(t,e){let n=tx(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Jf(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=ji(t):(s=ra({},t),ze(!s.pathname||!s.pathname.includes("?"),gd("?","pathname","search",s)),ze(!s.pathname||!s.pathname.includes("#"),gd("#","pathname","hash",s)),ze(!s.search||!s.search.includes("#"),gd("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;s.pathname=g.join("/")}l=m>=0?e[m]:"/"}let u=ex(s,l),d=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const br=t=>t.join("/").replace(/\/\/+/g,"/"),nx=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),rx=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,sx=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function ix(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const t0=["post","put","patch","delete"];new Set(t0);const ox=["get",...t0];new Set(ox);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sa(){return sa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sa.apply(this,arguments)}const Zf=A.createContext(null),ax=A.createContext(null),Hr=A.createContext(null),tc=A.createContext(null),rr=A.createContext({outlet:null,matches:[],isDataRoute:!1}),n0=A.createContext(null);function lx(t,e){let{relative:n}=e===void 0?{}:e;Oi()||ze(!1);let{basename:r,navigator:s}=A.useContext(Hr),{hash:i,pathname:o,search:l}=s0(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:br([r,o])),s.createHref({pathname:u,search:l,hash:i})}function Oi(){return A.useContext(tc)!=null}function Ta(){return Oi()||ze(!1),A.useContext(tc).location}function r0(t){A.useContext(Hr).static||A.useLayoutEffect(t)}function Ia(){let{isDataRoute:t}=A.useContext(rr);return t?Tx():ux()}function ux(){Oi()||ze(!1);let t=A.useContext(Zf),{basename:e,future:n,navigator:r}=A.useContext(Hr),{matches:s}=A.useContext(rr),{pathname:i}=Ta(),o=JSON.stringify(Xf(s,n.v7_relativeSplatPath)),l=A.useRef(!1);return r0(()=>{l.current=!0}),A.useCallback(function(d,f){if(f===void 0&&(f={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let m=Jf(d,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:br([e,m.pathname])),(f.replace?r.replace:r.push)(m,f.state,f)},[e,r,o,i,t])}function cx(){let{matches:t}=A.useContext(rr),e=t[t.length-1];return e?e.params:{}}function s0(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=A.useContext(Hr),{matches:s}=A.useContext(rr),{pathname:i}=Ta(),o=JSON.stringify(Xf(s,r.v7_relativeSplatPath));return A.useMemo(()=>Jf(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function dx(t,e){return hx(t,e)}function hx(t,e,n,r){Oi()||ze(!1);let{navigator:s}=A.useContext(Hr),{matches:i}=A.useContext(rr),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=Ta(),f;if(e){var m;let N=typeof e=="string"?ji(e):e;u==="/"||(m=N.pathname)!=null&&m.startsWith(u)||ze(!1),f=N}else f=d;let g=f.pathname||"/",x=g;if(u!=="/"){let N=u.replace(/^\//,"").split("/");x="/"+g.replace(/^\//,"").split("/").slice(N.length).join("/")}let C=Vk(t,{pathname:x}),P=yx(C&&C.map(N=>Object.assign({},N,{params:Object.assign({},l,N.params),pathname:br([u,s.encodeLocation?s.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?u:br([u,s.encodeLocation?s.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),i,n,r);return e&&P?A.createElement(tc.Provider,{value:{location:sa({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Tr.Pop}},P):P}function fx(){let t=Ex(),e=ix(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:s},n):null,null)}const px=A.createElement(fx,null);class mx extends A.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?A.createElement(rr.Provider,{value:this.props.routeContext},A.createElement(n0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function gx(t){let{routeContext:e,match:n,children:r}=t,s=A.useContext(Zf);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),A.createElement(rr.Provider,{value:e},r)}function yx(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let f=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);f>=0||ze(!1),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let m=o[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=f),m.route.id){let{loaderData:g,errors:x}=n,C=m.route.loader&&g[m.route.id]===void 0&&(!x||x[m.route.id]===void 0);if(m.route.lazy||C){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,m,g)=>{let x,C=!1,P=null,N=null;n&&(x=l&&m.route.id?l[m.route.id]:void 0,P=m.route.errorElement||px,u&&(d<0&&g===0?(Ix("route-fallback"),C=!0,N=null):d===g&&(C=!0,N=m.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,g+1)),_=()=>{let E;return x?E=P:C?E=N:m.route.Component?E=A.createElement(m.route.Component,null):m.route.element?E=m.route.element:E=f,A.createElement(gx,{match:m,routeContext:{outlet:f,matches:w,isDataRoute:n!=null},children:E})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?A.createElement(mx,{location:n.location,revalidation:n.revalidation,component:P,error:x,children:_(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):_()},null)}var i0=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(i0||{}),o0=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(o0||{});function vx(t){let e=A.useContext(Zf);return e||ze(!1),e}function _x(t){let e=A.useContext(ax);return e||ze(!1),e}function wx(t){let e=A.useContext(rr);return e||ze(!1),e}function a0(t){let e=wx(),n=e.matches[e.matches.length-1];return n.route.id||ze(!1),n.route.id}function Ex(){var t;let e=A.useContext(n0),n=_x(),r=a0();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Tx(){let{router:t}=vx(i0.UseNavigateStable),e=a0(o0.UseNavigateStable),n=A.useRef(!1);return r0(()=>{n.current=!0}),A.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,sa({fromRouteId:e},i)))},[t,e])}const oy={};function Ix(t,e,n){oy[t]||(oy[t]=!0)}function Sx(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Sh(t){let{to:e,replace:n,state:r,relative:s}=t;Oi()||ze(!1);let{future:i,static:o}=A.useContext(Hr),{matches:l}=A.useContext(rr),{pathname:u}=Ta(),d=Ia(),f=Jf(e,Xf(l,i.v7_relativeSplatPath),u,s==="path"),m=JSON.stringify(f);return A.useEffect(()=>d(JSON.parse(m),{replace:n,state:r,relative:s}),[d,m,s,n,r]),null}function Ln(t){ze(!1)}function kx(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Tr.Pop,navigator:i,static:o=!1,future:l}=t;Oi()&&ze(!1);let u=e.replace(/^\/*/,"/"),d=A.useMemo(()=>({basename:u,navigator:i,static:o,future:sa({v7_relativeSplatPath:!1},l)}),[u,l,i,o]);typeof r=="string"&&(r=ji(r));let{pathname:f="/",search:m="",hash:g="",state:x=null,key:C="default"}=r,P=A.useMemo(()=>{let N=Yf(f,u);return N==null?null:{location:{pathname:N,search:m,hash:g,state:x,key:C},navigationType:s}},[u,f,m,g,x,C,s]);return P==null?null:A.createElement(Hr.Provider,{value:d},A.createElement(tc.Provider,{children:n,value:P}))}function xx(t){let{children:e,location:n}=t;return dx(kh(e),n)}new Promise(()=>{});function kh(t,e){e===void 0&&(e=[]);let n=[];return A.Children.forEach(t,(r,s)=>{if(!A.isValidElement(r))return;let i=[...e,s];if(r.type===A.Fragment){n.push.apply(n,kh(r.props.children,i));return}r.type!==Ln&&ze(!1),!r.props.index||!r.props.children||ze(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=kh(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xh(){return xh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xh.apply(this,arguments)}function Ax(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Cx(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Nx(t,e){return t.button===0&&(!e||e==="_self")&&!Cx(t)}const Rx=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Px="6";try{window.__reactRouterVersion=Px}catch{}const bx="startTransition",ay=TI[bx];function Dx(t){let{basename:e,children:n,future:r,window:s}=t,i=A.useRef();i.current==null&&(i.current=jk({window:s,v5Compat:!0}));let o=i.current,[l,u]=A.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},f=A.useCallback(m=>{d&&ay?ay(()=>u(m)):u(m)},[u,d]);return A.useLayoutEffect(()=>o.listen(f),[o,f]),A.useEffect(()=>Sx(r),[r]),A.createElement(kx,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const jx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ox=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,dn=A.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:l,target:u,to:d,preventScrollReset:f,viewTransition:m}=e,g=Ax(e,Rx),{basename:x}=A.useContext(Hr),C,P=!1;if(typeof d=="string"&&Ox.test(d)&&(C=d,jx))try{let E=new URL(window.location.href),D=d.startsWith("//")?new URL(E.protocol+d):new URL(d),O=Yf(D.pathname,x);D.origin===E.origin&&O!=null?d=O+D.search+D.hash:P=!0}catch{}let N=lx(d,{relative:s}),w=Lx(d,{replace:o,state:l,target:u,preventScrollReset:f,relative:s,viewTransition:m});function _(E){r&&r(E),E.defaultPrevented||w(E)}return A.createElement("a",xh({},g,{href:C||N,onClick:P||i?r:_,ref:n,target:u}))});var ly;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(ly||(ly={}));var uy;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(uy||(uy={}));function Lx(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,u=Ia(),d=Ta(),f=s0(t,{relative:o});return A.useCallback(m=>{if(Nx(m,n)){m.preventDefault();let g=r!==void 0?r:_u(d)===_u(f);u(t,{replace:g,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[d,u,f,r,s,n,t,i,o,l])}var cy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Vx=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},u0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,f=i>>2,m=(i&3)<<4|l>>4;let g=(l&15)<<2|d>>6,x=d&63;u||(x=64,o||(g=64)),r.push(n[f],n[m],n[g],n[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(l0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Vx(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||m==null)throw new Mx;const g=i<<2|l>>4;if(r.push(g),d!==64){const x=l<<4&240|d>>2;if(r.push(x),m!==64){const C=d<<6&192|m;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Mx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Fx=function(t){const e=l0(t);return u0.encodeByteArray(e,!0)},wu=function(t){return Fx(t).replace(/\./g,"")},c0=function(t){try{return u0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ux(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx=()=>Ux().__FIREBASE_DEFAULTS__,zx=()=>{if(typeof process>"u"||typeof cy>"u")return;const t=cy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},$x=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&c0(t[1]);return e&&JSON.parse(e)},nc=()=>{try{return Bx()||zx()||$x()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},d0=t=>{var e,n;return(n=(e=nc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Wx=t=>{const e=d0(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},h0=()=>{var t;return(t=nc())===null||t===void 0?void 0:t.config},f0=t=>{var e;return(e=nc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qx(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[wu(JSON.stringify(n)),wu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Kx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(St())}function Gx(){var t;const e=(t=nc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Qx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Yx(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Xx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Jx(){const t=St();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Zx(){return!Gx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function e1(){try{return typeof indexedDB=="object"}catch{return!1}}function t1(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1="FirebaseError";class sr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=n1,Object.setPrototypeOf(this,sr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sa.prototype.create)}}class Sa{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?r1(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new sr(s,l,r)}}function r1(t,e){return t.replace(s1,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const s1=/\{\$([^}]+)}/g;function i1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ia(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(dy(i)&&dy(o)){if(!ia(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function dy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ka(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function wo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Eo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function o1(t,e){const n=new a1(t,e);return n.subscribe.bind(n)}class a1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");l1(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=yd),s.error===void 0&&(s.error=yd),s.complete===void 0&&(s.complete=yd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function l1(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function yd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(t){return t&&t._delegate?t._delegate:t}class _s{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Hx;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(d1(e))try{this.getOrInitializeService({instanceIdentifier:ss})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ss){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ss){return this.instances.has(e)}getOptions(e=ss){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:c1(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ss){return this.component?this.component.multipleInstances?e:ss:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function c1(t){return t===ss?void 0:t}function d1(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new u1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var de;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(de||(de={}));const f1={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},p1=de.INFO,m1={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},g1=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=m1[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ep{constructor(e){this.name=e,this._logLevel=p1,this._logHandler=g1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?f1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}}const y1=(t,e)=>e.some(n=>t instanceof n);let hy,fy;function v1(){return hy||(hy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _1(){return fy||(fy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const p0=new WeakMap,Ah=new WeakMap,m0=new WeakMap,vd=new WeakMap,tp=new WeakMap;function w1(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Dr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&p0.set(n,t)}).catch(()=>{}),tp.set(e,t),e}function E1(t){if(Ah.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Ah.set(t,e)}let Ch={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ah.get(t);if(e==="objectStoreNames")return t.objectStoreNames||m0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Dr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function T1(t){Ch=t(Ch)}function I1(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(_d(this),e,...n);return m0.set(r,e.sort?e.sort():[e]),Dr(r)}:_1().includes(t)?function(...e){return t.apply(_d(this),e),Dr(p0.get(this))}:function(...e){return Dr(t.apply(_d(this),e))}}function S1(t){return typeof t=="function"?I1(t):(t instanceof IDBTransaction&&E1(t),y1(t,v1())?new Proxy(t,Ch):t)}function Dr(t){if(t instanceof IDBRequest)return w1(t);if(vd.has(t))return vd.get(t);const e=S1(t);return e!==t&&(vd.set(t,e),tp.set(e,t)),e}const _d=t=>tp.get(t);function k1(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Dr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Dr(o.result),u.oldVersion,u.newVersion,Dr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const x1=["get","getKey","getAll","getAllKeys","count"],A1=["put","add","delete","clear"],wd=new Map;function py(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(wd.get(e))return wd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=A1.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||x1.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&u.done]))[0]};return wd.set(e,i),i}T1(t=>({...t,get:(e,n,r)=>py(e,n)||t.get(e,n,r),has:(e,n)=>!!py(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(N1(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function N1(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Nh="@firebase/app",my="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xn=new ep("@firebase/app"),R1="@firebase/app-compat",P1="@firebase/analytics-compat",b1="@firebase/analytics",D1="@firebase/app-check-compat",j1="@firebase/app-check",O1="@firebase/auth",L1="@firebase/auth-compat",V1="@firebase/database",M1="@firebase/data-connect",F1="@firebase/database-compat",U1="@firebase/functions",B1="@firebase/functions-compat",z1="@firebase/installations",$1="@firebase/installations-compat",W1="@firebase/messaging",H1="@firebase/messaging-compat",q1="@firebase/performance",K1="@firebase/performance-compat",G1="@firebase/remote-config",Q1="@firebase/remote-config-compat",Y1="@firebase/storage",X1="@firebase/storage-compat",J1="@firebase/firestore",Z1="@firebase/vertexai-preview",eA="@firebase/firestore-compat",tA="firebase",nA="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rh="[DEFAULT]",rA={[Nh]:"fire-core",[R1]:"fire-core-compat",[b1]:"fire-analytics",[P1]:"fire-analytics-compat",[j1]:"fire-app-check",[D1]:"fire-app-check-compat",[O1]:"fire-auth",[L1]:"fire-auth-compat",[V1]:"fire-rtdb",[M1]:"fire-data-connect",[F1]:"fire-rtdb-compat",[U1]:"fire-fn",[B1]:"fire-fn-compat",[z1]:"fire-iid",[$1]:"fire-iid-compat",[W1]:"fire-fcm",[H1]:"fire-fcm-compat",[q1]:"fire-perf",[K1]:"fire-perf-compat",[G1]:"fire-rc",[Q1]:"fire-rc-compat",[Y1]:"fire-gcs",[X1]:"fire-gcs-compat",[J1]:"fire-fst",[eA]:"fire-fst-compat",[Z1]:"fire-vertex","fire-js":"fire-js",[tA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eu=new Map,sA=new Map,Ph=new Map;function gy(t,e){try{t.container.addComponent(e)}catch(n){Xn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function _i(t){const e=t.name;if(Ph.has(e))return Xn.debug(`There were multiple attempts to register component ${e}.`),!1;Ph.set(e,t);for(const n of Eu.values())gy(n,t);for(const n of sA.values())gy(n,t);return!0}function np(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function In(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},jr=new Sa("app","Firebase",iA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _s("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw jr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li=nA;function g0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Rh,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw jr.create("bad-app-name",{appName:String(s)});if(n||(n=h0()),!n)throw jr.create("no-options");const i=Eu.get(s);if(i){if(ia(n,i.options)&&ia(r,i.config))return i;throw jr.create("duplicate-app",{appName:s})}const o=new h1(s);for(const u of Ph.values())o.addComponent(u);const l=new oA(n,r,o);return Eu.set(s,l),l}function y0(t=Rh){const e=Eu.get(t);if(!e&&t===Rh&&h0())return g0();if(!e)throw jr.create("no-app",{appName:t});return e}function Or(t,e,n){var r;let s=(r=rA[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xn.warn(l.join(" "));return}_i(new _s(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA="firebase-heartbeat-database",lA=1,oa="firebase-heartbeat-store";let Ed=null;function v0(){return Ed||(Ed=k1(aA,lA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(oa)}catch(n){console.warn(n)}}}}).catch(t=>{throw jr.create("idb-open",{originalErrorMessage:t.message})})),Ed}async function uA(t){try{const n=(await v0()).transaction(oa),r=await n.objectStore(oa).get(_0(t));return await n.done,r}catch(e){if(e instanceof sr)Xn.warn(e.message);else{const n=jr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Xn.warn(n.message)}}}async function yy(t,e){try{const r=(await v0()).transaction(oa,"readwrite");await r.objectStore(oa).put(e,_0(t)),await r.done}catch(n){if(n instanceof sr)Xn.warn(n.message);else{const r=jr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Xn.warn(r.message)}}}function _0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA=1024,dA=30*24*60*60*1e3;class hA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new pA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=vy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=dA}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Xn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=vy(),{heartbeatsToSend:r,unsentEntries:s}=fA(this._heartbeatsCache.heartbeats),i=wu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Xn.warn(n),""}}}function vy(){return new Date().toISOString().substring(0,10)}function fA(t,e=cA){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),_y(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),_y(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class pA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return e1()?t1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await uA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return yy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return yy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function _y(t){return wu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(t){_i(new _s("platform-logger",e=>new C1(e),"PRIVATE")),_i(new _s("heartbeat",e=>new hA(e),"PRIVATE")),Or(Nh,my,t),Or(Nh,my,"esm2017"),Or("fire-js","")}mA("");function rp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function w0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const gA=w0,E0=new Sa("auth","Firebase",w0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tu=new ep("@firebase/auth");function yA(t,...e){Tu.logLevel<=de.WARN&&Tu.warn(`Auth (${Li}): ${t}`,...e)}function Ul(t,...e){Tu.logLevel<=de.ERROR&&Tu.error(`Auth (${Li}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(t,...e){throw sp(t,...e)}function xn(t,...e){return sp(t,...e)}function T0(t,e,n){const r=Object.assign(Object.assign({},gA()),{[e]:n});return new Sa("auth","Firebase",r).create(e,{appName:t.name})}function Hn(t){return T0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function sp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return E0.create(t,...e)}function J(t,e,...n){if(!t)throw sp(e,...n)}function Bn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ul(e),new Error(e)}function Jn(t,e){t||Bn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function vA(){return wy()==="http:"||wy()==="https:"}function wy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(vA()||Yx()||"connection"in navigator)?navigator.onLine:!0}function wA(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e,n){this.shortDelay=e,this.longDelay=n,Jn(n>e,"Short delay should be less than long delay!"),this.isMobile=Kx()||Xx()}get(){return _A()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(t,e){Jn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA=new xa(3e4,6e4);function qr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Kr(t,e,n,r,s={}){return S0(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=ka(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},i);return Qx()||(d.referrerPolicy="no-referrer"),I0.fetch()(k0(t,t.config.apiHost,n,l),d)})}async function S0(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},EA),e);try{const s=new SA(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Tl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[u,d]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Tl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Tl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Tl(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw T0(t,f,d);mn(t,f)}}catch(s){if(s instanceof sr)throw s;mn(t,"network-request-failed",{message:String(s)})}}async function Aa(t,e,n,r,s={}){const i=await Kr(t,e,n,r,s);return"mfaPendingCredential"in i&&mn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function k0(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?ip(t.config,s):`${t.config.apiScheme}://${s}`}function IA(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class SA{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(xn(this.auth,"network-request-failed")),TA.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Tl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=xn(t,e,r);return s.customData._tokenResponse=n,s}function Ey(t){return t!==void 0&&t.enterprise!==void 0}class kA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return IA(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function xA(t,e){return Kr(t,"GET","/v2/recaptchaConfig",qr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AA(t,e){return Kr(t,"POST","/v1/accounts:delete",e)}async function x0(t,e){return Kr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function CA(t,e=!1){const n=Xe(t),r=await n.getIdToken(e),s=op(r);J(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Oo(Td(s.auth_time)),issuedAtTime:Oo(Td(s.iat)),expirationTime:Oo(Td(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Td(t){return Number(t)*1e3}function op(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ul("JWT malformed, contained fewer than 3 sections"),null;try{const s=c0(n);return s?JSON.parse(s):(Ul("Failed to decode base64 JWT payload"),null)}catch(s){return Ul("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Ty(t){const e=op(t);return J(e,"internal-error"),J(typeof e.exp<"u","internal-error"),J(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aa(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof sr&&NA(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function NA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Oo(this.lastLoginAt),this.creationTime=Oo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iu(t){var e;const n=t.auth,r=await t.getIdToken(),s=await aa(t,x0(n,{idToken:r}));J(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?A0(i.providerUserInfo):[],l=bA(t.providerData,o),u=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),f=u?d:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Dh(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function PA(t){const e=Xe(t);await Iu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function bA(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function A0(t){return t.map(e=>{var{providerId:n}=e,r=rp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DA(t,e){const n=await S0(t,{},async()=>{const r=ka({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=k0(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",I0.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function jA(t,e){return Kr(t,"POST","/v2/accounts:revokeToken",qr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){J(e.idToken,"internal-error"),J(typeof e.idToken<"u","internal-error"),J(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ty(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){J(e.length!==0,"internal-error");const n=Ty(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await DA(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new li;return r&&(J(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(J(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(J(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new li,this.toJSON())}_performRefresh(){return Bn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(t,e){J(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class zn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=rp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new RA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Dh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await aa(this,this.stsTokenManager.getToken(this.auth,e));return J(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return CA(this,e)}reload(){return PA(this)}_assign(e){this!==e&&(J(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new zn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Iu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(In(this.auth.app))return Promise.reject(Hn(this.auth));const e=await this.getIdToken();return await aa(this,AA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,u,d,f;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,x=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,C=(o=n.photoURL)!==null&&o!==void 0?o:void 0,P=(l=n.tenantId)!==null&&l!==void 0?l:void 0,N=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,w=(d=n.createdAt)!==null&&d!==void 0?d:void 0,_=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:E,emailVerified:D,isAnonymous:O,providerData:M,stsTokenManager:S}=n;J(E&&S,e,"internal-error");const y=li.fromJSON(this.name,S);J(typeof E=="string",e,"internal-error"),dr(m,e.name),dr(g,e.name),J(typeof D=="boolean",e,"internal-error"),J(typeof O=="boolean",e,"internal-error"),dr(x,e.name),dr(C,e.name),dr(P,e.name),dr(N,e.name),dr(w,e.name),dr(_,e.name);const k=new zn({uid:E,auth:e,email:g,emailVerified:D,displayName:m,isAnonymous:O,photoURL:C,phoneNumber:x,tenantId:P,stsTokenManager:y,createdAt:w,lastLoginAt:_});return M&&Array.isArray(M)&&(k.providerData=M.map(T=>Object.assign({},T))),N&&(k._redirectEventId=N),k}static async _fromIdTokenResponse(e,n,r=!1){const s=new li;s.updateFromServerResponse(n);const i=new zn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Iu(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];J(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?A0(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new li;l.updateFromIdToken(r);const u=new zn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Dh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy=new Map;function $n(t){Jn(t instanceof Function,"Expected a class definition");let e=Iy.get(t);return e?(Jn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Iy.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}C0.type="NONE";const Sy=C0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bl(t,e,n){return`firebase:${t}:${e}:${n}`}class ui{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Bl(this.userKey,s.apiKey,i),this.fullPersistenceKey=Bl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?zn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ui($n(Sy),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||$n(Sy);const o=Bl(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const f=await d._get(o);if(f){const m=zn._fromJSON(e,f);d!==i&&(l=m),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new ui(i,e,r):(i=u[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new ui(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ky(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(b0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(N0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(j0(e))return"Blackberry";if(O0(e))return"Webos";if(R0(e))return"Safari";if((e.includes("chrome/")||P0(e))&&!e.includes("edge/"))return"Chrome";if(D0(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function N0(t=St()){return/firefox\//i.test(t)}function R0(t=St()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function P0(t=St()){return/crios\//i.test(t)}function b0(t=St()){return/iemobile/i.test(t)}function D0(t=St()){return/android/i.test(t)}function j0(t=St()){return/blackberry/i.test(t)}function O0(t=St()){return/webos/i.test(t)}function ap(t=St()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function OA(t=St()){var e;return ap(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function LA(){return Jx()&&document.documentMode===10}function L0(t=St()){return ap(t)||D0(t)||O0(t)||j0(t)||/windows phone/i.test(t)||b0(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(t,e=[]){let n;switch(t){case"Browser":n=ky(St());break;case"Worker":n=`${ky(St())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Li}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const u=e(i);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MA(t,e={}){return Kr(t,"GET","/v2/passwordPolicy",qr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA=6;class UA{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:FA,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xy(this),this.idTokenSubscription=new xy(this),this.beforeStateQueue=new VA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=E0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=$n(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await ui.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await x0(this,{idToken:e}),r=await zn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(In(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Iu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=wA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(In(this.app))return Promise.reject(Hn(this));const n=e?Xe(e):null;return n&&J(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&J(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return In(this.app)?Promise.reject(Hn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return In(this.app)?Promise.reject(Hn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($n(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await MA(this),n=new UA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Sa("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await jA(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&$n(e)||this._popupRedirectResolver;J(n,this,"argument-error"),this.redirectPersistenceManager=await ui.create(this,[$n(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=V0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&yA(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function As(t){return Xe(t)}class xy{constructor(e){this.auth=e,this.observer=null,this.addObserver=o1(n=>this.observer=n)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zA(t){rc=t}function M0(t){return rc.loadJS(t)}function $A(){return rc.recaptchaEnterpriseScript}function WA(){return rc.gapiScript}function HA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const qA="recaptcha-enterprise",KA="NO_RECAPTCHA";class GA{constructor(e){this.type=qA,this.auth=As(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{xA(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new kA(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(u=>{l(u)})})}function s(i,o,l){const u=window.grecaptcha;Ey(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(KA)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&Ey(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=$A();u.length!==0&&(u+=l),M0(u).then(()=>{s(l,i,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function Ay(t,e,n,r=!1){const s=new GA(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function jh(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Ay(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Ay(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(t,e){const n=np(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(ia(i,e??{}))return s;mn(s,"already-initialized")}return n.initialize({options:e})}function YA(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map($n);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function XA(t,e,n){const r=As(t);J(r._canInitEmulator,r,"emulator-config-failed"),J(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=F0(e),{host:o,port:l}=JA(e),u=l===null?"":`:${l}`;r.config.emulator={url:`${i}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),ZA()}function F0(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function JA(t){const e=F0(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Cy(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Cy(o)}}}function Cy(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function ZA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Bn("not implemented")}_getIdTokenResponse(e){return Bn("not implemented")}_linkToIdToken(e,n){return Bn("not implemented")}_getReauthenticationResolver(e){return Bn("not implemented")}}async function eC(t,e){return Kr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tC(t,e){return Aa(t,"POST","/v1/accounts:signInWithPassword",qr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nC(t,e){return Aa(t,"POST","/v1/accounts:signInWithEmailLink",qr(t,e))}async function rC(t,e){return Aa(t,"POST","/v1/accounts:signInWithEmailLink",qr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la extends lp{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new la(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new la(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jh(e,n,"signInWithPassword",tC);case"emailLink":return nC(e,{email:this._email,oobCode:this._password});default:mn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jh(e,r,"signUpPassword",eC);case"emailLink":return rC(e,{idToken:n,email:this._email,oobCode:this._password});default:mn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ci(t,e){return Aa(t,"POST","/v1/accounts:signInWithIdp",qr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC="http://localhost";class ws extends lp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ws(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):mn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=rp(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new ws(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ci(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ci(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ci(e,n)}buildRequest(){const e={requestUri:sC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ka(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function oC(t){const e=wo(Eo(t)).link,n=e?wo(Eo(e)).deep_link_id:null,r=wo(Eo(t)).deep_link_id;return(r?wo(Eo(r)).link:null)||r||n||e||t}class up{constructor(e){var n,r,s,i,o,l;const u=wo(Eo(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,f=(r=u.oobCode)!==null&&r!==void 0?r:null,m=iC((s=u.mode)!==null&&s!==void 0?s:null);J(d&&f&&m,"argument-error"),this.apiKey=d,this.operation=m,this.code=f,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=oC(e);try{return new up(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(){this.providerId=Vi.PROVIDER_ID}static credential(e,n){return la._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=up.parseLink(n);return J(r,"argument-error"),la._fromEmailAndCode(e,r.code,r.tenantId)}}Vi.PROVIDER_ID="password";Vi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Vi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca extends U0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr extends Ca{constructor(){super("facebook.com")}static credential(e){return ws._fromParams({providerId:gr.PROVIDER_ID,signInMethod:gr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gr.credentialFromTaggedObject(e)}static credentialFromError(e){return gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gr.credential(e.oauthAccessToken)}catch{return null}}}gr.FACEBOOK_SIGN_IN_METHOD="facebook.com";gr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends Ca{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ws._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return yr.credential(n,r)}catch{return null}}}yr.GOOGLE_SIGN_IN_METHOD="google.com";yr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends Ca{constructor(){super("github.com")}static credential(e){return ws._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vr.credential(e.oauthAccessToken)}catch{return null}}}vr.GITHUB_SIGN_IN_METHOD="github.com";vr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends Ca{constructor(){super("twitter.com")}static credential(e,n){return ws._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return _r.credentialFromTaggedObject(e)}static credentialFromError(e){return _r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return _r.credential(n,r)}catch{return null}}}_r.TWITTER_SIGN_IN_METHOD="twitter.com";_r.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aC(t,e){return Aa(t,"POST","/v1/accounts:signUp",qr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await zn._fromIdTokenResponse(e,r,s),o=Ny(r);return new Es({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Ny(r);return new Es({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Ny(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su extends sr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Su.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Su(e,n,r,s)}}function B0(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Su._fromErrorAndOperation(t,i,e,r):i})}async function lC(t,e,n=!1){const r=await aa(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Es._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uC(t,e,n=!1){const{auth:r}=t;if(In(r.app))return Promise.reject(Hn(r));const s="reauthenticate";try{const i=await aa(t,B0(r,s,e,t),n);J(i.idToken,r,"internal-error");const o=op(i.idToken);J(o,r,"internal-error");const{sub:l}=o;return J(t.uid===l,r,"user-mismatch"),Es._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&mn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z0(t,e,n=!1){if(In(t.app))return Promise.reject(Hn(t));const r="signIn",s=await B0(t,r,e),i=await Es._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function cC(t,e){return z0(As(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $0(t){const e=As(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function dC(t,e,n){if(In(t.app))return Promise.reject(Hn(t));const r=As(t),o=await jh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",aC).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&$0(t),u}),l=await Es._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function hC(t,e,n){return In(t.app)?Promise.reject(Hn(t)):cC(Xe(t),Vi.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&$0(t),r})}function fC(t,e,n,r){return Xe(t).onIdTokenChanged(e,n,r)}function pC(t,e,n){return Xe(t).beforeAuthStateChanged(e,n)}function mC(t,e,n,r){return Xe(t).onAuthStateChanged(e,n,r)}function gC(t){return Xe(t).signOut()}const ku="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ku,"1"),this.storage.removeItem(ku),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC=1e3,vC=10;class H0 extends W0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=L0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);LA()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,vC):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},yC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}H0.type="LOCAL";const _C=H0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0 extends W0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}q0.type="SESSION";const K0=q0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new sc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async d=>d(n.origin,i)),u=await wC(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}sc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,u)=>{const d=cp("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(){return window}function TC(t){An().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G0(){return typeof An().WorkerGlobalScope<"u"&&typeof An().importScripts=="function"}async function IC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function SC(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function kC(){return G0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0="firebaseLocalStorageDb",xC=1,xu="firebaseLocalStorage",Y0="fbase_key";class Na{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ic(t,e){return t.transaction([xu],e?"readwrite":"readonly").objectStore(xu)}function AC(){const t=indexedDB.deleteDatabase(Q0);return new Na(t).toPromise()}function Oh(){const t=indexedDB.open(Q0,xC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(xu,{keyPath:Y0})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(xu)?e(r):(r.close(),await AC(),e(await Oh()))})})}async function Ry(t,e,n){const r=ic(t,!0).put({[Y0]:e,value:n});return new Na(r).toPromise()}async function CC(t,e){const n=ic(t,!1).get(e),r=await new Na(n).toPromise();return r===void 0?null:r.value}function Py(t,e){const n=ic(t,!0).delete(e);return new Na(n).toPromise()}const NC=800,RC=3;class X0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Oh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>RC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return G0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=sc._getInstance(kC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await IC(),!this.activeServiceWorker)return;this.sender=new EC(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||SC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Oh();return await Ry(e,ku,"1"),await Py(e,ku),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Ry(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>CC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Py(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=ic(s,!1).getAll();return new Na(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),NC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}X0.type="LOCAL";const PC=X0;new xa(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bC(t,e){return e?$n(e):(J(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp extends lp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ci(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ci(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ci(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function DC(t){return z0(t.auth,new dp(t),t.bypassAuthState)}function jC(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),uC(n,new dp(t),t.bypassAuthState)}async function OC(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),lC(n,new dp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return DC;case"linkViaPopup":case"linkViaRedirect":return OC;case"reauthViaPopup":case"reauthViaRedirect":return jC;default:mn(this.auth,"internal-error")}}resolve(e){Jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=new xa(2e3,1e4);class ti extends J0{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,ti.currentPopupAction&&ti.currentPopupAction.cancel(),ti.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return J(e,this.auth,"internal-error"),e}async onExecution(){Jn(this.filter.length===1,"Popup operations only handle one event");const e=cp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(xn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(xn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ti.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(xn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,LC.get())};e()}}ti.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC="pendingRedirect",zl=new Map;class MC extends J0{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=zl.get(this.auth._key());if(!e){try{const r=await FC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}zl.set(this.auth._key(),e)}return this.bypassAuthState||zl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function FC(t,e){const n=zC(e),r=BC(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function UC(t,e){zl.set(t._key(),e)}function BC(t){return $n(t._redirectPersistence)}function zC(t){return Bl(VC,t.config.apiKey,t.name)}async function $C(t,e,n=!1){if(In(t.app))return Promise.reject(Hn(t));const r=As(t),s=bC(r,e),o=await new MC(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC=10*60*1e3;class HC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!qC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Z0(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(xn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=WC&&this.cachedEventUids.clear(),this.cachedEventUids.has(by(e))}saveEventToCache(e){this.cachedEventUids.add(by(e)),this.lastProcessedEventTime=Date.now()}}function by(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Z0({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function qC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Z0(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KC(t,e={}){return Kr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,QC=/^https?/;async function YC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await KC(t);for(const n of e)try{if(XC(n))return}catch{}mn(t,"unauthorized-domain")}function XC(t){const e=bh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!QC.test(n))return!1;if(GC.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC=new xa(3e4,6e4);function Dy(){const t=An().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function ZC(t){return new Promise((e,n)=>{var r,s,i;function o(){Dy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Dy(),n(xn(t,"network-request-failed"))},timeout:JC.get()})}if(!((s=(r=An().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=An().gapi)===null||i===void 0)&&i.load)o();else{const l=HA("iframefcb");return An()[l]=()=>{gapi.load?o():n(xn(t,"network-request-failed"))},M0(`${WA()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw $l=null,e})}let $l=null;function eN(t){return $l=$l||ZC(t),$l}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN=new xa(5e3,15e3),nN="__/auth/iframe",rN="emulator/auth/iframe",sN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},iN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function oN(t){const e=t.config;J(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ip(e,rN):`https://${t.config.authDomain}/${nN}`,r={apiKey:e.apiKey,appName:t.name,v:Li},s=iN.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${ka(r).slice(1)}`}async function aN(t){const e=await eN(t),n=An().gapi;return J(n,t,"internal-error"),e.open({where:document.body,url:oN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sN,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=xn(t,"network-request-failed"),l=An().setTimeout(()=>{i(o)},tN.get());function u(){An().clearTimeout(l),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},uN=500,cN=600,dN="_blank",hN="http://localhost";class jy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function fN(t,e,n,r=uN,s=cN){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},lN),{width:r.toString(),height:s.toString(),top:i,left:o}),d=St().toLowerCase();n&&(l=P0(d)?dN:n),N0(d)&&(e=e||hN,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[x,C])=>`${g}${x}=${C},`,"");if(OA(d)&&l!=="_self")return pN(e||"",l),new jy(null);const m=window.open(e||"",l,f);J(m,t,"popup-blocked");try{m.focus()}catch{}return new jy(m)}function pN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN="__/auth/handler",gN="emulator/auth/handler",yN=encodeURIComponent("fac");async function Oy(t,e,n,r,s,i){J(t.config.authDomain,t,"auth-domain-config-required"),J(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Li,eventId:s};if(e instanceof U0){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",i1(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries({}))o[f]=m}if(e instanceof Ca){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const u=await t._getAppCheckToken(),d=u?`#${yN}=${encodeURIComponent(u)}`:"";return`${vN(t)}?${ka(l).slice(1)}${d}`}function vN({config:t}){return t.emulator?ip(t,gN):`https://${t.authDomain}/${mN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Id="webStorageSupport";class _N{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=K0,this._completeRedirectFn=$C,this._overrideRedirectResult=UC}async _openPopup(e,n,r,s){var i;Jn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Oy(e,n,r,bh(),s);return fN(e,o,cp())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Oy(e,n,r,bh(),s);return TC(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Jn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await aN(e),r=new HC(e);return n.register("authEvent",s=>(J(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Id,{type:Id},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Id];o!==void 0&&n(!!o),mn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=YC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return L0()||R0()||ap()}}const wN=_N;var Ly="@firebase/auth",Vy="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function IN(t){_i(new _s("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;J(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:V0(t)},d=new BA(r,s,i,u);return YA(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),_i(new _s("auth-internal",e=>{const n=As(e.getProvider("auth").getImmediate());return(r=>new EN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Or(Ly,Vy,TN(t)),Or(Ly,Vy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=5*60,kN=f0("authIdTokenMaxAge")||SN;let My=null;const xN=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>kN)return;const s=n==null?void 0:n.token;My!==s&&(My=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function AN(t=y0()){const e=np(t,"auth");if(e.isInitialized())return e.getImmediate();const n=QA(t,{popupRedirectResolver:wN,persistence:[PC,_C,K0]}),r=f0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=xN(i.toString());pC(n,o,()=>o(n.currentUser)),fC(n,l=>o(l))}}const s=d0("auth");return s&&XA(n,`http://${s}`),n}function CN(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}zA({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=xn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",CN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});IN("Browser");var Fy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hs,eE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,y){function k(){}k.prototype=y.prototype,S.D=y.prototype,S.prototype=new k,S.prototype.constructor=S,S.C=function(T,b,R){for(var I=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)I[pe-2]=arguments[pe];return y.prototype[b].apply(T,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,y,k){k||(k=0);var T=Array(16);if(typeof y=="string")for(var b=0;16>b;++b)T[b]=y.charCodeAt(k++)|y.charCodeAt(k++)<<8|y.charCodeAt(k++)<<16|y.charCodeAt(k++)<<24;else for(b=0;16>b;++b)T[b]=y[k++]|y[k++]<<8|y[k++]<<16|y[k++]<<24;y=S.g[0],k=S.g[1],b=S.g[2];var R=S.g[3],I=y+(R^k&(b^R))+T[0]+3614090360&4294967295;y=k+(I<<7&4294967295|I>>>25),I=R+(b^y&(k^b))+T[1]+3905402710&4294967295,R=y+(I<<12&4294967295|I>>>20),I=b+(k^R&(y^k))+T[2]+606105819&4294967295,b=R+(I<<17&4294967295|I>>>15),I=k+(y^b&(R^y))+T[3]+3250441966&4294967295,k=b+(I<<22&4294967295|I>>>10),I=y+(R^k&(b^R))+T[4]+4118548399&4294967295,y=k+(I<<7&4294967295|I>>>25),I=R+(b^y&(k^b))+T[5]+1200080426&4294967295,R=y+(I<<12&4294967295|I>>>20),I=b+(k^R&(y^k))+T[6]+2821735955&4294967295,b=R+(I<<17&4294967295|I>>>15),I=k+(y^b&(R^y))+T[7]+4249261313&4294967295,k=b+(I<<22&4294967295|I>>>10),I=y+(R^k&(b^R))+T[8]+1770035416&4294967295,y=k+(I<<7&4294967295|I>>>25),I=R+(b^y&(k^b))+T[9]+2336552879&4294967295,R=y+(I<<12&4294967295|I>>>20),I=b+(k^R&(y^k))+T[10]+4294925233&4294967295,b=R+(I<<17&4294967295|I>>>15),I=k+(y^b&(R^y))+T[11]+2304563134&4294967295,k=b+(I<<22&4294967295|I>>>10),I=y+(R^k&(b^R))+T[12]+1804603682&4294967295,y=k+(I<<7&4294967295|I>>>25),I=R+(b^y&(k^b))+T[13]+4254626195&4294967295,R=y+(I<<12&4294967295|I>>>20),I=b+(k^R&(y^k))+T[14]+2792965006&4294967295,b=R+(I<<17&4294967295|I>>>15),I=k+(y^b&(R^y))+T[15]+1236535329&4294967295,k=b+(I<<22&4294967295|I>>>10),I=y+(b^R&(k^b))+T[1]+4129170786&4294967295,y=k+(I<<5&4294967295|I>>>27),I=R+(k^b&(y^k))+T[6]+3225465664&4294967295,R=y+(I<<9&4294967295|I>>>23),I=b+(y^k&(R^y))+T[11]+643717713&4294967295,b=R+(I<<14&4294967295|I>>>18),I=k+(R^y&(b^R))+T[0]+3921069994&4294967295,k=b+(I<<20&4294967295|I>>>12),I=y+(b^R&(k^b))+T[5]+3593408605&4294967295,y=k+(I<<5&4294967295|I>>>27),I=R+(k^b&(y^k))+T[10]+38016083&4294967295,R=y+(I<<9&4294967295|I>>>23),I=b+(y^k&(R^y))+T[15]+3634488961&4294967295,b=R+(I<<14&4294967295|I>>>18),I=k+(R^y&(b^R))+T[4]+3889429448&4294967295,k=b+(I<<20&4294967295|I>>>12),I=y+(b^R&(k^b))+T[9]+568446438&4294967295,y=k+(I<<5&4294967295|I>>>27),I=R+(k^b&(y^k))+T[14]+3275163606&4294967295,R=y+(I<<9&4294967295|I>>>23),I=b+(y^k&(R^y))+T[3]+4107603335&4294967295,b=R+(I<<14&4294967295|I>>>18),I=k+(R^y&(b^R))+T[8]+1163531501&4294967295,k=b+(I<<20&4294967295|I>>>12),I=y+(b^R&(k^b))+T[13]+2850285829&4294967295,y=k+(I<<5&4294967295|I>>>27),I=R+(k^b&(y^k))+T[2]+4243563512&4294967295,R=y+(I<<9&4294967295|I>>>23),I=b+(y^k&(R^y))+T[7]+1735328473&4294967295,b=R+(I<<14&4294967295|I>>>18),I=k+(R^y&(b^R))+T[12]+2368359562&4294967295,k=b+(I<<20&4294967295|I>>>12),I=y+(k^b^R)+T[5]+4294588738&4294967295,y=k+(I<<4&4294967295|I>>>28),I=R+(y^k^b)+T[8]+2272392833&4294967295,R=y+(I<<11&4294967295|I>>>21),I=b+(R^y^k)+T[11]+1839030562&4294967295,b=R+(I<<16&4294967295|I>>>16),I=k+(b^R^y)+T[14]+4259657740&4294967295,k=b+(I<<23&4294967295|I>>>9),I=y+(k^b^R)+T[1]+2763975236&4294967295,y=k+(I<<4&4294967295|I>>>28),I=R+(y^k^b)+T[4]+1272893353&4294967295,R=y+(I<<11&4294967295|I>>>21),I=b+(R^y^k)+T[7]+4139469664&4294967295,b=R+(I<<16&4294967295|I>>>16),I=k+(b^R^y)+T[10]+3200236656&4294967295,k=b+(I<<23&4294967295|I>>>9),I=y+(k^b^R)+T[13]+681279174&4294967295,y=k+(I<<4&4294967295|I>>>28),I=R+(y^k^b)+T[0]+3936430074&4294967295,R=y+(I<<11&4294967295|I>>>21),I=b+(R^y^k)+T[3]+3572445317&4294967295,b=R+(I<<16&4294967295|I>>>16),I=k+(b^R^y)+T[6]+76029189&4294967295,k=b+(I<<23&4294967295|I>>>9),I=y+(k^b^R)+T[9]+3654602809&4294967295,y=k+(I<<4&4294967295|I>>>28),I=R+(y^k^b)+T[12]+3873151461&4294967295,R=y+(I<<11&4294967295|I>>>21),I=b+(R^y^k)+T[15]+530742520&4294967295,b=R+(I<<16&4294967295|I>>>16),I=k+(b^R^y)+T[2]+3299628645&4294967295,k=b+(I<<23&4294967295|I>>>9),I=y+(b^(k|~R))+T[0]+4096336452&4294967295,y=k+(I<<6&4294967295|I>>>26),I=R+(k^(y|~b))+T[7]+1126891415&4294967295,R=y+(I<<10&4294967295|I>>>22),I=b+(y^(R|~k))+T[14]+2878612391&4294967295,b=R+(I<<15&4294967295|I>>>17),I=k+(R^(b|~y))+T[5]+4237533241&4294967295,k=b+(I<<21&4294967295|I>>>11),I=y+(b^(k|~R))+T[12]+1700485571&4294967295,y=k+(I<<6&4294967295|I>>>26),I=R+(k^(y|~b))+T[3]+2399980690&4294967295,R=y+(I<<10&4294967295|I>>>22),I=b+(y^(R|~k))+T[10]+4293915773&4294967295,b=R+(I<<15&4294967295|I>>>17),I=k+(R^(b|~y))+T[1]+2240044497&4294967295,k=b+(I<<21&4294967295|I>>>11),I=y+(b^(k|~R))+T[8]+1873313359&4294967295,y=k+(I<<6&4294967295|I>>>26),I=R+(k^(y|~b))+T[15]+4264355552&4294967295,R=y+(I<<10&4294967295|I>>>22),I=b+(y^(R|~k))+T[6]+2734768916&4294967295,b=R+(I<<15&4294967295|I>>>17),I=k+(R^(b|~y))+T[13]+1309151649&4294967295,k=b+(I<<21&4294967295|I>>>11),I=y+(b^(k|~R))+T[4]+4149444226&4294967295,y=k+(I<<6&4294967295|I>>>26),I=R+(k^(y|~b))+T[11]+3174756917&4294967295,R=y+(I<<10&4294967295|I>>>22),I=b+(y^(R|~k))+T[2]+718787259&4294967295,b=R+(I<<15&4294967295|I>>>17),I=k+(R^(b|~y))+T[9]+3951481745&4294967295,S.g[0]=S.g[0]+y&4294967295,S.g[1]=S.g[1]+(b+(I<<21&4294967295|I>>>11))&4294967295,S.g[2]=S.g[2]+b&4294967295,S.g[3]=S.g[3]+R&4294967295}r.prototype.u=function(S,y){y===void 0&&(y=S.length);for(var k=y-this.blockSize,T=this.B,b=this.h,R=0;R<y;){if(b==0)for(;R<=k;)s(this,S,R),R+=this.blockSize;if(typeof S=="string"){for(;R<y;)if(T[b++]=S.charCodeAt(R++),b==this.blockSize){s(this,T),b=0;break}}else for(;R<y;)if(T[b++]=S[R++],b==this.blockSize){s(this,T),b=0;break}}this.h=b,this.o+=y},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var y=1;y<S.length-8;++y)S[y]=0;var k=8*this.o;for(y=S.length-8;y<S.length;++y)S[y]=k&255,k/=256;for(this.u(S),S=Array(16),y=k=0;4>y;++y)for(var T=0;32>T;T+=8)S[k++]=this.g[y]>>>T&255;return S};function i(S,y){var k=l;return Object.prototype.hasOwnProperty.call(k,S)?k[S]:k[S]=y(S)}function o(S,y){this.h=y;for(var k=[],T=!0,b=S.length-1;0<=b;b--){var R=S[b]|0;T&&R==y||(k[b]=R,T=!1)}this.g=k}var l={};function u(S){return-128<=S&&128>S?i(S,function(y){return new o([y|0],0>y?-1:0)}):new o([S|0],0>S?-1:0)}function d(S){if(isNaN(S)||!isFinite(S))return m;if(0>S)return N(d(-S));for(var y=[],k=1,T=0;S>=k;T++)y[T]=S/k|0,k*=4294967296;return new o(y,0)}function f(S,y){if(S.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(S.charAt(0)=="-")return N(f(S.substring(1),y));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=d(Math.pow(y,8)),T=m,b=0;b<S.length;b+=8){var R=Math.min(8,S.length-b),I=parseInt(S.substring(b,b+R),y);8>R?(R=d(Math.pow(y,R)),T=T.j(R).add(d(I))):(T=T.j(k),T=T.add(d(I)))}return T}var m=u(0),g=u(1),x=u(16777216);t=o.prototype,t.m=function(){if(P(this))return-N(this).m();for(var S=0,y=1,k=0;k<this.g.length;k++){var T=this.i(k);S+=(0<=T?T:4294967296+T)*y,y*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(C(this))return"0";if(P(this))return"-"+N(this).toString(S);for(var y=d(Math.pow(S,6)),k=this,T="";;){var b=D(k,y).g;k=w(k,b.j(y));var R=((0<k.g.length?k.g[0]:k.h)>>>0).toString(S);if(k=b,C(k))return R+T;for(;6>R.length;)R="0"+R;T=R+T}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function C(S){if(S.h!=0)return!1;for(var y=0;y<S.g.length;y++)if(S.g[y]!=0)return!1;return!0}function P(S){return S.h==-1}t.l=function(S){return S=w(this,S),P(S)?-1:C(S)?0:1};function N(S){for(var y=S.g.length,k=[],T=0;T<y;T++)k[T]=~S.g[T];return new o(k,~S.h).add(g)}t.abs=function(){return P(this)?N(this):this},t.add=function(S){for(var y=Math.max(this.g.length,S.g.length),k=[],T=0,b=0;b<=y;b++){var R=T+(this.i(b)&65535)+(S.i(b)&65535),I=(R>>>16)+(this.i(b)>>>16)+(S.i(b)>>>16);T=I>>>16,R&=65535,I&=65535,k[b]=I<<16|R}return new o(k,k[k.length-1]&-2147483648?-1:0)};function w(S,y){return S.add(N(y))}t.j=function(S){if(C(this)||C(S))return m;if(P(this))return P(S)?N(this).j(N(S)):N(N(this).j(S));if(P(S))return N(this.j(N(S)));if(0>this.l(x)&&0>S.l(x))return d(this.m()*S.m());for(var y=this.g.length+S.g.length,k=[],T=0;T<2*y;T++)k[T]=0;for(T=0;T<this.g.length;T++)for(var b=0;b<S.g.length;b++){var R=this.i(T)>>>16,I=this.i(T)&65535,pe=S.i(b)>>>16,$e=S.i(b)&65535;k[2*T+2*b]+=I*$e,_(k,2*T+2*b),k[2*T+2*b+1]+=R*$e,_(k,2*T+2*b+1),k[2*T+2*b+1]+=I*pe,_(k,2*T+2*b+1),k[2*T+2*b+2]+=R*pe,_(k,2*T+2*b+2)}for(T=0;T<y;T++)k[T]=k[2*T+1]<<16|k[2*T];for(T=y;T<2*y;T++)k[T]=0;return new o(k,0)};function _(S,y){for(;(S[y]&65535)!=S[y];)S[y+1]+=S[y]>>>16,S[y]&=65535,y++}function E(S,y){this.g=S,this.h=y}function D(S,y){if(C(y))throw Error("division by zero");if(C(S))return new E(m,m);if(P(S))return y=D(N(S),y),new E(N(y.g),N(y.h));if(P(y))return y=D(S,N(y)),new E(N(y.g),y.h);if(30<S.g.length){if(P(S)||P(y))throw Error("slowDivide_ only works with positive integers.");for(var k=g,T=y;0>=T.l(S);)k=O(k),T=O(T);var b=M(k,1),R=M(T,1);for(T=M(T,2),k=M(k,2);!C(T);){var I=R.add(T);0>=I.l(S)&&(b=b.add(k),R=I),T=M(T,1),k=M(k,1)}return y=w(S,b.j(y)),new E(b,y)}for(b=m;0<=S.l(y);){for(k=Math.max(1,Math.floor(S.m()/y.m())),T=Math.ceil(Math.log(k)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),R=d(k),I=R.j(y);P(I)||0<I.l(S);)k-=T,R=d(k),I=R.j(y);C(R)&&(R=g),b=b.add(R),S=w(S,I)}return new E(b,S)}t.A=function(S){return D(this,S).h},t.and=function(S){for(var y=Math.max(this.g.length,S.g.length),k=[],T=0;T<y;T++)k[T]=this.i(T)&S.i(T);return new o(k,this.h&S.h)},t.or=function(S){for(var y=Math.max(this.g.length,S.g.length),k=[],T=0;T<y;T++)k[T]=this.i(T)|S.i(T);return new o(k,this.h|S.h)},t.xor=function(S){for(var y=Math.max(this.g.length,S.g.length),k=[],T=0;T<y;T++)k[T]=this.i(T)^S.i(T);return new o(k,this.h^S.h)};function O(S){for(var y=S.g.length+1,k=[],T=0;T<y;T++)k[T]=S.i(T)<<1|S.i(T-1)>>>31;return new o(k,S.h)}function M(S,y){var k=y>>5;y%=32;for(var T=S.g.length-k,b=[],R=0;R<T;R++)b[R]=0<y?S.i(R+k)>>>y|S.i(R+k+1)<<32-y:S.i(R+k);return new o(b,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,eE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,hs=o}).apply(typeof Fy<"u"?Fy:typeof self<"u"?self:typeof window<"u"?window:{});var Il=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tE,To,nE,Wl,Lh,rE,sE,iE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,p){return a==Array.prototype||a==Object.prototype||(a[h]=p.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Il=="object"&&Il];for(var h=0;h<a.length;++h){var p=a[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var p=r;a=a.split(".");for(var v=0;v<a.length-1;v++){var j=a[v];if(!(j in p))break e;p=p[j]}a=a[a.length-1],v=p[a],h=h(v),h!=v&&h!=null&&e(p,a,{configurable:!0,writable:!0,value:h})}}function i(a,h){a instanceof String&&(a+="");var p=0,v=!1,j={next:function(){if(!v&&p<a.length){var L=p++;return{value:h(L,a[L]),done:!1}}return v=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}s("Array.prototype.values",function(a){return a||function(){return i(this,function(h,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function d(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function f(a,h,p){return a.call.apply(a.bind,arguments)}function m(a,h,p){if(!a)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,v),a.apply(h,j)}}return function(){return a.apply(h,arguments)}}function g(a,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,g.apply(null,arguments)}function x(a,h){var p=Array.prototype.slice.call(arguments,1);return function(){var v=p.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function C(a,h){function p(){}p.prototype=h.prototype,a.aa=h.prototype,a.prototype=new p,a.prototype.constructor=a,a.Qb=function(v,j,L){for(var $=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)$[Te-2]=arguments[Te];return h.prototype[j].apply(v,$)}}function P(a){const h=a.length;if(0<h){const p=Array(h);for(let v=0;v<h;v++)p[v]=a[v];return p}return[]}function N(a,h){for(let p=1;p<arguments.length;p++){const v=arguments[p];if(u(v)){const j=a.length||0,L=v.length||0;a.length=j+L;for(let $=0;$<L;$++)a[j+$]=v[$]}else a.push(v)}}class w{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function _(a){return/^[\s\xa0]*$/.test(a)}function E(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function D(a){return D[" "](a),a}D[" "]=function(){};var O=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function M(a,h,p){for(const v in a)h.call(p,a[v],v,a)}function S(a,h){for(const p in a)h.call(void 0,a[p],p,a)}function y(a){const h={};for(const p in a)h[p]=a[p];return h}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(a,h){let p,v;for(let j=1;j<arguments.length;j++){v=arguments[j];for(p in v)a[p]=v[p];for(let L=0;L<k.length;L++)p=k[L],Object.prototype.hasOwnProperty.call(v,p)&&(a[p]=v[p])}}function b(a){var h=1;a=a.split(":");const p=[];for(;0<h&&a.length;)p.push(a.shift()),h--;return a.length&&p.push(a.join(":")),p}function R(a){l.setTimeout(()=>{throw a},0)}function I(){var a=W;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class pe{constructor(){this.h=this.g=null}add(h,p){const v=$e.get();v.set(h,p),this.h?this.h.next=v:this.g=v,this.h=v}}var $e=new w(()=>new Le,a=>a.reset());class Le{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Pe,V=!1,W=new pe,G=()=>{const a=l.Promise.resolve(void 0);Pe=()=>{a.then(oe)}};var oe=()=>{for(var a;a=I();){try{a.h.call(a.g)}catch(p){R(p)}var h=$e;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}V=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ie(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}ie.prototype.h=function(){this.defaultPrevented=!0};var Ce=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const p=()=>{};l.addEventListener("test",p,h),l.removeEventListener("test",p,h)}catch{}return a}();function ne(a,h){if(ie.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var p=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(O){e:{try{D(h.nodeName);var j=!0;break e}catch{}j=!1}j||(h=null)}}else p=="mouseover"?h=a.fromElement:p=="mouseout"&&(h=a.toElement);this.relatedTarget=h,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:X[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&ne.aa.h.call(this)}}C(ne,ie);var X={2:"touch",3:"pen",4:"mouse"};ne.prototype.h=function(){ne.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var ue="closure_listenable_"+(1e6*Math.random()|0),ft=0;function Pn(a,h,p,v,j){this.listener=a,this.proxy=null,this.src=h,this.type=p,this.capture=!!v,this.ha=j,this.key=++ft,this.da=this.fa=!1}function bn(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function sn(a){this.src=a,this.g={},this.h=0}sn.prototype.add=function(a,h,p,v,j){var L=a.toString();a=this.g[L],a||(a=this.g[L]=[],this.h++);var $=kt(a,h,v,j);return-1<$?(h=a[$],p||(h.fa=!1)):(h=new Pn(h,this.src,L,!!v,j),h.fa=p,a.push(h)),h};function Qr(a,h){var p=h.type;if(p in a.g){var v=a.g[p],j=Array.prototype.indexOf.call(v,h,void 0),L;(L=0<=j)&&Array.prototype.splice.call(v,j,1),L&&(bn(h),a.g[p].length==0&&(delete a.g[p],a.h--))}}function kt(a,h,p,v){for(var j=0;j<a.length;++j){var L=a[j];if(!L.da&&L.listener==h&&L.capture==!!p&&L.ha==v)return j}return-1}var vn="closure_lm_"+(1e6*Math.random()|0),Hi={};function Yr(a,h,p,v,j){if(Array.isArray(h)){for(var L=0;L<h.length;L++)Yr(a,h[L],p,v,j);return null}return p=za(p),a&&a[ue]?a.K(h,p,d(v)?!!v.capture:!1,j):Cc(a,h,p,!1,v,j)}function Cc(a,h,p,v,j,L){if(!h)throw Error("Invalid event type");var $=d(j)?!!j.capture:!!j,Te=Ps(a);if(Te||(a[vn]=Te=new sn(a)),p=Te.add(h,p,v,$,L),p.proxy)return p;if(v=or(),p.proxy=v,v.src=a,v.listener=p,a.addEventListener)Ce||(j=$),j===void 0&&(j=!1),a.addEventListener(h.toString(),v,j);else if(a.attachEvent)a.attachEvent(Ua(h.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return p}function or(){function a(p){return h.call(a.src,a.listener,p)}const h=Ba;return a}function Fa(a,h,p,v,j){if(Array.isArray(h))for(var L=0;L<h.length;L++)Fa(a,h[L],p,v,j);else v=d(v)?!!v.capture:!!v,p=za(p),a&&a[ue]?(a=a.i,h=String(h).toString(),h in a.g&&(L=a.g[h],p=kt(L,p,v,j),-1<p&&(bn(L[p]),Array.prototype.splice.call(L,p,1),L.length==0&&(delete a.g[h],a.h--)))):a&&(a=Ps(a))&&(h=a.g[h.toString()],a=-1,h&&(a=kt(h,p,v,j)),(p=-1<a?h[a]:null)&&Rs(p))}function Rs(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[ue])Qr(h.i,a);else{var p=a.type,v=a.proxy;h.removeEventListener?h.removeEventListener(p,v,a.capture):h.detachEvent?h.detachEvent(Ua(p),v):h.addListener&&h.removeListener&&h.removeListener(v),(p=Ps(h))?(Qr(p,a),p.h==0&&(p.src=null,h[vn]=null)):bn(a)}}}function Ua(a){return a in Hi?Hi[a]:Hi[a]="on"+a}function Ba(a,h){if(a.da)a=!0;else{h=new ne(h,this);var p=a.listener,v=a.ha||a.src;a.fa&&Rs(a),a=p.call(v,h)}return a}function Ps(a){return a=a[vn],a instanceof sn?a:null}var bs="__closure_events_fn_"+(1e9*Math.random()>>>0);function za(a){return typeof a=="function"?a:(a[bs]||(a[bs]=function(h){return a.handleEvent(h)}),a[bs])}function Ke(){le.call(this),this.i=new sn(this),this.M=this,this.F=null}C(Ke,le),Ke.prototype[ue]=!0,Ke.prototype.removeEventListener=function(a,h,p,v){Fa(this,a,h,p,v)};function Ze(a,h){var p,v=a.F;if(v)for(p=[];v;v=v.F)p.push(v);if(a=a.M,v=h.type||h,typeof h=="string")h=new ie(h,a);else if(h instanceof ie)h.target=h.target||a;else{var j=h;h=new ie(v,a),T(h,j)}if(j=!0,p)for(var L=p.length-1;0<=L;L--){var $=h.g=p[L];j=Ds($,v,!0,h)&&j}if($=h.g=a,j=Ds($,v,!0,h)&&j,j=Ds($,v,!1,h)&&j,p)for(L=0;L<p.length;L++)$=h.g=p[L],j=Ds($,v,!1,h)&&j}Ke.prototype.N=function(){if(Ke.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var p=a.g[h],v=0;v<p.length;v++)bn(p[v]);delete a.g[h],a.h--}}this.F=null},Ke.prototype.K=function(a,h,p,v){return this.i.add(String(a),h,!1,p,v)},Ke.prototype.L=function(a,h,p,v){return this.i.add(String(a),h,!0,p,v)};function Ds(a,h,p,v){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var j=!0,L=0;L<h.length;++L){var $=h[L];if($&&!$.da&&$.capture==p){var Te=$.listener,it=$.ha||$.src;$.fa&&Qr(a.i,$),j=Te.call(it,v)!==!1&&j}}return j&&!v.defaultPrevented}function $a(a,h,p){if(typeof a=="function")p&&(a=g(a,p));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(a,h||0)}function qi(a){a.g=$a(()=>{a.g=null,a.i&&(a.i=!1,qi(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class Nc extends le{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:qi(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xr(a){le.call(this),this.h=a,this.g={}}C(Xr,le);var z=[];function re(a){M(a.g,function(h,p){this.g.hasOwnProperty(p)&&Rs(h)},a),a.g={}}Xr.prototype.N=function(){Xr.aa.N.call(this),re(this)},Xr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var we=l.JSON.stringify,Ee=l.JSON.parse,st=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Ft(){}Ft.prototype.h=null;function _n(a){return a.h||(a.h=a.i())}function Ki(){}var Gi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Rc(){ie.call(this,"d")}C(Rc,ie);function Pc(){ie.call(this,"c")}C(Pc,ie);var Jr={},rm=null;function Wa(){return rm=rm||new Ke}Jr.La="serverreachability";function sm(a){ie.call(this,Jr.La,a)}C(sm,ie);function Qi(a){const h=Wa();Ze(h,new sm(h))}Jr.STAT_EVENT="statevent";function im(a,h){ie.call(this,Jr.STAT_EVENT,a),this.stat=h}C(im,ie);function xt(a){const h=Wa();Ze(h,new im(h,a))}Jr.Ma="timingevent";function om(a,h){ie.call(this,Jr.Ma,a),this.size=h}C(om,ie);function Yi(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},h)}function Xi(){this.g=!0}Xi.prototype.xa=function(){this.g=!1};function LT(a,h,p,v,j,L){a.info(function(){if(a.g)if(L)for(var $="",Te=L.split("&"),it=0;it<Te.length;it++){var ge=Te[it].split("=");if(1<ge.length){var pt=ge[0];ge=ge[1];var mt=pt.split("_");$=2<=mt.length&&mt[1]=="type"?$+(pt+"="+ge+"&"):$+(pt+"=redacted&")}}else $=null;else $=L;return"XMLHTTP REQ ("+v+") [attempt "+j+"]: "+h+`
`+p+`
`+$})}function VT(a,h,p,v,j,L,$){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+j+"]: "+h+`
`+p+`
`+L+" "+$})}function js(a,h,p,v){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+FT(a,p)+(v?" "+v:"")})}function MT(a,h){a.info(function(){return"TIMEOUT: "+h})}Xi.prototype.info=function(){};function FT(a,h){if(!a.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(a=0;a<p.length;a++)if(Array.isArray(p[a])){var v=p[a];if(!(2>v.length)){var j=v[1];if(Array.isArray(j)&&!(1>j.length)){var L=j[0];if(L!="noop"&&L!="stop"&&L!="close")for(var $=1;$<j.length;$++)j[$]=""}}}}return we(p)}catch{return h}}var Ha={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},am={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},bc;function qa(){}C(qa,Ft),qa.prototype.g=function(){return new XMLHttpRequest},qa.prototype.i=function(){return{}},bc=new qa;function ar(a,h,p,v){this.j=a,this.i=h,this.l=p,this.R=v||1,this.U=new Xr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new lm}function lm(){this.i=null,this.g="",this.h=!1}var um={},Dc={};function jc(a,h,p){a.L=1,a.v=Ya(Dn(h)),a.m=p,a.P=!0,cm(a,null)}function cm(a,h){a.F=Date.now(),Ka(a),a.A=Dn(a.v);var p=a.A,v=a.R;Array.isArray(v)||(v=[String(v)]),Sm(p.i,"t",v),a.C=0,p=a.j.J,a.h=new lm,a.g=zm(a.j,p?h:null,!a.m),0<a.O&&(a.M=new Nc(g(a.Y,a,a.g),a.O)),h=a.U,p=a.g,v=a.ca;var j="readystatechange";Array.isArray(j)||(j&&(z[0]=j.toString()),j=z);for(var L=0;L<j.length;L++){var $=Yr(p,j[L],v||h.handleEvent,!1,h.h||h);if(!$)break;h.g[$.key]=$}h=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),Qi(),LT(a.i,a.u,a.A,a.l,a.R,a.m)}ar.prototype.ca=function(a){a=a.target;const h=this.M;h&&jn(a)==3?h.j():this.Y(a)},ar.prototype.Y=function(a){try{if(a==this.g)e:{const mt=jn(this.g);var h=this.g.Ba();const Vs=this.g.Z();if(!(3>mt)&&(mt!=3||this.g&&(this.h.h||this.g.oa()||Pm(this.g)))){this.J||mt!=4||h==7||(h==8||0>=Vs?Qi(3):Qi(2)),Oc(this);var p=this.g.Z();this.X=p;t:if(dm(this)){var v=Pm(this.g);a="";var j=v.length,L=jn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zr(this),Ji(this);var $="";break t}this.h.i=new l.TextDecoder}for(h=0;h<j;h++)this.h.h=!0,a+=this.h.i.decode(v[h],{stream:!(L&&h==j-1)});v.length=0,this.h.g+=a,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=p==200,VT(this.i,this.u,this.A,this.l,this.R,mt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Te,it=this.g;if((Te=it.g?it.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(Te)){var ge=Te;break t}}ge=null}if(p=ge)js(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Lc(this,p);else{this.o=!1,this.s=3,xt(12),Zr(this),Ji(this);break e}}if(this.P){p=!0;let on;for(;!this.J&&this.C<$.length;)if(on=UT(this,$),on==Dc){mt==4&&(this.s=4,xt(14),p=!1),js(this.i,this.l,null,"[Incomplete Response]");break}else if(on==um){this.s=4,xt(15),js(this.i,this.l,$,"[Invalid Chunk]"),p=!1;break}else js(this.i,this.l,on,null),Lc(this,on);if(dm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),mt!=4||$.length!=0||this.h.h||(this.s=1,xt(16),p=!1),this.o=this.o&&p,!p)js(this.i,this.l,$,"[Invalid Chunked Response]"),Zr(this),Ji(this);else if(0<$.length&&!this.W){this.W=!0;var pt=this.j;pt.g==this&&pt.ba&&!pt.M&&(pt.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),zc(pt),pt.M=!0,xt(11))}}else js(this.i,this.l,$,null),Lc(this,$);mt==4&&Zr(this),this.o&&!this.J&&(mt==4?Mm(this.j,this):(this.o=!1,Ka(this)))}else rI(this.g),p==400&&0<$.indexOf("Unknown SID")?(this.s=3,xt(12)):(this.s=0,xt(13)),Zr(this),Ji(this)}}}catch{}finally{}};function dm(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function UT(a,h){var p=a.C,v=h.indexOf(`
`,p);return v==-1?Dc:(p=Number(h.substring(p,v)),isNaN(p)?um:(v+=1,v+p>h.length?Dc:(h=h.slice(v,v+p),a.C=v+p,h)))}ar.prototype.cancel=function(){this.J=!0,Zr(this)};function Ka(a){a.S=Date.now()+a.I,hm(a,a.I)}function hm(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Yi(g(a.ba,a),h)}function Oc(a){a.B&&(l.clearTimeout(a.B),a.B=null)}ar.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(MT(this.i,this.A),this.L!=2&&(Qi(),xt(17)),Zr(this),this.s=2,Ji(this)):hm(this,this.S-a)};function Ji(a){a.j.G==0||a.J||Mm(a.j,a)}function Zr(a){Oc(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,re(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function Lc(a,h){try{var p=a.j;if(p.G!=0&&(p.g==a||Vc(p.h,a))){if(!a.K&&Vc(p.h,a)&&p.G==3){try{var v=p.Da.g.parse(h)}catch{v=null}if(Array.isArray(v)&&v.length==3){var j=v;if(j[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<a.F)nl(p),el(p);else break e;Bc(p),xt(18)}}else p.za=j[1],0<p.za-p.T&&37500>j[2]&&p.F&&p.v==0&&!p.C&&(p.C=Yi(g(p.Za,p),6e3));if(1>=mm(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else ts(p,11)}else if((a.K||p.g==a)&&nl(p),!_(h))for(j=p.Da.g.parse(h),h=0;h<j.length;h++){let ge=j[h];if(p.T=ge[0],ge=ge[1],p.G==2)if(ge[0]=="c"){p.K=ge[1],p.ia=ge[2];const pt=ge[3];pt!=null&&(p.la=pt,p.j.info("VER="+p.la));const mt=ge[4];mt!=null&&(p.Aa=mt,p.j.info("SVER="+p.Aa));const Vs=ge[5];Vs!=null&&typeof Vs=="number"&&0<Vs&&(v=1.5*Vs,p.L=v,p.j.info("backChannelRequestTimeoutMs_="+v)),v=p;const on=a.g;if(on){const sl=on.g?on.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(sl){var L=v.h;L.g||sl.indexOf("spdy")==-1&&sl.indexOf("quic")==-1&&sl.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(Mc(L,L.h),L.h=null))}if(v.D){const $c=on.g?on.g.getResponseHeader("X-HTTP-Session-Id"):null;$c&&(v.ya=$c,Se(v.I,v.D,$c))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-a.F,p.j.info("Handshake RTT: "+p.R+"ms")),v=p;var $=a;if(v.qa=Bm(v,v.J?v.ia:null,v.W),$.K){gm(v.h,$);var Te=$,it=v.L;it&&(Te.I=it),Te.B&&(Oc(Te),Ka(Te)),v.g=$}else Lm(v);0<p.i.length&&tl(p)}else ge[0]!="stop"&&ge[0]!="close"||ts(p,7);else p.G==3&&(ge[0]=="stop"||ge[0]=="close"?ge[0]=="stop"?ts(p,7):Uc(p):ge[0]!="noop"&&p.l&&p.l.ta(ge),p.v=0)}}Qi(4)}catch{}}var BT=class{constructor(a,h){this.g=a,this.map=h}};function fm(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function pm(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function mm(a){return a.h?1:a.g?a.g.size:0}function Vc(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function Mc(a,h){a.g?a.g.add(h):a.h=h}function gm(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}fm.prototype.cancel=function(){if(this.i=ym(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function ym(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const p of a.g.values())h=h.concat(p.D);return h}return P(a.i)}function zT(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var h=[],p=a.length,v=0;v<p;v++)h.push(a[v]);return h}h=[],p=0;for(v in a)h[p++]=a[v];return h}function $T(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var h=[];a=a.length;for(var p=0;p<a;p++)h.push(p);return h}h=[],p=0;for(const v in a)h[p++]=v;return h}}}function vm(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var p=$T(a),v=zT(a),j=v.length,L=0;L<j;L++)h.call(void 0,v[L],p&&p[L],a)}var _m=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function WT(a,h){if(a){a=a.split("&");for(var p=0;p<a.length;p++){var v=a[p].indexOf("="),j=null;if(0<=v){var L=a[p].substring(0,v);j=a[p].substring(v+1)}else L=a[p];h(L,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function es(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof es){this.h=a.h,Ga(this,a.j),this.o=a.o,this.g=a.g,Qa(this,a.s),this.l=a.l;var h=a.i,p=new to;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),wm(this,p),this.m=a.m}else a&&(h=String(a).match(_m))?(this.h=!1,Ga(this,h[1]||"",!0),this.o=Zi(h[2]||""),this.g=Zi(h[3]||"",!0),Qa(this,h[4]),this.l=Zi(h[5]||"",!0),wm(this,h[6]||"",!0),this.m=Zi(h[7]||"")):(this.h=!1,this.i=new to(null,this.h))}es.prototype.toString=function(){var a=[],h=this.j;h&&a.push(eo(h,Em,!0),":");var p=this.g;return(p||h=="file")&&(a.push("//"),(h=this.o)&&a.push(eo(h,Em,!0),"@"),a.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&a.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(eo(p,p.charAt(0)=="/"?KT:qT,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",eo(p,QT)),a.join("")};function Dn(a){return new es(a)}function Ga(a,h,p){a.j=p?Zi(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function Qa(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function wm(a,h,p){h instanceof to?(a.i=h,YT(a.i,a.h)):(p||(h=eo(h,GT)),a.i=new to(h,a.h))}function Se(a,h,p){a.i.set(h,p)}function Ya(a){return Se(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Zi(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function eo(a,h,p){return typeof a=="string"?(a=encodeURI(a).replace(h,HT),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function HT(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Em=/[#\/\?@]/g,qT=/[#\?:]/g,KT=/[#\?]/g,GT=/[#\?@]/g,QT=/#/g;function to(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function lr(a){a.g||(a.g=new Map,a.h=0,a.i&&WT(a.i,function(h,p){a.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=to.prototype,t.add=function(a,h){lr(this),this.i=null,a=Os(this,a);var p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(h),this.h+=1,this};function Tm(a,h){lr(a),h=Os(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function Im(a,h){return lr(a),h=Os(a,h),a.g.has(h)}t.forEach=function(a,h){lr(this),this.g.forEach(function(p,v){p.forEach(function(j){a.call(h,j,v,this)},this)},this)},t.na=function(){lr(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let v=0;v<h.length;v++){const j=a[v];for(let L=0;L<j.length;L++)p.push(h[v])}return p},t.V=function(a){lr(this);let h=[];if(typeof a=="string")Im(this,a)&&(h=h.concat(this.g.get(Os(this,a))));else{a=Array.from(this.g.values());for(let p=0;p<a.length;p++)h=h.concat(a[p])}return h},t.set=function(a,h){return lr(this),this.i=null,a=Os(this,a),Im(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function Sm(a,h,p){Tm(a,h),0<p.length&&(a.i=null,a.g.set(Os(a,h),P(p)),a.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var v=h[p];const L=encodeURIComponent(String(v)),$=this.V(v);for(v=0;v<$.length;v++){var j=L;$[v]!==""&&(j+="="+encodeURIComponent(String($[v]))),a.push(j)}}return this.i=a.join("&")};function Os(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function YT(a,h){h&&!a.j&&(lr(a),a.i=null,a.g.forEach(function(p,v){var j=v.toLowerCase();v!=j&&(Tm(this,v),Sm(this,j,p))},a)),a.j=h}function XT(a,h){const p=new Xi;if(l.Image){const v=new Image;v.onload=x(ur,p,"TestLoadImage: loaded",!0,h,v),v.onerror=x(ur,p,"TestLoadImage: error",!1,h,v),v.onabort=x(ur,p,"TestLoadImage: abort",!1,h,v),v.ontimeout=x(ur,p,"TestLoadImage: timeout",!1,h,v),l.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else h(!1)}function JT(a,h){const p=new Xi,v=new AbortController,j=setTimeout(()=>{v.abort(),ur(p,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:v.signal}).then(L=>{clearTimeout(j),L.ok?ur(p,"TestPingServer: ok",!0,h):ur(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(j),ur(p,"TestPingServer: error",!1,h)})}function ur(a,h,p,v,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),v(p)}catch{}}function ZT(){this.g=new st}function eI(a,h,p){const v=p||"";try{vm(a,function(j,L){let $=j;d(j)&&($=we(j)),h.push(v+L+"="+encodeURIComponent($))})}catch(j){throw h.push(v+"type="+encodeURIComponent("_badmap")),j}}function Xa(a){this.l=a.Ub||null,this.j=a.eb||!1}C(Xa,Ft),Xa.prototype.g=function(){return new Ja(this.l,this.j)},Xa.prototype.i=function(a){return function(){return a}}({});function Ja(a,h){Ke.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Ja,Ke),t=Ja.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,ro(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,no(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ro(this)),this.g&&(this.readyState=3,ro(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;km(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function km(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?no(this):ro(this),this.readyState==3&&km(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,no(this))},t.Qa=function(a){this.g&&(this.response=a,no(this))},t.ga=function(){this.g&&no(this)};function no(a){a.readyState=4,a.l=null,a.j=null,a.v=null,ro(a)}t.setRequestHeader=function(a,h){this.u.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=h.next();return a.join(`\r
`)};function ro(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Ja.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function xm(a){let h="";return M(a,function(p,v){h+=v,h+=":",h+=p,h+=`\r
`}),h}function Fc(a,h,p){e:{for(v in p){var v=!1;break e}v=!0}v||(p=xm(p),typeof a=="string"?p!=null&&encodeURIComponent(String(p)):Se(a,h,p))}function Ve(a){Ke.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Ve,Ke);var tI=/^https?$/i,nI=["POST","PUT"];t=Ve.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,h,p,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():bc.g(),this.v=this.o?_n(this.o):_n(bc),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(L){Am(this,L);return}if(a=p||"",p=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var j in v)p.set(j,v[j]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const L of v.keys())p.set(L,v.get(L));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(p.keys()).find(L=>L.toLowerCase()=="content-type"),j=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(nI,h,void 0))||v||j||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,$]of p)this.g.setRequestHeader(L,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Rm(this),this.u=!0,this.g.send(a),this.u=!1}catch(L){Am(this,L)}};function Am(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,Cm(a),Za(a)}function Cm(a){a.A||(a.A=!0,Ze(a,"complete"),Ze(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Ze(this,"complete"),Ze(this,"abort"),Za(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Za(this,!0)),Ve.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Nm(this):this.bb())},t.bb=function(){Nm(this)};function Nm(a){if(a.h&&typeof o<"u"&&(!a.v[1]||jn(a)!=4||a.Z()!=2)){if(a.u&&jn(a)==4)$a(a.Ea,0,a);else if(Ze(a,"readystatechange"),jn(a)==4){a.h=!1;try{const $=a.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var v;if(v=$===0){var j=String(a.D).match(_m)[1]||null;!j&&l.self&&l.self.location&&(j=l.self.location.protocol.slice(0,-1)),v=!tI.test(j?j.toLowerCase():"")}p=v}if(p)Ze(a,"complete"),Ze(a,"success");else{a.m=6;try{var L=2<jn(a)?a.g.statusText:""}catch{L=""}a.l=L+" ["+a.Z()+"]",Cm(a)}}finally{Za(a)}}}}function Za(a,h){if(a.g){Rm(a);const p=a.g,v=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||Ze(a,"ready");try{p.onreadystatechange=v}catch{}}}function Rm(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function jn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<jn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),Ee(h)}};function Pm(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function rI(a){const h={};a=(a.g&&2<=jn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(_(a[v]))continue;var p=b(a[v]);const j=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const L=h[j]||[];h[j]=L,L.push(p)}S(h,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function so(a,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||h}function bm(a){this.Aa=0,this.i=[],this.j=new Xi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=so("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=so("baseRetryDelayMs",5e3,a),this.cb=so("retryDelaySeedMs",1e4,a),this.Wa=so("forwardChannelMaxRetries",2,a),this.wa=so("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new fm(a&&a.concurrentRequestLimit),this.Da=new ZT,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=bm.prototype,t.la=8,t.G=1,t.connect=function(a,h,p,v){xt(0),this.W=a,this.H=h||{},p&&v!==void 0&&(this.H.OSID=p,this.H.OAID=v),this.F=this.X,this.I=Bm(this,null,this.W),tl(this)};function Uc(a){if(Dm(a),a.G==3){var h=a.U++,p=Dn(a.I);if(Se(p,"SID",a.K),Se(p,"RID",h),Se(p,"TYPE","terminate"),io(a,p),h=new ar(a,a.j,h),h.L=2,h.v=Ya(Dn(p)),p=!1,l.navigator&&l.navigator.sendBeacon)try{p=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&l.Image&&(new Image().src=h.v,p=!0),p||(h.g=zm(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Ka(h)}Um(a)}function el(a){a.g&&(zc(a),a.g.cancel(),a.g=null)}function Dm(a){el(a),a.u&&(l.clearTimeout(a.u),a.u=null),nl(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function tl(a){if(!pm(a.h)&&!a.s){a.s=!0;var h=a.Ga;Pe||G(),V||(Pe(),V=!0),W.add(h,a),a.B=0}}function sI(a,h){return mm(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Yi(g(a.Ga,a,h),Fm(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const j=new ar(this,this.j,a);let L=this.o;if(this.S&&(L?(L=y(L),T(L,this.S)):L=this.S),this.m!==null||this.O||(j.H=L,L=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var v=this.i[p];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(h+=v,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=Om(this,j,h),p=Dn(this.I),Se(p,"RID",a),Se(p,"CVER",22),this.D&&Se(p,"X-HTTP-Session-Id",this.D),io(this,p),L&&(this.O?h="headers="+encodeURIComponent(String(xm(L)))+"&"+h:this.m&&Fc(p,this.m,L)),Mc(this.h,j),this.Ua&&Se(p,"TYPE","init"),this.P?(Se(p,"$req",h),Se(p,"SID","null"),j.T=!0,jc(j,p,null)):jc(j,p,h),this.G=2}}else this.G==3&&(a?jm(this,a):this.i.length==0||pm(this.h)||jm(this))};function jm(a,h){var p;h?p=h.l:p=a.U++;const v=Dn(a.I);Se(v,"SID",a.K),Se(v,"RID",p),Se(v,"AID",a.T),io(a,v),a.m&&a.o&&Fc(v,a.m,a.o),p=new ar(a,a.j,p,a.B+1),a.m===null&&(p.H=a.o),h&&(a.i=h.D.concat(a.i)),h=Om(a,p,1e3),p.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Mc(a.h,p),jc(p,v,h)}function io(a,h){a.H&&M(a.H,function(p,v){Se(h,v,p)}),a.l&&vm({},function(p,v){Se(h,v,p)})}function Om(a,h,p){p=Math.min(a.i.length,p);var v=a.l?g(a.l.Na,a.l,a):null;e:{var j=a.i;let L=-1;for(;;){const $=["count="+p];L==-1?0<p?(L=j[0].g,$.push("ofs="+L)):L=0:$.push("ofs="+L);let Te=!0;for(let it=0;it<p;it++){let ge=j[it].g;const pt=j[it].map;if(ge-=L,0>ge)L=Math.max(0,j[it].g-100),Te=!1;else try{eI(pt,$,"req"+ge+"_")}catch{v&&v(pt)}}if(Te){v=$.join("&");break e}}}return a=a.i.splice(0,p),h.D=a,v}function Lm(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;Pe||G(),V||(Pe(),V=!0),W.add(h,a),a.v=0}}function Bc(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Yi(g(a.Fa,a),Fm(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Vm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Yi(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,xt(10),el(this),Vm(this))};function zc(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Vm(a){a.g=new ar(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=Dn(a.qa);Se(h,"RID","rpc"),Se(h,"SID",a.K),Se(h,"AID",a.T),Se(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&Se(h,"TO",a.ja),Se(h,"TYPE","xmlhttp"),io(a,h),a.m&&a.o&&Fc(h,a.m,a.o),a.L&&(a.g.I=a.L);var p=a.g;a=a.ia,p.L=1,p.v=Ya(Dn(h)),p.m=null,p.P=!0,cm(p,a)}t.Za=function(){this.C!=null&&(this.C=null,el(this),Bc(this),xt(19))};function nl(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Mm(a,h){var p=null;if(a.g==h){nl(a),zc(a),a.g=null;var v=2}else if(Vc(a.h,h))p=h.D,gm(a.h,h),v=1;else return;if(a.G!=0){if(h.o)if(v==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var j=a.B;v=Wa(),Ze(v,new om(v,p)),tl(a)}else Lm(a);else if(j=h.s,j==3||j==0&&0<h.X||!(v==1&&sI(a,h)||v==2&&Bc(a)))switch(p&&0<p.length&&(h=a.h,h.i=h.i.concat(p)),j){case 1:ts(a,5);break;case 4:ts(a,10);break;case 3:ts(a,6);break;default:ts(a,2)}}}function Fm(a,h){let p=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(p*=2),p*h}function ts(a,h){if(a.j.info("Error code "+h),h==2){var p=g(a.fb,a),v=a.Xa;const j=!v;v=new es(v||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ga(v,"https"),Ya(v),j?XT(v.toString(),p):JT(v.toString(),p)}else xt(2);a.G=0,a.l&&a.l.sa(h),Um(a),Dm(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function Um(a){if(a.G=0,a.ka=[],a.l){const h=ym(a.h);(h.length!=0||a.i.length!=0)&&(N(a.ka,h),N(a.ka,a.i),a.h.i.length=0,P(a.i),a.i.length=0),a.l.ra()}}function Bm(a,h,p){var v=p instanceof es?Dn(p):new es(p);if(v.g!="")h&&(v.g=h+"."+v.g),Qa(v,v.s);else{var j=l.location;v=j.protocol,h=h?h+"."+j.hostname:j.hostname,j=+j.port;var L=new es(null);v&&Ga(L,v),h&&(L.g=h),j&&Qa(L,j),p&&(L.l=p),v=L}return p=a.D,h=a.ya,p&&h&&Se(v,p,h),Se(v,"VER",a.la),io(a,v),v}function zm(a,h,p){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new Ve(new Xa({eb:p})):new Ve(a.pa),h.Ha(a.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function $m(){}t=$m.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function rl(){}rl.prototype.g=function(a,h){return new Ut(a,h)};function Ut(a,h){Ke.call(this),this.g=new bm(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!_(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!_(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new Ls(this)}C(Ut,Ke),Ut.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ut.prototype.close=function(){Uc(this.g)},Ut.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.u&&(p={},p.__data__=we(a),a=p);h.i.push(new BT(h.Ya++,a)),h.G==3&&tl(h)},Ut.prototype.N=function(){this.g.l=null,delete this.j,Uc(this.g),delete this.g,Ut.aa.N.call(this)};function Wm(a){Rc.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const p in h){a=p;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}C(Wm,Rc);function Hm(){Pc.call(this),this.status=1}C(Hm,Pc);function Ls(a){this.g=a}C(Ls,$m),Ls.prototype.ua=function(){Ze(this.g,"a")},Ls.prototype.ta=function(a){Ze(this.g,new Wm(a))},Ls.prototype.sa=function(a){Ze(this.g,new Hm)},Ls.prototype.ra=function(){Ze(this.g,"b")},rl.prototype.createWebChannel=rl.prototype.g,Ut.prototype.send=Ut.prototype.o,Ut.prototype.open=Ut.prototype.m,Ut.prototype.close=Ut.prototype.close,iE=function(){return new rl},sE=function(){return Wa()},rE=Jr,Lh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ha.NO_ERROR=0,Ha.TIMEOUT=8,Ha.HTTP_ERROR=6,Wl=Ha,am.COMPLETE="complete",nE=am,Ki.EventType=Gi,Gi.OPEN="a",Gi.CLOSE="b",Gi.ERROR="c",Gi.MESSAGE="d",Ke.prototype.listen=Ke.prototype.K,To=Ki,Ve.prototype.listenOnce=Ve.prototype.L,Ve.prototype.getLastError=Ve.prototype.Ka,Ve.prototype.getLastErrorCode=Ve.prototype.Ba,Ve.prototype.getStatus=Ve.prototype.Z,Ve.prototype.getResponseJson=Ve.prototype.Oa,Ve.prototype.getResponseText=Ve.prototype.oa,Ve.prototype.send=Ve.prototype.ea,Ve.prototype.setWithCredentials=Ve.prototype.Ha,tE=Ve}).apply(typeof Il<"u"?Il:typeof self<"u"?self:typeof window<"u"?window:{});const Uy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _t=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};_t.UNAUTHENTICATED=new _t(null),_t.GOOGLE_CREDENTIALS=new _t("google-credentials-uid"),_t.FIRST_PARTY=new _t("first-party-uid"),_t.MOCK_USER=new _t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mi="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts=new ep("@firebase/firestore");function mo(){return Ts.logLevel}function K(t,...e){if(Ts.logLevel<=de.DEBUG){const n=e.map(hp);Ts.debug(`Firestore (${Mi}): ${t}`,...n)}}function Zn(t,...e){if(Ts.logLevel<=de.ERROR){const n=e.map(hp);Ts.error(`Firestore (${Mi}): ${t}`,...n)}}function wi(t,...e){if(Ts.logLevel<=de.WARN){const n=e.map(hp);Ts.warn(`Firestore (${Mi}): ${t}`,...n)}}function hp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t="Unexpected state"){const e=`FIRESTORE (${Mi}) INTERNAL ASSERTION FAILED: `+t;throw Zn(e),new Error(e)}function _e(t,e){t||Z()}function te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class H extends sr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class NN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(_t.UNAUTHENTICATED))}shutdown(){}}class RN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class PN{constructor(e){this.t=e,this.currentUser=_t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){_e(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new qn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new qn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new qn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_e(typeof r.accessToken=="string"),new oE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string"),new _t(e)}}class bN{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=_t.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class DN{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new bN(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(_t.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class jN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ON{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){_e(this.o===void 0);const r=i=>{i.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,K("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(_e(typeof n.token=="string"),this.R=n.token,new jN(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=LN(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function ye(t,e){return t<e?-1:t>e?1:0}function Ei(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new H(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new H(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new H(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ye.fromMillis(Date.now())}static fromDate(e){return Ye.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ye(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ye(this.nanoseconds,e.nanoseconds):ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ee(e)}static min(){return new ee(new Ye(0,0))}static max(){return new ee(new Ye(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,n,r){n===void 0?n=0:n>e.length&&Z(),r===void 0?r=e.length-n:r>e.length-n&&Z(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ua.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ua?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class xe extends ua{construct(e,n,r){return new xe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new H(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new xe(n)}static emptyPath(){return new xe([])}}const VN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lt extends ua{construct(e,n,r){return new lt(e,n,r)}static isValidIdentifier(e){return VN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new lt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new H(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new H(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new H(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new H(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lt(n)}static emptyPath(){return new lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(xe.fromString(e))}static fromName(e){return new Y(xe.fromString(e).popFirst(5))}static empty(){return new Y(xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return xe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new xe(e.slice()))}}function MN(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ee.fromTimestamp(r===1e9?new Ye(n+1,0):new Ye(n,r));return new Fr(s,Y.empty(),e)}function FN(t){return new Fr(t.readTime,t.key,-1)}class Fr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Fr(ee.min(),Y.empty(),-1)}static max(){return new Fr(ee.max(),Y.empty(),-1)}}function UN(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:ye(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ra(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==BN)throw t;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(f=>{o[d]=f,++l,l===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new U((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function $N(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Pa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}fp.oe=-1;function oc(t){return t==null}function Au(t){return t===0&&1/t==-1/0}function WN(t){return typeof t=="number"&&Number.isInteger(t)&&!Au(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function By(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Cs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function lE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e,n){this.comparator=e,this.root=n||at.EMPTY}insert(e,n){return new Oe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,at.BLACK,null,null))}remove(e){return new Oe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,at.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Sl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Sl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Sl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Sl(this.root,e,this.comparator,!0)}}class Sl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class at{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??at.RED,this.left=s??at.EMPTY,this.right=i??at.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new at(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return at.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return at.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,at.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,at.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Z();const e=this.left.check();if(e!==this.right.check())throw Z();return e+(this.isRed()?0:1)}}at.EMPTY=null,at.RED=!0,at.BLACK=!1;at.EMPTY=new class{constructor(){this.size=0}get key(){throw Z()}get value(){throw Z()}get color(){throw Z()}get left(){throw Z()}get right(){throw Z()}copy(e,n,r,s,i){return this}insert(e,n,r){return new at(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.comparator=e,this.data=new Oe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new zy(this.data.getIterator())}getIteratorFrom(e){return new zy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ct)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ct(this.comparator);return n.data=e,n}}class zy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.fields=e,e.sort(lt.comparator)}static empty(){return new $t([])}unionWith(e){let n=new ct(lt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new $t(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ei(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new uE("Invalid base64 string: "+i):i}}(e);return new ht(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new ht(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ht.EMPTY_BYTE_STRING=new ht("");const HN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ur(t){if(_e(!!t),typeof t=="string"){let e=0;const n=HN.exec(t);if(_e(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fe(t.seconds),nanos:Fe(t.nanos)}}function Fe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Is(t){return typeof t=="string"?ht.fromBase64String(t):ht.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function mp(t){const e=t.mapValue.fields.__previous_value__;return pp(e)?mp(e):e}function ca(t){const e=Ur(t.mapValue.fields.__local_write_time__.timestampValue);return new Ye(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e,n,r,s,i,o,l,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d}}class da{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new da("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof da&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl={mapValue:{}};function Ss(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?pp(t)?4:GN(t)?9007199254740991:KN(t)?10:11:Z()}function Rn(t,e){if(t===e)return!0;const n=Ss(t);if(n!==Ss(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ca(t).isEqual(ca(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Ur(s.timestampValue),l=Ur(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Is(s.bytesValue).isEqual(Is(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Fe(s.geoPointValue.latitude)===Fe(i.geoPointValue.latitude)&&Fe(s.geoPointValue.longitude)===Fe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Fe(s.integerValue)===Fe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Fe(s.doubleValue),l=Fe(i.doubleValue);return o===l?Au(o)===Au(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Ei(t.arrayValue.values||[],e.arrayValue.values||[],Rn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(By(o)!==By(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Rn(o[u],l[u])))return!1;return!0}(t,e);default:return Z()}}function ha(t,e){return(t.values||[]).find(n=>Rn(n,e))!==void 0}function Ti(t,e){if(t===e)return 0;const n=Ss(t),r=Ss(e);if(n!==r)return ye(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ye(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Fe(i.integerValue||i.doubleValue),u=Fe(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return $y(t.timestampValue,e.timestampValue);case 4:return $y(ca(t),ca(e));case 5:return ye(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Is(i),u=Is(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let d=0;d<l.length&&d<u.length;d++){const f=ye(l[d],u[d]);if(f!==0)return f}return ye(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=ye(Fe(i.latitude),Fe(o.latitude));return l!==0?l:ye(Fe(i.longitude),Fe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Wy(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,u,d,f;const m=i.fields||{},g=o.fields||{},x=(l=m.value)===null||l===void 0?void 0:l.arrayValue,C=(u=g.value)===null||u===void 0?void 0:u.arrayValue,P=ye(((d=x==null?void 0:x.values)===null||d===void 0?void 0:d.length)||0,((f=C==null?void 0:C.values)===null||f===void 0?void 0:f.length)||0);return P!==0?P:Wy(x,C)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===kl.mapValue&&o===kl.mapValue)return 0;if(i===kl.mapValue)return 1;if(o===kl.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const g=ye(u[m],f[m]);if(g!==0)return g;const x=Ti(l[u[m]],d[f[m]]);if(x!==0)return x}return ye(u.length,f.length)}(t.mapValue,e.mapValue);default:throw Z()}}function $y(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ye(t,e);const n=Ur(t),r=Ur(e),s=ye(n.seconds,r.seconds);return s!==0?s:ye(n.nanos,r.nanos)}function Wy(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Ti(n[s],r[s]);if(i)return i}return ye(n.length,r.length)}function Ii(t){return Vh(t)}function Vh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ur(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Is(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Vh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Vh(n.fields[o])}`;return s+"}"}(t.mapValue):Z()}function Hy(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Mh(t){return!!t&&"integerValue"in t}function gp(t){return!!t&&"arrayValue"in t}function qy(t){return!!t&&"nullValue"in t}function Ky(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Hl(t){return!!t&&"mapValue"in t}function KN(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Lo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Cs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Lo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Lo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function GN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.value=e}static empty(){return new Dt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Hl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Lo(n)}setAll(e){let n=lt.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=Lo(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Hl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Rn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Hl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Cs(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Dt(Lo(this.value))}}function cE(t){const e=[];return Cs(t.fields,(n,r)=>{const s=new lt([n]);if(Hl(r)){const i=cE(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new $t(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Et(e,0,ee.min(),ee.min(),ee.min(),Dt.empty(),0)}static newFoundDocument(e,n,r,s){return new Et(e,1,n,ee.min(),r,s,0)}static newNoDocument(e,n){return new Et(e,2,n,ee.min(),ee.min(),Dt.empty(),0)}static newUnknownDocument(e,n){return new Et(e,3,n,ee.min(),ee.min(),Dt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Et&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Et(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e,n){this.position=e,this.inclusive=n}}function Gy(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Y.comparator(Y.fromName(o.referenceValue),n.key):r=Ti(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Qy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Rn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,n="asc"){this.field=e,this.dir=n}}function QN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{}class qe extends dE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new XN(e,n,r):n==="array-contains"?new eR(e,r):n==="in"?new tR(e,r):n==="not-in"?new nR(e,r):n==="array-contains-any"?new rR(e,r):new qe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new JN(e,r):new ZN(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ti(n,this.value)):n!==null&&Ss(this.value)===Ss(n)&&this.matchesComparison(Ti(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gn extends dE{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new gn(e,n)}matches(e){return hE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function hE(t){return t.op==="and"}function fE(t){return YN(t)&&hE(t)}function YN(t){for(const e of t.filters)if(e instanceof gn)return!1;return!0}function Fh(t){if(t instanceof qe)return t.field.canonicalString()+t.op.toString()+Ii(t.value);if(fE(t))return t.filters.map(e=>Fh(e)).join(",");{const e=t.filters.map(n=>Fh(n)).join(",");return`${t.op}(${e})`}}function pE(t,e){return t instanceof qe?function(r,s){return s instanceof qe&&r.op===s.op&&r.field.isEqual(s.field)&&Rn(r.value,s.value)}(t,e):t instanceof gn?function(r,s){return s instanceof gn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&pE(o,s.filters[l]),!0):!1}(t,e):void Z()}function mE(t){return t instanceof qe?function(n){return`${n.field.canonicalString()} ${n.op} ${Ii(n.value)}`}(t):t instanceof gn?function(n){return n.op.toString()+" {"+n.getFilters().map(mE).join(" ,")+"}"}(t):"Filter"}class XN extends qe{constructor(e,n,r){super(e,n,r),this.key=Y.fromName(r.referenceValue)}matches(e){const n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}}class JN extends qe{constructor(e,n){super(e,"in",n),this.keys=gE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class ZN extends qe{constructor(e,n){super(e,"not-in",n),this.keys=gE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function gE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Y.fromName(r.referenceValue))}class eR extends qe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return gp(n)&&ha(n.arrayValue,this.value)}}class tR extends qe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ha(this.value.arrayValue,n)}}class nR extends qe{constructor(e,n){super(e,"not-in",n)}matches(e){if(ha(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ha(this.value.arrayValue,n)}}class rR extends qe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!gp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ha(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.ue=null}}function Yy(t,e=null,n=[],r=[],s=null,i=null,o=null){return new sR(t,e,n,r,s,i,o)}function yp(t){const e=te(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Fh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),oc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ii(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ii(r)).join(",")),e.ue=n}return e.ue}function vp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!QN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!pE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Qy(t.startAt,e.startAt)&&Qy(t.endAt,e.endAt)}function Uh(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function iR(t,e,n,r,s,i,o,l){return new Fi(t,e,n,r,s,i,o,l)}function ac(t){return new Fi(t)}function Xy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function yE(t){return t.collectionGroup!==null}function Vo(t){const e=te(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new ct(lt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new fa(i,r))}),n.has(lt.keyField().canonicalString())||e.ce.push(new fa(lt.keyField(),r))}return e.ce}function Cn(t){const e=te(t);return e.le||(e.le=oR(e,Vo(t))),e.le}function oR(t,e){if(t.limitType==="F")return Yy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new fa(s.field,i)});const n=t.endAt?new Cu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Cu(t.startAt.position,t.startAt.inclusive):null;return Yy(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Bh(t,e){const n=t.filters.concat([e]);return new Fi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Nu(t,e,n){return new Fi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function lc(t,e){return vp(Cn(t),Cn(e))&&t.limitType===e.limitType}function vE(t){return`${yp(Cn(t))}|lt:${t.limitType}`}function Us(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>mE(s)).join(", ")}]`),oc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ii(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ii(s)).join(",")),`Target(${r})`}(Cn(t))}; limitType=${t.limitType})`}function uc(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Y.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Vo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const d=Gy(o,l,u);return o.inclusive?d<=0:d<0}(r.startAt,Vo(r),s)||r.endAt&&!function(o,l,u){const d=Gy(o,l,u);return o.inclusive?d>=0:d>0}(r.endAt,Vo(r),s))}(t,e)}function aR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function _E(t){return(e,n)=>{let r=!1;for(const s of Vo(t)){const i=lR(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function lR(t,e,n){const r=t.field.isKeyField()?Y.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),d=l.data.field(i);return u!==null&&d!==null?Ti(u,d):Z()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Z()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Cs(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return lE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR=new Oe(Y.comparator);function er(){return uR}const wE=new Oe(Y.comparator);function Io(...t){let e=wE;for(const n of t)e=e.insert(n.key,n);return e}function EE(t){let e=wE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function us(){return Mo()}function TE(){return Mo()}function Mo(){return new Ui(t=>t.toString(),(t,e)=>t.isEqual(e))}const cR=new Oe(Y.comparator),dR=new ct(Y.comparator);function ce(...t){let e=dR;for(const n of t)e=e.add(n);return e}const hR=new ct(ye);function fR(){return hR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _p(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Au(e)?"-0":e}}function IE(t){return{integerValue:""+t}}function pR(t,e){return WN(e)?IE(e):_p(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(){this._=void 0}}function mR(t,e,n){return t instanceof pa?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&pp(i)&&(i=mp(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Si?kE(t,e):t instanceof ma?xE(t,e):function(s,i){const o=SE(s,i),l=Jy(o)+Jy(s.Pe);return Mh(o)&&Mh(s.Pe)?IE(l):_p(s.serializer,l)}(t,e)}function gR(t,e,n){return t instanceof Si?kE(t,e):t instanceof ma?xE(t,e):n}function SE(t,e){return t instanceof Ru?function(r){return Mh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class pa extends cc{}class Si extends cc{constructor(e){super(),this.elements=e}}function kE(t,e){const n=AE(e);for(const r of t.elements)n.some(s=>Rn(s,r))||n.push(r);return{arrayValue:{values:n}}}class ma extends cc{constructor(e){super(),this.elements=e}}function xE(t,e){let n=AE(e);for(const r of t.elements)n=n.filter(s=>!Rn(s,r));return{arrayValue:{values:n}}}class Ru extends cc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Jy(t){return Fe(t.integerValue||t.doubleValue)}function AE(t){return gp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(e,n){this.field=e,this.transform=n}}function yR(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Si&&s instanceof Si||r instanceof ma&&s instanceof ma?Ei(r.elements,s.elements,Rn):r instanceof Ru&&s instanceof Ru?Rn(r.Pe,s.Pe):r instanceof pa&&s instanceof pa}(t.transform,e.transform)}class vR{constructor(e,n){this.version=e,this.transformResults=n}}class en{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new en}static exists(e){return new en(void 0,e)}static updateTime(e){return new en(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ql(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class dc{}function NE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new wp(t.key,en.none()):new ba(t.key,t.data,en.none());{const n=t.data,r=Dt.empty();let s=new ct(lt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Gr(t.key,r,new $t(s.toArray()),en.none())}}function _R(t,e,n){t instanceof ba?function(s,i,o){const l=s.value.clone(),u=ev(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Gr?function(s,i,o){if(!ql(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=ev(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(RE(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Fo(t,e,n,r){return t instanceof ba?function(i,o,l,u){if(!ql(i.precondition,o))return l;const d=i.value.clone(),f=tv(i.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Gr?function(i,o,l,u){if(!ql(i.precondition,o))return l;const d=tv(i.fieldTransforms,u,o),f=o.data;return f.setAll(RE(i)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,l){return ql(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function wR(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=SE(r.transform,s||null);i!=null&&(n===null&&(n=Dt.empty()),n.set(r.field,i))}return n||null}function Zy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ei(r,s,(i,o)=>yR(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ba extends dc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Gr extends dc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function RE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function ev(t,e,n){const r=new Map;_e(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,gR(o,l,n[s]))}return r}function tv(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,mR(i,o,e))}return r}class wp extends dc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ER extends dc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&_R(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Fo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Fo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=TE();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=NE(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&Ei(this.mutations,e.mutations,(n,r)=>Zy(n,r))&&Ei(this.baseMutations,e.baseMutations,(n,r)=>Zy(n,r))}}class Ep{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){_e(e.mutations.length===r.length);let s=function(){return cR}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Ep(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We,he;function kR(t){switch(t){default:return Z();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function PE(t){if(t===void 0)return Zn("GRPC error has no .code"),F.UNKNOWN;switch(t){case We.OK:return F.OK;case We.CANCELLED:return F.CANCELLED;case We.UNKNOWN:return F.UNKNOWN;case We.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case We.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case We.INTERNAL:return F.INTERNAL;case We.UNAVAILABLE:return F.UNAVAILABLE;case We.UNAUTHENTICATED:return F.UNAUTHENTICATED;case We.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case We.NOT_FOUND:return F.NOT_FOUND;case We.ALREADY_EXISTS:return F.ALREADY_EXISTS;case We.PERMISSION_DENIED:return F.PERMISSION_DENIED;case We.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case We.ABORTED:return F.ABORTED;case We.OUT_OF_RANGE:return F.OUT_OF_RANGE;case We.UNIMPLEMENTED:return F.UNIMPLEMENTED;case We.DATA_LOSS:return F.DATA_LOSS;default:return Z()}}(he=We||(We={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR=new hs([4294967295,4294967295],0);function nv(t){const e=xR().encode(t),n=new eE;return n.update(e),new Uint8Array(n.digest())}function rv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new hs([n,r],0),new hs([s,i],0)]}class Tp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new So(`Invalid padding: ${n}`);if(r<0)throw new So(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new So(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new So(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=hs.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(hs.fromNumber(r)));return s.compare(AR)===1&&(s=new hs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=nv(e),[r,s]=rv(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Tp(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=nv(e),[r,s]=rv(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class So extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Da.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new hc(ee.min(),s,new Oe(ye),er(),ce())}}class Da{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Da(r,n,ce(),ce(),ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class bE{constructor(e,n){this.targetId=e,this.me=n}}class DE{constructor(e,n,r=ht.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class sv{constructor(){this.fe=0,this.ge=ov(),this.pe=ht.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ce(),n=ce(),r=ce();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Z()}}),new Da(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=ov()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,_e(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class CR{constructor(e){this.Le=e,this.Be=new Map,this.ke=er(),this.qe=iv(),this.Qe=new Oe(ye)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Z()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Uh(i))if(r===0){const o=new Y(i.path);this.Ue(n,o,Et.newNoDocument(o,ee.min()))}else _e(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=Is(r).toUint8Array()}catch(u){if(u instanceof uE)return wi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Tp(o,s,i)}catch(u){return wi(u instanceof So?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const l=this.Je(o);if(l){if(i.current&&Uh(l.target)){const u=new Y(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Et.newNoDocument(u,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=ce();this.qe.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new hc(e,n,this.Qe,this.ke,r);return this.ke=er(),this.qe=iv(),this.Qe=new Oe(ye),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new sv,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ct(ye),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new sv),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function iv(){return new Oe(Y.comparator)}function ov(){return new Oe(Y.comparator)}const NR={asc:"ASCENDING",desc:"DESCENDING"},RR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},PR={and:"AND",or:"OR"};class bR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function zh(t,e){return t.useProto3Json||oc(e)?e:{value:e}}function Pu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function DR(t,e){return Pu(t,e.toTimestamp())}function Nn(t){return _e(!!t),ee.fromTimestamp(function(n){const r=Ur(n);return new Ye(r.seconds,r.nanos)}(t))}function Ip(t,e){return $h(t,e).canonicalString()}function $h(t,e){const n=function(s){return new xe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function OE(t){const e=xe.fromString(t);return _e(UE(e)),e}function Wh(t,e){return Ip(t.databaseId,e.path)}function Sd(t,e){const n=OE(e);if(n.get(1)!==t.databaseId.projectId)throw new H(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new H(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(VE(n))}function LE(t,e){return Ip(t.databaseId,e)}function jR(t){const e=OE(t);return e.length===4?xe.emptyPath():VE(e)}function Hh(t){return new xe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function VE(t){return _e(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function av(t,e,n){return{name:Wh(t,e),fields:n.value.mapValue.fields}}function OR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Z()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(_e(f===void 0||typeof f=="string"),ht.fromBase64String(f||"")):(_e(f===void 0||f instanceof Buffer||f instanceof Uint8Array),ht.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const f=d.code===void 0?F.UNKNOWN:PE(d.code);return new H(f,d.message||"")}(o);n=new DE(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Sd(t,r.document.name),i=Nn(r.document.updateTime),o=r.document.createTime?Nn(r.document.createTime):ee.min(),l=new Dt({mapValue:{fields:r.document.fields}}),u=Et.newFoundDocument(s,i,o,l),d=r.targetIds||[],f=r.removedTargetIds||[];n=new Kl(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Sd(t,r.document),i=r.readTime?Nn(r.readTime):ee.min(),o=Et.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Kl([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Sd(t,r.document),i=r.removedTargetIds||[];n=new Kl([],i,s,null)}else{if(!("filter"in e))return Z();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new SR(s,i),l=r.targetId;n=new bE(l,o)}}return n}function LR(t,e){let n;if(e instanceof ba)n={update:av(t,e.key,e.value)};else if(e instanceof wp)n={delete:Wh(t,e.key)};else if(e instanceof Gr)n={update:av(t,e.key,e.data),updateMask:HR(e.fieldMask)};else{if(!(e instanceof ER))return Z();n={verify:Wh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof pa)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Si)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ma)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ru)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw Z()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:DR(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Z()}(t,e.precondition)),n}function VR(t,e){return t&&t.length>0?(_e(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Nn(s.updateTime):Nn(i);return o.isEqual(ee.min())&&(o=Nn(i)),new vR(o,s.transformResults||[])}(n,e))):[]}function MR(t,e){return{documents:[LE(t,e.path)]}}function FR(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=LE(t,s);const i=function(d){if(d.length!==0)return FE(gn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:Bs(g.field),direction:zR(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=zh(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function UR(t){let e=jR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){_e(r===1);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(m){const g=ME(m);return g instanceof gn&&fE(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(C){return new fa(zs(C.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(m){let g;return g=typeof m=="object"?m.value:m,oc(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,x=m.values||[];return new Cu(x,g)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const g=!m.before,x=m.values||[];return new Cu(x,g)}(n.endAt)),iR(e,s,o,i,l,"F",u,d)}function BR(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ME(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=zs(n.unaryFilter.field);return qe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=zs(n.unaryFilter.field);return qe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=zs(n.unaryFilter.field);return qe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=zs(n.unaryFilter.field);return qe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Z()}}(t):t.fieldFilter!==void 0?function(n){return qe.create(zs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Z()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return gn.create(n.compositeFilter.filters.map(r=>ME(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Z()}}(n.compositeFilter.op))}(t):Z()}function zR(t){return NR[t]}function $R(t){return RR[t]}function WR(t){return PR[t]}function Bs(t){return{fieldPath:t.canonicalString()}}function zs(t){return lt.fromServerFormat(t.fieldPath)}function FE(t){return t instanceof qe?function(n){if(n.op==="=="){if(Ky(n.value))return{unaryFilter:{field:Bs(n.field),op:"IS_NAN"}};if(qy(n.value))return{unaryFilter:{field:Bs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ky(n.value))return{unaryFilter:{field:Bs(n.field),op:"IS_NOT_NAN"}};if(qy(n.value))return{unaryFilter:{field:Bs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bs(n.field),op:$R(n.op),value:n.value}}}(t):t instanceof gn?function(n){const r=n.getFilters().map(s=>FE(s));return r.length===1?r[0]:{compositeFilter:{op:WR(n.op),filters:r}}}(t):Z()}function HR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function UE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e,n,r,s,i=ee.min(),o=ee.min(),l=ht.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Ir(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ir(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ir(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ir(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e){this.ct=e}}function KR(t){const e=UR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Nu(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(){this.un=new QR}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Fr.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Fr.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class QR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ct(xe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ct(xe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ki(0)}static kn(){return new ki(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(){this.changes=new Ui(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Et.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Fo(r.mutation,s,$t.empty(),Ye.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ce()){const s=us();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Io();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=us();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ce()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=er();const o=Mo(),l=function(){return Mo()}();return n.forEach((u,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof Gr)?i=i.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),Fo(f.mutation,d,f.mutation.getFieldMask(),Ye.now())):o.set(d.key,$t.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var m;return l.set(d,new XR(f,(m=o.get(d))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Mo();let s=new Oe((o,l)=>o-l),i=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||$t.empty();f=l.applyToLocalView(d,f),r.set(u,f);const m=(s.get(l.batchId)||ce()).add(u);s=s.insert(l.batchId,m)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,f=u.value,m=TE();f.forEach(g=>{if(!i.has(g)){const x=NE(n.get(g),r.get(g));x!==null&&m.set(g,x),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Y.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):yE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(us());let l=-1,u=i;return o.next(d=>U.forEach(d,(f,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(f)?U.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,ce())).next(f=>({batchId:l,changes:EE(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(r=>{let s=Io();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Io();return this.indexManager.getCollectionParents(e,i).next(l=>U.forEach(l,u=>{const d=function(m,g){return new Fi(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,Et.newInvalidDocument(f)))});let l=Io();return o.forEach((u,d)=>{const f=i.get(u);f!==void 0&&Fo(f.mutation,d,$t.empty(),Ye.now()),uc(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Nn(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:KR(s.bundledQuery),readTime:Nn(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(){this.overlays=new Oe(Y.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=us();return U.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=us(),i=n.length+1,o=new Y(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Oe((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=us(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const l=us(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>l.set(d,f)),!(l.size()>=s)););return U.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new IR(n,r));let i=this.Ir.get(n);i===void 0&&(i=ce(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(){this.sessionToken=ht.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(){this.Tr=new ct(et.Er),this.dr=new ct(et.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new et(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new et(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Y(new xe([])),r=new et(n,e),s=new et(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Y(new xe([])),r=new et(n,e),s=new et(n,e+1);let i=ce();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new et(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class et{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Y.comparator(e.key,n.key)||ye(e.wr,n.wr)}static Ar(e,n){return ye(e.wr,n.wr)||Y.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ct(et.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new TR(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new et(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new et(n,0),s=new et(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const l=this.Dr(o.wr);i.push(l)}),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ct(ye);return n.forEach(s=>{const i=new et(s,0),o=new et(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],l=>{r=r.add(l.wr)})}),U.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Y.isDocumentKey(i)||(i=i.child(""));const o=new et(new Y(i),0);let l=new ct(ye);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.wr)),!0)},o),U.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){_e(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return U.forEach(n.mutations,s=>{const i=new et(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new et(n,0),s=this.br.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e){this.Mr=e,this.docs=function(){return new Oe(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():Et.newInvalidDocument(n))}getEntries(e,n){let r=er();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Et.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=er();const o=n.path,l=new Y(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||UN(FN(f),r)<=0||(s.has(f.key)||uc(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Z()}Or(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new sP(this)}getSize(e){return U.resolve(this.size)}}class sP extends YR{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e){this.persistence=e,this.Nr=new Ui(n=>yp(n),vp),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Sp,this.targetCount=0,this.kr=ki.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ki(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),U.waitFor(i).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(e,n){this.qr={},this.overlays={},this.Qr=new fp(0),this.Kr=!1,this.Kr=!0,this.$r=new tP,this.referenceDelegate=e(this),this.Ur=new iP(this),this.indexManager=new GR,this.remoteDocumentCache=function(s){return new rP(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new qR(n),this.Gr=new ZR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new eP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new nP(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){K("MemoryPersistence","Starting transaction:",e);const s=new aP(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return U.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class aP extends zN{constructor(e){super(),this.currentSequenceNumber=e}}class kp{constructor(e){this.persistence=e,this.Jr=new Sp,this.Yr=null}static Zr(e){return new kp(e)}get Xr(){if(this.Yr)return this.Yr;throw Z()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,r=>{const s=Y.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,ee.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ce(),s=ce();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new xp(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Zx()?8:$N(St())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new lP;return this.Xi(e,n,o).next(l=>{if(i.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(mo()<=de.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",Us(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(mo()<=de.DEBUG&&K("QueryEngine","Query:",Us(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(mo()<=de.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",Us(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Cn(n))):U.resolve())}Yi(e,n){if(Xy(n))return U.resolve(null);let r=Cn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Nu(n,null,"F"),r=Cn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ce(...i);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,l);return this.ns(n,d,o,u.readTime)?this.Yi(e,Nu(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,s){return Xy(n)||s.isEqual(ee.min())?U.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?U.resolve(null):(mo()<=de.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Us(n)),this.rs(e,o,n,MN(s,-1)).next(l=>l))})}ts(e,n){let r=new ct(_E(e));return n.forEach((s,i)=>{uc(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return mo()<=de.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",Us(n)),this.Ji.getDocumentsMatchingQuery(e,n,Fr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Oe(ye),this._s=new Ui(i=>yp(i),vp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new JR(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function dP(t,e,n,r){return new cP(t,e,n,r)}async function BE(t,e){const n=te(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=ce();for(const d of s){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of i){l.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:l}))})})}function hP(t,e){const n=te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,d,f){const m=d.batch,g=m.keys();let x=U.resolve();return g.forEach(C=>{x=x.next(()=>f.getEntry(u,C)).next(P=>{const N=d.docVersions.get(C);_e(N!==null),P.version.compareTo(N)<0&&(m.applyToRemoteDocument(P,d),P.isValidDocument()&&(P.setReadTime(d.commitVersion),f.addEntry(P)))})}),x.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ce();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function zE(t){const e=te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function fP(t,e){const n=te(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((f,m)=>{const g=s.get(m);if(!g)return;l.push(n.Ur.removeMatchingKeys(i,f.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(i,f.addedDocuments,m)));let x=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?x=x.withResumeToken(ht.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):f.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(f.resumeToken,r)),s=s.insert(m,x),function(P,N,w){return P.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(g,x,f)&&l.push(n.Ur.updateTargetData(i,x))});let u=er(),d=ce();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(pP(i,o,e.documentUpdates).next(f=>{u=f.Ps,d=f.Is})),!r.isEqual(ee.min())){const f=n.Ur.getLastRemoteSnapshotVersion(i).next(m=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(f)}return U.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.os=s,i))}function pP(t,e,n){let r=ce(),s=ce();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=er();return n.forEach((l,u)=>{const d=i.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(ee.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):K("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function mP(t,e){const n=te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function gP(t,e){const n=te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,U.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new Ir(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function qh(t,e,n){const r=te(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Pa(o))throw o;K("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function lv(t,e,n){const r=te(t);let s=ee.min(),i=ce();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){const m=te(u),g=m._s.get(f);return g!==void 0?U.resolve(m.os.get(g)):m.Ur.getTargetData(d,f)}(r,o,Cn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ee.min(),n?i:ce())).next(l=>(yP(r,aR(e),l),{documents:l,Ts:i})))}function yP(t,e,n){let r=t.us.get(e)||ee.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class uv{constructor(){this.activeTargetIds=fR()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vP{constructor(){this.so=new uv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new uv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){K("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){K("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xl=null;function kd(){return xl===null?xl=function(){return 268435456+Math.round(2147483648*Math.random())}():xl++,"0x"+xl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vt="WebChannelConnection";class TP extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const l=kd(),u=this.xo(n,r.toUriEncodedString());K("RestConnection",`Sending RPC '${n}' ${l}:`,u,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,o),this.No(n,u,d,s).then(f=>(K("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw wi("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",u,"request:",s),f})}Lo(n,r,s,i,o,l){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Mi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=wP[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=kd();return new Promise((o,l)=>{const u=new tE;u.setWithCredentials(!0),u.listenOnce(nE.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Wl.NO_ERROR:const f=u.getResponseJson();K(vt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),o(f);break;case Wl.TIMEOUT:K(vt,`RPC '${e}' ${i} timed out`),l(new H(F.DEADLINE_EXCEEDED,"Request time out"));break;case Wl.HTTP_ERROR:const m=u.getStatus();if(K(vt,`RPC '${e}' ${i} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const x=g==null?void 0:g.error;if(x&&x.status&&x.message){const C=function(N){const w=N.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(w)>=0?w:F.UNKNOWN}(x.status);l(new H(C,x.message))}else l(new H(F.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new H(F.UNAVAILABLE,"Connection failed."));break;default:Z()}}finally{K(vt,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);K(vt,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=kd(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=iE(),l=sE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");K(vt,`Creating RPC '${e}' stream ${s}: ${f}`,u);const m=o.createWebChannel(f,u);let g=!1,x=!1;const C=new EP({Io:N=>{x?K(vt,`Not sending because RPC '${e}' stream ${s} is closed:`,N):(g||(K(vt,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),K(vt,`RPC '${e}' stream ${s} sending:`,N),m.send(N))},To:()=>m.close()}),P=(N,w,_)=>{N.listen(w,E=>{try{_(E)}catch(D){setTimeout(()=>{throw D},0)}})};return P(m,To.EventType.OPEN,()=>{x||(K(vt,`RPC '${e}' stream ${s} transport opened.`),C.yo())}),P(m,To.EventType.CLOSE,()=>{x||(x=!0,K(vt,`RPC '${e}' stream ${s} transport closed`),C.So())}),P(m,To.EventType.ERROR,N=>{x||(x=!0,wi(vt,`RPC '${e}' stream ${s} transport errored:`,N),C.So(new H(F.UNAVAILABLE,"The operation could not be completed")))}),P(m,To.EventType.MESSAGE,N=>{var w;if(!x){const _=N.data[0];_e(!!_);const E=_,D=E.error||((w=E[0])===null||w===void 0?void 0:w.error);if(D){K(vt,`RPC '${e}' stream ${s} received error:`,D);const O=D.status;let M=function(k){const T=We[k];if(T!==void 0)return PE(T)}(O),S=D.message;M===void 0&&(M=F.INTERNAL,S="Unknown error status: "+O+" with message "+D.message),x=!0,C.So(new H(M,S)),m.close()}else K(vt,`RPC '${e}' stream ${s} received:`,_),C.bo(_)}}),P(l,rE.STAT_EVENT,N=>{N.stat===Lh.PROXY?K(vt,`RPC '${e}' stream ${s} detected buffering proxy`):N.stat===Lh.NOPROXY&&K(vt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{C.wo()},0),C}}function xd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fc(t){return new bR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&K("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e,n,r,s,i,o,l,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new $E(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(Zn(n.toString()),Zn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new H(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return K("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(K("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class IP extends WE{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=OR(this.serializer,e),r=function(i){if(!("targetChange"in i))return ee.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ee.min():o.readTime?Nn(o.readTime):ee.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Hh(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=Uh(u)?{documents:MR(i,u)}:{query:FR(i,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=jE(i,o.resumeToken);const d=zh(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(ee.min())>0){l.readTime=Pu(i,o.snapshotVersion.toTimestamp());const d=zh(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=BR(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Hh(this.serializer),n.removeTarget=e,this.a_(n)}}class SP extends WE{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return _e(!!e.streamToken),this.lastStreamToken=e.streamToken,_e(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){_e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=VR(e.writeResults,e.commitTime),r=Nn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Hh(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>LR(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new H(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,$h(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new H(F.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,$h(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class xP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Zn(n),this.D_=!1):K("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Ns(this)&&(K("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=te(u);d.L_.add(4),await ja(d),d.q_.set("Unknown"),d.L_.delete(4),await pc(d)}(this))})}),this.q_=new xP(r,s)}}async function pc(t){if(Ns(t))for(const e of t.B_)await e(!0)}async function ja(t){for(const e of t.B_)await e(!1)}function HE(t,e){const n=te(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Rp(n)?Np(n):Bi(n).r_()&&Cp(n,e))}function Ap(t,e){const n=te(t),r=Bi(n);n.N_.delete(e),r.r_()&&qE(n,e),n.N_.size===0&&(r.r_()?r.o_():Ns(n)&&n.q_.set("Unknown"))}function Cp(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Bi(t).A_(e)}function qE(t,e){t.Q_.xe(e),Bi(t).R_(e)}function Np(t){t.Q_=new CR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Bi(t).start(),t.q_.v_()}function Rp(t){return Ns(t)&&!Bi(t).n_()&&t.N_.size>0}function Ns(t){return te(t).L_.size===0}function KE(t){t.Q_=void 0}async function CP(t){t.q_.set("Online")}async function NP(t){t.N_.forEach((e,n)=>{Cp(t,e)})}async function RP(t,e){KE(t),Rp(t)?(t.q_.M_(e),Np(t)):t.q_.set("Unknown")}async function PP(t,e,n){if(t.q_.set("Online"),e instanceof DE&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){K("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await bu(t,r)}else if(e instanceof Kl?t.Q_.Ke(e):e instanceof bE?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ee.min()))try{const r=await zE(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Q_.rt(o);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.N_.get(d);f&&i.N_.set(d,f.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,d)=>{const f=i.N_.get(u);if(!f)return;i.N_.set(u,f.withResumeToken(ht.EMPTY_BYTE_STRING,f.snapshotVersion)),qE(i,u);const m=new Ir(f.target,u,d,f.sequenceNumber);Cp(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){K("RemoteStore","Failed to raise snapshot:",r),await bu(t,r)}}async function bu(t,e,n){if(!Pa(e))throw e;t.L_.add(1),await ja(t),t.q_.set("Offline"),n||(n=()=>zE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{K("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await pc(t)})}function GE(t,e){return e().catch(n=>bu(t,n,e))}async function mc(t){const e=te(t),n=Br(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;bP(e);)try{const s=await mP(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,DP(e,s)}catch(s){await bu(e,s)}QE(e)&&YE(e)}function bP(t){return Ns(t)&&t.O_.length<10}function DP(t,e){t.O_.push(e);const n=Br(t);n.r_()&&n.V_&&n.m_(e.mutations)}function QE(t){return Ns(t)&&!Br(t).n_()&&t.O_.length>0}function YE(t){Br(t).start()}async function jP(t){Br(t).p_()}async function OP(t){const e=Br(t);for(const n of t.O_)e.m_(n.mutations)}async function LP(t,e,n){const r=t.O_.shift(),s=Ep.from(r,e,n);await GE(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await mc(t)}async function VP(t,e){e&&Br(t).V_&&await async function(r,s){if(function(o){return kR(o)&&o!==F.ABORTED}(s.code)){const i=r.O_.shift();Br(r).s_(),await GE(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await mc(r)}}(t,e),QE(t)&&YE(t)}async function dv(t,e){const n=te(t);n.asyncQueue.verifyOperationInProgress(),K("RemoteStore","RemoteStore received new credentials");const r=Ns(n);n.L_.add(3),await ja(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await pc(n)}async function MP(t,e){const n=te(t);e?(n.L_.delete(2),await pc(n)):e||(n.L_.add(2),await ja(n),n.q_.set("Unknown"))}function Bi(t){return t.K_||(t.K_=function(n,r,s){const i=te(n);return i.w_(),new IP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:CP.bind(null,t),Ro:NP.bind(null,t),mo:RP.bind(null,t),d_:PP.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Rp(t)?Np(t):t.q_.set("Unknown")):(await t.K_.stop(),KE(t))})),t.K_}function Br(t){return t.U_||(t.U_=function(n,r,s){const i=te(n);return i.w_(),new SP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:jP.bind(null,t),mo:VP.bind(null,t),f_:OP.bind(null,t),g_:LP.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await mc(t)):(await t.U_.stop(),t.O_.length>0&&(K("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new qn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Pp(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bp(t,e){if(Zn("AsyncQueue",`${e}: ${t}`),Pa(t))return new H(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=Io(),this.sortedSet=new Oe(this.comparator)}static emptySet(e){return new di(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof di)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new di;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(){this.W_=new Oe(Y.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Z():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class xi{constructor(e,n,r,s,i,o,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new xi(e,n,di.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class UP{constructor(){this.queries=fv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=te(n),i=s.queries;s.queries=fv(),i.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new H(F.ABORTED,"Firestore shutting down"))}}function fv(){return new Ui(t=>vE(t),lc)}async function Dp(t,e){const n=te(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new FP,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=bp(o,`Initialization of query '${Us(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Op(n)}async function jp(t,e){const n=te(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function BP(t,e){const n=te(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.j_)l.X_(s)&&(r=!0);o.z_=s}}r&&Op(n)}function zP(t,e,n){const r=te(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Op(t){t.Y_.forEach(e=>{e.next()})}var Kh,pv;(pv=Kh||(Kh={})).ea="default",pv.Cache="cache";class Lp{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new xi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=xi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Kh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e){this.key=e}}class JE{constructor(e){this.key=e}}class $P{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ce(),this.mutatedKeys=ce(),this.Aa=_E(e),this.Ra=new di(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new hv,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,m)=>{const g=s.get(f),x=uc(this.query,m)?m:null,C=!!g&&this.mutatedKeys.has(g.key),P=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let N=!1;g&&x?g.data.isEqual(x.data)?C!==P&&(r.track({type:3,doc:x}),N=!0):this.ga(g,x)||(r.track({type:2,doc:x}),N=!0,(u&&this.Aa(x,u)>0||d&&this.Aa(x,d)<0)&&(l=!0)):!g&&x?(r.track({type:0,doc:x}),N=!0):g&&!x&&(r.track({type:1,doc:g}),N=!0,(u||d)&&(l=!0)),N&&(x?(o=o.add(x),i=P?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,m)=>function(x,C){const P=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z()}};return P(x)-P(C)}(f.type,m.type)||this.Aa(f.doc,m.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new xi(this.query,e.Ra,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new hv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ce(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new JE(r))}),this.da.forEach(r=>{e.has(r)||n.push(new XE(r))}),n}ba(e){this.Ta=e.Ts,this.da=ce();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return xi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class WP{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class HP{constructor(e){this.key=e,this.va=!1}}class qP{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Ui(l=>vE(l),lc),this.Ma=new Map,this.xa=new Set,this.Oa=new Oe(Y.comparator),this.Na=new Map,this.La=new Sp,this.Ba={},this.ka=new Map,this.qa=ki.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function KP(t,e,n=!0){const r=sT(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await ZE(r,e,n,!0),s}async function GP(t,e){const n=sT(t);await ZE(n,e,!0,!1)}async function ZE(t,e,n,r){const s=await gP(t.localStore,Cn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await QP(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&HE(t.remoteStore,s),l}async function QP(t,e,n,r,s){t.Ka=(m,g,x)=>async function(P,N,w,_){let E=N.view.ma(w);E.ns&&(E=await lv(P.localStore,N.query,!1).then(({documents:S})=>N.view.ma(S,E)));const D=_&&_.targetChanges.get(N.targetId),O=_&&_.targetMismatches.get(N.targetId)!=null,M=N.view.applyChanges(E,P.isPrimaryClient,D,O);return gv(P,N.targetId,M.wa),M.snapshot}(t,m,g,x);const i=await lv(t.localStore,e,!0),o=new $P(e,i.Ts),l=o.ma(i.documents),u=Da.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,u);gv(t,n,d.wa);const f=new WP(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function YP(t,e,n){const r=te(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!lc(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await qh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Ap(r.remoteStore,s.targetId),Gh(r,s.targetId)}).catch(Ra)):(Gh(r,s.targetId),await qh(r.localStore,s.targetId,!0))}async function XP(t,e){const n=te(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ap(n.remoteStore,r.targetId))}async function JP(t,e,n){const r=ib(t);try{const s=await function(o,l){const u=te(o),d=Ye.now(),f=l.reduce((x,C)=>x.add(C.key),ce());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",x=>{let C=er(),P=ce();return u.cs.getEntries(x,f).next(N=>{C=N,C.forEach((w,_)=>{_.isValidDocument()||(P=P.add(w))})}).next(()=>u.localDocuments.getOverlayedDocuments(x,C)).next(N=>{m=N;const w=[];for(const _ of l){const E=wR(_,m.get(_.key).overlayedDocument);E!=null&&w.push(new Gr(_.key,E,cE(E.value.mapValue),en.exists(!0)))}return u.mutationQueue.addMutationBatch(x,d,w,l)}).next(N=>{g=N;const w=N.applyToLocalDocumentSet(m,P);return u.documentOverlayCache.saveOverlays(x,N.batchId,w)})}).then(()=>({batchId:g.batchId,changes:EE(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new Oe(ye)),d=d.insert(l,u),o.Ba[o.currentUser.toKey()]=d}(r,s.batchId,n),await Oa(r,s.changes),await mc(r.remoteStore)}catch(s){const i=bp(s,"Failed to persist write");n.reject(i)}}async function eT(t,e){const n=te(t);try{const r=await fP(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(_e(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?_e(o.va):s.removedDocuments.size>0&&(_e(o.va),o.va=!1))}),await Oa(n,r,e)}catch(r){await Ra(r)}}function mv(t,e,n){const r=te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=te(o);u.onlineState=l;let d=!1;u.queries.forEach((f,m)=>{for(const g of m.j_)g.Z_(l)&&(d=!0)}),d&&Op(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function ZP(t,e,n){const r=te(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Oe(Y.comparator);o=o.insert(i,Et.newNoDocument(i,ee.min()));const l=ce().add(i),u=new hc(ee.min(),new Map,new Oe(ye),o,l);await eT(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),Vp(r)}else await qh(r.localStore,e,!1).then(()=>Gh(r,e,n)).catch(Ra)}async function eb(t,e){const n=te(t),r=e.batch.batchId;try{const s=await hP(n.localStore,e);nT(n,r,null),tT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Oa(n,s)}catch(s){await Ra(s)}}async function tb(t,e,n){const r=te(t);try{const s=await function(o,l){const u=te(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,l).next(m=>(_e(m!==null),f=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);nT(r,e,n),tT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Oa(r,s)}catch(s){await Ra(s)}}function tT(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function nT(t,e,n){const r=te(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Gh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||rT(t,r)})}function rT(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Ap(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Vp(t))}function gv(t,e,n){for(const r of n)r instanceof XE?(t.La.addReference(r.key,e),nb(t,r)):r instanceof JE?(K("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||rT(t,r.key)):Z()}function nb(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(K("SyncEngine","New document in limbo: "+n),t.xa.add(r),Vp(t))}function Vp(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Y(xe.fromString(e)),r=t.qa.next();t.Na.set(r,new HP(n)),t.Oa=t.Oa.insert(n,r),HE(t.remoteStore,new Ir(Cn(ac(n.path)),r,"TargetPurposeLimboResolution",fp.oe))}}async function Oa(t,e,n){const r=te(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){s.push(d);const m=xp.Wi(u.targetId,d);i.push(m)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,d){const f=te(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>U.forEach(d,g=>U.forEach(g.$i,x=>f.persistence.referenceDelegate.addReference(m,g.targetId,x)).next(()=>U.forEach(g.Ui,x=>f.persistence.referenceDelegate.removeReference(m,g.targetId,x)))))}catch(m){if(!Pa(m))throw m;K("LocalStore","Failed to update sequence numbers: "+m)}for(const m of d){const g=m.targetId;if(!m.fromCache){const x=f.os.get(g),C=x.snapshotVersion,P=x.withLastLimboFreeSnapshotVersion(C);f.os=f.os.insert(g,P)}}}(r.localStore,i))}async function rb(t,e){const n=te(t);if(!n.currentUser.isEqual(e)){K("SyncEngine","User change. New user:",e.toKey());const r=await BE(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(l=>{l.forEach(u=>{u.reject(new H(F.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Oa(n,r.hs)}}function sb(t,e){const n=te(t),r=n.Na.get(e);if(r&&r.va)return ce().add(r.key);{let s=ce();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const l=n.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}function sT(t){const e=te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=eT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ZP.bind(null,e),e.Ca.d_=BP.bind(null,e.eventManager),e.Ca.$a=zP.bind(null,e.eventManager),e}function ib(t){const e=te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tb.bind(null,e),e}class Du{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=fc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return dP(this.persistence,new uP,e.initialUser,this.serializer)}Ga(e){return new oP(kp.Zr,this.serializer)}Wa(e){return new vP}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Du.provider={build:()=>new Du};class Qh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>mv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=rb.bind(null,this.syncEngine),await MP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new UP}()}createDatastore(e){const n=fc(e.databaseInfo.databaseId),r=function(i){return new TP(i)}(e.databaseInfo);return function(i,o,l,u){return new kP(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new AP(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>mv(this.syncEngine,n,0),function(){return cv.D()?new cv:new _P}())}createSyncEngine(e,n){return function(s,i,o,l,u,d,f){const m=new qP(s,i,o,l,u,d);return f&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=te(s);K("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await ja(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Qh.provider={build:()=>new Qh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Zn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=_t.UNAUTHENTICATED,this.clientId=aE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{K("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(K("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=bp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ad(t,e){t.asyncQueue.verifyOperationInProgress(),K("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await BE(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function yv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await ab(t);K("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>dv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>dv(e.remoteStore,s)),t._onlineComponents=e}async function ab(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ad(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;wi("Error using user provided cache. Falling back to memory cache: "+n),await Ad(t,new Du)}}else K("FirestoreClient","Using default OfflineComponentProvider"),await Ad(t,new Du);return t._offlineComponents}async function iT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(K("FirestoreClient","Using user provided OnlineComponentProvider"),await yv(t,t._uninitializedComponentsProvider._online)):(K("FirestoreClient","Using default OnlineComponentProvider"),await yv(t,new Qh))),t._onlineComponents}function lb(t){return iT(t).then(e=>e.syncEngine)}async function ju(t){const e=await iT(t),n=e.eventManager;return n.onListen=KP.bind(null,e.syncEngine),n.onUnlisten=YP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=GP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=XP.bind(null,e.syncEngine),n}function ub(t,e,n={}){const r=new qn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,d){const f=new Mp({next:g=>{f.Za(),o.enqueueAndForget(()=>jp(i,m));const x=g.docs.has(l);!x&&g.fromCache?d.reject(new H(F.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&g.fromCache&&u&&u.source==="server"?d.reject(new H(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new Lp(ac(l.path),f,{includeMetadataChanges:!0,_a:!0});return Dp(i,m)}(await ju(t),t.asyncQueue,e,n,r)),r.promise}function cb(t,e,n={}){const r=new qn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,d){const f=new Mp({next:g=>{f.Za(),o.enqueueAndForget(()=>jp(i,m)),g.fromCache&&u.source==="server"?d.reject(new H(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new Lp(l,f,{includeMetadataChanges:!0,_a:!0});return Dp(i,m)}(await ju(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(t,e,n){if(!n)throw new H(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function db(t,e,n,r){if(e===!0&&r===!0)throw new H(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function _v(t){if(!Y.isDocumentKey(t))throw new H(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function wv(t){if(Y.isDocumentKey(t))throw new H(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function gc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Z()}function Mt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new H(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=gc(t);throw new H(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function hb(t,e){if(e<=0)throw new H(F.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new H(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new H(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}db("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=oT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new H(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new H(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new H(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ev({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ev(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new NN;switch(r.type){case"firstParty":return new DN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=vv.get(n);r&&(K("ComponentProvider","Removing Datastore"),vv.delete(n),r.terminate())}(this),Promise.resolve()}}function fb(t,e,n,r={}){var s;const i=(t=Mt(t,yc))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&wi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=_t.MOCK_USER;else{l=qx(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new H(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new _t(d)}t._authCredentials=new RN(new oE(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ir(this.firestore,e,this._query)}}class Tt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Lr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tt(this.firestore,e,this._key)}}class Lr extends ir{constructor(e,n,r){super(e,n,ac(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tt(this.firestore,null,new Y(e))}withConverter(e){return new Lr(this.firestore,e,this._path)}}function Be(t,e,...n){if(t=Xe(t),aT("collection","path",e),t instanceof yc){const r=xe.fromString(e,...n);return wv(r),new Lr(t,null,r)}{if(!(t instanceof Tt||t instanceof Lr))throw new H(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(xe.fromString(e,...n));return wv(r),new Lr(t.firestore,null,r)}}function fe(t,e,...n){if(t=Xe(t),arguments.length===1&&(e=aE.newId()),aT("doc","path",e),t instanceof yc){const r=xe.fromString(e,...n);return _v(r),new Tt(t,null,new Y(r))}{if(!(t instanceof Tt||t instanceof Lr))throw new H(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(xe.fromString(e,...n));return _v(r),new Tt(t.firestore,t instanceof Lr?t.converter:null,new Y(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new $E(this,"async_queue_retry"),this.Vu=()=>{const r=xd();r&&K("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=xd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=xd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new qn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Pa(e))throw e;K("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw Zn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Pp.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Z()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Iv(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class tr extends yc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Tv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Tv(e),this._firestoreClient=void 0,await e}}}function pb(t,e){const n=typeof t=="object"?t:y0(),r=typeof t=="string"?t:"(default)",s=np(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Wx("firestore");i&&fb(s,...i)}return s}function vc(t){if(t._terminated)throw new H(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||mb(t),t._firestoreClient}function mb(t){var e,n,r;const s=t._freezeSettings(),i=function(l,u,d,f){return new qN(l,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,oT(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new ob(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ai(ht.fromBase64String(e))}catch(n){throw new H(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ai(ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new H(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new H(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new H(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ye(this._lat,e._lat)||ye(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gb=/^__.*__$/;class yb{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Gr(e,this.data,this.fieldMask,n,this.fieldTransforms):new ba(e,this.data,n,this.fieldTransforms)}}class lT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Gr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function uT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z()}}class wc{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new wc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Ou(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(uT(this.Cu)&&gb.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class vb{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||fc(e)}Qu(e,n,r,s=!1){return new wc({Cu:e,methodName:n,qu:r,path:lt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ec(t){const e=t._freezeSettings(),n=fc(t._databaseId);return new vb(t._databaseId,!!e.ignoreUndefinedProperties,n)}function cT(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);$p("Data must be an object, but it was:",o,r);const l=dT(r,o);let u,d;if(i.merge)u=new $t(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const m of i.mergeFields){const g=Yh(e,m,n);if(!o.contains(g))throw new H(F.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);fT(f,g)||f.push(g)}u=new $t(f),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new yb(new Dt(l),u,d)}class Tc extends La{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Tc}}function _b(t,e,n){return new wc({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Bp extends La{_toFieldTransform(e){return new CE(e.path,new pa)}isEqual(e){return e instanceof Bp}}class zp extends La{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=_b(this,e,!0),r=this.Ku.map(i=>zi(i,n)),s=new Si(r);return new CE(e.path,s)}isEqual(e){return e instanceof zp&&ia(this.Ku,e.Ku)}}function wb(t,e,n,r){const s=t.Qu(1,e,n);$p("Data must be an object, but it was:",s,r);const i=[],o=Dt.empty();Cs(r,(u,d)=>{const f=Wp(e,u,n);d=Xe(d);const m=s.Nu(f);if(d instanceof Tc)i.push(f);else{const g=zi(d,m);g!=null&&(i.push(f),o.set(f,g))}});const l=new $t(i);return new lT(o,l,s.fieldTransforms)}function Eb(t,e,n,r,s,i){const o=t.Qu(1,e,n),l=[Yh(e,r,n)],u=[s];if(i.length%2!=0)throw new H(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(Yh(e,i[g])),u.push(i[g+1]);const d=[],f=Dt.empty();for(let g=l.length-1;g>=0;--g)if(!fT(d,l[g])){const x=l[g];let C=u[g];C=Xe(C);const P=o.Nu(x);if(C instanceof Tc)d.push(x);else{const N=zi(C,P);N!=null&&(d.push(x),f.set(x,N))}}const m=new $t(d);return new lT(f,m,o.fieldTransforms)}function Tb(t,e,n,r=!1){return zi(n,t.Qu(r?4:3,e))}function zi(t,e){if(hT(t=Xe(t)))return $p("Unsupported field value:",e,t),dT(t,e);if(t instanceof La)return function(r,s){if(!uT(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=zi(l,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Xe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return pR(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ye.fromDate(r);return{timestampValue:Pu(s.serializer,i)}}if(r instanceof Ye){const i=new Ye(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Pu(s.serializer,i)}}if(r instanceof Fp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ai)return{bytesValue:jE(s.serializer,r._byteString)};if(r instanceof Tt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Ip(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Up)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return _p(l.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${gc(r)}`)}(t,e)}function dT(t,e){const n={};return lE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Cs(t,(r,s)=>{const i=zi(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function hT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ye||t instanceof Fp||t instanceof Ai||t instanceof Tt||t instanceof La||t instanceof Up)}function $p(t,e,n){if(!hT(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=gc(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Yh(t,e,n){if((e=Xe(e))instanceof _c)return e._internalPath;if(typeof e=="string")return Wp(t,e);throw Ou("Field path arguments must be of type string or ",t,!1,void 0,n)}const Ib=new RegExp("[~\\*/\\[\\]]");function Wp(t,e,n){if(e.search(Ib)>=0)throw Ou(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new _c(...e.split("."))._internalPath}catch{throw Ou(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ou(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new H(F.INVALID_ARGUMENT,l+t+u)}function fT(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Tt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Sb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ic("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Sb extends pT{data(){return super.data()}}function Ic(t,e){return typeof e=="string"?Wp(t,e):e instanceof _c?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mT(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new H(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Hp{}class qp extends Hp{}function Nt(t,e,...n){let r=[];e instanceof Hp&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof Kp).length,l=i.filter(u=>u instanceof Sc).length;if(o>1||o>0&&l>0)throw new H(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Sc extends qp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Sc(e,n,r)}_apply(e){const n=this._parse(e);return gT(e._query,n),new ir(e.firestore,e.converter,Bh(e._query,n))}_parse(e){const n=Ec(e.firestore);return function(i,o,l,u,d,f,m){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new H(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){kv(m,f);const x=[];for(const C of m)x.push(Sv(u,i,C));g={arrayValue:{values:x}}}else g=Sv(u,i,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||kv(m,f),g=Tb(l,o,m,f==="in"||f==="not-in");return qe.create(d,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Re(t,e,n){const r=e,s=Ic("where",t);return Sc._create(s,r,n)}class Kp extends Hp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Kp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:gn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const u of l)gT(o,u),o=Bh(o,u)}(e._query,n),new ir(e.firestore,e.converter,Bh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Gp extends qp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Gp(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new H(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new H(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new fa(i,o)}(e._query,this._field,this._direction);return new ir(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Fi(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function ga(t,e="asc"){const n=e,r=Ic("orderBy",t);return Gp._create(r,n)}class Qp extends qp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Qp(e,n,r)}_apply(e){return new ir(e.firestore,e.converter,Nu(e._query,this._limit,this._limitType))}}function Yp(t){return hb("limit",t),Qp._create("limit",t,"F")}function Sv(t,e,n){if(typeof(n=Xe(n))=="string"){if(n==="")throw new H(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yE(e)&&n.indexOf("/")!==-1)throw new H(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(xe.fromString(n));if(!Y.isDocumentKey(r))throw new H(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Hy(t,new Y(r))}if(n instanceof Tt)return Hy(t,n._key);throw new H(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gc(n)}.`)}function kv(t,e){if(!Array.isArray(t)||t.length===0)throw new H(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function gT(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new H(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class kb{convertValue(e,n="none"){switch(Ss(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Is(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Z()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Cs(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Fe(o.doubleValue));return new Up(i)}convertGeoPoint(e){return new Fp(Fe(e.latitude),Fe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=mp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ca(e));default:return null}}convertTimestamp(e){const n=Ur(e);return new Ye(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=xe.fromString(e);_e(UE(r));const s=new da(r.get(1),r.get(3)),i=new Y(r.popFirst(5));return s.isEqual(n)||Zn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yT(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vT extends pT{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Gl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ic("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Gl extends vT{data(e={}){return super.data(e)}}class _T{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ko(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Gl(this._firestore,this._userDataWriter,r.key,r,new ko(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new H(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new Gl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ko(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new Gl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ko(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:xb(l.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function xb(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function is(t){t=Mt(t,Tt);const e=Mt(t.firestore,tr);return ub(vc(e),t._key).then(n=>wT(e,t,n))}class Xp extends kb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ai(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Tt(this.firestore,null,n)}}function yn(t){t=Mt(t,ir);const e=Mt(t.firestore,tr),n=vc(e),r=new Xp(e);return mT(t._query),cb(n,t._query).then(s=>new _T(e,r,t,s))}function fs(t,e,n){t=Mt(t,Tt);const r=Mt(t.firestore,tr),s=yT(t.converter,e,n);return kc(r,[cT(Ec(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,en.none())])}function tn(t,e,n,...r){t=Mt(t,Tt);const s=Mt(t.firestore,tr),i=Ec(s);let o;return o=typeof(e=Xe(e))=="string"||e instanceof _c?Eb(i,"updateDoc",t._key,e,n,r):wb(i,"updateDoc",t._key,e),kc(s,[o.toMutation(t._key,en.exists(!0))])}function Ci(t){return kc(Mt(t.firestore,tr),[new wp(t._key,en.none())])}function Ni(t,e){const n=Mt(t.firestore,tr),r=fe(t),s=yT(t.converter,e);return kc(n,[cT(Ec(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,en.exists(!1))]).then(()=>r)}function Ri(t,...e){var n,r,s;t=Xe(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Iv(e[o])||(i=e[o],o++);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Iv(e[o])){const m=e[o];e[o]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[o+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[o+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let u,d,f;if(t instanceof Tt)d=Mt(t.firestore,tr),f=ac(t._key.path),u={next:m=>{e[o]&&e[o](wT(d,t,m))},error:e[o+1],complete:e[o+2]};else{const m=Mt(t,ir);d=Mt(m.firestore,tr),f=m._query;const g=new Xp(d);u={next:x=>{e[o]&&e[o](new _T(d,g,m,x))},error:e[o+1],complete:e[o+2]},mT(t._query)}return function(g,x,C,P){const N=new Mp(P),w=new Lp(x,N,C);return g.asyncQueue.enqueueAndForget(async()=>Dp(await ju(g),w)),()=>{N.Za(),g.asyncQueue.enqueueAndForget(async()=>jp(await ju(g),w))}}(vc(d),f,l,u)}function kc(t,e){return function(r,s){const i=new qn;return r.asyncQueue.enqueueAndForget(async()=>JP(await lb(r),s,i)),i.promise}(vc(t),e)}function wT(t,e,n){const r=n.docs.get(e._key),s=new Xp(t);return new vT(t,s,e._key,r,new ko(n.hasPendingWrites,n.fromCache),e.converter)}function nt(){return new Bp("serverTimestamp")}function xv(...t){return new zp("arrayUnion",t)}(function(e,n=!0){(function(s){Mi=s})(Li),_i(new _s("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new tr(new PN(r.getProvider("auth-internal")),new ON(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new H(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new da(d.options.projectId,f)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Or(Uy,"4.7.3",e),Or(Uy,"4.7.3","esm2017")})();var Ab="firebase",Cb="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Or(Ab,Cb,"app");const Nb={apiKey:"AIzaSyAgbLkut_IDZRB9Ej8Srx5dEUYCy7zxja4",authDomain:"togo-bc8aa.firebaseapp.com",projectId:"togo-bc8aa",storageBucket:"togo-bc8aa.firebasestorage.app",messagingSenderId:"367980048662",appId:"1:367980048662:web:453b441cdb692584752037"},ET=g0(Nb),Al=AN(ET),Q=pb(ET),Rb="alexjmilano@gmail.com",TT=A.createContext(null);function Gt(){return A.useContext(TT)}function Pb({children:t}){const[e,n]=A.useState(null),[r,s]=A.useState(null),[i,o]=A.useState(null),[l,u]=A.useState(!0);async function d(N,w,_,E){const D=await dC(Al,N,w),O=N.toLowerCase()===Rb.toLowerCase()?"admin":"user",M=_.trim().toLowerCase();return await fs(fe(Q,"users",D.user.uid),{uid:D.user.uid,email:N.toLowerCase(),role:O,handle:M,displayName:E.trim(),bio:"",createdAt:nt()}),await fs(fe(Q,"userSettings",D.user.uid),{userId:D.user.uid,theme:"normal",streak:0,lastPeakDay:null,createdAt:nt(),updatedAt:nt()}),D}function f(N,w){return hC(Al,N,w)}function m(){return gC(Al)}async function g(N){try{const w=await is(fe(Q,"users",N));if(w.exists())return w.data().role||"user"}catch(w){console.warn("AuthContext: could not fetch role",w)}return"user"}async function x(N){e&&await tn(fe(Q,"users",e.uid),{...N,updatedAt:nt()})}A.useEffect(()=>mC(Al,async w=>{if(n(w),w){const _=await g(w.uid);s(_)}else s(null),o(null);u(!1)}),[]),A.useEffect(()=>{if(!e){o(null);return}return Ri(fe(Q,"users",e.uid),w=>{w.exists()?o({id:w.id,...w.data()}):o(null)})},[e]);const C=!!e&&!!i&&!i.handle,P={currentUser:e,userRole:r,userProfile:i,authLoading:l,needsHandle:C,register:d,login:f,logout:m,updateUserProfile:x};return c.jsx(TT.Provider,{value:P,children:t})}const se=(t,e,n)=>({name:t,sub:e,icon:n}),Av={normal:{name:"Default",icon:"",worker:{headerLabel:" WORKER MODE",locked:se("Locked In","To Do",""),progress:se("In The Zone","In Progress",""),touchdown:se("Touchdown","Done","")},life:{headerLabel:" LIFE MODE",locked:se("To Do","Planned",""),progress:se("Doing","In Progress",""),touchdown:se("Done","Completed","")},ice:se("Ice Bucket","Frozen / Paused","")},aesthetic:{name:"Aesthetic",icon:"",worker:{headerLabel:" WORKER MODE",locked:se("Dreaming","Ideas",""),progress:se("Flowing","In Progress",""),touchdown:se("Glowing","Done","")},life:{headerLabel:" LIFE MODE",locked:se("Wishlist","Planned",""),progress:se("Working On","Ongoing",""),touchdown:se("Achieved","Done","")},ice:se("On Hold","Paused ","")},football:{name:"Football",icon:"",worker:{headerLabel:" GAME TIME",locked:se("Pre-Game","Ready",""),progress:se("On The Field","In Play",""),touchdown:se("Touchdown","Scored","")},life:{headerLabel:" OFF FIELD",locked:se("Off-Season","Planned",""),progress:se("Training","In Progress",""),touchdown:se("Victory","Done","")},ice:se("On Bench","Benched","")},soccer:{name:"Soccer",icon:"",worker:{headerLabel:" MATCH DAY",locked:se("Warm Up","Ready",""),progress:se("On The Pitch","In Play",""),touchdown:se("GOAL!","Scored","")},life:{headerLabel:" LOCKER ROOM",locked:se("Locker Room","Planned",""),progress:se("Practicing","In Progress",""),touchdown:se("Win","Done","")},ice:se("Injured List","Paused","")},basketball:{name:"Basketball",icon:"",worker:{headerLabel:" GAME ON",locked:se("Bench","Ready",""),progress:se("On Court","In Play",""),touchdown:se("Slam Dunk","Scored","")},life:{headerLabel:" OFF COURT",locked:se("Practice","Planned",""),progress:se("Playing","In Progress",""),touchdown:se("Swish","Done","")},ice:se("Timeout","Paused","")},baseball:{name:"Baseball",icon:"",worker:{headerLabel:" PLAY BALL",locked:se("Dugout","Ready",""),progress:se("At Bat","In Play",""),touchdown:se("Home Run","Scored","")},life:{headerLabel:" BULLPEN",locked:se("Bullpen","Planned",""),progress:se("On Base","In Progress",""),touchdown:se("Score","Done","")},ice:se("Disabled List","Paused","")}};function IT(t){return Av[t]||Av.normal}const Cv={normal:{"--bg":"#f4f6fb","--bg2":"#eef1f8","--bg3":"#e8ecf4","--card":"#ffffff","--card-h":"#f0f4ff","--border":"rgba(15,23,42,0.08)","--border2":"rgba(15,23,42,0.14)","--text":"#0f172a","--text2":"#475569","--text3":"#94a3b8","--shadow":"0 4px 24px rgba(0,0,0,0.08)","--navbar-bg":"rgba(244,246,251,0.92)"},aesthetic:{"--bg":"#fdf4ff","--bg2":"#f9eeff","--bg3":"#f3e8ff","--card":"#ffffff","--card-h":"#fce7ff","--border":"rgba(168,85,247,0.1)","--border2":"rgba(168,85,247,0.18)","--text":"#3b0764","--text2":"#7c3aed","--text3":"#a78bfa","--shadow":"0 4px 24px rgba(168,85,247,0.1)","--navbar-bg":"rgba(253,244,255,0.92)"},football:{"--bg":"#f0fdf4","--bg2":"#e8f9ed","--bg3":"#dcf5e5","--card":"#ffffff","--card-h":"#d1fae5","--border":"rgba(16,185,129,0.1)","--border2":"rgba(16,185,129,0.18)","--text":"#064e3b","--text2":"#065f46","--text3":"#6ee7b7","--shadow":"0 4px 24px rgba(16,185,129,0.1)","--navbar-bg":"rgba(240,253,244,0.92)"},soccer:{"--bg":"#f0fdf4","--bg2":"#e6fbf0","--bg3":"#d1f5e0","--card":"#ffffff","--card-h":"#bbf7d0","--border":"rgba(34,197,94,0.1)","--border2":"rgba(34,197,94,0.18)","--text":"#14532d","--text2":"#166534","--text3":"#86efac","--shadow":"0 4px 24px rgba(34,197,94,0.1)","--navbar-bg":"rgba(240,253,244,0.92)"},basketball:{"--bg":"#fff7ed","--bg2":"#ffedd5","--bg3":"#fed7aa","--card":"#ffffff","--card-h":"#ffedd5","--border":"rgba(249,115,22,0.1)","--border2":"rgba(249,115,22,0.18)","--text":"#431407","--text2":"#7c2d12","--text3":"#fdba74","--shadow":"0 4px 24px rgba(249,115,22,0.1)","--navbar-bg":"rgba(255,247,237,0.92)"},baseball:{"--bg":"#fefce8","--bg2":"#fef9c3","--bg3":"#fef08a","--card":"#ffffff","--card-h":"#fef9c3","--border":"rgba(202,138,4,0.1)","--border2":"rgba(202,138,4,0.18)","--text":"#422006","--text2":"#713f12","--text3":"#fbbf24","--shadow":"0 4px 24px rgba(202,138,4,0.1)","--navbar-bg":"rgba(254,252,232,0.92)"}};function Nv(t){return Cv[t]||Cv.normal}const ST=A.createContext({themeName:"normal",themeData:IT("normal"),lightMode:!1,toggleLightMode:()=>{}});function Va(){return A.useContext(ST)}function bb({children:t}){const{currentUser:e}=Gt(),[n,r]=A.useState("normal"),[s,i]=A.useState(!1);A.useEffect(()=>{if(!e){r("normal"),i(!1);return}return Ri(fe(Q,"userSettings",e.uid),u=>{u.exists()&&(r(u.data().theme||"normal"),i(u.data().lightMode??!1))})},[e]),A.useEffect(()=>{const l=document.documentElement;if(n==="normal"?l.removeAttribute("data-theme"):l.setAttribute("data-theme",n),s){l.setAttribute("data-light","true");const u=Nv(n);Object.entries(u).forEach(([d,f])=>{l.style.setProperty(d,f)})}else{l.removeAttribute("data-light");const u=Nv(n);Object.keys(u).forEach(d=>{l.style.removeProperty(d)})}},[n,s]);async function o(){const l=!s;i(l),e&&await fs(fe(Q,"userSettings",e.uid),{lightMode:l,updatedAt:nt()},{merge:!0})}return c.jsx(ST.Provider,{value:{themeName:n,themeData:IT(n),lightMode:s,toggleLightMode:o},children:t})}function Fs({children:t,requireAdmin:e=!1}){const{currentUser:n,userRole:r,authLoading:s}=Gt();return s?c.jsxs("div",{className:"loading-screen",children:[c.jsx("div",{className:"loading-logo",children:"5toGo"}),c.jsx("div",{className:"spinner"})]}):n?e&&r!=="admin"?c.jsx(Sh,{to:"/app",replace:!0}):t:c.jsx(Sh,{to:"/login",replace:!0})}const Db=/^[a-z0-9_]{3,20}$/;function Jp(t){if(!t||t.trim().length===0)return"Handle is required.";const e=t.trim().toLowerCase();return e.length<3?"Handle must be at least 3 characters.":e.length>20?"Handle must be 20 characters or less.":Db.test(e)?null:"Only lowercase letters, numbers, and underscores allowed."}async function Zp(t,e,n=null){const r=e.trim().toLowerCase();try{const s=Nt(Be(t,"users"),Re("handle","==",r)),i=await yn(s);return!!(i.empty||n&&i.docs.length===1&&i.docs[0].id===n)}catch(s){return console.warn("checkHandleAvailable error:",s),!1}}function jb(){const{currentUser:t,updateUserProfile:e,logout:n}=Gt(),[r,s]=A.useState(""),[i,o]=A.useState(""),[l,u]=A.useState(""),[d,f]=A.useState(!1),[m,g]=A.useState(!1),[x,C]=A.useState("");A.useEffect(()=>{f(!1);const N=Jp(i);if(i.length===0){u("");return}if(N){u(N);return}u("Checking");const w=setTimeout(async()=>{await Zp(Q,i,t==null?void 0:t.uid)?(u(" Available"),f(!0)):(u("Handle already taken."),f(!1))},500);return()=>clearTimeout(w)},[i,t==null?void 0:t.uid]);async function P(N){if(N.preventDefault(),!(!d||!r.trim())){g(!0),C("");try{await e({handle:i.trim().toLowerCase(),displayName:r.trim(),bio:""})}catch{C("Something went wrong. Please try again.")}finally{g(!1)}}}return c.jsx("div",{className:"modal-overlay open",children:c.jsxs("div",{className:"modal-box set-handle-modal",children:[c.jsxs("div",{className:"shm-header",children:[c.jsxs("span",{className:"shm-logo",children:["5",c.jsx("span",{children:"to"}),"Go"]}),c.jsx("p",{className:"shm-title",children:"Set Up Your Profile"}),c.jsx("p",{className:"shm-sub",children:"Choose a handle to identify yourself. This cannot be changed easily."})]}),x&&c.jsx("div",{className:"auth-error",children:x}),c.jsxs("form",{className:"sched-form",onSubmit:P,children:[c.jsxs("div",{className:"sched-field",children:[c.jsx("label",{className:"sched-field-label",children:"Display Name"}),c.jsx("input",{className:"auth-input",placeholder:"Your name",value:r,onChange:N=>s(N.target.value),maxLength:40,required:!0,autoFocus:!0})]}),c.jsxs("div",{className:"sched-field",children:[c.jsx("label",{className:"sched-field-label",children:"Handle"}),c.jsxs("div",{className:"handle-input-wrap",children:[c.jsx("span",{className:"handle-at",children:"@"}),c.jsx("input",{className:`auth-input handle-input ${d?"handle-ok":l&&!d?"handle-err":""}`,placeholder:"your_handle",value:i,onChange:N=>o(N.target.value.toLowerCase()),maxLength:20,required:!0,autoComplete:"off"})]}),l&&c.jsx("span",{className:`handle-hint ${d?"handle-hint-ok":"handle-hint-err"}`,children:l}),c.jsx("span",{className:"sched-field-label",style:{marginTop:2},children:"320 chars. Letters, numbers, underscore only."})]}),c.jsx("button",{className:"auth-submit",type:"submit",disabled:m||!d||!r.trim(),children:m?"Saving":"Set Handle & Continue"})]}),c.jsx("button",{className:"shm-logout",onClick:n,children:"Sign out instead"})]})})}function Ob(){const{login:t,register:e}=Gt(),n=Ia(),[r,s]=A.useState(!1),[i,o]=A.useState(""),[l,u]=A.useState(""),[d,f]=A.useState(""),[m,g]=A.useState(""),[x,C]=A.useState(""),[P,N]=A.useState(""),[w,_]=A.useState(!1),[E,D]=A.useState(""),[O,M]=A.useState(!1);A.useEffect(()=>{if(!r)return;_(!1);const R=Jp(x);if(x.length===0){N("");return}if(R){N(R);return}N("Checking");const I=setTimeout(async()=>{await Zp(Q,x)?(N(" Available"),_(!0)):(N("Handle already taken."),_(!1))},500);return()=>clearTimeout(I)},[x,r]);const S=r?"Create your account":"Sign in to your account",y=r?"Create Account":"Sign In";function k(R){switch(R){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":return"Invalid email or password.";case"auth/email-already-in-use":return"An account with this email already exists.";case"auth/weak-password":return"Password must be at least 6 characters.";case"auth/invalid-email":return"Please enter a valid email address.";case"auth/too-many-requests":return"Too many attempts. Try again later.";default:return"Something went wrong. Please try again."}}async function T(R){if(R.preventDefault(),D(""),r&&l!==d){D("Passwords do not match.");return}if(r&&l.length<6){D("Password must be at least 6 characters.");return}if(r&&!m.trim()){D("Display name is required.");return}if(r&&!w){D("Please choose a valid, available handle.");return}M(!0);try{r?await e(i.trim(),l,x.trim(),m.trim()):await t(i.trim(),l),n("/app",{replace:!0})}catch(I){D(k(I.code))}finally{M(!1)}}function b(){s(R=>!R),D(""),u(""),f(""),C(""),g(""),N(""),_(!1)}return c.jsx("div",{className:"auth-page",children:c.jsxs("div",{className:"auth-card",children:[c.jsx("div",{className:"auth-logo",children:c.jsx("div",{className:"auth-logo-text",children:"5toGo"})}),c.jsx("p",{className:"auth-tagline",children:"5 YARDS TO TOUCHDOWN"}),c.jsx("p",{className:"auth-title",children:S}),E&&c.jsx("div",{className:"auth-error",children:E}),c.jsxs("form",{className:"auth-form",onSubmit:T,noValidate:!0,children:[c.jsxs("div",{className:"auth-field",children:[c.jsx("label",{className:"auth-label",children:"Email"}),c.jsx("input",{className:"auth-input",type:"email",placeholder:"you@example.com",value:i,onChange:R=>o(R.target.value),required:!0,autoComplete:"email",autoFocus:!0})]}),c.jsxs("div",{className:"auth-field",children:[c.jsx("label",{className:"auth-label",children:"Password"}),c.jsx("input",{className:"auth-input",type:"password",placeholder:r?"Min. 6 characters":"",value:l,onChange:R=>u(R.target.value),required:!0,autoComplete:r?"new-password":"current-password"})]}),r&&c.jsxs("div",{className:"auth-field",children:[c.jsx("label",{className:"auth-label",children:"Confirm Password"}),c.jsx("input",{className:"auth-input",type:"password",placeholder:"Repeat your password",value:d,onChange:R=>f(R.target.value),required:!0,autoComplete:"new-password"})]}),r&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"auth-field",children:[c.jsx("label",{className:"auth-label",children:"Display Name"}),c.jsx("input",{className:"auth-input",type:"text",placeholder:"Your full name or nickname",value:m,onChange:R=>g(R.target.value),maxLength:40,required:!0,autoComplete:"name"})]}),c.jsxs("div",{className:"auth-field",children:[c.jsx("label",{className:"auth-label",children:"Handle"}),c.jsxs("div",{className:"handle-input-wrap",children:[c.jsx("span",{className:"handle-at",children:"@"}),c.jsx("input",{className:`auth-input handle-input ${w?"handle-ok":""}`,type:"text",placeholder:"your_handle",value:x,onChange:R=>C(R.target.value.toLowerCase()),maxLength:20,required:!0,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1})]}),P&&c.jsx("span",{className:`handle-hint ${w?"handle-hint-ok":"handle-hint-err"}`,children:P})]})]}),c.jsx("button",{className:"auth-submit",type:"submit",disabled:O,children:O?r?"Creating account":"Signing in":y})]}),c.jsxs("div",{className:"auth-toggle",children:[r?"Already have an account?":"Don't have an account?",c.jsx("button",{onClick:b,children:r?"Sign in":"Create one"})]})]})})}/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lb=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),kT=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Vb={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mb=A.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...l},u)=>A.createElement("svg",{ref:u,...Vb,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:kT("lucide",s),...l},[...o.map(([d,f])=>A.createElement(d,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=(t,e)=>{const n=A.forwardRef(({className:r,...s},i)=>A.createElement(Mb,{ref:i,iconNode:e,className:kT(`lucide-${Lb(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=Je("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fb=Je("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ub=Je("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bb=Je("CalendarPlus",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"3spt84"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M16 19h6",key:"xwg31i"}],["path",{d:"M19 16v6",key:"tddt3s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zb=Je("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xT=Je("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AT=Je("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rv=Je("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $b=Je("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wb=Je("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hb=Je("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qb=Je("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kb=Je("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gb=Je("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qb=Je("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CT=Je("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NT=Je("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yb=Je("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=Je("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Lu={empty:{key:"empty",label:"Ready to start",msg:"Add your first task!",cls:"zone-empty"},green:{key:"green",label:"Peak performance",msg:"Peak performance zone ",cls:"zone-green"},yellow:{key:"yellow",label:"High workload",msg:" High workload. Don't overcommit.",cls:"zone-yellow"},red:{key:"red",label:"Burnout risk",msg:" Burnout risk! Consider moving tasks to Life.",cls:"zone-red"}};function RT(t){return t===0?"empty":t<=5?"green":t<=7?"yellow":"red"}const Cd=[{min:7,label:"OVERACHIEVER",icon:"",cls:"sc-over",note:"Remember to rest tomorrow "},{min:5,label:"PEAK DAY",icon:"",cls:"sc-peak",note:""},{min:4,label:"SOLID DAY",icon:"",cls:"sc-solid",note:""},{min:2,label:"GOOD EFFORT",icon:"",cls:"sc-good",note:""},{min:0,label:"OFF DAY",icon:"",cls:"sc-off",note:""}];function Vu(t){for(const e of Cd)if(t>=e.min)return e;return Cd[Cd.length-1]}function em(t){return t.reduce((e,n)=>e+(Number(n.difficulty)||1),0)}const Pv=[{bg:"rgba(76,201,240,0.15)",text:"#4cc9f0",border:"rgba(76,201,240,0.3)"},{bg:"rgba(255,107,53,0.15)",text:"#ff6b35",border:"rgba(255,107,53,0.3)"},{bg:"rgba(45,198,83,0.15)",text:"#2dc653",border:"rgba(45,198,83,0.3)"},{bg:"rgba(155,93,229,0.15)",text:"#9b5de5",border:"rgba(155,93,229,0.3)"},{bg:"rgba(255,215,0,0.15)",text:"#ffd700",border:"rgba(255,215,0,0.3)"},{bg:"rgba(240,76,201,0.15)",text:"#f04cc9",border:"rgba(240,76,201,0.3)"},{bg:"rgba(76,240,201,0.15)",text:"#4cf0c9",border:"rgba(76,240,201,0.3)"},{bg:"rgba(255,165,0,0.15)",text:"#ffa500",border:"rgba(255,165,0,0.3)"}];function xc(t){let e=0;for(let n=0;n<t.length;n++)e=e*31+t.charCodeAt(n)|0;return Pv[Math.abs(e)%Pv.length]}function Xb(t,e){const n=t+e;if(n===0)return{icon:"",label:"No activity",cls:"bs-empty"};const r=e/n;return r>=.35?{icon:"",label:"Balanced",cls:"bs-balanced"}:r>=.15?{icon:"",label:"Work-focused",cls:"bs-focused"}:e===0?{icon:"",label:"Workaholic",cls:"bs-workaholic"}:{icon:"",label:"Work-heavy",cls:"bs-focused"}}function Jb(){const{lightMode:t,toggleLightMode:e}=Va();return c.jsxs("button",{className:"theme-toggle-btn",onClick:e,title:t?"Switch to Dark Mode":"Switch to Light Mode","aria-label":t?"Switch to Dark Mode":"Switch to Light Mode",children:[c.jsx("span",{className:"theme-toggle-icon",children:t?"":""}),c.jsx("span",{className:"theme-toggle-label",children:t?"Dark":"Light"})]})}async function Zb(t,e,n,r){if(!e.length)return;const s=e.map(l=>l.handle),i=e.map(l=>l.userId);await tn(fe(Q,"tasks",t),{sharedWith:xv(...s),sharedWithUids:xv(...i),isShared:!0,sharedBy:r,sharedAt:nt()});const o=e.map(l=>Ni(Be(Q,"sharedTaskNotifications"),{userId:l.userId,taskId:t,sharedBy:r,sharedByHandle:r,taskText:n.text,read:!1,createdAt:nt()}));await Promise.all(o)}async function e2(t){await tn(fe(Q,"sharedTaskNotifications",t),{read:!0})}async function t2(t){const e=t.filter(n=>!n.read);e.length&&await Promise.all(e.map(n=>tn(fe(Q,"sharedTaskNotifications",n.id),{read:!0})))}function n2(t){if(!t)return"";const e=t.seconds?t.seconds*1e3:t,r=Date.now()-e,s=Math.floor(r/6e4),i=Math.floor(r/36e5),o=Math.floor(r/864e5);return s<1?"just now":s<60?`${s}m ago`:i<24?`${i}h ago`:o<7?new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"}):new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}function r2({currentUser:t}){const[e,n]=A.useState([]),[r,s]=A.useState(!1),i=A.useRef(null),o=e.filter(d=>!d.read).length;A.useEffect(()=>{if(!t)return;const d=Nt(Be(Q,"sharedTaskNotifications"),Re("userId","==",t.uid),ga("createdAt","desc"),Yp(20));return Ri(d,f=>{const m=f.docs.map(g=>({id:g.id,...g.data()}));n(m)})},[t]),A.useEffect(()=>{if(!r)return;const d=f=>{i.current&&!i.current.contains(f.target)&&s(!1)};return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[r]);async function l(d){await e2(d)}async function u(){await t2(e)}return c.jsxs("div",{className:"notif-bell",ref:i,children:[c.jsxs("button",{className:"nav-btn notif-bell-btn",onClick:()=>s(!r),children:[c.jsx(Fb,{size:14}),o>0&&c.jsx("span",{className:"notif-badge",children:o>9?"9+":o})]}),r&&c.jsxs("div",{className:"notif-panel",children:[c.jsxs("div",{className:"np-header",children:[c.jsx("span",{className:"np-title",children:"Notifications"}),o>0&&c.jsx("button",{className:"np-mark-all",onClick:u,children:"Mark all read"})]}),c.jsx("div",{className:"np-list",children:e.length===0?c.jsx("div",{className:"np-empty",children:"No notifications yet"}):e.map(d=>c.jsxs("div",{className:`np-item ${d.read?"":"unread"}`,onClick:()=>!d.read&&l(d.id),children:[c.jsxs("div",{className:"np-from",children:["Shared by ",c.jsxs("strong",{children:["@",d.sharedByHandle]})]}),c.jsx("div",{className:"np-item-task",children:d.taskText}),c.jsx("div",{className:"np-item-time",children:n2(d.createdAt)})]},d.id))})]})]})}function tm({todayPoints:t=0,streak:e=0,zone:n="empty",onOpenSettings:r}){var m;const{currentUser:s,userRole:i,userProfile:o,logout:l}=Gt();Ia();const u=Vu(t),d=Lu[n]||Lu.empty;async function f(){try{await l()}catch(g){console.error(g)}}return c.jsxs("nav",{className:"navbar",children:[c.jsxs("div",{className:"navbar-left",children:[c.jsxs(dn,{to:"/app",className:"nav-logo",children:["5",c.jsx("span",{className:"nav-logo-accent",children:"to"}),"Go"]}),c.jsx("span",{className:"nav-tagline",children:"5 YARDS TO TOUCHDOWN"})]}),c.jsxs("div",{className:"navbar-center",children:[c.jsxs("div",{className:"nav-score",children:[c.jsx("span",{className:"nav-score-label",children:"TODAY"}),c.jsx("span",{className:`nav-score-value ${u.cls}`,children:t}),c.jsx("span",{className:"nav-score-sep",children:"/5 pts"}),c.jsx("div",{className:"nav-score-divider"}),c.jsxs("span",{className:`nav-score-status ${u.cls}`,children:[u.icon," ",u.label]})]}),c.jsx("div",{className:`nav-zone-pill ${d.cls}`,children:d.label}),e>0&&c.jsxs("div",{className:"nav-streak",children:[c.jsx("span",{children:""}),c.jsx("span",{className:"nav-streak-num",children:e}),c.jsx("span",{className:"nav-streak-label",children:"day streak"})]})]}),c.jsxs("div",{className:"navbar-right",children:[c.jsx(Jb,{}),c.jsx(r2,{currentUser:s}),(o==null?void 0:o.handle)&&c.jsxs(dn,{to:`/profile/${o.handle}`,className:"nav-btn",children:[c.jsx(Yb,{size:14})," Profile"]}),c.jsxs(dn,{to:"/calendar",className:"nav-btn",children:[c.jsx(Ub,{size:14})," Calendar"]}),c.jsxs(dn,{to:"/history",className:"nav-btn",children:[c.jsx(zb,{size:14})," History"]}),c.jsxs("button",{className:"nav-btn",onClick:r,children:[c.jsx(Qb,{size:14})," Settings"]}),i==="admin"&&c.jsxs(dn,{to:"/admin",className:"nav-btn admin",children:[c.jsx(CT,{size:14})," Admin"]}),c.jsxs("button",{className:"nav-btn logout",onClick:f,children:[c.jsx($b,{size:14})," ",o!=null&&o.handle?`@${o.handle}`:(m=s==null?void 0:s.email)==null?void 0:m.split("@")[0]]})]})]})}function Wi(){return new Date().toISOString().split("T")[0]}function s2(){const t=new Date;return t.setDate(t.getDate()-1),t.toISOString().split("T")[0]}function Xh(t=new Date){const e=new Date(t);e.setHours(0,0,0,0),e.setDate(e.getDate()+4-(e.getDay()||7));const n=new Date(e.getFullYear(),0,1);return Math.ceil(((e-n)/864e5+1)/7)}function PT(t){return t?(t.toDate?t.toDate():new Date(t)).toLocaleDateString("en-US",{month:"short",day:"numeric"}):""}function bv(t){const e=new Date;return e.setDate(e.getDate()-t),e.toISOString().split("T")[0]}function i2(t=0){const e=new Date,n=e.getDay()||7,r=new Date(e);return r.setDate(e.getDate()-n+1+t*7),r.setHours(0,0,0,0),Array.from({length:7},(s,i)=>{const o=new Date(r);return o.setDate(r.getDate()+i),o.toISOString().split("T")[0]})}function bT(t){return new Date(t+"T00:00:00").toLocaleDateString("en-US",{weekday:"short",day:"numeric"})}function o2(t){if(!t||t.length===0)return"";const e=n=>new Date(n+"T00:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"});return`${e(t[0])}  ${e(t[6])}`}const Dv={locked:"progress",progress:"touchdown",ice:"locked"},jv={progress:"locked",touchdown:"progress"},a2={locked:" Start",progress:" Done",ice:" Activate"},l2={progress:" Back",touchdown:" Undo"},u2={1:"",2:"",3:""},c2=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function d2(t){const e=new Date(t+"T00:00:00");return`${c2[e.getMonth()]} ${e.getDate()}`}function h2({task:t,onMove:e,onDelete:n,onDragStart:r,onDragEnd:s,isDragging:i,currentUser:o,userProfile:l,onShare:u,onEdit:d}){const f=Wi(),m=t.dateStr&&t.dateStr<f,g=t.dateStr&&t.dateStr>f,x=(l==null?void 0:l.handle)||null,C=(o==null?void 0:o.uid)||null,P=t.userId===C,w=(t.sharedWith||[]).includes(x)&&!P,_=P||w,E=P,D=P;let O=`task-card m-${t.mode} s-${t.status}`;i&&(O+=" is-dragging"),m&&(O+=" old-task"),g&&(O+=" future-task");const M=Array.isArray(t.tags)?t.tags.filter(Boolean):[];return c.jsxs("div",{className:O,draggable:!0,"data-id":t.id,onDragStart:S=>{S.dataTransfer.effectAllowed="move",S.dataTransfer.setData("text/plain",t.id),r(t.id)},onDragEnd:s,children:[g&&c.jsxs("div",{className:"task-future-badge",children:[" ",d2(t.dateStr)]}),t.isShared&&c.jsx("div",{className:"task-shared-badge",children:P?` Shared with ${(t.sharedWith||[]).length} ${(t.sharedWith||[]).length===1?"person":"people"}`:` Shared by @${t.sharedBy}`}),c.jsx("div",{className:"task-title",children:t.text}),M.length>0&&c.jsx("div",{className:"task-tags",children:M.map((S,y)=>{const k=xc(S);return c.jsxs("span",{className:"tag-chip",style:{background:k.bg,color:k.text,borderColor:k.border},children:["#",S]},y)})}),c.jsxs("div",{className:"task-footer",children:[c.jsx("span",{className:`mode-badge badge-${t.mode}`,children:t.mode==="worker"?"WORKER":"LIFE"}),t.mode==="worker"&&t.difficulty&&c.jsx("span",{className:"task-stars",title:`Difficulty ${t.difficulty}`,children:u2[t.difficulty]||""}),c.jsxs("div",{className:"task-actions",children:[_&&Dv[t.status]&&c.jsx("button",{className:"act fwd",onClick:()=>e(t.id,Dv[t.status]),children:a2[t.status]}),_&&jv[t.status]&&c.jsx("button",{className:"act back",onClick:()=>e(t.id,jv[t.status]),children:l2[t.status]}),_&&(t.status==="locked"||t.status==="progress")&&c.jsx("button",{className:"act ice",onClick:()=>e(t.id,"ice"),children:""}),D&&u&&c.jsx("button",{className:"act share",onClick:()=>u(t.id),children:""}),_&&d&&c.jsx("button",{className:"act edit",onClick:()=>d(t),children:""}),E&&c.jsx("button",{className:"act del",onClick:()=>n(t.id),children:""})]})]})]})}const f2={locked:{icon:"",text:"Add tasks above to lock in"},progress:{icon:"",text:"Drag a task here to start"},touchdown:{icon:"",text:"Complete tasks to score points"},ice:{icon:"",text:"Frozen or paused tasks live here"}};function Xt({title:t,subtitle:e,icon:n,status:r,colorClass:s,tasks:i,onMove:o,onDelete:l,draggingId:u,onDragStart:d,onDragEnd:f,currentUser:m,userProfile:g,onShare:x,onEdit:C}){const[P,N]=A.useState(!1),w=f2[r]||{icon:"",text:"Empty"};function _(O){O.preventDefault(),O.dataTransfer.dropEffect="move",N(!0)}function E(O){O.currentTarget.contains(O.relatedTarget)||N(!1)}function D(O){O.preventDefault(),N(!1);const M=O.dataTransfer.getData("text/plain")||u;M&&o(M,r)}return c.jsxs("div",{className:`column ${s} ${P?"drop-target":""}`,children:[c.jsxs("div",{className:"col-header",children:[c.jsxs("div",{className:"col-title-row",children:[c.jsx("span",{className:"col-icon",children:n}),c.jsx("span",{className:"col-name",children:t}),c.jsx("span",{className:"col-count",children:i.length})]}),c.jsx("span",{className:"col-sub",children:e})]}),c.jsx("div",{className:`task-list ${P?"drag-over":""}`,onDragOver:_,onDragLeave:E,onDrop:D,children:i.length===0?c.jsxs("div",{className:"col-empty",children:[c.jsx("span",{className:"col-empty-icon",children:w.icon}),w.text]}):i.map(O=>c.jsx(h2,{task:O,onMove:o,onDelete:l,onDragStart:d,onDragEnd:f,isDragging:u===O.id,currentUser:m,userProfile:g,onShare:x,onEdit:C},O.id))})]})}const p2=[{value:1,label:" Easy",cls:"diff-easy"},{value:2,label:" Med",cls:"diff-medium"},{value:3,label:" Hard",cls:"diff-hard"}];function nm({value:t,onChange:e}){return c.jsx("div",{className:"diff-selector",children:p2.map(n=>c.jsx("button",{type:"button",className:`diff-opt ${n.cls} ${t===n.value?"selected":""}`,onClick:()=>e(n.value),children:n.label},n.value))})}function Ac({tags:t,onChange:e,placeholder:n="Add tag"}){const[r,s]=A.useState("");function i(u){const d=u.trim().toLowerCase().replace(/[^a-z0-9_-]/g,"");d&&!t.includes(d)&&e([...t,d]),s("")}function o(u){(u.key==="Enter"||u.key===",")&&(u.preventDefault(),i(r)),u.key==="Backspace"&&r===""&&t.length>0&&e(t.slice(0,-1))}function l(u){e(t.filter(d=>d!==u))}return c.jsxs("div",{className:"tag-input-wrap",children:[t.map(u=>{const d=xc(u);return c.jsxs("span",{className:"tag-pill",style:{background:d.bg,color:d.text,borderColor:d.border},children:["#",u,c.jsx("button",{type:"button",className:"tag-pill-remove",onClick:()=>l(u),style:{color:d.text},children:""})]},u)}),c.jsx("input",{className:"tag-input-field",value:r,onChange:u=>s(u.target.value),onKeyDown:o,onBlur:()=>r.trim()&&i(r),placeholder:t.length===0?n:"",maxLength:30})]})}function m2({zone:t,activeCount:e}){const n=Lu[t]||Lu.empty;return c.jsxs("div",{className:`zone-badge ${n.cls}`,children:[c.jsx("span",{className:"zone-count",children:e}),c.jsx("span",{className:"zone-msg",children:n.msg})]})}function g2({tasks:t,iceTasks:e,activeWorkerCount:n,todayPoints:r,streak:s,draggingId:i,onMove:o,onDelete:l,onDragStart:u,onDragEnd:d,onAddTask:f,currentUser:m,userProfile:g,onShare:x,onEdit:C,splitMode:P}){const{themeData:N}=Va(),w=N.worker,_=N.ice||{name:"Ice Bucket",sub:"Frozen",icon:""},[E,D]=A.useState(""),[O,M]=A.useState(2),[S,y]=A.useState([]),[k,T]=A.useState(null),[b,R]=A.useState(!1),[I,pe]=A.useState(null),$e=RT(n),Le=Vu(r),Pe=Math.min(r/5*100,100),V=A.useMemo(()=>{const X=new Set;return t.forEach(ue=>(ue.tags||[]).forEach(ft=>X.add(ft))),[...X]},[t]),W=k?t.filter(X=>(X.tags||[]).includes(k)):t;async function G(X){if(X.preventDefault(),!!E.trim()){if(n>=7){pe({text:E.trim(),difficulty:O,tags:S}),R(!0);return}await oe("worker",E.trim(),O,S)}}async function oe(X,ue,ft,Pn){await f({text:ue,mode:X,difficulty:ft,tags:Pn}),D(""),y([])}async function le(){I&&(await oe("life",I.text,I.difficulty,I.tags),ne())}function ie(){ne()}async function Ce(){I&&(await oe("worker",I.text,I.difficulty,I.tags),ne())}function ne(){R(!1),pe(null)}return c.jsxs("div",{className:`worker-side zone-border-${$e}`,children:[c.jsxs("div",{className:"board-header worker-header",children:[c.jsxs("div",{className:"bh-top",children:[c.jsx("span",{className:"bh-title",children:w.headerLabel}),c.jsx(m2,{zone:$e,activeCount:n})]}),c.jsxs("div",{className:"bh-score",children:[c.jsxs("div",{className:"bh-score-row",children:[c.jsxs("span",{className:`bh-pts ${Le.cls}`,children:[r,c.jsx("span",{className:"bh-pts-max",children:"/5 pts"})]}),c.jsxs("span",{className:`bh-level-badge ${Le.cls}`,children:[Le.icon," ",Le.label]}),s>0&&c.jsxs("span",{className:"bh-streak",children:[" ",s,"d"]})]}),c.jsx("div",{className:"bh-bar-track",children:c.jsx("div",{className:`bh-bar-fill ${Le.cls}`,style:{width:`${Pe}%`}})}),Le.note&&c.jsx("span",{className:"bh-note",children:Le.note})]})]}),c.jsxs("form",{className:"board-add-form",onSubmit:G,children:[c.jsxs("div",{className:"baf-row1",children:[c.jsx("input",{className:"baf-input",placeholder:"Add a worker task",value:E,onChange:X=>D(X.target.value),maxLength:140}),c.jsx("button",{className:"baf-btn worker-btn",type:"submit",children:"+ Add"})]}),c.jsxs("div",{className:"baf-row2",children:[c.jsx(nm,{value:O,onChange:M}),c.jsx(Ac,{tags:S,onChange:y,placeholder:"tags"})]})]}),V.length>0&&c.jsxs("div",{className:"tag-filter-bar",children:[c.jsx("button",{className:`tf-chip ${k?"":"tf-active"}`,onClick:()=>T(null),children:"All"}),V.map(X=>{const ue=xc(X);return c.jsxs("button",{className:`tf-chip ${k===X?"tf-active":""}`,style:{background:ue.bg,color:ue.text,borderColor:ue.border},onClick:()=>T(k===X?null:X),children:["#",X]},X)})]}),P?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"board-cols-top",children:[c.jsx(Xt,{title:w.locked.name,subtitle:w.locked.sub,icon:w.locked.icon,status:"locked",colorClass:"col-locked",tasks:W.filter(X=>X.status==="locked"),onMove:o,onDelete:l,draggingId:i,onDragStart:u,onDragEnd:d,currentUser:m,userProfile:g,onShare:x,onEdit:C}),c.jsx(Xt,{title:w.progress.name,subtitle:w.progress.sub,icon:w.progress.icon,status:"progress",colorClass:"col-progress",tasks:W.filter(X=>X.status==="progress"),onMove:o,onDelete:l,draggingId:i,onDragStart:u,onDragEnd:d,currentUser:m,userProfile:g,onShare:x,onEdit:C})]}),c.jsxs("div",{className:"board-cols-bottom",children:[c.jsx(Xt,{title:w.touchdown.name,subtitle:w.touchdown.sub,icon:w.touchdown.icon,status:"touchdown",colorClass:"col-touchdown",tasks:W.filter(X=>X.status==="touchdown"),onMove:o,onDelete:l,draggingId:i,onDragStart:u,onDragEnd:d,currentUser:m,userProfile:g,onShare:x,onEdit:C}),c.jsx(Xt,{title:_.name,subtitle:_.sub,icon:_.icon,status:"ice",colorClass:"col-ice",tasks:k?e.filter(X=>(X.tags||[]).includes(k)):e,onMove:o,onDelete:l,draggingId:i,onDragStart:u,onDragEnd:d,currentUser:m,userProfile:g,onShare:x,onEdit:C})]})]}):c.jsxs("div",{className:"board-cols",children:[["locked","progress","touchdown"].map(X=>{const ue=w[X];return c.jsx(Xt,{title:ue.name,subtitle:ue.sub,icon:ue.icon,status:X,colorClass:`col-${X}`,tasks:W.filter(ft=>ft.status===X),onMove:o,onDelete:l,draggingId:i,onDragStart:u,onDragEnd:d,currentUser:m,userProfile:g,onShare:x,onEdit:C},X)}),c.jsx(Xt,{title:_.name,subtitle:_.sub,icon:_.icon,status:"ice",colorClass:"col-ice",tasks:k?e.filter(X=>(X.tags||[]).includes(k)):e,onMove:o,onDelete:l,draggingId:i,onDragStart:u,onDragEnd:d,currentUser:m,userProfile:g,onShare:x})]}),b&&c.jsx("div",{className:"modal-overlay open",onClick:ne,children:c.jsxs("div",{className:"modal-box burnout-box",onClick:X=>X.stopPropagation(),children:[c.jsx("div",{className:"burnout-icon",children:""}),c.jsx("h2",{className:"burnout-title",children:"BURNOUT RISK!"}),c.jsx("p",{className:"burnout-msg",children:"You're pushing too hard. 8+ active tasks could affect your wellbeing and performance."}),c.jsxs("div",{className:"burnout-actions",children:[c.jsx("button",{className:"bb-btn bb-life",onClick:le,children:" Move to Life mode instead"}),c.jsx("button",{className:"bb-btn bb-tomorrow",onClick:ie,children:" Schedule for tomorrow"}),c.jsx("button",{className:"bb-btn bb-force",onClick:Ce,children:" I understand the risk"})]})]})})]})}function y2({tasks:t,iceTasks:e,completedToday:n,draggingId:r,onMove:s,onDelete:i,onDragStart:o,onDragEnd:l,onAddTask:u,currentUser:d,userProfile:f,onShare:m,onEdit:g,splitMode:x}){const{themeData:C}=Va(),P=C.life,N=C.ice||{name:"Ice Bucket",sub:"Frozen",icon:""},[w,_]=A.useState(""),[E,D]=A.useState([]),[O,M]=A.useState(null),S=A.useMemo(()=>{const T=new Set;return t.forEach(b=>(b.tags||[]).forEach(R=>T.add(R))),[...T]},[t]),y=O?t.filter(T=>(T.tags||[]).includes(O)):t;async function k(T){T.preventDefault(),w.trim()&&(await u({text:w.trim(),mode:"life",difficulty:1,tags:E}),_(""),D([]))}return c.jsxs("div",{className:"life-side",children:[c.jsxs("div",{className:"board-header life-header",children:[c.jsxs("div",{className:"bh-top",children:[c.jsx("span",{className:"bh-title",children:P.headerLabel}),n>0&&c.jsxs("span",{className:"life-completed-badge",children:[n," completed today "]})]}),c.jsx("p",{className:"life-tagline",children:"No pressure, just progress"})]}),c.jsxs("form",{className:"board-add-form",onSubmit:k,children:[c.jsxs("div",{className:"baf-row1",children:[c.jsx("input",{className:"baf-input",placeholder:"Add a life task",value:w,onChange:T=>_(T.target.value),maxLength:140}),c.jsx("button",{className:"baf-btn life-btn",type:"submit",children:"+ Add"})]}),c.jsx("div",{className:"baf-row2",children:c.jsx(Ac,{tags:E,onChange:D,placeholder:"tags: health, family"})})]}),S.length>0&&c.jsxs("div",{className:"tag-filter-bar",children:[c.jsx("button",{className:`tf-chip ${O?"":"tf-active"}`,onClick:()=>M(null),children:"All"}),S.map(T=>{const b=xc(T);return c.jsxs("button",{className:`tf-chip ${O===T?"tf-active":""}`,style:{background:b.bg,color:b.text,borderColor:b.border},onClick:()=>M(O===T?null:T),children:["#",T]},T)})]}),x?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"board-cols-top",children:[c.jsx(Xt,{title:P.locked.name,subtitle:P.locked.sub,icon:P.locked.icon,status:"locked",colorClass:"col-life-locked",tasks:y.filter(T=>T.status==="locked"),onMove:s,onDelete:i,draggingId:r,onDragStart:o,onDragEnd:l,currentUser:d,userProfile:f,onShare:m,onEdit:g}),c.jsx(Xt,{title:P.progress.name,subtitle:P.progress.sub,icon:P.progress.icon,status:"progress",colorClass:"col-life-progress",tasks:y.filter(T=>T.status==="progress"),onMove:s,onDelete:i,draggingId:r,onDragStart:o,onDragEnd:l,currentUser:d,userProfile:f,onShare:m,onEdit:g})]}),c.jsxs("div",{className:"board-cols-bottom",children:[c.jsx(Xt,{title:P.touchdown.name,subtitle:P.touchdown.sub,icon:P.touchdown.icon,status:"touchdown",colorClass:"col-life-touchdown",tasks:y.filter(T=>T.status==="touchdown"),onMove:s,onDelete:i,draggingId:r,onDragStart:o,onDragEnd:l,currentUser:d,userProfile:f,onShare:m,onEdit:g}),c.jsx(Xt,{title:N.name,subtitle:N.sub,icon:N.icon,status:"ice",colorClass:"col-life-ice",tasks:O?e.filter(T=>(T.tags||[]).includes(O)):e,onMove:s,onDelete:i,draggingId:r,onDragStart:o,onDragEnd:l,currentUser:d,userProfile:f,onShare:m,onEdit:g})]})]}):c.jsxs("div",{className:"board-cols",children:[["locked","progress","touchdown"].map(T=>{const b=P[T];return c.jsx(Xt,{title:b.name,subtitle:b.sub,icon:b.icon,status:T,colorClass:`col-life-${T}`,tasks:y.filter(R=>R.status===T),onMove:s,onDelete:i,draggingId:r,onDragStart:o,onDragEnd:l,currentUser:d,userProfile:f,onShare:m,onEdit:g},T)}),c.jsx(Xt,{title:N.name,subtitle:N.sub,icon:N.icon,status:"ice",colorClass:"col-life-ice",tasks:O?e.filter(T=>(T.tags||[]).includes(O)):e,onMove:s,onDelete:i,draggingId:r,onDragStart:o,onDragEnd:l,currentUser:d,userProfile:f,onShare:m})]})]})}const v2=[{id:"normal",icon:"",name:"Default",desc:"Classic sports dark theme"},{id:"aesthetic",icon:"",name:"Aesthetic",desc:"Soft pastel vibes"},{id:"football",icon:"",name:"Football",desc:"Green field energy"},{id:"soccer",icon:"",name:"Soccer",desc:"Pitch-ready look"},{id:"basketball",icon:"",name:"Basketball",desc:"Court colors"},{id:"baseball",icon:"",name:"Baseball",desc:"Diamond classic"}];function _2({isOpen:t,onClose:e}){const{currentUser:n}=Gt(),{themeName:r}=Va(),[s,i]=A.useState(!1),[o,l]=A.useState(!1);async function u(d){if(!(!n||s||d===r)){i(!0);try{await tn(fe(Q,"userSettings",n.uid),{theme:d,updatedAt:nt()}),l(!0),setTimeout(()=>l(!1),1500)}catch(f){console.error("Settings save error:",f)}finally{i(!1)}}}return c.jsx("div",{className:`settings-overlay ${t?"open":""}`,onClick:d=>{d.target===d.currentTarget&&e()},children:c.jsxs("div",{className:"settings-box",children:[c.jsxs("div",{className:"settings-header",children:[c.jsx("span",{className:"settings-title",children:" Settings"}),c.jsx("button",{className:"settings-close",onClick:e,children:c.jsx($i,{size:18})})]}),c.jsx("p",{className:"settings-section-label",children:"Visual Theme"}),c.jsx("p",{style:{fontSize:"0.72rem",color:"var(--text2)",marginBottom:14},children:"Theme changes apply instantly  column names, colors and accents all update."}),c.jsx("div",{className:"theme-grid",children:v2.map(d=>c.jsxs("button",{className:`theme-btn ${r===d.id?"active":""}`,onClick:()=>u(d.id),disabled:s,title:d.desc,children:[c.jsx("span",{className:"theme-btn-icon",children:d.icon}),c.jsx("span",{className:"theme-btn-name",children:d.name}),r===d.id&&c.jsx("span",{className:"theme-btn-check",children:""})]},d.id))}),o&&c.jsx("div",{className:"settings-saved",children:" Theme applied!"}),c.jsxs("div",{className:"settings-user",children:["Signed in as ",c.jsx("strong",{children:n==null?void 0:n.email})]})]})})}const Ov=["#ff6b35","#ffd700","#2dc653","#4cc9f0","#e63946","#9b5de5","#ff8fab"],w2=80;function On(t,e){return Math.random()*(e-t)+t}function E2({active:t}){const e=A.useRef(null),n=A.useRef([]),r=A.useRef(null);return A.useEffect(()=>{if(!t){cancelAnimationFrame(r.current);return}const s=e.current;if(!s)return;const i=s.getContext("2d");s.width=window.innerWidth,s.height=window.innerHeight,n.current=Array.from({length:w2},()=>({x:On(0,s.width),y:On(-s.height,0),r:On(6,14),d:On(0,Math.PI*2),color:Ov[Math.floor(On(0,Ov.length))],tilt:On(-10,10),tiltAngle:0,tiltAngleInc:On(.05,.12),speed:On(2,5)}));function o(){i.clearRect(0,0,s.width,s.height),n.current.forEach(u=>{i.beginPath(),i.lineWidth=u.r/2,i.strokeStyle=u.color,i.moveTo(u.x+u.tilt+u.r/4,u.y),i.lineTo(u.x+u.tilt,u.y+u.tilt+u.r/4),i.stroke(),u.tiltAngle+=u.tiltAngleInc,u.y+=u.speed,u.tilt=Math.sin(u.tiltAngle)*15,u.y>s.height&&(u.x=On(0,s.width),u.y=-20)}),r.current=requestAnimationFrame(o)}o();const l=setTimeout(()=>cancelAnimationFrame(r.current),4e3);return()=>{cancelAnimationFrame(r.current),clearTimeout(l)}},[t]),t?c.jsx("canvas",{ref:e,style:{position:"fixed",inset:0,pointerEvents:"none",zIndex:300}}):null}const T2=[{key:"worker",icon:"",label:"Worker"},{key:"split",icon:"",label:"Split"},{key:"life",icon:"",label:"Life"}];function I2({viewMode:t,onChange:e}){return c.jsx("div",{className:"view-selector",role:"group","aria-label":"Panel view mode",children:T2.map(n=>c.jsxs("button",{className:`vs-btn ${t===n.key?"vs-active":""}`,onClick:()=>e(n.key),title:`${n.label} view`,children:[c.jsx("span",{className:"vs-icon",children:n.icon}),c.jsx("span",{className:"vs-label",children:n.label})]},n.key))})}function S2(t){if(!t.length)return null;const e=new Date(new Date().getFullYear(),0,0),n=Math.floor((Date.now()-e)/864e5);return t[n%t.length]}function k2(){const[t,e]=A.useState(null),[n,r]=A.useState(!0);return A.useEffect(()=>{async function s(){try{const i=Nt(Be(Q,"motivationalMessages"),Re("isActive","==",!0)),l=(await yn(i)).docs.map(u=>({id:u.id,...u.data()}));e(S2(l))}catch(i){console.warn("DailyMotivation: could not load messages",i)}finally{r(!1)}}s()},[]),n||!t?null:c.jsxs("div",{className:"daily-motivation",children:[c.jsx("span",{className:"dm-icon",children:""}),c.jsxs("div",{className:"dm-body",children:[c.jsx("p",{className:"dm-text",children:t.text}),t.author&&c.jsxs("span",{className:"dm-author",children:[" ",t.author]})]})]})}const x2=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function Jh(t,e,n){return`${t}-${String(e).padStart(2,"0")}-${String(n).padStart(2,"0")}`}function DT(t,e){return new Date(t,e,0).getDate()}function A2(t,e){return new Date(t,e-1,1).getDay()}function Lv(t,e){const n=DT(t,e),r=A2(t,e),s=[];for(let i=0;i<r;i++)s.push(null);for(let i=1;i<=n;i++)s.push(Jh(t,e,i));for(;s.length%7!==0;)s.push(null);return s}function C2(t,e){return new Date(t,e-1,1).toLocaleDateString("en-US",{month:"long",year:"numeric"})}function N2(t,e){const n=Jh(t,e,1),r=Jh(t,e,DT(t,e));return{first:n,last:r}}function R2({score:t,hasAnyTasks:e,isRestDay:n,isFuture:r,hasFutureTasks:s,isToday:i}){return n?"rest":r?s?"planned":"future":i?t>=5?"peak":t>=4?"solid":t>=2?"good":"today":t>=5?"peak":t>=4?"solid":t>=2?"good":t>0||e?"off":"nodata"}const Mu={peak:{cls:"ds-peak",icon:"",label:"Peak Day",color:"var(--orange)"},solid:{cls:"ds-solid",icon:"",label:"Solid Day",color:"var(--green)"},good:{cls:"ds-good",icon:"",label:"Good Effort",color:"var(--blue)"},off:{cls:"ds-off",icon:"",label:"Off Day",color:"var(--gray2)"},rest:{cls:"ds-rest",icon:"",label:"Rest Day",color:"#06d6a0"},planned:{cls:"ds-planned",icon:"",label:"Tasks Planned",color:"var(--purple)"},future:{cls:"ds-future",icon:"",label:"Future",color:"var(--text3)"},today:{cls:"ds-today",icon:"",label:"Today",color:"var(--orange)"},nodata:{cls:"ds-nodata",icon:"",label:"No Data",color:"var(--border)"}};function P2(t,e){let n=0,r=0,s=0,i=0,o=0,l=0,u=0,d=0;const f=Object.keys(t).sort();for(const m of f){const g=t[m];if(g.status==="rest"){s++,d=0;continue}if(g.status==="planned"){i++;continue}g.status!=="future"&&(m>e||(g.status==="peak"?(n++,d++,u=Math.max(u,d)):g.status==="solid"?(r++,d++,u=Math.max(u,d)):d=0,g.score!==void 0&&(o+=g.score,l++)))}return{peakDays:n,solidDays:r,restDays:s,plannedDays:i,avgScore:l>0?Math.round(o/l*10)/10:0,longestStreak:u}}function b2(){const t=new Date;return t.setDate(t.getDate()+1),t.toISOString().split("T")[0]}function jT(t){return new Date(t+"T00:00:00").toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}function D2(t,e){if(t===e)return"Today";const n=new Date(t+"T00:00:00"),r=new Date(e+"T00:00:00"),s=Math.round((n-r)/864e5);return s===1?"Tomorrow":s===-1?"Yesterday":n.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}const j2={1:"",2:"",3:""};function O2({tasks:t,onOpenSchedule:e}){const n=Wi(),r=t.filter(i=>i.dateStr>n&&(i.status==="locked"||i.status==="progress")).sort((i,o)=>i.dateStr.localeCompare(o.dateStr));if(r.length===0)return null;const s={};for(const i of r)s[i.dateStr]||(s[i.dateStr]=[]),s[i.dateStr].push(i);return c.jsxs("div",{className:"upcoming-section",children:[c.jsxs("div",{className:"upcoming-header",children:[c.jsx("span",{className:"upcoming-title",children:" Upcoming Scheduled Tasks"}),c.jsx("button",{className:"upcoming-add-btn",onClick:e,children:"+ Schedule"})]}),c.jsx("div",{className:"upcoming-groups",children:Object.entries(s).map(([i,o])=>c.jsx(L2,{dateStr:i,tasks:o,today:n},i))})]})}function L2({dateStr:t,tasks:e,today:n}){const[r,s]=A.useState(null);async function i(l){await tn(fe(Q,"tasks",l.id),{dateStr:n})}async function o(l){await Ci(fe(Q,"tasks",l)),s(null)}return c.jsxs("div",{className:"upcoming-group",children:[c.jsx("div",{className:"upcoming-day-label",children:D2(t,n)}),e.map(l=>c.jsxs("div",{className:"upcoming-task-row",children:[c.jsx("span",{className:"utr-mode",children:l.mode==="worker"?"":""}),c.jsx("span",{className:"utr-text",children:l.text}),l.mode==="worker"&&l.difficulty&&c.jsx("span",{className:"utr-stars",children:j2[l.difficulty]||""}),c.jsxs("div",{className:"utr-actions",children:[c.jsx("button",{className:"utr-btn move-btn",onClick:()=>i(l),title:"Move to Today",children:" Today"}),r===l.id?c.jsxs(c.Fragment,{children:[c.jsx("button",{className:"utr-btn del-confirm",onClick:()=>o(l.id),children:"Confirm"}),c.jsx("button",{className:"utr-btn",onClick:()=>s(null),children:"Cancel"})]}):c.jsx("button",{className:"utr-btn del-btn",onClick:()=>s(l.id),children:""})]})]},l.id))]})}function Zh({initialDate:t,onSchedule:e,onClose:n}){const r=b2(),s=Wi(),[i,o]=A.useState(""),[l,u]=A.useState("worker"),[d,f]=A.useState(2),[m,g]=A.useState([]),[x,C]=A.useState(t||r),[P,N]=A.useState(!1);async function w(D){if(D.preventDefault(),!(!i.trim()||!x)){N(!0);try{await e({text:i.trim(),mode:l,difficulty:d,tags:m,date:x}),n()}finally{N(!1)}}}const _=x===s,E=x?jT(x):"";return c.jsx("div",{className:"modal-overlay open",onClick:n,children:c.jsxs("div",{className:"modal-box schedule-modal",onClick:D=>D.stopPropagation(),children:[c.jsxs("div",{className:"sched-header",children:[c.jsx("h3",{className:"sched-title",children:" Schedule Task"}),c.jsx("button",{className:"modal-close-btn",onClick:n,children:c.jsx($i,{size:16})})]}),E&&c.jsx("div",{className:"sched-date-label",children:E}),c.jsxs("form",{className:"sched-form",onSubmit:w,children:[c.jsx("input",{className:"add-input",placeholder:"Task description",value:i,onChange:D=>o(D.target.value),autoFocus:!0,required:!0}),c.jsxs("div",{className:"sched-field",children:[c.jsx("label",{className:"sched-field-label",children:"Schedule for"}),c.jsx("input",{type:"date",className:"sched-date-input",value:x,min:_?s:r,onChange:D=>C(D.target.value),required:!0})]}),c.jsxs("div",{className:"sched-field",children:[c.jsx("label",{className:"sched-field-label",children:"Mode"}),c.jsx("div",{className:"sched-mode-row",children:[["worker"," Worker"],["life"," Life"]].map(([D,O])=>c.jsx("button",{type:"button",className:`sched-mode-btn ${l===D?"sched-mode-active":""}`,onClick:()=>u(D),children:O},D))})]}),l==="worker"&&c.jsxs("div",{className:"sched-field",children:[c.jsx("label",{className:"sched-field-label",children:"Difficulty"}),c.jsx(nm,{value:d,onChange:f})]}),c.jsxs("div",{className:"sched-field",children:[c.jsx("label",{className:"sched-field-label",children:"Tags (optional)"}),c.jsx(Ac,{tags:m,onChange:g})]}),c.jsxs("div",{className:"sched-actions",children:[c.jsx("button",{type:"button",className:"msg-cancel-btn",onClick:n,children:"Cancel"}),c.jsx("button",{type:"submit",className:"msg-save-btn",disabled:P||!i.trim()||!x,children:P?"Scheduling":" Schedule Task"})]})]})]})})}function V2({task:t,currentUser:e,userProfile:n,onClose:r}){const[s,i]=A.useState(""),[o,l]=A.useState([]),[u,d]=A.useState([]),[f,m]=A.useState(!1),[g,x]=A.useState(!1),C=A.useRef(null),P=(n==null?void 0:n.handle)||null;A.useEffect(()=>{if(clearTimeout(C.current),!s.trim()||s.trim().length<2){l([]);return}x(!0),C.current=setTimeout(async()=>{const E=s.trim().toLowerCase();try{const M=(await yn(Nt(Be(Q,"users"),Re("handle",">=",E),Re("handle","<=",E+""),ga("handle"),Yp(5)))).docs.map(S=>({id:S.id,...S.data()})).filter(S=>S.handle!==P&&!(t.sharedWith||[]).includes(S.handle)&&!u.some(y=>y.handle===S.handle));l(M)}catch(D){console.error("Search error:",D),l([])}finally{x(!1)}},400)},[s,P,t.sharedWith,u]);function N(E){d([...u,{handle:E.handle,userId:E.uid,displayName:E.displayName}]),i(""),l([])}function w(E){d(u.filter(D=>D.handle!==E))}async function _(){if(u.length){m(!0);try{await Zb(t.id,u,t,P),r()}catch(E){console.error("Share failed:",E)}finally{m(!1)}}}return c.jsx("div",{className:"modal-overlay open",onClick:E=>{E.target===E.currentTarget&&r()},children:c.jsxs("div",{className:"modal-box share-modal",onClick:E=>E.stopPropagation(),children:[c.jsxs("div",{className:"sched-header",children:[c.jsx("h3",{className:"sched-title",children:"Share Task"}),c.jsx("button",{className:"modal-close-btn",onClick:r,children:c.jsx($i,{size:16})})]}),c.jsx("div",{className:"share-task-text",children:t.text}),(t.sharedWith||[]).length>0&&c.jsxs("div",{className:"share-existing-section",children:[c.jsx("div",{className:"share-label",children:"Already shared with:"}),c.jsx("div",{className:"share-chips",children:(t.sharedWith||[]).map(E=>c.jsxs("span",{className:"share-chip-existing",children:["@",E]},E))})]}),u.length>0&&c.jsxs("div",{className:"share-selected-section",children:[c.jsx("div",{className:"share-label",children:"Adding:"}),c.jsx("div",{className:"share-chips",children:u.map(E=>c.jsxs("span",{className:"share-chip-selected",children:["@",E.handle,c.jsx("button",{className:"chip-remove",onClick:()=>w(E.handle),type:"button",children:""})]},E.handle))})]}),c.jsx("div",{className:"share-search-wrap",children:c.jsx("input",{className:"share-search-input",placeholder:"Search by handle (min 2 chars)",value:s,onChange:E=>i(E.target.value),autoFocus:!0,autoComplete:"off"})}),g&&c.jsx("div",{className:"share-results",children:c.jsx("div",{className:"share-loading",children:"Searching"})}),!g&&s.length>=2&&o.length===0&&c.jsx("div",{className:"share-results",children:c.jsx("div",{className:"share-no-results",children:"No users found"})}),!g&&o.length>0&&c.jsx("div",{className:"share-results",children:o.map(E=>{var D,O;return c.jsxs("button",{className:"share-result-item",onClick:()=>N(E),type:"button",children:[c.jsx("div",{className:"sri-avatar",children:((O=(D=E.displayName)==null?void 0:D[0])==null?void 0:O.toUpperCase())||E.handle[0].toUpperCase()}),c.jsxs("div",{className:"sri-info",children:[c.jsxs("div",{className:"sri-handle",children:["@",E.handle]}),c.jsx("div",{className:"sri-name",children:E.displayName||""})]})]},E.id)})}),c.jsxs("div",{className:"share-actions",children:[c.jsx("button",{type:"button",className:"msg-cancel-btn",onClick:r,children:"Cancel"}),c.jsx("button",{type:"button",className:"msg-save-btn",onClick:_,disabled:f||u.length===0,children:f?"Sharing":`Share (${u.length})`})]})]})})}function OT({task:t,isOpen:e,onClose:n,onSave:r,saving:s}){const[i,o]=A.useState(t.text),[l,u]=A.useState(t.difficulty||1),[d,f]=A.useState(t.tags||[]),[m,g]=A.useState(t.dateStr||"");if(!e||!t)return null;async function x(){i.trim()&&await r(t.id,{text:i.trim(),difficulty:Number(l),tags:d,dateStr:m})}return c.jsx("div",{className:"modal-overlay open",onClick:C=>{C.target===C.currentTarget&&n()},children:c.jsxs("div",{className:"modal-box edit-task-modal",onClick:C=>C.stopPropagation(),children:[c.jsxs("div",{className:"sched-header",children:[c.jsx("h3",{className:"sched-title",children:" Edit Task"}),c.jsx("button",{className:"modal-close-btn",onClick:n,children:c.jsx($i,{size:16})})]}),c.jsxs("div",{className:"sched-form",children:[c.jsxs("div",{className:"sched-field",children:[c.jsx("label",{className:"sched-field-label",children:"Task Description"}),c.jsx("textarea",{className:"msg-textarea",value:i,onChange:C=>o(C.target.value),placeholder:"Task description...",rows:3,maxLength:200}),c.jsxs("span",{className:"char-count",children:[i.length,"/200"]})]}),t.mode==="worker"&&c.jsxs("div",{className:"sched-field",children:[c.jsx("label",{className:"sched-field-label",children:"Difficulty"}),c.jsx(nm,{value:l,onChange:u})]}),c.jsxs("div",{className:"sched-field",children:[c.jsx("label",{className:"sched-field-label",children:"Tags"}),c.jsx(Ac,{tags:d,onChange:f,placeholder:"task tags"})]}),c.jsxs("div",{className:"sched-field",children:[c.jsx("label",{className:"sched-field-label",children:"Scheduled Date"}),c.jsx("input",{className:"sched-date-input",type:"date",value:m,onChange:C=>g(C.target.value)})]})]}),c.jsxs("div",{className:"sched-actions",children:[c.jsx("button",{type:"button",className:"msg-cancel-btn",onClick:n,children:"Cancel"}),c.jsx("button",{type:"button",className:"msg-save-btn",onClick:x,disabled:s||!i.trim(),children:s?"Saving":"Save Changes"})]})]})})}const Vv="5togo_viewMode",Mv=["Recovery","Vacation","Weekend","Sick Day","Personal Day"];function M2(){const{currentUser:t,userProfile:e}=Gt(),{themeData:n}=Va(),[r,s]=A.useState([]),[i,o]=A.useState([]),[l,u]=A.useState(0),[d,f]=A.useState(!1),[m,g]=A.useState(!1),[x,C]=A.useState(!1),[P,N]=A.useState(!1),[w,_]=A.useState("worker"),[E,D]=A.useState(()=>localStorage.getItem(Vv)||"split"),[O,M]=A.useState(null),[S,y]=A.useState(null),[k,T]=A.useState(null),[b,R]=A.useState(!1),[I,pe]=A.useState(!1),[$e,Le]=A.useState(Mv[0]),[Pe,V]=A.useState(!1),[W,G]=A.useState(!1),[oe,le]=A.useState(!1),ie=A.useRef(null),Ce=A.useRef(!1),ne=Wi();function X(z){D(z),localStorage.setItem(Vv,z)}A.useEffect(()=>{if(!t)return;const z=Nt(Be(Q,"tasks"),Re("userId","==",t.uid));return Ri(z,re=>{const we=re.docs.map(Ee=>({id:Ee.id,...Ee.data()}));we.sort((Ee,st)=>{var Ft,_n;return Ee.status==="touchdown"&&st.status!=="touchdown"?1:st.status==="touchdown"&&Ee.status!=="touchdown"?-1:(((Ft=st.createdAt)==null?void 0:Ft.seconds)??0)-(((_n=Ee.createdAt)==null?void 0:_n.seconds)??0)}),s(we)})},[t]),A.useEffect(()=>{if(!t||!(e!=null&&e.handle))return;const z=Nt(Be(Q,"tasks"),Re("sharedWithUids","array-contains",t.uid));return Ri(z,re=>{const we=re.docs.map(Ee=>({id:Ee.id,...Ee.data()}));we.sort((Ee,st)=>{var Ft,_n;return Ee.status==="touchdown"&&st.status!=="touchdown"?1:st.status==="touchdown"&&Ee.status!=="touchdown"?-1:(((Ft=st.createdAt)==null?void 0:Ft.seconds)??0)-(((_n=Ee.createdAt)==null?void 0:_n.seconds)??0)}),o(we)})},[t,e==null?void 0:e.handle]),A.useEffect(()=>{t&&(is(fe(Q,"userSettings",t.uid)).then(z=>{z.exists()&&(u(z.data().streak||0),ie.current=z.data().peakModalShownDate||null)}),is(fe(Q,"restDays",`${t.uid}_${ne}`)).then(z=>{V(z.exists())}))},[t,ne]),A.useEffect(()=>{if(!r.length||Ce.current)return;const z=r.filter(re=>re.mode==="worker"&&re.dateStr&&re.dateStr<ne&&(re.status==="locked"||re.status==="progress")&&re.userId===t.uid);z.length!==0&&(Ce.current=!0,Promise.all(z.map(re=>tn(fe(Q,"tasks",re.id),{status:"ice"}))).finally(()=>setTimeout(()=>{Ce.current=!1},5e3)))},[r,ne,t==null?void 0:t.uid]);const ue=A.useMemo(()=>{const z={};return i.forEach(re=>{z[re.id]=re}),r.forEach(re=>{z[re.id]=re}),Object.values(z)},[r,i]),ft=ue.filter(z=>z.mode==="worker"&&z.status!=="ice"),Pn=ue.filter(z=>z.mode==="life"&&z.status!=="ice"),bn=ue.filter(z=>z.mode==="worker"&&z.status==="ice"),sn=ue.filter(z=>z.mode==="life"&&z.status==="ice"),Qr=ue.filter(z=>z.dateStr>ne&&z.status!=="ice"&&z.status!=="touchdown"),kt=ue.filter(z=>z.mode==="worker"&&z.dateStr===ne),vn=kt.filter(z=>z.status!=="ice"&&z.userId===(t==null?void 0:t.uid)).length,Hi=kt.filter(z=>z.status==="touchdown"),Yr=em(Hi),Cc=ue.filter(z=>z.mode==="life"&&z.dateStr===ne&&z.status==="touchdown"),or=RT(vn);A.useEffect(()=>{Yr>=5&&ie.current!==ne&&(ie.current=ne,Fa(),g(!0),C(!0),setTimeout(()=>C(!1),4500))},[Yr]);async function Fa(){if(!t)return;const z=fe(Q,"userSettings",t.uid),re=await is(z),we=re.exists()?re.data():{},Ee=we.lastPeakDay||null,st=s2(),_n=(await is(fe(Q,"restDays",`${t.uid}_${st}`))).exists(),Ki=Ee===ne?we.streak||1:Ee===st||_n?(we.streak||0)+1:1;await fs(z,{streak:Ki,lastPeakDay:ne,peakModalShownDate:ne,updatedAt:nt()},{merge:!0}),u(Ki)}A.useEffect(()=>{if(!t||or==="empty"||or==="green")return;const z=`${t.uid}_${ne}`;fs(fe(Q,"burnoutTracking",z),{userId:t.uid,date:ne,tasksCount:vn,zone:or},{merge:!0}),or==="red"&&Promise.all([is(fe(Q,"burnoutTracking",`${t.uid}_${bv(1)}`)),is(fe(Q,"burnoutTracking",`${t.uid}_${bv(2)}`))]).then(([re,we])=>{re.exists()&&re.data().zone==="red"&&we.exists()&&we.data().zone==="red"&&N(!0)})},[or,t,ne]);const Rs=A.useCallback(async({text:z,mode:re,difficulty:we,tags:Ee})=>{await Ni(Be(Q,"tasks"),{userId:t.uid,text:z,mode:re,status:"locked",difficulty:Number(we)||1,tags:Ee||[],createdAt:nt(),completedAt:null,weekNumber:Xh(),year:new Date().getFullYear(),dateStr:ne})},[t,ne]),Ua=A.useCallback(async({text:z,mode:re,difficulty:we,tags:Ee,date:st})=>{const Ft=new Date(st+"T00:00:00");await Ni(Be(Q,"tasks"),{userId:t.uid,text:z,mode:re,status:"locked",difficulty:Number(we)||1,tags:Ee||[],createdAt:nt(),completedAt:null,dateStr:st,weekNumber:Xh(Ft),year:Ft.getFullYear()})},[t]),Ba=A.useCallback(async(z,re)=>{const we=ue.find(st=>st.id===z);if(!we)return;const Ee={status:re};re==="touchdown"?(Ee.completedAt=nt(),we.status==="ice"&&we.dateStr!==ne&&(Ee.dateStr=ne)):Ee.completedAt=null,we.status==="ice"&&re==="locked"&&(Ee.dateStr=ne),await tn(fe(Q,"tasks",z),Ee)},[ue,ne]),Ps=A.useCallback(async z=>{await Ci(fe(Q,"tasks",z))},[]),bs=A.useCallback(z=>{T(z)},[]),za=A.useCallback(async(z,re)=>{R(!0);try{await tn(fe(Q,"tasks",z),re),T(null)}finally{R(!1)}},[]),Ke=A.useCallback(z=>M(z),[]),Ze=A.useCallback(()=>M(null),[]);async function Ds(){if(t){G(!0);try{await fs(fe(Q,"restDays",`${t.uid}_${ne}`),{userId:t.uid,date:ne,reason:$e||null,createdAt:nt()}),V(!0),pe(!1)}finally{G(!1)}}}async function $a(){t&&(await Ci(fe(Q,"restDays",`${t.uid}_${ne}`)),V(!1))}const qi=A.useCallback(z=>{const re=ue.find(we=>we.id===z);re&&y(re)},[ue]);A.useEffect(()=>{const z=re=>{re.key==="Escape"&&(g(!1),f(!1),pe(!1),le(!1),y(null),T(null))};return window.addEventListener("keydown",z),()=>window.removeEventListener("keydown",z)},[]),n.ice;const Nc=E==="split"||E==="worker",Xr=E==="split"||E==="life";return c.jsxs("div",{className:"app-layout",children:[c.jsx(tm,{todayPoints:Yr,streak:l,zone:or,onOpenSettings:()=>f(!0)}),c.jsx(k2,{}),c.jsxs("div",{className:"dashboard-controls",children:[c.jsx(I2,{viewMode:E,onChange:X}),c.jsxs("div",{className:"day-controls",children:[Pe?c.jsxs("div",{className:"rest-active-pill",children:[" Rest Day",c.jsx("button",{className:"rest-remove-btn",onClick:$a,children:""})]}):c.jsx("button",{className:"rest-day-btn",onClick:()=>pe(!0),children:" Rest Day"}),c.jsx("button",{className:"schedule-btn",onClick:()=>le(!0),children:" Schedule Task"})]})]}),c.jsxs("div",{className:"mobile-toggle",children:[c.jsx("button",{className:`mt-btn ${w==="worker"?"mt-active":""}`,onClick:()=>_("worker"),children:" Worker"}),c.jsx("button",{className:`mt-btn ${w==="life"?"mt-active":""}`,onClick:()=>_("life"),children:" Life"})]}),P&&c.jsxs("div",{className:"recovery-alert",children:[c.jsx("span",{children:" Recovery Day Recommended  3 consecutive Red Zone days detected."}),c.jsx("span",{className:"recovery-tip",children:"Focus on Life tasks today. Your health matters."}),c.jsx("button",{className:"recovery-close",onClick:()=>N(!1),children:""})]}),Pe&&c.jsxs("div",{className:"rest-day-banner",children:[" ",c.jsx("strong",{children:"Rest Day Active"}),"  Focus on recovery and life balance today."]}),c.jsxs("div",{className:`dual-board ${E==="split"?"split-mode":""}`,children:[Nc&&c.jsx("div",{className:`worker-panel ${w==="worker"?"mobile-visible":"mobile-hidden"}`,children:c.jsx(g2,{tasks:ft,iceTasks:bn,activeWorkerCount:vn,todayPoints:Yr,streak:l,draggingId:O,onMove:Ba,onDelete:Ps,onDragStart:Ke,onDragEnd:Ze,onAddTask:Rs,currentUser:t,userProfile:e,onShare:qi,onEdit:bs,splitMode:E==="split"})}),Xr&&c.jsx("div",{className:`life-panel ${w==="life"?"mobile-visible":"mobile-hidden"}`,children:c.jsx(y2,{tasks:Pn,iceTasks:sn,completedToday:Cc.length,draggingId:O,onMove:Ba,onDelete:Ps,onDragStart:Ke,onDragEnd:Ze,onAddTask:Rs,currentUser:t,userProfile:e,onShare:qi,onEdit:bs,splitMode:E==="split"})})]}),c.jsx(O2,{tasks:Qr,onOpenSchedule:()=>le(!0)}),c.jsx("div",{className:`modal-overlay ${m?"open":""}`,onClick:()=>g(!1),children:c.jsxs("div",{className:"modal-box",onClick:z=>z.stopPropagation(),children:[c.jsx("span",{className:"modal-trophy",children:""}),c.jsx("h2",{className:"modal-title",children:"PEAK DAY!"}),c.jsx("p",{className:"modal-sub",children:"5+ points earned. You're on fire."}),c.jsxs("div",{className:"modal-streak",children:[" ",l,"-day streak!"]}),c.jsx("button",{className:"modal-btn",onClick:()=>g(!1),children:"Keep Going! "})]})}),I&&c.jsx("div",{className:"modal-overlay open",onClick:()=>pe(!1),children:c.jsxs("div",{className:"modal-box rest-modal",onClick:z=>z.stopPropagation(),children:[c.jsx("span",{className:"modal-trophy",children:""}),c.jsx("h2",{className:"modal-title",style:{color:"#06d6a0"},children:"Mark Rest Day"}),c.jsx("p",{className:"modal-sub",children:"Rest days don't break your streak. Recovery is growth."}),c.jsx("select",{className:"sched-date-input",value:$e,onChange:z=>Le(z.target.value),style:{marginBottom:16},children:Mv.map(z=>c.jsx("option",{children:z},z))}),c.jsxs("div",{style:{display:"flex",gap:10},children:[c.jsx("button",{className:"msg-cancel-btn",onClick:()=>pe(!1),children:"Cancel"}),c.jsx("button",{className:"modal-btn",style:{background:"linear-gradient(135deg, #06d6a0, #0aab82)"},onClick:Ds,disabled:W,children:W?"Saving":" Mark as Rest Day"})]})]})}),oe&&c.jsx(Zh,{initialDate:null,onSchedule:Ua,onClose:()=>le(!1)}),S&&c.jsx(V2,{task:S,currentUser:t,userProfile:e,onClose:()=>y(null)}),k&&c.jsx(OT,{task:k,isOpen:!!k,onClose:()=>T(null),onSave:za,saving:b}),c.jsx(_2,{isOpen:d,onClose:()=>f(!1)}),c.jsx(E2,{active:x})]})}function F2(){const{currentUser:t}=Gt(),[e,n]=A.useState(0),[r,s]=A.useState("work"),[i,o]=A.useState([]),[l,u]=A.useState({}),[d,f]=A.useState(!0),m=i2(e);A.useEffect(()=>{if(!t)return;f(!0);const _=Nt(Be(Q,"tasks"),Re("userId","==",t.uid),Re("dateStr",">=",m[0]),Re("dateStr","<=",m[6])),E=Nt(Be(Q,"restDays"),Re("userId","==",t.uid),Re("date",">=",m[0]),Re("date","<=",m[6]));Promise.all([yn(_),yn(E)]).then(([D,O])=>{o(D.docs.map(S=>({id:S.id,...S.data()})));const M={};O.docs.forEach(S=>{M[S.data().date]=S.data().reason||"Rest"}),u(M),f(!1)})},[t,m[0]]);const g=m.map(_=>{const E=!!l[_],D=l[_]||null,O=i.filter(I=>I.dateStr===_),M=O.filter(I=>I.mode==="worker"&&I.status==="touchdown"),S=O.filter(I=>I.mode==="worker"),y=O.filter(I=>I.mode==="life"&&I.status==="touchdown"),k=O.filter(I=>I.mode==="life"),T=E?0:em(M),b=Vu(T),R=Xb(S.length,k.length);return{dateStr:_,workerDone:M,workerTotal:S,lifeDone:y,lifeTotal:k,pts:T,level:b,balance:R,isRest:E,restReason:D}}),x=g.reduce((_,E)=>_+E.pts,0),C=g.filter(_=>_.pts>=5).length,P=g.reduce((_,E)=>_+E.workerDone.length,0),N=g.reduce((_,E)=>_+E.lifeDone.length,0),w=Vu(Math.round(x/7));return c.jsxs("div",{className:"history-page",children:[c.jsx("div",{className:"history-nav",children:c.jsxs(dn,{to:"/app",className:"history-back",children:[c.jsx(Ma,{size:14})," Back to Dashboard"]})}),c.jsxs("div",{className:"history-title-row",children:[c.jsx("h1",{className:"history-title",children:" Weekly History"}),c.jsxs("div",{className:"week-nav",children:[c.jsx("button",{className:"week-nav-btn",onClick:()=>n(_=>_-1),children:c.jsx(xT,{size:16})}),c.jsx("span",{className:"week-nav-label",children:o2(m)}),c.jsx("button",{className:"week-nav-btn",onClick:()=>n(_=>_+1),disabled:e>=0,children:c.jsx(AT,{size:16})})]})]}),c.jsxs("div",{className:"week-summary",children:[c.jsxs("div",{className:"ws-chip",children:[c.jsx("span",{className:"ws-chip-val",children:x}),c.jsx("span",{className:"ws-chip-lbl",children:"Total pts"})]}),c.jsxs("div",{className:"ws-chip",children:[c.jsx("span",{className:"ws-chip-val",children:C}),c.jsx("span",{className:"ws-chip-lbl",children:"Peak Days"})]}),c.jsxs("div",{className:"ws-chip",children:[c.jsx("span",{className:"ws-chip-val",children:P}),c.jsx("span",{className:"ws-chip-lbl",children:"Worker Done"})]}),c.jsxs("div",{className:"ws-chip",children:[c.jsx("span",{className:"ws-chip-val",children:N}),c.jsx("span",{className:"ws-chip-lbl",children:"Life Done"})]}),c.jsxs("div",{className:`ws-chip ws-level ${w.cls}`,children:[c.jsx("span",{className:"ws-chip-val",children:w.icon}),c.jsxs("span",{className:"ws-chip-lbl",children:["Week: ",w.label]})]})]}),c.jsxs("div",{className:"history-tabs",children:[c.jsx("button",{className:`htab ${r==="work"?"htab-active":""}`,onClick:()=>s("work"),children:" Work History"}),c.jsx("button",{className:`htab ${r==="life"?"htab-active":""}`,onClick:()=>s("life"),children:" Life Balance"})]}),d?c.jsx("div",{className:"history-loading",children:c.jsx("div",{className:"spinner"})}):r==="work"?c.jsx(U2,{dayRows:g}):c.jsx(B2,{dayRows:g})]})}function U2({dayRows:t}){const e=Math.max(...t.map(n=>n.pts),5);return c.jsx("div",{className:"history-tab-content",children:t.map(({dateStr:n,pts:r,level:s,workerDone:i,workerTotal:o,isRest:l,restReason:u})=>c.jsxs("div",{className:`day-row ${l?"day-row-rest":""}`,children:[c.jsxs("div",{className:"day-row-left",children:[c.jsx("span",{className:"day-label",children:bT(n)}),l?c.jsxs("span",{className:"day-level-badge rest-badge",children:[" Rest Day",u?`  ${u}`:""]}):c.jsxs("span",{className:`day-level-badge ${s.cls}`,children:[s.icon," ",s.label]})]}),!l&&c.jsx("div",{className:"day-bar-wrap",children:c.jsxs("div",{className:"day-bar-track",children:[c.jsx("div",{className:`day-bar-fill ${s.cls}`,style:{width:`${Math.min(r/e*100,100)}%`}}),c.jsx("div",{className:"day-bar-target",style:{left:`${5/e*100}%`}})]})}),!l&&c.jsxs("div",{className:"day-row-right",children:[c.jsxs("span",{className:"day-pts",children:[r,c.jsx("span",{className:"day-pts-label",children:"pts"})]}),c.jsxs("span",{className:"day-tasks-done",children:[i.length,"/",o.length," done"]})]}),!l&&i.length>0&&c.jsx("div",{className:"day-task-list",children:i.map(d=>c.jsxs("span",{className:"day-task-chip",children:["".repeat(d.difficulty||1)," ",d.text]},d.id))})]},n))})}function B2({dayRows:t}){return c.jsx("div",{className:"history-tab-content",children:t.map(({dateStr:e,lifeDone:n,lifeTotal:r,workerTotal:s,balance:i})=>c.jsxs("div",{className:"life-day-row",children:[c.jsxs("div",{className:"day-row-left",children:[c.jsx("span",{className:"day-label",children:bT(e)}),c.jsxs("span",{className:`balance-badge ${i.cls}`,children:[i.icon," ",i.label]})]}),c.jsxs("div",{className:"life-bar-group",children:[c.jsxs("div",{className:"life-bar-item",children:[c.jsx("span",{className:"life-bar-lbl",children:" Worker"}),c.jsx("div",{className:"day-bar-track",children:c.jsx("div",{className:"day-bar-fill worker-fill",style:{width:`${Math.min(s.length*14,100)}%`}})}),c.jsx("span",{className:"life-bar-count",children:s.length})]}),c.jsxs("div",{className:"life-bar-item",children:[c.jsx("span",{className:"life-bar-lbl",children:" Life"}),c.jsx("div",{className:"day-bar-track",children:c.jsx("div",{className:"day-bar-fill life-fill",style:{width:`${Math.min(r.length*14,100)}%`}})}),c.jsx("span",{className:"life-bar-count",children:r.length})]})]}),c.jsx("div",{className:"day-row-right",children:c.jsxs("span",{className:"life-done-badge",children:[n.length," life done"]})}),n.length>0&&c.jsx("div",{className:"day-task-list",children:n.map(o=>c.jsxs("span",{className:"day-task-chip life-chip",children:[" ",o.text]},o.id))})]},e))})}function z2({dateStr:t,status:e,score:n,futureTaskCount:r,isToday:s,onClick:i}){if(!t)return c.jsx("div",{className:"day-cell day-cell-empty"});const o=Mu[e]||Mu.nodata,l=parseInt(t.split("-")[2],10);return c.jsxs("button",{className:`day-cell ${o.cls} ${s?"dc-today":""}`,onClick:()=>i(t),title:o.label,children:[c.jsx("span",{className:"dc-num",children:l}),!["future","planned","nodata"].includes(e)&&n>0&&c.jsx("span",{className:"dc-score",children:n}),e==="planned"&&r>0&&c.jsxs("span",{className:"dc-badge planned-badge",children:[" ",r]}),e!=="nodata"&&e!=="future"&&c.jsx("span",{className:"dc-icon",children:o.icon}),s&&c.jsx("span",{className:"dc-today-dot"})]})}function $2({cells:t,dayDataMap:e,today:n,onDayClick:r}){return c.jsxs("div",{className:"calendar-grid",children:[c.jsx("div",{className:"cgrid-headers",children:x2.map(s=>c.jsx("div",{className:"cgrid-day-label",children:s},s))}),c.jsx("div",{className:"cgrid-cells",children:t.map((s,i)=>{if(!s)return c.jsx("div",{className:"day-cell day-cell-empty"},i);const o=e[s]||{};return c.jsx(z2,{dateStr:s,status:o.status||"nodata",score:o.score||0,futureTaskCount:o.futureTaskCount||0,isToday:s===n,onClick:r},s)})})]})}function W2({stats:t}){const e=[{icon:"",label:"Peak Days",value:t.peakDays},{icon:"",label:"Solid Days",value:t.solidDays},{icon:"",label:"Rest Days",value:t.restDays},{icon:"",label:"Planned",value:t.plannedDays},{icon:"",label:"Avg Score",value:t.avgScore},{icon:"",label:"Best Streak",value:t.longestStreak}];return c.jsx("div",{className:"month-stats",children:e.map(n=>c.jsxs("div",{className:"ms-card",children:[c.jsx("span",{className:"ms-icon",children:n.icon}),c.jsx("span",{className:"ms-value",children:n.value}),c.jsx("span",{className:"ms-label",children:n.label})]},n.label))})}const Fv=["Recovery","Vacation","Weekend","Sick Day","Personal Day"],H2={1:"",2:"",3:""};function q2({dateStr:t,status:e,score:n,tasks:r,isRestDay:s,restReason:i,onClose:o,onMarkRest:l,onRemoveRest:u,onAddTask:d,onDeleteTask:f,onEditTask:m}){const g=Wi(),x=t<g,C=t===g,P=t>g,N=Mu[e]||Mu.nodata,[w,_]=A.useState(!1),[E,D]=A.useState(i||Fv[0]),[O,M]=A.useState(null),[S,y]=A.useState(null),[k,T]=A.useState(!1),b=jT(t);return c.jsx("div",{className:"modal-overlay open",onClick:o,children:c.jsxs("div",{className:"modal-box day-detail-modal",onClick:R=>R.stopPropagation(),children:[c.jsxs("div",{className:"ddm-header",children:[c.jsx("div",{className:"ddm-date-label",children:b}),c.jsx("button",{className:"modal-close-btn",onClick:o,children:c.jsx($i,{size:16})})]}),c.jsxs("div",{className:`ddm-status ${N.cls}`,children:[c.jsx("span",{children:N.icon}),c.jsx("span",{children:N.label}),n>0&&!["rest","planned","future","today","nodata"].includes(e)&&c.jsxs("span",{className:"ddm-score",children:[n," pts"]}),C&&n>0&&c.jsxs("span",{className:"ddm-score",children:[n," pts so far"]})]}),r.length>0&&c.jsxs("div",{className:"ddm-tasks",children:[c.jsx("div",{className:"ddm-section-label",children:P?" Scheduled Tasks":C?" Today's Tasks":" Completed Tasks"}),r.map(R=>c.jsxs("div",{className:"ddm-task-row",children:[c.jsx("span",{className:"ddm-task-icon",children:R.mode==="worker"?"":""}),c.jsx("span",{className:"ddm-task-text",children:R.text}),R.mode==="worker"&&R.difficulty&&c.jsx("span",{className:"ddm-task-stars",children:H2[R.difficulty]||""}),P&&c.jsxs(c.Fragment,{children:[m&&c.jsx("button",{className:"msg-icon-btn",onClick:()=>y(R),title:"Edit task",children:""}),O===R.id?c.jsxs(c.Fragment,{children:[c.jsx("button",{className:"msg-icon-btn delete-btn",onClick:()=>{f(R.id),M(null)},children:"Confirm"}),c.jsx("button",{className:"msg-icon-btn",onClick:()=>M(null),children:"Cancel"})]}):c.jsx("button",{className:"msg-icon-btn delete-btn",onClick:()=>M(R.id),children:c.jsx(NT,{size:11})})]})]},R.id))]}),r.length===0&&(C||x)&&!s&&c.jsx("div",{className:"ddm-empty-note",children:C?"No tasks completed yet today.":"No completed tasks recorded."}),P&&c.jsxs("button",{className:"ddm-add-task-btn",onClick:()=>{o(),d(t)},children:[c.jsx(Bb,{size:14})," Add Task for This Day"]}),c.jsx("div",{className:"ddm-rest-section",children:s?c.jsxs("div",{className:"ddm-rest-active",children:[c.jsxs("span",{className:"ddm-rest-pill",children:[" Rest Day",i?`  ${i}`:""]}),c.jsx("button",{className:"msg-icon-btn delete-btn",onClick:()=>u(t),children:"Remove"})]}):w?c.jsxs("div",{className:"ddm-rest-form",children:[c.jsx("select",{className:"sched-date-input",value:E,onChange:R=>D(R.target.value),children:Fv.map(R=>c.jsx("option",{children:R},R))}),c.jsxs("div",{style:{display:"flex",gap:8},children:[c.jsx("button",{className:"msg-cancel-btn",onClick:()=>_(!1),children:"Cancel"}),c.jsxs("button",{className:"msg-save-btn",onClick:()=>{l(t,E),_(!1)},children:[c.jsx(Rv,{size:12})," Mark as Rest Day"]})]})]}):c.jsxs("button",{className:"ddm-rest-btn",onClick:()=>_(!0),children:[c.jsx(Rv,{size:13})," Mark as Rest Day"]})}),S&&c.jsx(OT,{task:S,isOpen:!!S,onClose:()=>y(null),onSave:async(R,I)=>{T(!0);try{m&&await m(R,I),y(null)}finally{T(!1)}},saving:k}),c.jsx("button",{className:"modal-close-full-btn",onClick:o,children:"Close"})]})})}const K2=[{cls:"ds-peak",icon:"",label:"Peak Day (5+ pts)"},{cls:"ds-solid",icon:"",label:"Solid (4 pts)"},{cls:"ds-good",icon:"",label:"Good (2-3 pts)"},{cls:"ds-off",icon:"",label:"Off Day"},{cls:"ds-rest",icon:"",label:"Rest Day"},{cls:"ds-planned",icon:"",label:"Tasks Scheduled"}];function G2(){const{currentUser:t}=Gt(),e=Wi(),n=new Date(e+"T00:00:00"),[r,s]=A.useState(n.getFullYear()),[i,o]=A.useState(n.getMonth()+1),[l,u]=A.useState({}),[d,f]=A.useState({peakDays:0,solidDays:0,restDays:0,plannedDays:0,avgScore:0,longestStreak:0}),[m,g]=A.useState(!0),[x,C]=A.useState(null),[P,N]=A.useState(null),w=A.useCallback(async(I,pe)=>{if(!t)return;g(!0);const{first:$e,last:Le}=N2(I,pe);try{const V=(await yn(Nt(Be(Q,"tasks"),Re("userId","==",t.uid),Re("dateStr",">=",$e),Re("dateStr","<=",Le)))).docs.map(ie=>({id:ie.id,...ie.data()})),W=await yn(Nt(Be(Q,"restDays"),Re("userId","==",t.uid),Re("date",">=",$e),Re("date","<=",Le))),G={};W.docs.forEach(ie=>{const Ce=ie.data();G[Ce.date]={id:ie.id,reason:Ce.reason}});const oe={},le=Lv(I,pe);for(const ie of le){if(!ie)continue;const Ce=V.filter(kt=>kt.dateStr===ie),ne=ie>e,X=ie===e,ue=!!G[ie],ft=G[ie]||null;let Pn=0,bn=Ce.length>0,sn=[];if(ne)sn=Ce.filter(kt=>kt.status==="locked"||kt.status==="progress");else{const kt=Ce.filter(vn=>vn.mode==="worker"&&vn.status==="touchdown");Pn=em(kt)}const Qr=R2({score:Pn,hasAnyTasks:bn,isRestDay:ue,isFuture:ne,hasFutureTasks:sn.length>0,isToday:X});oe[ie]={status:Qr,score:Pn,hasAnyTasks:bn,futureTasks:sn,futureTaskCount:sn.length,completedTasks:ne?[]:Ce.filter(kt=>kt.status==="touchdown"),allDayTasks:Ce,isRestDay:ue,restReason:(ft==null?void 0:ft.reason)||null,restDocId:(ft==null?void 0:ft.id)||null}}u(oe),f(P2(oe,e))}catch(Pe){console.error("Calendar loadMonth:",Pe)}finally{g(!1)}},[t,e]);A.useEffect(()=>{w(r,i)},[r,i,w]);function _(){i===1?(s(I=>I-1),o(12)):o(I=>I-1)}function E(){i===12?(s(I=>I+1),o(1)):o(I=>I+1)}function D(){s(n.getFullYear()),o(n.getMonth()+1)}async function O(I,pe){await fs(fe(Q,"restDays",`${t.uid}_${I}`),{userId:t.uid,date:I,reason:pe||null,createdAt:nt()}),w(r,i)}async function M(I){await Ci(fe(Q,"restDays",`${t.uid}_${I}`)),w(r,i)}async function S({text:I,mode:pe,difficulty:$e,tags:Le,date:Pe}){const V=new Date(Pe+"T00:00:00");await Ni(Be(Q,"tasks"),{userId:t.uid,text:I,mode:pe,status:"locked",difficulty:Number($e)||1,tags:Le||[],createdAt:nt(),completedAt:null,dateStr:Pe,weekNumber:Xh(V),year:V.getFullYear()}),w(r,i)}async function y(I){await Ci(fe(Q,"tasks",I)),w(r,i)}async function k(I,pe){await tn(fe(Q,"tasks",I),pe),w(r,i)}function T(I){C(I)}const b=Lv(r,i),R=x?l[x]||{}:null;return c.jsxs("div",{className:"app-layout",children:[c.jsx(tm,{todayPoints:0,streak:0,zone:"empty",onOpenSettings:()=>{}}),c.jsxs("div",{className:"calendar-page",children:[c.jsx("div",{className:"cal-back-nav",children:c.jsxs(dn,{to:"/app",className:"history-back",children:[c.jsx(Ma,{size:14})," Back to Dashboard"]})}),c.jsxs("div",{className:"cal-header",children:[c.jsx("button",{className:"cal-nav-btn",onClick:_,children:c.jsx(xT,{size:18})}),c.jsx("div",{className:"cal-month-title",children:C2(r,i)}),c.jsx("button",{className:"cal-nav-btn",onClick:E,children:c.jsx(AT,{size:18})}),c.jsx("button",{className:"cal-today-btn",onClick:D,disabled:r===n.getFullYear()&&i===n.getMonth()+1,children:"Today"}),c.jsx("button",{className:"cal-schedule-btn",onClick:()=>N(null),children:" Schedule Task"})]}),c.jsx(W2,{stats:d}),m?c.jsx("div",{className:"cal-loading",children:c.jsx("div",{className:"spinner"})}):c.jsx($2,{cells:b,dayDataMap:l,today:e,onDayClick:T}),c.jsx("div",{className:"calendar-legend",children:K2.map(I=>c.jsxs("div",{className:"leg-item",children:[c.jsx("span",{className:`leg-dot ${I.cls}`}),c.jsx("span",{className:"leg-icon",children:I.icon}),c.jsx("span",{className:"leg-label",children:I.label})]},I.label))})]}),x&&R&&c.jsx(q2,{dateStr:x,status:R.status||"nodata",score:R.score||0,tasks:x>e?R.futureTasks||[]:R.completedTasks||[],isRestDay:R.isRestDay||!1,restReason:R.restReason,onClose:()=>C(null),onMarkRest:O,onRemoveRest:M,onAddTask:I=>{C(null),N(I)},onDeleteTask:y,onEditTask:k}),P!==void 0&&(P===null?c.jsx(Zh,{initialDate:null,onSchedule:S,onClose:()=>N(void 0)}):P&&c.jsx(Zh,{initialDate:P,onSchedule:S,onClose:()=>N(void 0)}))]})}const Q2=[{text:"Peak performance is a choice, not a chance.",author:null},{text:"Your 5 tasks today shape your tomorrow.",author:null},{text:"Balance is not something you find, it's something you create.",author:null},{text:"Every touchdown brings you closer to mastery.",author:null},{text:"Rest is productive. Recovery is growth.",author:null},{text:"Your streak is proof of your commitment.",author:null},{text:"High performance requires high intention.",author:null},{text:"Small consistent wins compound into greatness.",author:null},{text:"The grind today is the glory tomorrow.",author:null},{text:"Discipline is the bridge between goals and accomplishment.",author:"Jim Rohn"},{text:"Don't wish for fewer problems. Wish for more skills.",author:"Jim Rohn"},{text:"Success is the sum of small efforts repeated daily.",author:"Robert Collier"},{text:"Do the hard things first. Your future self will thank you.",author:null},{text:"Progress, not perfection, is the goal.",author:null},{text:"Energy flows where attention goes.",author:null},{text:"A champion is made in the moments nobody is watching.",author:null},{text:"If it was easy, everyone would do it.",author:null},{text:"Momentum is built one completed task at a time.",author:null},{text:"Your best investment is in your daily routine.",author:null},{text:"Focus on systems, not just goals.",author:"James Clear"},{text:"You don't rise to the level of your goals. You fall to the level of your systems.",author:"James Clear"},{text:"Every rep counts. Every task matters.",author:null},{text:"The secret of getting ahead is getting started.",author:"Mark Twain"},{text:"Clarity fuels performance. Know your 5.",author:null},{text:"Protect your energy like it's your most valuable asset.",author:null},{text:"A good day starts with a clear game plan.",author:null},{text:"Win the morning, win the day.",author:null},{text:"You are always one decision away from a completely different life.",author:null},{text:"Life balance isn't a luxury  it's a performance strategy.",author:null},{text:"One day or day one. You decide.",author:null},{text:"Consistency beats intensity every time.",author:null},{text:"The pain of discipline weighs ounces. The pain of regret weighs tons.",author:null},{text:"Make today a peak day.",author:null}];async function Y2(t,e){const n=Be(t,"motivationalMessages"),r=[];for(const s of Q2){const i=await Ni(n,{text:s.text,author:s.author||null,createdBy:e,isActive:!0,createdAt:nt()});r.push(i.id)}return r}const Nd={text:"",author:"",isActive:!0};function X2(){const{currentUser:t}=Gt(),[e,n]=A.useState([]),[r,s]=A.useState(!0),[i,o]=A.useState(""),[l,u]=A.useState([]),[d,f]=A.useState(!0),[m,g]=A.useState(!1),[x,C]=A.useState(null),[P,N]=A.useState(Nd),[w,_]=A.useState(!1),[E,D]=A.useState(!1),[O,M]=A.useState(null);A.useEffect(()=>{async function V(){try{const W=Nt(Be(Q,"users"),ga("createdAt","desc")),G=await yn(W);n(G.docs.map(oe=>({id:oe.id,...oe.data()})))}catch(W){o("Could not load users. Check Firestore security rules."),console.error(W)}finally{s(!1)}}V()},[]),A.useEffect(()=>{const V=Nt(Be(Q,"motivationalMessages"),ga("createdAt","desc"));return Ri(V,G=>{u(G.docs.map(oe=>({id:oe.id,...oe.data()}))),f(!1)},G=>{console.error("AdminPanel messages:",G),f(!1)})},[]);function S(){C(null),N(Nd),g(!0)}function y(V){C(V.id),N({text:V.text||"",author:V.author||"",isActive:V.isActive??!0}),g(!0)}function k(){g(!1),C(null),N(Nd)}async function T(V){V.preventDefault();const W=P.text.trim();if(W){_(!0);try{x?await tn(fe(Q,"motivationalMessages",x),{text:W,author:P.author.trim()||null,isActive:P.isActive,updatedAt:nt()}):await Ni(Be(Q,"motivationalMessages"),{text:W,author:P.author.trim()||null,isActive:P.isActive,createdBy:t.uid,createdAt:nt()}),k()}catch(G){console.error(G)}finally{_(!1)}}}async function b(V){await tn(fe(Q,"motivationalMessages",V.id),{isActive:!V.isActive})}async function R(V){await Ci(fe(Q,"motivationalMessages",V)),M(null)}async function I(){if(t){D(!0);try{await Y2(Q,t.uid)}catch(V){console.error(V)}finally{D(!1)}}}const pe=e.filter(V=>V.role==="admin").length,$e=e.filter(V=>V.role!=="admin").length,Le=l.filter(V=>V.isActive).length,Pe=P.text.length>200;return c.jsxs("div",{className:"app-layout",children:[c.jsx(tm,{completedToday:0,streak:0,onOpenSettings:()=>{}}),c.jsxs("div",{className:"admin-page",children:[c.jsxs("div",{className:"admin-header",children:[c.jsxs(dn,{to:"/app",className:"nav-btn",style:{display:"inline-flex",marginBottom:16},children:[c.jsx(Ma,{size:14})," Back to App"]}),c.jsxs("div",{className:"admin-title",children:[c.jsx(CT,{size:22}),"Admin Panel",c.jsx("span",{className:"admin-badge",children:"ADMIN"})]}),c.jsxs("p",{className:"admin-sub",children:["Signed in as ",c.jsx("strong",{children:t==null?void 0:t.email})]})]}),!r&&!i&&c.jsxs("div",{className:"admin-stats",children:[c.jsxs("div",{className:"stat-card",children:[c.jsx("div",{className:"stat-value",children:e.length}),c.jsx("div",{className:"stat-label",children:"Total Users"})]}),c.jsxs("div",{className:"stat-card",children:[c.jsx("div",{className:"stat-value",style:{color:"var(--green)"},children:$e}),c.jsx("div",{className:"stat-label",children:"Regular Users"})]}),c.jsxs("div",{className:"stat-card",children:[c.jsx("div",{className:"stat-value",style:{color:"var(--purple)"},children:pe}),c.jsx("div",{className:"stat-label",children:"Admins"})]})]}),r&&c.jsx("div",{style:{padding:32,textAlign:"center"},children:c.jsx("div",{className:"spinner",style:{margin:"0 auto"}})}),i&&c.jsx("div",{className:"auth-error",children:i}),!r&&!i&&c.jsx("div",{className:"admin-table-wrap",children:c.jsxs("table",{className:"admin-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Email"}),c.jsx("th",{children:"Role"}),c.jsx("th",{children:"User ID"}),c.jsx("th",{children:"Joined"})]})}),c.jsx("tbody",{children:e.map(V=>c.jsxs("tr",{children:[c.jsx("td",{style:{color:"var(--text)",fontWeight:500},children:V.email}),c.jsx("td",{children:c.jsx("span",{className:`admin-role-badge role-${V.role}`,children:(V.role||"user").toUpperCase()})}),c.jsx("td",{style:{fontFamily:"monospace",fontSize:"0.72rem"},children:V.uid}),c.jsx("td",{children:PT(V.createdAt)})]},V.id))})]})}),c.jsxs("div",{className:"admin-section-header",children:[c.jsxs("div",{className:"admin-section-title",children:[c.jsx(Wb,{size:16}),"Motivational Messages",c.jsxs("span",{className:"admin-section-count",children:[Le," active / ",l.length," total"]})]}),c.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[l.length===0&&!d&&c.jsx("button",{className:"msg-seed-btn",onClick:I,disabled:E,children:E?"Seeding":" Seed 33 Default Messages"}),c.jsxs("button",{className:"msg-save-btn",onClick:S,style:{display:"flex",alignItems:"center",gap:6},children:[c.jsx(Kb,{size:13})," New Message"]})]})]}),m&&c.jsxs("form",{className:"msg-form",onSubmit:T,children:[c.jsx("div",{className:"msg-form-title",children:x?" Edit Message":" New Message"}),c.jsxs("div",{children:[c.jsx("textarea",{className:"msg-textarea",placeholder:"Enter motivational message (max 200 chars)",value:P.text,onChange:V=>N(W=>({...W,text:V.target.value})),maxLength:210,required:!0}),c.jsxs("div",{className:`msg-char-count ${Pe?"over-limit":""}`,children:[P.text.length,"/200"]})]}),c.jsx("input",{className:"msg-author-input",placeholder:"Author (optional, max 50 chars)",value:P.author,onChange:V=>N(W=>({...W,author:V.target.value})),maxLength:50}),c.jsxs("div",{className:"msg-form-row",children:[c.jsxs("label",{className:"msg-form-active-label",children:[c.jsx("input",{type:"checkbox",checked:P.isActive,onChange:V=>N(W=>({...W,isActive:V.target.checked}))}),"Active (shown as daily message)"]}),c.jsxs("div",{className:"msg-form-actions",children:[c.jsx("button",{type:"button",className:"msg-cancel-btn",onClick:k,children:"Cancel"}),c.jsx("button",{type:"submit",className:"msg-save-btn",disabled:w||Pe||!P.text.trim(),children:w?"Saving":x?"Update":"Add"})]})]})]}),d?c.jsx("div",{style:{padding:"16px 0",textAlign:"center"},children:c.jsx("div",{className:"spinner",style:{margin:"0 auto"}})}):c.jsxs("div",{className:"msg-list",children:[l.length===0&&c.jsx("div",{style:{color:"var(--text3)",fontSize:"0.82rem",padding:"8px 0"},children:"No messages yet. Add one above or seed default messages."}),l.map(V=>c.jsxs("div",{className:`msg-row ${V.isActive?"":"msg-inactive"}`,children:[c.jsxs("div",{className:"msg-body",children:[c.jsxs("div",{className:"msg-text",children:['"',V.text,'"']}),V.author&&c.jsxs("div",{className:"msg-author",children:[" ",V.author]})]}),c.jsxs("div",{className:"msg-actions",children:[c.jsx("button",{className:`msg-active-badge ${V.isActive?"is-active":"is-inactive"}`,onClick:()=>b(V),title:V.isActive?"Deactivate":"Activate",children:V.isActive?" Active":" Off"}),c.jsx("button",{className:"msg-icon-btn",onClick:()=>y(V),title:"Edit",children:c.jsx(qb,{size:11})}),O===V.id?c.jsxs(c.Fragment,{children:[c.jsx("button",{className:"msg-icon-btn delete-btn",onClick:()=>R(V.id),children:"Confirm"}),c.jsx("button",{className:"msg-icon-btn",onClick:()=>M(null),children:"Cancel"})]}):c.jsx("button",{className:"msg-icon-btn delete-btn",onClick:()=>M(V.id),title:"Delete",children:c.jsx(NT,{size:11})})]})]},V.id))]})]})]})}function J2({profile:t,onClose:e,onSaved:n}){const{currentUser:r,updateUserProfile:s}=Gt(),[i,o]=A.useState(t.displayName||""),[l,u]=A.useState(t.handle||""),[d,f]=A.useState(t.bio||""),[m,g]=A.useState(""),[x,C]=A.useState(!0),[P,N]=A.useState(!1),[w,_]=A.useState("");A.useEffect(()=>{if(l===t.handle){g(""),C(!0);return}C(!1);const D=Jp(l);if(!l){g("");return}if(D){g(D);return}g("Checking");const O=setTimeout(async()=>{await Zp(Q,l,r==null?void 0:r.uid)?(g(" Available"),C(!0)):(g("Already taken."),C(!1))},500);return()=>clearTimeout(O)},[l,t.handle,r==null?void 0:r.uid]);async function E(D){if(D.preventDefault(),!(!x||!i.trim())){N(!0),_("");try{const O={displayName:i.trim(),handle:l.trim().toLowerCase(),bio:d.trim()};await s(O),n(O)}catch{_("Save failed. Try again.")}finally{N(!1)}}}return c.jsx("div",{className:"modal-overlay open",onClick:D=>{D.target===D.currentTarget&&e()},children:c.jsxs("div",{className:"modal-box edit-profile-modal",onClick:D=>D.stopPropagation(),children:[c.jsxs("div",{className:"sched-header",children:[c.jsx("h3",{className:"sched-title",children:"Edit Profile"}),c.jsx("button",{className:"modal-close-btn",onClick:e,children:c.jsx($i,{size:16})})]}),w&&c.jsx("div",{className:"auth-error",style:{marginBottom:12},children:w}),c.jsxs("form",{className:"sched-form",onSubmit:E,children:[c.jsxs("div",{className:"sched-field",children:[c.jsx("label",{className:"sched-field-label",children:"Display Name"}),c.jsx("input",{className:"auth-input",value:i,onChange:D=>o(D.target.value),maxLength:40,required:!0})]}),c.jsxs("div",{className:"sched-field",children:[c.jsx("label",{className:"sched-field-label",children:"Handle"}),c.jsxs("div",{className:"handle-input-wrap",children:[c.jsx("span",{className:"handle-at",children:"@"}),c.jsx("input",{className:`auth-input handle-input ${x?"handle-ok":""}`,value:l,onChange:D=>u(D.target.value.toLowerCase()),maxLength:20,required:!0,autoComplete:"off"})]}),m&&c.jsx("span",{className:`handle-hint ${x?"handle-hint-ok":"handle-hint-err"}`,children:m})]}),c.jsxs("div",{className:"sched-field",children:[c.jsx("label",{className:"sched-field-label",children:"Bio (optional)"}),c.jsx("textarea",{className:"msg-textarea",value:d,onChange:D=>f(D.target.value),maxLength:200,rows:3,placeholder:"Tell people about yourself"})]}),c.jsxs("div",{className:"sched-actions",children:[c.jsx("button",{type:"button",className:"msg-cancel-btn",onClick:e,children:"Cancel"}),c.jsx("button",{type:"submit",className:"msg-save-btn",disabled:P||!x||!i.trim(),children:P?"Saving":"Save Changes"})]})]})]})})}function Z2(){var x,C,P;const{handle:t}=cx(),{currentUser:e}=Gt(),[n,r]=A.useState(null),[s,i]=A.useState(null),[o,l]=A.useState(!0),[u,d]=A.useState(!1),[f,m]=A.useState(!1);A.useEffect(()=>{async function N(){l(!0);try{const w=Nt(Be(Q,"users"),Re("handle","==",t.toLowerCase())),_=await yn(w);if(_.empty){d(!0),l(!1);return}const E={id:_.docs[0].id,..._.docs[0].data()};r(E);const O=(await yn(Nt(Be(Q,"tasks"),Re("userId","==",E.uid),Re("status","==","touchdown")))).docs.map(T=>T.data()),M={};O.forEach(T=>{!T.dateStr||T.mode!=="worker"||(M[T.dateStr]=(M[T.dateStr]||0)+(T.difficulty||1))});const S=Object.values(M).filter(T=>T>=10).length,y={};O.forEach(T=>{(T.tags||[]).forEach(b=>{y[b]=(y[b]||0)+1})});const k=Object.entries(y).sort((T,b)=>b[1]-T[1]).slice(0,5).map(([T])=>T);i({completedCount:O.length,topTags:k,peakDays:S})}catch(w){console.error("Profile load error:",w)}finally{l(!1)}}N()},[t]);const g=e&&n&&e.uid===n.uid;return o?c.jsx("div",{className:"profile-page",children:c.jsx("div",{className:"cal-loading",children:c.jsx("div",{className:"spinner"})})}):u?c.jsx("div",{className:"profile-page",children:c.jsxs("div",{className:"profile-not-found",children:[c.jsxs("p",{children:["No user found with handle ",c.jsxs("strong",{children:["@",t]})]}),c.jsx(dn,{to:"/app",className:"nav-btn",children:"Back to App"})]})}):c.jsxs("div",{className:"profile-page",children:[c.jsx("div",{className:"profile-back",children:c.jsxs(dn,{to:"/app",className:"nav-btn",children:[c.jsx(Ma,{size:14})," Back"]})}),c.jsxs("div",{className:"profile-card",children:[c.jsx("div",{className:"profile-avatar",children:((C=(x=n.displayName)==null?void 0:x[0])==null?void 0:C.toUpperCase())||"@"}),c.jsxs("div",{className:"profile-info",children:[c.jsx("div",{className:"profile-display-name",children:n.displayName}),c.jsxs("div",{className:"profile-handle",children:["@",n.handle]}),n.bio&&c.jsx("p",{className:"profile-bio",children:n.bio}),c.jsxs("div",{className:"profile-meta",children:["Member since ",PT(n.createdAt)]})]}),g&&c.jsxs("button",{className:"nav-btn",onClick:()=>m(!0),children:[c.jsx(Hb,{size:13})," Edit Profile"]})]}),s&&c.jsxs("div",{className:"profile-stats",children:[c.jsxs("div",{className:"stat-card",children:[c.jsx("div",{className:"stat-value",children:s.completedCount}),c.jsx("div",{className:"stat-label",children:"Completed Tasks"})]}),c.jsxs("div",{className:"stat-card",children:[c.jsx("div",{className:"stat-value",style:{color:"var(--gold)"},children:s.peakDays}),c.jsx("div",{className:"stat-label",children:"Peak Days"})]})]}),((P=s==null?void 0:s.topTags)==null?void 0:P.length)>0&&c.jsxs("div",{className:"profile-tags-section",children:[c.jsx("div",{className:"sched-field-label",children:"Top Tags"}),c.jsx("div",{className:"profile-tags",children:s.topTags.map(N=>c.jsx("span",{className:"tag-chip",children:N},N))})]}),f&&c.jsx(J2,{profile:n,onClose:()=>m(!1),onSaved:N=>{r(w=>({...w,...N})),m(!1)}})]})}function eD({user:t}){var r,s,i,o;const e=Ia(),n=((s=(r=t.displayName)==null?void 0:r[0])==null?void 0:s.toUpperCase())||((o=(i=t.handle)==null?void 0:i[0])==null?void 0:o.toUpperCase())||"?";return c.jsxs("div",{className:"user-card",onClick:()=>e(`/profile/${t.handle}`),children:[c.jsx("div",{className:"uc-avatar",children:n}),c.jsxs("div",{className:"uc-info",children:[c.jsx("div",{className:"uc-display-name",children:t.displayName||""}),c.jsxs("div",{className:"uc-handle",children:["@",t.handle]})]})]})}function tD(){const[t,e]=A.useState(""),[n,r]=A.useState([]),[s,i]=A.useState(!1),[o,l]=A.useState(!1),u=A.useRef(null);return A.useEffect(()=>{if(clearTimeout(u.current),!t.trim()||t.trim().length<2){r([]),l(!1);return}i(!0),u.current=setTimeout(async()=>{const d=t.trim().toLowerCase();try{const f=await yn(Nt(Be(Q,"users"),Re("handle",">=",d),Re("handle","<=",d+""),ga("handle"),Yp(20)));r(f.docs.map(m=>({id:m.id,...m.data()})))}catch(f){console.error("Search error:",f),r([])}finally{i(!1),l(!0)}},400)},[t]),c.jsxs("div",{className:"search-page",children:[c.jsx("div",{className:"search-back",children:c.jsxs(dn,{to:"/app",className:"nav-btn",children:[c.jsx(Ma,{size:14})," Back"]})}),c.jsx("div",{className:"search-header",children:c.jsx("h1",{className:"history-title",children:"Search Users"})}),c.jsxs("div",{className:"search-input-wrap",children:[c.jsx(Gb,{size:15,className:"search-icon"}),c.jsx("input",{className:"search-input",placeholder:"Search by handle",value:t,onChange:d=>e(d.target.value),autoFocus:!0,autoComplete:"off"})]}),s&&c.jsx("div",{className:"cal-loading",children:c.jsx("div",{className:"spinner"})}),!s&&o&&n.length===0&&c.jsxs("div",{className:"search-empty",children:['No users found for "',t,'"']}),c.jsx("div",{className:"search-results",children:n.map(d=>c.jsx(eD,{user:d},d.id))})]})}function nD(){const{needsHandle:t,authLoading:e}=Gt();return c.jsxs(c.Fragment,{children:[t&&!e&&c.jsx(jb,{}),c.jsxs(xx,{children:[c.jsx(Ln,{path:"/login",element:c.jsx(Ob,{})}),c.jsx(Ln,{path:"/app",element:c.jsx(Fs,{children:c.jsx(M2,{})})}),c.jsx(Ln,{path:"/history",element:c.jsx(Fs,{children:c.jsx(F2,{})})}),c.jsx(Ln,{path:"/calendar",element:c.jsx(Fs,{children:c.jsx(G2,{})})}),c.jsx(Ln,{path:"/admin",element:c.jsx(Fs,{requireAdmin:!0,children:c.jsx(X2,{})})}),c.jsx(Ln,{path:"/profile/:handle",element:c.jsx(Fs,{children:c.jsx(Z2,{})})}),c.jsx(Ln,{path:"/search",element:c.jsx(Fs,{children:c.jsx(tD,{})})}),c.jsx(Ln,{path:"*",element:c.jsx(Sh,{to:"/app",replace:!0})})]})]})}function rD(){return c.jsx(Dx,{children:c.jsx(Pb,{children:c.jsx(bb,{children:c.jsx(nD,{})})})})}Rd.createRoot(document.getElementById("root")).render(c.jsx(Yv.StrictMode,{children:c.jsx(rD,{})}));
