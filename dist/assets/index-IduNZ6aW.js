function sI(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function iI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Vv={exports:{}},Du={},Mv={exports:{}},ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ha=Symbol.for("react.element"),oI=Symbol.for("react.portal"),aI=Symbol.for("react.fragment"),lI=Symbol.for("react.strict_mode"),uI=Symbol.for("react.profiler"),cI=Symbol.for("react.provider"),dI=Symbol.for("react.context"),hI=Symbol.for("react.forward_ref"),fI=Symbol.for("react.suspense"),pI=Symbol.for("react.memo"),mI=Symbol.for("react.lazy"),$m=Symbol.iterator;function gI(t){return t===null||typeof t!="object"?null:(t=$m&&t[$m]||t["@@iterator"],typeof t=="function"?t:null)}var Fv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Uv=Object.assign,Bv={};function Si(t,e,n){this.props=t,this.context=e,this.refs=Bv,this.updater=n||Fv}Si.prototype.isReactComponent={};Si.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Si.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function zv(){}zv.prototype=Si.prototype;function Qh(t,e,n){this.props=t,this.context=e,this.refs=Bv,this.updater=n||Fv}var Yh=Qh.prototype=new zv;Yh.constructor=Qh;Uv(Yh,Si.prototype);Yh.isPureReactComponent=!0;var Wm=Array.isArray,$v=Object.prototype.hasOwnProperty,Xh={current:null},Wv={key:!0,ref:!0,__self:!0,__source:!0};function Hv(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)$v.call(e,r)&&!Wv.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:ha,type:t,key:i,ref:o,props:s,_owner:Xh.current}}function yI(t,e){return{$$typeof:ha,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Jh(t){return typeof t=="object"&&t!==null&&t.$$typeof===ha}function vI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Hm=/\/+/g;function Fc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?vI(""+t.key):e.toString(36)}function El(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ha:case oI:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Fc(o,0):r,Wm(s)?(n="",t!=null&&(n=t.replace(Hm,"$&/")+"/"),El(s,e,n,"",function(c){return c})):s!=null&&(Jh(s)&&(s=yI(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Hm,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Wm(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+Fc(i,l);o+=El(i,e,n,u,s)}else if(u=gI(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+Fc(i,l++),o+=El(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ja(t,e,n){if(t==null)return t;var r=[],s=0;return El(t,r,"","",function(i){return e.call(n,i,s++)}),r}function _I(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Nt={current:null},Tl={transition:null},wI={ReactCurrentDispatcher:Nt,ReactCurrentBatchConfig:Tl,ReactCurrentOwner:Xh};function qv(){throw Error("act(...) is not supported in production builds of React.")}ae.Children={map:Ja,forEach:function(t,e,n){Ja(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ja(t,function(){e++}),e},toArray:function(t){return Ja(t,function(e){return e})||[]},only:function(t){if(!Jh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ae.Component=Si;ae.Fragment=aI;ae.Profiler=uI;ae.PureComponent=Qh;ae.StrictMode=lI;ae.Suspense=fI;ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wI;ae.act=qv;ae.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Uv({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Xh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)$v.call(e,u)&&!Wv.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:ha,type:t.type,key:s,ref:i,props:r,_owner:o}};ae.createContext=function(t){return t={$$typeof:dI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:cI,_context:t},t.Consumer=t};ae.createElement=Hv;ae.createFactory=function(t){var e=Hv.bind(null,t);return e.type=t,e};ae.createRef=function(){return{current:null}};ae.forwardRef=function(t){return{$$typeof:hI,render:t}};ae.isValidElement=Jh;ae.lazy=function(t){return{$$typeof:mI,_payload:{_status:-1,_result:t},_init:_I}};ae.memo=function(t,e){return{$$typeof:pI,type:t,compare:e===void 0?null:e}};ae.startTransition=function(t){var e=Tl.transition;Tl.transition={};try{t()}finally{Tl.transition=e}};ae.unstable_act=qv;ae.useCallback=function(t,e){return Nt.current.useCallback(t,e)};ae.useContext=function(t){return Nt.current.useContext(t)};ae.useDebugValue=function(){};ae.useDeferredValue=function(t){return Nt.current.useDeferredValue(t)};ae.useEffect=function(t,e){return Nt.current.useEffect(t,e)};ae.useId=function(){return Nt.current.useId()};ae.useImperativeHandle=function(t,e,n){return Nt.current.useImperativeHandle(t,e,n)};ae.useInsertionEffect=function(t,e){return Nt.current.useInsertionEffect(t,e)};ae.useLayoutEffect=function(t,e){return Nt.current.useLayoutEffect(t,e)};ae.useMemo=function(t,e){return Nt.current.useMemo(t,e)};ae.useReducer=function(t,e,n){return Nt.current.useReducer(t,e,n)};ae.useRef=function(t){return Nt.current.useRef(t)};ae.useState=function(t){return Nt.current.useState(t)};ae.useSyncExternalStore=function(t,e,n){return Nt.current.useSyncExternalStore(t,e,n)};ae.useTransition=function(){return Nt.current.useTransition()};ae.version="18.3.1";Mv.exports=ae;var A=Mv.exports;const Kv=iI(A),EI=sI({__proto__:null,default:Kv},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TI=A,II=Symbol.for("react.element"),SI=Symbol.for("react.fragment"),kI=Object.prototype.hasOwnProperty,xI=TI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,AI={key:!0,ref:!0,__self:!0,__source:!0};function Gv(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)kI.call(e,r)&&!AI.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:II,type:t,key:i,ref:o,props:s,_owner:xI.current}}Du.Fragment=SI;Du.jsx=Gv;Du.jsxs=Gv;Vv.exports=Du;var d=Vv.exports,kd={},Qv={exports:{}},Ht={},Yv={exports:{}},Xv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,W){var G=V.length;V.push(W);e:for(;0<G;){var Q=G-1>>>1,te=V[Q];if(0<s(te,W))V[Q]=W,V[G]=te,G=Q;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var W=V[0],G=V.pop();if(G!==W){V[0]=G;e:for(var Q=0,te=V.length,Z=te>>>1;Q<Z;){var se=2*(Q+1)-1,Te=V[se],Ue=se+1,Be=V[Ue];if(0>s(Te,G))Ue<te&&0>s(Be,Te)?(V[Q]=Be,V[Ue]=G,Q=Ue):(V[Q]=Te,V[se]=G,Q=se);else if(Ue<te&&0>s(Be,G))V[Q]=Be,V[Ue]=G,Q=Ue;else break e}}return W}function s(V,W){var G=V.sortIndex-W.sortIndex;return G!==0?G:V.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],c=[],f=1,m=null,g=3,I=!1,C=!1,D=!1,R=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(V){for(var W=n(c);W!==null;){if(W.callback===null)r(c);else if(W.startTime<=V)r(c),W.sortIndex=W.expirationTime,e(u,W);else break;W=n(c)}}function b(V){if(D=!1,w(V),!C)if(n(u)!==null)C=!0,qe(O);else{var W=n(c);W!==null&&Oe(b,W.startTime-V)}}function O(V,W){C=!1,D&&(D=!1,E(y),y=-1),I=!0;var G=g;try{for(w(W),m=n(u);m!==null&&(!(m.expirationTime>W)||V&&!P());){var Q=m.callback;if(typeof Q=="function"){m.callback=null,g=m.priorityLevel;var te=Q(m.expirationTime<=W);W=t.unstable_now(),typeof te=="function"?m.callback=te:m===n(u)&&r(u),w(W)}else r(u);m=n(u)}if(m!==null)var Z=!0;else{var se=n(c);se!==null&&Oe(b,se.startTime-W),Z=!1}return Z}finally{m=null,g=G,I=!1}}var M=!1,T=null,y=-1,S=5,k=-1;function P(){return!(t.unstable_now()-k<S)}function N(){if(T!==null){var V=t.unstable_now();k=V;var W=!0;try{W=T(!0,V)}finally{W?x():(M=!1,T=null)}}else M=!1}var x;if(typeof _=="function")x=function(){_(N)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,He=he.port2;he.port1.onmessage=N,x=function(){He.postMessage(null)}}else x=function(){R(N,0)};function qe(V){T=V,M||(M=!0,x())}function Oe(V,W){y=R(function(){V(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){C||I||(C=!0,qe(O))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(V){switch(g){case 1:case 2:case 3:var W=3;break;default:W=g}var G=g;g=W;try{return V()}finally{g=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,W){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var G=g;g=V;try{return W()}finally{g=G}},t.unstable_scheduleCallback=function(V,W,G){var Q=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?Q+G:Q):G=Q,V){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=G+te,V={id:f++,callback:W,priorityLevel:V,startTime:G,expirationTime:te,sortIndex:-1},G>Q?(V.sortIndex=G,e(c,V),n(u)===null&&V===n(c)&&(D?(E(y),y=-1):D=!0,Oe(b,G-Q))):(V.sortIndex=te,e(u,V),C||I||(C=!0,qe(O))),V},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(V){var W=g;return function(){var G=g;g=W;try{return V.apply(this,arguments)}finally{g=G}}}})(Xv);Yv.exports=Xv;var CI=Yv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NI=A,Wt=CI;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Jv=new Set,Oo={};function ws(t,e){ii(t,e),ii(t+"Capture",e)}function ii(t,e){for(Oo[t]=e,t=0;t<e.length;t++)Jv.add(e[t])}var zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xd=Object.prototype.hasOwnProperty,RI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,qm={},Km={};function PI(t){return xd.call(Km,t)?!0:xd.call(qm,t)?!1:RI.test(t)?Km[t]=!0:(qm[t]=!0,!1)}function bI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function DI(t,e,n,r){if(e===null||typeof e>"u"||bI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Rt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){dt[t]=new Rt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];dt[e]=new Rt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){dt[t]=new Rt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){dt[t]=new Rt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){dt[t]=new Rt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){dt[t]=new Rt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){dt[t]=new Rt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){dt[t]=new Rt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){dt[t]=new Rt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Zh=/[\-:]([a-z])/g;function ef(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Zh,ef);dt[e]=new Rt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Zh,ef);dt[e]=new Rt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Zh,ef);dt[e]=new Rt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){dt[t]=new Rt(t,1,!1,t.toLowerCase(),null,!1,!1)});dt.xlinkHref=new Rt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){dt[t]=new Rt(t,1,!1,t.toLowerCase(),null,!0,!0)});function tf(t,e,n,r){var s=dt.hasOwnProperty(e)?dt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(DI(e,n,s,r)&&(n=null),r||s===null?PI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Xn=NI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Za=Symbol.for("react.element"),Ls=Symbol.for("react.portal"),Vs=Symbol.for("react.fragment"),nf=Symbol.for("react.strict_mode"),Ad=Symbol.for("react.profiler"),Zv=Symbol.for("react.provider"),e_=Symbol.for("react.context"),rf=Symbol.for("react.forward_ref"),Cd=Symbol.for("react.suspense"),Nd=Symbol.for("react.suspense_list"),sf=Symbol.for("react.memo"),lr=Symbol.for("react.lazy"),t_=Symbol.for("react.offscreen"),Gm=Symbol.iterator;function to(t){return t===null||typeof t!="object"?null:(t=Gm&&t[Gm]||t["@@iterator"],typeof t=="function"?t:null)}var Pe=Object.assign,Uc;function co(t){if(Uc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Uc=e&&e[1]||""}return`
`+Uc+t}var Bc=!1;function zc(t,e){if(!t||Bc)return"";Bc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{Bc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?co(t):""}function jI(t){switch(t.tag){case 5:return co(t.type);case 16:return co("Lazy");case 13:return co("Suspense");case 19:return co("SuspenseList");case 0:case 2:case 15:return t=zc(t.type,!1),t;case 11:return t=zc(t.type.render,!1),t;case 1:return t=zc(t.type,!0),t;default:return""}}function Rd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Vs:return"Fragment";case Ls:return"Portal";case Ad:return"Profiler";case nf:return"StrictMode";case Cd:return"Suspense";case Nd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case e_:return(t.displayName||"Context")+".Consumer";case Zv:return(t._context.displayName||"Context")+".Provider";case rf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case sf:return e=t.displayName||null,e!==null?e:Rd(t.type)||"Memo";case lr:e=t._payload,t=t._init;try{return Rd(t(e))}catch{}}return null}function OI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Rd(e);case 8:return e===nf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Dr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function n_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function LI(t){var e=n_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function el(t){t._valueTracker||(t._valueTracker=LI(t))}function r_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=n_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function zl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Pd(t,e){var n=e.checked;return Pe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Qm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Dr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function s_(t,e){e=e.checked,e!=null&&tf(t,"checked",e,!1)}function bd(t,e){s_(t,e);var n=Dr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Dd(t,e.type,n):e.hasOwnProperty("defaultValue")&&Dd(t,e.type,Dr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ym(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Dd(t,e,n){(e!=="number"||zl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ho=Array.isArray;function Qs(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Dr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function jd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Pe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Xm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(ho(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Dr(n)}}function i_(t,e){var n=Dr(e.value),r=Dr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Jm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function o_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Od(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?o_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var tl,a_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(tl=tl||document.createElement("div"),tl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=tl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Lo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Eo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},VI=["Webkit","ms","Moz","O"];Object.keys(Eo).forEach(function(t){VI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Eo[e]=Eo[t]})});function l_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Eo.hasOwnProperty(t)&&Eo[t]?(""+e).trim():e+"px"}function u_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=l_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var MI=Pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ld(t,e){if(e){if(MI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function Vd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Md=null;function of(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Fd=null,Ys=null,Xs=null;function Zm(t){if(t=ma(t)){if(typeof Fd!="function")throw Error(z(280));var e=t.stateNode;e&&(e=Mu(e),Fd(t.stateNode,t.type,e))}}function c_(t){Ys?Xs?Xs.push(t):Xs=[t]:Ys=t}function d_(){if(Ys){var t=Ys,e=Xs;if(Xs=Ys=null,Zm(t),e)for(t=0;t<e.length;t++)Zm(e[t])}}function h_(t,e){return t(e)}function f_(){}var $c=!1;function p_(t,e,n){if($c)return t(e,n);$c=!0;try{return h_(t,e,n)}finally{$c=!1,(Ys!==null||Xs!==null)&&(f_(),d_())}}function Vo(t,e){var n=t.stateNode;if(n===null)return null;var r=Mu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var Ud=!1;if(zn)try{var no={};Object.defineProperty(no,"passive",{get:function(){Ud=!0}}),window.addEventListener("test",no,no),window.removeEventListener("test",no,no)}catch{Ud=!1}function FI(t,e,n,r,s,i,o,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(f){this.onError(f)}}var To=!1,$l=null,Wl=!1,Bd=null,UI={onError:function(t){To=!0,$l=t}};function BI(t,e,n,r,s,i,o,l,u){To=!1,$l=null,FI.apply(UI,arguments)}function zI(t,e,n,r,s,i,o,l,u){if(BI.apply(this,arguments),To){if(To){var c=$l;To=!1,$l=null}else throw Error(z(198));Wl||(Wl=!0,Bd=c)}}function Es(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function m_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function eg(t){if(Es(t)!==t)throw Error(z(188))}function $I(t){var e=t.alternate;if(!e){if(e=Es(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return eg(s),t;if(i===r)return eg(s),e;i=i.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function g_(t){return t=$I(t),t!==null?y_(t):null}function y_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=y_(t);if(e!==null)return e;t=t.sibling}return null}var v_=Wt.unstable_scheduleCallback,tg=Wt.unstable_cancelCallback,WI=Wt.unstable_shouldYield,HI=Wt.unstable_requestPaint,Ve=Wt.unstable_now,qI=Wt.unstable_getCurrentPriorityLevel,af=Wt.unstable_ImmediatePriority,__=Wt.unstable_UserBlockingPriority,Hl=Wt.unstable_NormalPriority,KI=Wt.unstable_LowPriority,w_=Wt.unstable_IdlePriority,ju=null,wn=null;function GI(t){if(wn&&typeof wn.onCommitFiberRoot=="function")try{wn.onCommitFiberRoot(ju,t,void 0,(t.current.flags&128)===128)}catch{}}var ln=Math.clz32?Math.clz32:XI,QI=Math.log,YI=Math.LN2;function XI(t){return t>>>=0,t===0?32:31-(QI(t)/YI|0)|0}var nl=64,rl=4194304;function fo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ql(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=fo(l):(i&=o,i!==0&&(r=fo(i)))}else o=n&~s,o!==0?r=fo(o):i!==0&&(r=fo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ln(e),s=1<<n,r|=t[n],e&=~s;return r}function JI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ZI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-ln(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=JI(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function zd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function E_(){var t=nl;return nl<<=1,!(nl&4194240)&&(nl=64),t}function Wc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function fa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ln(e),t[e]=n}function eS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-ln(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function lf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ln(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ye=0;function T_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var I_,uf,S_,k_,x_,$d=!1,sl=[],wr=null,Er=null,Tr=null,Mo=new Map,Fo=new Map,cr=[],tS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ng(t,e){switch(t){case"focusin":case"focusout":wr=null;break;case"dragenter":case"dragleave":Er=null;break;case"mouseover":case"mouseout":Tr=null;break;case"pointerover":case"pointerout":Mo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fo.delete(e.pointerId)}}function ro(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ma(e),e!==null&&uf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function nS(t,e,n,r,s){switch(e){case"focusin":return wr=ro(wr,t,e,n,r,s),!0;case"dragenter":return Er=ro(Er,t,e,n,r,s),!0;case"mouseover":return Tr=ro(Tr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Mo.set(i,ro(Mo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Fo.set(i,ro(Fo.get(i)||null,t,e,n,r,s)),!0}return!1}function A_(t){var e=ts(t.target);if(e!==null){var n=Es(e);if(n!==null){if(e=n.tag,e===13){if(e=m_(n),e!==null){t.blockedOn=e,x_(t.priority,function(){S_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Il(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Wd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Md=r,n.target.dispatchEvent(r),Md=null}else return e=ma(n),e!==null&&uf(e),t.blockedOn=n,!1;e.shift()}return!0}function rg(t,e,n){Il(t)&&n.delete(e)}function rS(){$d=!1,wr!==null&&Il(wr)&&(wr=null),Er!==null&&Il(Er)&&(Er=null),Tr!==null&&Il(Tr)&&(Tr=null),Mo.forEach(rg),Fo.forEach(rg)}function so(t,e){t.blockedOn===e&&(t.blockedOn=null,$d||($d=!0,Wt.unstable_scheduleCallback(Wt.unstable_NormalPriority,rS)))}function Uo(t){function e(s){return so(s,t)}if(0<sl.length){so(sl[0],t);for(var n=1;n<sl.length;n++){var r=sl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(wr!==null&&so(wr,t),Er!==null&&so(Er,t),Tr!==null&&so(Tr,t),Mo.forEach(e),Fo.forEach(e),n=0;n<cr.length;n++)r=cr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<cr.length&&(n=cr[0],n.blockedOn===null);)A_(n),n.blockedOn===null&&cr.shift()}var Js=Xn.ReactCurrentBatchConfig,Kl=!0;function sS(t,e,n,r){var s=ye,i=Js.transition;Js.transition=null;try{ye=1,cf(t,e,n,r)}finally{ye=s,Js.transition=i}}function iS(t,e,n,r){var s=ye,i=Js.transition;Js.transition=null;try{ye=4,cf(t,e,n,r)}finally{ye=s,Js.transition=i}}function cf(t,e,n,r){if(Kl){var s=Wd(t,e,n,r);if(s===null)ed(t,e,r,Gl,n),ng(t,r);else if(nS(s,t,e,n,r))r.stopPropagation();else if(ng(t,r),e&4&&-1<tS.indexOf(t)){for(;s!==null;){var i=ma(s);if(i!==null&&I_(i),i=Wd(t,e,n,r),i===null&&ed(t,e,r,Gl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else ed(t,e,r,null,n)}}var Gl=null;function Wd(t,e,n,r){if(Gl=null,t=of(r),t=ts(t),t!==null)if(e=Es(t),e===null)t=null;else if(n=e.tag,n===13){if(t=m_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Gl=t,null}function C_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qI()){case af:return 1;case __:return 4;case Hl:case KI:return 16;case w_:return 536870912;default:return 16}default:return 16}}var gr=null,df=null,Sl=null;function N_(){if(Sl)return Sl;var t,e=df,n=e.length,r,s="value"in gr?gr.value:gr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Sl=s.slice(t,1<r?1-r:void 0)}function kl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function il(){return!0}function sg(){return!1}function qt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?il:sg,this.isPropagationStopped=sg,this}return Pe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=il)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=il)},persist:function(){},isPersistent:il}),e}var ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hf=qt(ki),pa=Pe({},ki,{view:0,detail:0}),oS=qt(pa),Hc,qc,io,Ou=Pe({},pa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ff,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==io&&(io&&t.type==="mousemove"?(Hc=t.screenX-io.screenX,qc=t.screenY-io.screenY):qc=Hc=0,io=t),Hc)},movementY:function(t){return"movementY"in t?t.movementY:qc}}),ig=qt(Ou),aS=Pe({},Ou,{dataTransfer:0}),lS=qt(aS),uS=Pe({},pa,{relatedTarget:0}),Kc=qt(uS),cS=Pe({},ki,{animationName:0,elapsedTime:0,pseudoElement:0}),dS=qt(cS),hS=Pe({},ki,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),fS=qt(hS),pS=Pe({},ki,{data:0}),og=qt(pS),mS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=yS[t])?!!e[t]:!1}function ff(){return vS}var _S=Pe({},pa,{key:function(t){if(t.key){var e=mS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=kl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?gS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ff,charCode:function(t){return t.type==="keypress"?kl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?kl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),wS=qt(_S),ES=Pe({},Ou,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ag=qt(ES),TS=Pe({},pa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ff}),IS=qt(TS),SS=Pe({},ki,{propertyName:0,elapsedTime:0,pseudoElement:0}),kS=qt(SS),xS=Pe({},Ou,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),AS=qt(xS),CS=[9,13,27,32],pf=zn&&"CompositionEvent"in window,Io=null;zn&&"documentMode"in document&&(Io=document.documentMode);var NS=zn&&"TextEvent"in window&&!Io,R_=zn&&(!pf||Io&&8<Io&&11>=Io),lg=" ",ug=!1;function P_(t,e){switch(t){case"keyup":return CS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function b_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ms=!1;function RS(t,e){switch(t){case"compositionend":return b_(e);case"keypress":return e.which!==32?null:(ug=!0,lg);case"textInput":return t=e.data,t===lg&&ug?null:t;default:return null}}function PS(t,e){if(Ms)return t==="compositionend"||!pf&&P_(t,e)?(t=N_(),Sl=df=gr=null,Ms=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return R_&&e.locale!=="ko"?null:e.data;default:return null}}var bS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!bS[t.type]:e==="textarea"}function D_(t,e,n,r){c_(r),e=Ql(e,"onChange"),0<e.length&&(n=new hf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var So=null,Bo=null;function DS(t){W_(t,0)}function Lu(t){var e=Bs(t);if(r_(e))return t}function jS(t,e){if(t==="change")return e}var j_=!1;if(zn){var Gc;if(zn){var Qc="oninput"in document;if(!Qc){var dg=document.createElement("div");dg.setAttribute("oninput","return;"),Qc=typeof dg.oninput=="function"}Gc=Qc}else Gc=!1;j_=Gc&&(!document.documentMode||9<document.documentMode)}function hg(){So&&(So.detachEvent("onpropertychange",O_),Bo=So=null)}function O_(t){if(t.propertyName==="value"&&Lu(Bo)){var e=[];D_(e,Bo,t,of(t)),p_(DS,e)}}function OS(t,e,n){t==="focusin"?(hg(),So=e,Bo=n,So.attachEvent("onpropertychange",O_)):t==="focusout"&&hg()}function LS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Lu(Bo)}function VS(t,e){if(t==="click")return Lu(e)}function MS(t,e){if(t==="input"||t==="change")return Lu(e)}function FS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var cn=typeof Object.is=="function"?Object.is:FS;function zo(t,e){if(cn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!xd.call(e,s)||!cn(t[s],e[s]))return!1}return!0}function fg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function pg(t,e){var n=fg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=fg(n)}}function L_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?L_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function V_(){for(var t=window,e=zl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=zl(t.document)}return e}function mf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function US(t){var e=V_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&L_(n.ownerDocument.documentElement,n)){if(r!==null&&mf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=pg(n,i);var o=pg(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var BS=zn&&"documentMode"in document&&11>=document.documentMode,Fs=null,Hd=null,ko=null,qd=!1;function mg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;qd||Fs==null||Fs!==zl(r)||(r=Fs,"selectionStart"in r&&mf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ko&&zo(ko,r)||(ko=r,r=Ql(Hd,"onSelect"),0<r.length&&(e=new hf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Fs)))}function ol(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Us={animationend:ol("Animation","AnimationEnd"),animationiteration:ol("Animation","AnimationIteration"),animationstart:ol("Animation","AnimationStart"),transitionend:ol("Transition","TransitionEnd")},Yc={},M_={};zn&&(M_=document.createElement("div").style,"AnimationEvent"in window||(delete Us.animationend.animation,delete Us.animationiteration.animation,delete Us.animationstart.animation),"TransitionEvent"in window||delete Us.transitionend.transition);function Vu(t){if(Yc[t])return Yc[t];if(!Us[t])return t;var e=Us[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in M_)return Yc[t]=e[n];return t}var F_=Vu("animationend"),U_=Vu("animationiteration"),B_=Vu("animationstart"),z_=Vu("transitionend"),$_=new Map,gg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mr(t,e){$_.set(t,e),ws(e,[t])}for(var Xc=0;Xc<gg.length;Xc++){var Jc=gg[Xc],zS=Jc.toLowerCase(),$S=Jc[0].toUpperCase()+Jc.slice(1);Mr(zS,"on"+$S)}Mr(F_,"onAnimationEnd");Mr(U_,"onAnimationIteration");Mr(B_,"onAnimationStart");Mr("dblclick","onDoubleClick");Mr("focusin","onFocus");Mr("focusout","onBlur");Mr(z_,"onTransitionEnd");ii("onMouseEnter",["mouseout","mouseover"]);ii("onMouseLeave",["mouseout","mouseover"]);ii("onPointerEnter",["pointerout","pointerover"]);ii("onPointerLeave",["pointerout","pointerover"]);ws("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ws("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ws("onBeforeInput",["compositionend","keypress","textInput","paste"]);ws("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ws("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ws("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var po="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WS=new Set("cancel close invalid load scroll toggle".split(" ").concat(po));function yg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,zI(r,e,void 0,t),t.currentTarget=null}function W_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;yg(s,l,c),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,c=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;yg(s,l,c),i=u}}}if(Wl)throw t=Bd,Wl=!1,Bd=null,t}function Se(t,e){var n=e[Xd];n===void 0&&(n=e[Xd]=new Set);var r=t+"__bubble";n.has(r)||(H_(e,t,2,!1),n.add(r))}function Zc(t,e,n){var r=0;e&&(r|=4),H_(n,t,r,e)}var al="_reactListening"+Math.random().toString(36).slice(2);function $o(t){if(!t[al]){t[al]=!0,Jv.forEach(function(n){n!=="selectionchange"&&(WS.has(n)||Zc(n,!1,t),Zc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[al]||(e[al]=!0,Zc("selectionchange",!1,e))}}function H_(t,e,n,r){switch(C_(e)){case 1:var s=sS;break;case 4:s=iS;break;default:s=cf}n=s.bind(null,e,n,t),s=void 0,!Ud||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function ed(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=ts(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}p_(function(){var c=i,f=of(n),m=[];e:{var g=$_.get(t);if(g!==void 0){var I=hf,C=t;switch(t){case"keypress":if(kl(n)===0)break e;case"keydown":case"keyup":I=wS;break;case"focusin":C="focus",I=Kc;break;case"focusout":C="blur",I=Kc;break;case"beforeblur":case"afterblur":I=Kc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=ig;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=lS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=IS;break;case F_:case U_:case B_:I=dS;break;case z_:I=kS;break;case"scroll":I=oS;break;case"wheel":I=AS;break;case"copy":case"cut":case"paste":I=fS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=ag}var D=(e&4)!==0,R=!D&&t==="scroll",E=D?g!==null?g+"Capture":null:g;D=[];for(var _=c,w;_!==null;){w=_;var b=w.stateNode;if(w.tag===5&&b!==null&&(w=b,E!==null&&(b=Vo(_,E),b!=null&&D.push(Wo(_,b,w)))),R)break;_=_.return}0<D.length&&(g=new I(g,C,null,n,f),m.push({event:g,listeners:D}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",I=t==="mouseout"||t==="pointerout",g&&n!==Md&&(C=n.relatedTarget||n.fromElement)&&(ts(C)||C[$n]))break e;if((I||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,I?(C=n.relatedTarget||n.toElement,I=c,C=C?ts(C):null,C!==null&&(R=Es(C),C!==R||C.tag!==5&&C.tag!==6)&&(C=null)):(I=null,C=c),I!==C)){if(D=ig,b="onMouseLeave",E="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(D=ag,b="onPointerLeave",E="onPointerEnter",_="pointer"),R=I==null?g:Bs(I),w=C==null?g:Bs(C),g=new D(b,_+"leave",I,n,f),g.target=R,g.relatedTarget=w,b=null,ts(f)===c&&(D=new D(E,_+"enter",C,n,f),D.target=w,D.relatedTarget=R,b=D),R=b,I&&C)t:{for(D=I,E=C,_=0,w=D;w;w=Ps(w))_++;for(w=0,b=E;b;b=Ps(b))w++;for(;0<_-w;)D=Ps(D),_--;for(;0<w-_;)E=Ps(E),w--;for(;_--;){if(D===E||E!==null&&D===E.alternate)break t;D=Ps(D),E=Ps(E)}D=null}else D=null;I!==null&&vg(m,g,I,D,!1),C!==null&&R!==null&&vg(m,R,C,D,!0)}}e:{if(g=c?Bs(c):window,I=g.nodeName&&g.nodeName.toLowerCase(),I==="select"||I==="input"&&g.type==="file")var O=jS;else if(cg(g))if(j_)O=MS;else{O=LS;var M=OS}else(I=g.nodeName)&&I.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(O=VS);if(O&&(O=O(t,c))){D_(m,O,n,f);break e}M&&M(t,g,c),t==="focusout"&&(M=g._wrapperState)&&M.controlled&&g.type==="number"&&Dd(g,"number",g.value)}switch(M=c?Bs(c):window,t){case"focusin":(cg(M)||M.contentEditable==="true")&&(Fs=M,Hd=c,ko=null);break;case"focusout":ko=Hd=Fs=null;break;case"mousedown":qd=!0;break;case"contextmenu":case"mouseup":case"dragend":qd=!1,mg(m,n,f);break;case"selectionchange":if(BS)break;case"keydown":case"keyup":mg(m,n,f)}var T;if(pf)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Ms?P_(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(R_&&n.locale!=="ko"&&(Ms||y!=="onCompositionStart"?y==="onCompositionEnd"&&Ms&&(T=N_()):(gr=f,df="value"in gr?gr.value:gr.textContent,Ms=!0)),M=Ql(c,y),0<M.length&&(y=new og(y,t,null,n,f),m.push({event:y,listeners:M}),T?y.data=T:(T=b_(n),T!==null&&(y.data=T)))),(T=NS?RS(t,n):PS(t,n))&&(c=Ql(c,"onBeforeInput"),0<c.length&&(f=new og("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:c}),f.data=T))}W_(m,e)})}function Wo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ql(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Vo(t,n),i!=null&&r.unshift(Wo(t,i,s)),i=Vo(t,e),i!=null&&r.push(Wo(t,i,s))),t=t.return}return r}function Ps(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function vg(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&c!==null&&(l=c,s?(u=Vo(n,i),u!=null&&o.unshift(Wo(n,u,l))):s||(u=Vo(n,i),u!=null&&o.push(Wo(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var HS=/\r\n?/g,qS=/\u0000|\uFFFD/g;function _g(t){return(typeof t=="string"?t:""+t).replace(HS,`
`).replace(qS,"")}function ll(t,e,n){if(e=_g(e),_g(t)!==e&&n)throw Error(z(425))}function Yl(){}var Kd=null,Gd=null;function Qd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Yd=typeof setTimeout=="function"?setTimeout:void 0,KS=typeof clearTimeout=="function"?clearTimeout:void 0,wg=typeof Promise=="function"?Promise:void 0,GS=typeof queueMicrotask=="function"?queueMicrotask:typeof wg<"u"?function(t){return wg.resolve(null).then(t).catch(QS)}:Yd;function QS(t){setTimeout(function(){throw t})}function td(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Uo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Uo(e)}function Ir(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Eg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var xi=Math.random().toString(36).slice(2),vn="__reactFiber$"+xi,Ho="__reactProps$"+xi,$n="__reactContainer$"+xi,Xd="__reactEvents$"+xi,YS="__reactListeners$"+xi,XS="__reactHandles$"+xi;function ts(t){var e=t[vn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[$n]||n[vn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Eg(t);t!==null;){if(n=t[vn])return n;t=Eg(t)}return e}t=n,n=t.parentNode}return null}function ma(t){return t=t[vn]||t[$n],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Bs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function Mu(t){return t[Ho]||null}var Jd=[],zs=-1;function Fr(t){return{current:t}}function xe(t){0>zs||(t.current=Jd[zs],Jd[zs]=null,zs--)}function Ee(t,e){zs++,Jd[zs]=t.current,t.current=e}var jr={},Tt=Fr(jr),jt=Fr(!1),us=jr;function oi(t,e){var n=t.type.contextTypes;if(!n)return jr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ot(t){return t=t.childContextTypes,t!=null}function Xl(){xe(jt),xe(Tt)}function Tg(t,e,n){if(Tt.current!==jr)throw Error(z(168));Ee(Tt,e),Ee(jt,n)}function q_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(z(108,OI(t)||"Unknown",s));return Pe({},n,r)}function Jl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||jr,us=Tt.current,Ee(Tt,t),Ee(jt,jt.current),!0}function Ig(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=q_(t,e,us),r.__reactInternalMemoizedMergedChildContext=t,xe(jt),xe(Tt),Ee(Tt,t)):xe(jt),Ee(jt,n)}var Dn=null,Fu=!1,nd=!1;function K_(t){Dn===null?Dn=[t]:Dn.push(t)}function JS(t){Fu=!0,K_(t)}function Ur(){if(!nd&&Dn!==null){nd=!0;var t=0,e=ye;try{var n=Dn;for(ye=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Dn=null,Fu=!1}catch(s){throw Dn!==null&&(Dn=Dn.slice(t+1)),v_(af,Ur),s}finally{ye=e,nd=!1}}return null}var $s=[],Ws=0,Zl=null,eu=0,Gt=[],Qt=0,cs=null,jn=1,On="";function Xr(t,e){$s[Ws++]=eu,$s[Ws++]=Zl,Zl=t,eu=e}function G_(t,e,n){Gt[Qt++]=jn,Gt[Qt++]=On,Gt[Qt++]=cs,cs=t;var r=jn;t=On;var s=32-ln(r)-1;r&=~(1<<s),n+=1;var i=32-ln(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,jn=1<<32-ln(e)+s|n<<s|r,On=i+t}else jn=1<<i|n<<s|r,On=t}function gf(t){t.return!==null&&(Xr(t,1),G_(t,1,0))}function yf(t){for(;t===Zl;)Zl=$s[--Ws],$s[Ws]=null,eu=$s[--Ws],$s[Ws]=null;for(;t===cs;)cs=Gt[--Qt],Gt[Qt]=null,On=Gt[--Qt],Gt[Qt]=null,jn=Gt[--Qt],Gt[Qt]=null}var $t=null,Bt=null,Ae=!1,on=null;function Q_(t,e){var n=Yt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Sg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,$t=t,Bt=Ir(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,$t=t,Bt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=cs!==null?{id:jn,overflow:On}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Yt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,$t=t,Bt=null,!0):!1;default:return!1}}function Zd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function eh(t){if(Ae){var e=Bt;if(e){var n=e;if(!Sg(t,e)){if(Zd(t))throw Error(z(418));e=Ir(n.nextSibling);var r=$t;e&&Sg(t,e)?Q_(r,n):(t.flags=t.flags&-4097|2,Ae=!1,$t=t)}}else{if(Zd(t))throw Error(z(418));t.flags=t.flags&-4097|2,Ae=!1,$t=t}}}function kg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;$t=t}function ul(t){if(t!==$t)return!1;if(!Ae)return kg(t),Ae=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Qd(t.type,t.memoizedProps)),e&&(e=Bt)){if(Zd(t))throw Y_(),Error(z(418));for(;e;)Q_(t,e),e=Ir(e.nextSibling)}if(kg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Bt=Ir(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Bt=null}}else Bt=$t?Ir(t.stateNode.nextSibling):null;return!0}function Y_(){for(var t=Bt;t;)t=Ir(t.nextSibling)}function ai(){Bt=$t=null,Ae=!1}function vf(t){on===null?on=[t]:on.push(t)}var ZS=Xn.ReactCurrentBatchConfig;function oo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function cl(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function xg(t){var e=t._init;return e(t._payload)}function X_(t){function e(E,_){if(t){var w=E.deletions;w===null?(E.deletions=[_],E.flags|=16):w.push(_)}}function n(E,_){if(!t)return null;for(;_!==null;)e(E,_),_=_.sibling;return null}function r(E,_){for(E=new Map;_!==null;)_.key!==null?E.set(_.key,_):E.set(_.index,_),_=_.sibling;return E}function s(E,_){return E=Ar(E,_),E.index=0,E.sibling=null,E}function i(E,_,w){return E.index=w,t?(w=E.alternate,w!==null?(w=w.index,w<_?(E.flags|=2,_):w):(E.flags|=2,_)):(E.flags|=1048576,_)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function l(E,_,w,b){return _===null||_.tag!==6?(_=ud(w,E.mode,b),_.return=E,_):(_=s(_,w),_.return=E,_)}function u(E,_,w,b){var O=w.type;return O===Vs?f(E,_,w.props.children,b,w.key):_!==null&&(_.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===lr&&xg(O)===_.type)?(b=s(_,w.props),b.ref=oo(E,_,w),b.return=E,b):(b=bl(w.type,w.key,w.props,null,E.mode,b),b.ref=oo(E,_,w),b.return=E,b)}function c(E,_,w,b){return _===null||_.tag!==4||_.stateNode.containerInfo!==w.containerInfo||_.stateNode.implementation!==w.implementation?(_=cd(w,E.mode,b),_.return=E,_):(_=s(_,w.children||[]),_.return=E,_)}function f(E,_,w,b,O){return _===null||_.tag!==7?(_=os(w,E.mode,b,O),_.return=E,_):(_=s(_,w),_.return=E,_)}function m(E,_,w){if(typeof _=="string"&&_!==""||typeof _=="number")return _=ud(""+_,E.mode,w),_.return=E,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Za:return w=bl(_.type,_.key,_.props,null,E.mode,w),w.ref=oo(E,null,_),w.return=E,w;case Ls:return _=cd(_,E.mode,w),_.return=E,_;case lr:var b=_._init;return m(E,b(_._payload),w)}if(ho(_)||to(_))return _=os(_,E.mode,w,null),_.return=E,_;cl(E,_)}return null}function g(E,_,w,b){var O=_!==null?_.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return O!==null?null:l(E,_,""+w,b);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Za:return w.key===O?u(E,_,w,b):null;case Ls:return w.key===O?c(E,_,w,b):null;case lr:return O=w._init,g(E,_,O(w._payload),b)}if(ho(w)||to(w))return O!==null?null:f(E,_,w,b,null);cl(E,w)}return null}function I(E,_,w,b,O){if(typeof b=="string"&&b!==""||typeof b=="number")return E=E.get(w)||null,l(_,E,""+b,O);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Za:return E=E.get(b.key===null?w:b.key)||null,u(_,E,b,O);case Ls:return E=E.get(b.key===null?w:b.key)||null,c(_,E,b,O);case lr:var M=b._init;return I(E,_,w,M(b._payload),O)}if(ho(b)||to(b))return E=E.get(w)||null,f(_,E,b,O,null);cl(_,b)}return null}function C(E,_,w,b){for(var O=null,M=null,T=_,y=_=0,S=null;T!==null&&y<w.length;y++){T.index>y?(S=T,T=null):S=T.sibling;var k=g(E,T,w[y],b);if(k===null){T===null&&(T=S);break}t&&T&&k.alternate===null&&e(E,T),_=i(k,_,y),M===null?O=k:M.sibling=k,M=k,T=S}if(y===w.length)return n(E,T),Ae&&Xr(E,y),O;if(T===null){for(;y<w.length;y++)T=m(E,w[y],b),T!==null&&(_=i(T,_,y),M===null?O=T:M.sibling=T,M=T);return Ae&&Xr(E,y),O}for(T=r(E,T);y<w.length;y++)S=I(T,E,y,w[y],b),S!==null&&(t&&S.alternate!==null&&T.delete(S.key===null?y:S.key),_=i(S,_,y),M===null?O=S:M.sibling=S,M=S);return t&&T.forEach(function(P){return e(E,P)}),Ae&&Xr(E,y),O}function D(E,_,w,b){var O=to(w);if(typeof O!="function")throw Error(z(150));if(w=O.call(w),w==null)throw Error(z(151));for(var M=O=null,T=_,y=_=0,S=null,k=w.next();T!==null&&!k.done;y++,k=w.next()){T.index>y?(S=T,T=null):S=T.sibling;var P=g(E,T,k.value,b);if(P===null){T===null&&(T=S);break}t&&T&&P.alternate===null&&e(E,T),_=i(P,_,y),M===null?O=P:M.sibling=P,M=P,T=S}if(k.done)return n(E,T),Ae&&Xr(E,y),O;if(T===null){for(;!k.done;y++,k=w.next())k=m(E,k.value,b),k!==null&&(_=i(k,_,y),M===null?O=k:M.sibling=k,M=k);return Ae&&Xr(E,y),O}for(T=r(E,T);!k.done;y++,k=w.next())k=I(T,E,y,k.value,b),k!==null&&(t&&k.alternate!==null&&T.delete(k.key===null?y:k.key),_=i(k,_,y),M===null?O=k:M.sibling=k,M=k);return t&&T.forEach(function(N){return e(E,N)}),Ae&&Xr(E,y),O}function R(E,_,w,b){if(typeof w=="object"&&w!==null&&w.type===Vs&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Za:e:{for(var O=w.key,M=_;M!==null;){if(M.key===O){if(O=w.type,O===Vs){if(M.tag===7){n(E,M.sibling),_=s(M,w.props.children),_.return=E,E=_;break e}}else if(M.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===lr&&xg(O)===M.type){n(E,M.sibling),_=s(M,w.props),_.ref=oo(E,M,w),_.return=E,E=_;break e}n(E,M);break}else e(E,M);M=M.sibling}w.type===Vs?(_=os(w.props.children,E.mode,b,w.key),_.return=E,E=_):(b=bl(w.type,w.key,w.props,null,E.mode,b),b.ref=oo(E,_,w),b.return=E,E=b)}return o(E);case Ls:e:{for(M=w.key;_!==null;){if(_.key===M)if(_.tag===4&&_.stateNode.containerInfo===w.containerInfo&&_.stateNode.implementation===w.implementation){n(E,_.sibling),_=s(_,w.children||[]),_.return=E,E=_;break e}else{n(E,_);break}else e(E,_);_=_.sibling}_=cd(w,E.mode,b),_.return=E,E=_}return o(E);case lr:return M=w._init,R(E,_,M(w._payload),b)}if(ho(w))return C(E,_,w,b);if(to(w))return D(E,_,w,b);cl(E,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,_!==null&&_.tag===6?(n(E,_.sibling),_=s(_,w),_.return=E,E=_):(n(E,_),_=ud(w,E.mode,b),_.return=E,E=_),o(E)):n(E,_)}return R}var li=X_(!0),J_=X_(!1),tu=Fr(null),nu=null,Hs=null,_f=null;function wf(){_f=Hs=nu=null}function Ef(t){var e=tu.current;xe(tu),t._currentValue=e}function th(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Zs(t,e){nu=t,_f=Hs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Dt=!0),t.firstContext=null)}function Zt(t){var e=t._currentValue;if(_f!==t)if(t={context:t,memoizedValue:e,next:null},Hs===null){if(nu===null)throw Error(z(308));Hs=t,nu.dependencies={lanes:0,firstContext:t}}else Hs=Hs.next=t;return e}var ns=null;function Tf(t){ns===null?ns=[t]:ns.push(t)}function Z_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Tf(e)):(n.next=s.next,s.next=n),e.interleaved=n,Wn(t,r)}function Wn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ur=!1;function If(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function e0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Fn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Sr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,de&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Wn(t,n)}return s=r.interleaved,s===null?(e.next=e,Tf(r)):(e.next=s.next,s.next=e),r.interleaved=e,Wn(t,n)}function xl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lf(t,n)}}function Ag(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ru(t,e,n,r){var s=t.updateQueue;ur=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,c=u.next;u.next=null,o===null?i=c:o.next=c,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;o=0,f=c=u=null,l=i;do{var g=l.lane,I=l.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:I,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var C=t,D=l;switch(g=e,I=n,D.tag){case 1:if(C=D.payload,typeof C=="function"){m=C.call(I,m,g);break e}m=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=D.payload,g=typeof C=="function"?C.call(I,m,g):C,g==null)break e;m=Pe({},m,g);break e;case 2:ur=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else I={eventTime:I,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(c=f=I,u=m):f=f.next=I,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=m),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);hs|=o,t.lanes=o,t.memoizedState=m}}function Cg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var ga={},En=Fr(ga),qo=Fr(ga),Ko=Fr(ga);function rs(t){if(t===ga)throw Error(z(174));return t}function Sf(t,e){switch(Ee(Ko,e),Ee(qo,t),Ee(En,ga),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Od(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Od(e,t)}xe(En),Ee(En,e)}function ui(){xe(En),xe(qo),xe(Ko)}function t0(t){rs(Ko.current);var e=rs(En.current),n=Od(e,t.type);e!==n&&(Ee(qo,t),Ee(En,n))}function kf(t){qo.current===t&&(xe(En),xe(qo))}var Ne=Fr(0);function su(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var rd=[];function xf(){for(var t=0;t<rd.length;t++)rd[t]._workInProgressVersionPrimary=null;rd.length=0}var Al=Xn.ReactCurrentDispatcher,sd=Xn.ReactCurrentBatchConfig,ds=0,Re=null,Ke=null,et=null,iu=!1,xo=!1,Go=0,ek=0;function mt(){throw Error(z(321))}function Af(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!cn(t[n],e[n]))return!1;return!0}function Cf(t,e,n,r,s,i){if(ds=i,Re=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Al.current=t===null||t.memoizedState===null?sk:ik,t=n(r,s),xo){i=0;do{if(xo=!1,Go=0,25<=i)throw Error(z(301));i+=1,et=Ke=null,e.updateQueue=null,Al.current=ok,t=n(r,s)}while(xo)}if(Al.current=ou,e=Ke!==null&&Ke.next!==null,ds=0,et=Ke=Re=null,iu=!1,e)throw Error(z(300));return t}function Nf(){var t=Go!==0;return Go=0,t}function yn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?Re.memoizedState=et=t:et=et.next=t,et}function en(){if(Ke===null){var t=Re.alternate;t=t!==null?t.memoizedState:null}else t=Ke.next;var e=et===null?Re.memoizedState:et.next;if(e!==null)et=e,Ke=t;else{if(t===null)throw Error(z(310));Ke=t,t={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},et===null?Re.memoizedState=et=t:et=et.next=t}return et}function Qo(t,e){return typeof e=="function"?e(t):e}function id(t){var e=en(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=Ke,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,c=i;do{var f=c.lane;if((ds&f)===f)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var m={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,Re.lanes|=f,hs|=f}c=c.next}while(c!==null&&c!==i);u===null?o=r:u.next=l,cn(r,e.memoizedState)||(Dt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Re.lanes|=i,hs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function od(t){var e=en(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);cn(i,e.memoizedState)||(Dt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function n0(){}function r0(t,e){var n=Re,r=en(),s=e(),i=!cn(r.memoizedState,s);if(i&&(r.memoizedState=s,Dt=!0),r=r.queue,Rf(o0.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||et!==null&&et.memoizedState.tag&1){if(n.flags|=2048,Yo(9,i0.bind(null,n,r,s,e),void 0,null),nt===null)throw Error(z(349));ds&30||s0(n,e,s)}return s}function s0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function i0(t,e,n,r){e.value=n,e.getSnapshot=r,a0(e)&&l0(t)}function o0(t,e,n){return n(function(){a0(e)&&l0(t)})}function a0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!cn(t,n)}catch{return!0}}function l0(t){var e=Wn(t,1);e!==null&&un(e,t,1,-1)}function Ng(t){var e=yn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qo,lastRenderedState:t},e.queue=t,t=t.dispatch=rk.bind(null,Re,t),[e.memoizedState,t]}function Yo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function u0(){return en().memoizedState}function Cl(t,e,n,r){var s=yn();Re.flags|=t,s.memoizedState=Yo(1|e,n,void 0,r===void 0?null:r)}function Uu(t,e,n,r){var s=en();r=r===void 0?null:r;var i=void 0;if(Ke!==null){var o=Ke.memoizedState;if(i=o.destroy,r!==null&&Af(r,o.deps)){s.memoizedState=Yo(e,n,i,r);return}}Re.flags|=t,s.memoizedState=Yo(1|e,n,i,r)}function Rg(t,e){return Cl(8390656,8,t,e)}function Rf(t,e){return Uu(2048,8,t,e)}function c0(t,e){return Uu(4,2,t,e)}function d0(t,e){return Uu(4,4,t,e)}function h0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function f0(t,e,n){return n=n!=null?n.concat([t]):null,Uu(4,4,h0.bind(null,e,t),n)}function Pf(){}function p0(t,e){var n=en();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Af(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function m0(t,e){var n=en();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Af(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function g0(t,e,n){return ds&21?(cn(n,e)||(n=E_(),Re.lanes|=n,hs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Dt=!0),t.memoizedState=n)}function tk(t,e){var n=ye;ye=n!==0&&4>n?n:4,t(!0);var r=sd.transition;sd.transition={};try{t(!1),e()}finally{ye=n,sd.transition=r}}function y0(){return en().memoizedState}function nk(t,e,n){var r=xr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},v0(t))_0(e,n);else if(n=Z_(t,e,n,r),n!==null){var s=At();un(n,t,r,s),w0(n,e,r)}}function rk(t,e,n){var r=xr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(v0(t))_0(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,cn(l,o)){var u=e.interleaved;u===null?(s.next=s,Tf(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Z_(t,e,s,r),n!==null&&(s=At(),un(n,t,r,s),w0(n,e,r))}}function v0(t){var e=t.alternate;return t===Re||e!==null&&e===Re}function _0(t,e){xo=iu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function w0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lf(t,n)}}var ou={readContext:Zt,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useInsertionEffect:mt,useLayoutEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useMutableSource:mt,useSyncExternalStore:mt,useId:mt,unstable_isNewReconciler:!1},sk={readContext:Zt,useCallback:function(t,e){return yn().memoizedState=[t,e===void 0?null:e],t},useContext:Zt,useEffect:Rg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Cl(4194308,4,h0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Cl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Cl(4,2,t,e)},useMemo:function(t,e){var n=yn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=yn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=nk.bind(null,Re,t),[r.memoizedState,t]},useRef:function(t){var e=yn();return t={current:t},e.memoizedState=t},useState:Ng,useDebugValue:Pf,useDeferredValue:function(t){return yn().memoizedState=t},useTransition:function(){var t=Ng(!1),e=t[0];return t=tk.bind(null,t[1]),yn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Re,s=yn();if(Ae){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),nt===null)throw Error(z(349));ds&30||s0(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Rg(o0.bind(null,r,i,t),[t]),r.flags|=2048,Yo(9,i0.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=yn(),e=nt.identifierPrefix;if(Ae){var n=On,r=jn;n=(r&~(1<<32-ln(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Go++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=ek++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ik={readContext:Zt,useCallback:p0,useContext:Zt,useEffect:Rf,useImperativeHandle:f0,useInsertionEffect:c0,useLayoutEffect:d0,useMemo:m0,useReducer:id,useRef:u0,useState:function(){return id(Qo)},useDebugValue:Pf,useDeferredValue:function(t){var e=en();return g0(e,Ke.memoizedState,t)},useTransition:function(){var t=id(Qo)[0],e=en().memoizedState;return[t,e]},useMutableSource:n0,useSyncExternalStore:r0,useId:y0,unstable_isNewReconciler:!1},ok={readContext:Zt,useCallback:p0,useContext:Zt,useEffect:Rf,useImperativeHandle:f0,useInsertionEffect:c0,useLayoutEffect:d0,useMemo:m0,useReducer:od,useRef:u0,useState:function(){return od(Qo)},useDebugValue:Pf,useDeferredValue:function(t){var e=en();return Ke===null?e.memoizedState=t:g0(e,Ke.memoizedState,t)},useTransition:function(){var t=od(Qo)[0],e=en().memoizedState;return[t,e]},useMutableSource:n0,useSyncExternalStore:r0,useId:y0,unstable_isNewReconciler:!1};function rn(t,e){if(t&&t.defaultProps){e=Pe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function nh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Pe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Bu={isMounted:function(t){return(t=t._reactInternals)?Es(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=At(),s=xr(t),i=Fn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Sr(t,i,s),e!==null&&(un(e,t,s,r),xl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=At(),s=xr(t),i=Fn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Sr(t,i,s),e!==null&&(un(e,t,s,r),xl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=At(),r=xr(t),s=Fn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Sr(t,s,r),e!==null&&(un(e,t,r,n),xl(e,t,r))}};function Pg(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!zo(n,r)||!zo(s,i):!0}function E0(t,e,n){var r=!1,s=jr,i=e.contextType;return typeof i=="object"&&i!==null?i=Zt(i):(s=Ot(e)?us:Tt.current,r=e.contextTypes,i=(r=r!=null)?oi(t,s):jr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Bu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function bg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Bu.enqueueReplaceState(e,e.state,null)}function rh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},If(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Zt(i):(i=Ot(e)?us:Tt.current,s.context=oi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(nh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Bu.enqueueReplaceState(s,s.state,null),ru(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ci(t,e){try{var n="",r=e;do n+=jI(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function ad(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function sh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var ak=typeof WeakMap=="function"?WeakMap:Map;function T0(t,e,n){n=Fn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){lu||(lu=!0,ph=r),sh(t,e)},n}function I0(t,e,n){n=Fn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){sh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){sh(t,e),typeof r!="function"&&(kr===null?kr=new Set([this]):kr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Dg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new ak;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Ek.bind(null,t,e,n),e.then(t,t))}function jg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Og(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Fn(-1,1),e.tag=2,Sr(n,e,1))),n.lanes|=1),t)}var lk=Xn.ReactCurrentOwner,Dt=!1;function xt(t,e,n,r){e.child=t===null?J_(e,null,n,r):li(e,t.child,n,r)}function Lg(t,e,n,r,s){n=n.render;var i=e.ref;return Zs(e,s),r=Cf(t,e,n,r,i,s),n=Nf(),t!==null&&!Dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Hn(t,e,s)):(Ae&&n&&gf(e),e.flags|=1,xt(t,e,r,s),e.child)}function Vg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Ff(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,S0(t,e,i,r,s)):(t=bl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:zo,n(o,r)&&t.ref===e.ref)return Hn(t,e,s)}return e.flags|=1,t=Ar(i,r),t.ref=e.ref,t.return=e,e.child=t}function S0(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(zo(i,r)&&t.ref===e.ref)if(Dt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Dt=!0);else return e.lanes=t.lanes,Hn(t,e,s)}return ih(t,e,n,r,s)}function k0(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ee(Ks,Ut),Ut|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ee(Ks,Ut),Ut|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ee(Ks,Ut),Ut|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ee(Ks,Ut),Ut|=r;return xt(t,e,s,n),e.child}function x0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ih(t,e,n,r,s){var i=Ot(n)?us:Tt.current;return i=oi(e,i),Zs(e,s),n=Cf(t,e,n,r,i,s),r=Nf(),t!==null&&!Dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Hn(t,e,s)):(Ae&&r&&gf(e),e.flags|=1,xt(t,e,n,s),e.child)}function Mg(t,e,n,r,s){if(Ot(n)){var i=!0;Jl(e)}else i=!1;if(Zs(e,s),e.stateNode===null)Nl(t,e),E0(e,n,r),rh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Zt(c):(c=Ot(n)?us:Tt.current,c=oi(e,c));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==c)&&bg(e,o,r,c),ur=!1;var g=e.memoizedState;o.state=g,ru(e,r,o,s),u=e.memoizedState,l!==r||g!==u||jt.current||ur?(typeof f=="function"&&(nh(e,n,f,r),u=e.memoizedState),(l=ur||Pg(e,n,l,r,g,u,c))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,e0(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:rn(e.type,l),o.props=c,m=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Zt(u):(u=Ot(n)?us:Tt.current,u=oi(e,u));var I=n.getDerivedStateFromProps;(f=typeof I=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||g!==u)&&bg(e,o,r,u),ur=!1,g=e.memoizedState,o.state=g,ru(e,r,o,s);var C=e.memoizedState;l!==m||g!==C||jt.current||ur?(typeof I=="function"&&(nh(e,n,I,r),C=e.memoizedState),(c=ur||Pg(e,n,c,r,g,C,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,C,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,C,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=C),o.props=r,o.state=C,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return oh(t,e,n,r,i,s)}function oh(t,e,n,r,s,i){x0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Ig(e,n,!1),Hn(t,e,i);r=e.stateNode,lk.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=li(e,t.child,null,i),e.child=li(e,null,l,i)):xt(t,e,l,i),e.memoizedState=r.state,s&&Ig(e,n,!0),e.child}function A0(t){var e=t.stateNode;e.pendingContext?Tg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Tg(t,e.context,!1),Sf(t,e.containerInfo)}function Fg(t,e,n,r,s){return ai(),vf(s),e.flags|=256,xt(t,e,n,r),e.child}var ah={dehydrated:null,treeContext:null,retryLane:0};function lh(t){return{baseLanes:t,cachePool:null,transitions:null}}function C0(t,e,n){var r=e.pendingProps,s=Ne.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ee(Ne,s&1),t===null)return eh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Wu(o,r,0,null),t=os(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=lh(n),e.memoizedState=ah,t):bf(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return uk(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Ar(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Ar(l,i):(i=os(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?lh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=ah,r}return i=t.child,t=i.sibling,r=Ar(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function bf(t,e){return e=Wu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function dl(t,e,n,r){return r!==null&&vf(r),li(e,t.child,null,n),t=bf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function uk(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=ad(Error(z(422))),dl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Wu({mode:"visible",children:r.children},s,0,null),i=os(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&li(e,t.child,null,o),e.child.memoizedState=lh(o),e.memoizedState=ah,i);if(!(e.mode&1))return dl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(z(419)),r=ad(i,r,void 0),dl(t,e,o,r)}if(l=(o&t.childLanes)!==0,Dt||l){if(r=nt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Wn(t,s),un(r,t,s,-1))}return Mf(),r=ad(Error(z(421))),dl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Tk.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Bt=Ir(s.nextSibling),$t=e,Ae=!0,on=null,t!==null&&(Gt[Qt++]=jn,Gt[Qt++]=On,Gt[Qt++]=cs,jn=t.id,On=t.overflow,cs=e),e=bf(e,r.children),e.flags|=4096,e)}function Ug(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),th(t.return,e,n)}function ld(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function N0(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(xt(t,e,r.children,n),r=Ne.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ug(t,n,e);else if(t.tag===19)Ug(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ee(Ne,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&su(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),ld(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&su(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}ld(e,!0,n,null,i);break;case"together":ld(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Nl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Hn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),hs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=Ar(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ar(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function ck(t,e,n){switch(e.tag){case 3:A0(e),ai();break;case 5:t0(e);break;case 1:Ot(e.type)&&Jl(e);break;case 4:Sf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ee(tu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ee(Ne,Ne.current&1),e.flags|=128,null):n&e.child.childLanes?C0(t,e,n):(Ee(Ne,Ne.current&1),t=Hn(t,e,n),t!==null?t.sibling:null);Ee(Ne,Ne.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return N0(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ee(Ne,Ne.current),r)break;return null;case 22:case 23:return e.lanes=0,k0(t,e,n)}return Hn(t,e,n)}var R0,uh,P0,b0;R0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};uh=function(){};P0=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,rs(En.current);var i=null;switch(n){case"input":s=Pd(t,s),r=Pd(t,r),i=[];break;case"select":s=Pe({},s,{value:void 0}),r=Pe({},r,{value:void 0}),i=[];break;case"textarea":s=jd(t,s),r=jd(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Yl)}Ld(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Oo.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var u=r[c];if(l=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Oo.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Se("scroll",t),i||l===u||(i=[])):(i=i||[]).push(c,u))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};b0=function(t,e,n,r){n!==r&&(e.flags|=4)};function ao(t,e){if(!Ae)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function gt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function dk(t,e,n){var r=e.pendingProps;switch(yf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(e),null;case 1:return Ot(e.type)&&Xl(),gt(e),null;case 3:return r=e.stateNode,ui(),xe(jt),xe(Tt),xf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ul(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,on!==null&&(yh(on),on=null))),uh(t,e),gt(e),null;case 5:kf(e);var s=rs(Ko.current);if(n=e.type,t!==null&&e.stateNode!=null)P0(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return gt(e),null}if(t=rs(En.current),ul(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[vn]=e,r[Ho]=i,t=(e.mode&1)!==0,n){case"dialog":Se("cancel",r),Se("close",r);break;case"iframe":case"object":case"embed":Se("load",r);break;case"video":case"audio":for(s=0;s<po.length;s++)Se(po[s],r);break;case"source":Se("error",r);break;case"img":case"image":case"link":Se("error",r),Se("load",r);break;case"details":Se("toggle",r);break;case"input":Qm(r,i),Se("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Se("invalid",r);break;case"textarea":Xm(r,i),Se("invalid",r)}Ld(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&ll(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&ll(r.textContent,l,t),s=["children",""+l]):Oo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Se("scroll",r)}switch(n){case"input":el(r),Ym(r,i,!0);break;case"textarea":el(r),Jm(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Yl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=o_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[vn]=e,t[Ho]=r,R0(t,e,!1,!1),e.stateNode=t;e:{switch(o=Vd(n,r),n){case"dialog":Se("cancel",t),Se("close",t),s=r;break;case"iframe":case"object":case"embed":Se("load",t),s=r;break;case"video":case"audio":for(s=0;s<po.length;s++)Se(po[s],t);s=r;break;case"source":Se("error",t),s=r;break;case"img":case"image":case"link":Se("error",t),Se("load",t),s=r;break;case"details":Se("toggle",t),s=r;break;case"input":Qm(t,r),s=Pd(t,r),Se("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Pe({},r,{value:void 0}),Se("invalid",t);break;case"textarea":Xm(t,r),s=jd(t,r),Se("invalid",t);break;default:s=r}Ld(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?u_(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&a_(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Lo(t,u):typeof u=="number"&&Lo(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Oo.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Se("scroll",t):u!=null&&tf(t,i,u,o))}switch(n){case"input":el(t),Ym(t,r,!1);break;case"textarea":el(t),Jm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Dr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Qs(t,!!r.multiple,i,!1):r.defaultValue!=null&&Qs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Yl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return gt(e),null;case 6:if(t&&e.stateNode!=null)b0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=rs(Ko.current),rs(En.current),ul(e)){if(r=e.stateNode,n=e.memoizedProps,r[vn]=e,(i=r.nodeValue!==n)&&(t=$t,t!==null))switch(t.tag){case 3:ll(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ll(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[vn]=e,e.stateNode=r}return gt(e),null;case 13:if(xe(Ne),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ae&&Bt!==null&&e.mode&1&&!(e.flags&128))Y_(),ai(),e.flags|=98560,i=!1;else if(i=ul(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[vn]=e}else ai(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;gt(e),i=!1}else on!==null&&(yh(on),on=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ne.current&1?Ge===0&&(Ge=3):Mf())),e.updateQueue!==null&&(e.flags|=4),gt(e),null);case 4:return ui(),uh(t,e),t===null&&$o(e.stateNode.containerInfo),gt(e),null;case 10:return Ef(e.type._context),gt(e),null;case 17:return Ot(e.type)&&Xl(),gt(e),null;case 19:if(xe(Ne),i=e.memoizedState,i===null)return gt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ao(i,!1);else{if(Ge!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=su(t),o!==null){for(e.flags|=128,ao(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ee(Ne,Ne.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ve()>di&&(e.flags|=128,r=!0,ao(i,!1),e.lanes=4194304)}else{if(!r)if(t=su(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ao(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ae)return gt(e),null}else 2*Ve()-i.renderingStartTime>di&&n!==1073741824&&(e.flags|=128,r=!0,ao(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ve(),e.sibling=null,n=Ne.current,Ee(Ne,r?n&1|2:n&1),e):(gt(e),null);case 22:case 23:return Vf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ut&1073741824&&(gt(e),e.subtreeFlags&6&&(e.flags|=8192)):gt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function hk(t,e){switch(yf(e),e.tag){case 1:return Ot(e.type)&&Xl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ui(),xe(jt),xe(Tt),xf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return kf(e),null;case 13:if(xe(Ne),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));ai()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return xe(Ne),null;case 4:return ui(),null;case 10:return Ef(e.type._context),null;case 22:case 23:return Vf(),null;case 24:return null;default:return null}}var hl=!1,_t=!1,fk=typeof WeakSet=="function"?WeakSet:Set,q=null;function qs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){je(t,e,r)}else n.current=null}function ch(t,e,n){try{n()}catch(r){je(t,e,r)}}var Bg=!1;function pk(t,e){if(Kd=Kl,t=V_(),mf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,c=0,f=0,m=t,g=null;t:for(;;){for(var I;m!==n||s!==0&&m.nodeType!==3||(l=o+s),m!==i||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(I=m.firstChild)!==null;)g=m,m=I;for(;;){if(m===t)break t;if(g===n&&++c===s&&(l=o),g===i&&++f===r&&(u=o),(I=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=I}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Gd={focusedElem:t,selectionRange:n},Kl=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var D=C.memoizedProps,R=C.memoizedState,E=e.stateNode,_=E.getSnapshotBeforeUpdate(e.elementType===e.type?D:rn(e.type,D),R);E.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(b){je(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return C=Bg,Bg=!1,C}function Ao(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&ch(e,n,i)}s=s.next}while(s!==r)}}function zu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function dh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function D0(t){var e=t.alternate;e!==null&&(t.alternate=null,D0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[vn],delete e[Ho],delete e[Xd],delete e[YS],delete e[XS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function j0(t){return t.tag===5||t.tag===3||t.tag===4}function zg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||j0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function hh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Yl));else if(r!==4&&(t=t.child,t!==null))for(hh(t,e,n),t=t.sibling;t!==null;)hh(t,e,n),t=t.sibling}function fh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(fh(t,e,n),t=t.sibling;t!==null;)fh(t,e,n),t=t.sibling}var ot=null,sn=!1;function or(t,e,n){for(n=n.child;n!==null;)O0(t,e,n),n=n.sibling}function O0(t,e,n){if(wn&&typeof wn.onCommitFiberUnmount=="function")try{wn.onCommitFiberUnmount(ju,n)}catch{}switch(n.tag){case 5:_t||qs(n,e);case 6:var r=ot,s=sn;ot=null,or(t,e,n),ot=r,sn=s,ot!==null&&(sn?(t=ot,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ot.removeChild(n.stateNode));break;case 18:ot!==null&&(sn?(t=ot,n=n.stateNode,t.nodeType===8?td(t.parentNode,n):t.nodeType===1&&td(t,n),Uo(t)):td(ot,n.stateNode));break;case 4:r=ot,s=sn,ot=n.stateNode.containerInfo,sn=!0,or(t,e,n),ot=r,sn=s;break;case 0:case 11:case 14:case 15:if(!_t&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&ch(n,e,o),s=s.next}while(s!==r)}or(t,e,n);break;case 1:if(!_t&&(qs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){je(n,e,l)}or(t,e,n);break;case 21:or(t,e,n);break;case 22:n.mode&1?(_t=(r=_t)||n.memoizedState!==null,or(t,e,n),_t=r):or(t,e,n);break;default:or(t,e,n)}}function $g(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new fk),e.forEach(function(r){var s=Ik.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function nn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:ot=l.stateNode,sn=!1;break e;case 3:ot=l.stateNode.containerInfo,sn=!0;break e;case 4:ot=l.stateNode.containerInfo,sn=!0;break e}l=l.return}if(ot===null)throw Error(z(160));O0(i,o,s),ot=null,sn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){je(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)L0(e,t),e=e.sibling}function L0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(nn(e,t),gn(t),r&4){try{Ao(3,t,t.return),zu(3,t)}catch(D){je(t,t.return,D)}try{Ao(5,t,t.return)}catch(D){je(t,t.return,D)}}break;case 1:nn(e,t),gn(t),r&512&&n!==null&&qs(n,n.return);break;case 5:if(nn(e,t),gn(t),r&512&&n!==null&&qs(n,n.return),t.flags&32){var s=t.stateNode;try{Lo(s,"")}catch(D){je(t,t.return,D)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&s_(s,i),Vd(l,o);var c=Vd(l,i);for(o=0;o<u.length;o+=2){var f=u[o],m=u[o+1];f==="style"?u_(s,m):f==="dangerouslySetInnerHTML"?a_(s,m):f==="children"?Lo(s,m):tf(s,f,m,c)}switch(l){case"input":bd(s,i);break;case"textarea":i_(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var I=i.value;I!=null?Qs(s,!!i.multiple,I,!1):g!==!!i.multiple&&(i.defaultValue!=null?Qs(s,!!i.multiple,i.defaultValue,!0):Qs(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ho]=i}catch(D){je(t,t.return,D)}}break;case 6:if(nn(e,t),gn(t),r&4){if(t.stateNode===null)throw Error(z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(D){je(t,t.return,D)}}break;case 3:if(nn(e,t),gn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Uo(e.containerInfo)}catch(D){je(t,t.return,D)}break;case 4:nn(e,t),gn(t);break;case 13:nn(e,t),gn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Of=Ve())),r&4&&$g(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(_t=(c=_t)||f,nn(e,t),_t=c):nn(e,t),gn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!f&&t.mode&1)for(q=t,f=t.child;f!==null;){for(m=q=f;q!==null;){switch(g=q,I=g.child,g.tag){case 0:case 11:case 14:case 15:Ao(4,g,g.return);break;case 1:qs(g,g.return);var C=g.stateNode;if(typeof C.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(D){je(r,n,D)}}break;case 5:qs(g,g.return);break;case 22:if(g.memoizedState!==null){Hg(m);continue}}I!==null?(I.return=g,q=I):Hg(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=l_("display",o))}catch(D){je(t,t.return,D)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=c?"":m.memoizedProps}catch(D){je(t,t.return,D)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:nn(e,t),gn(t),r&4&&$g(t);break;case 21:break;default:nn(e,t),gn(t)}}function gn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(j0(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Lo(s,""),r.flags&=-33);var i=zg(t);fh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=zg(t);hh(t,l,o);break;default:throw Error(z(161))}}catch(u){je(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function mk(t,e,n){q=t,V0(t)}function V0(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var s=q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||hl;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||_t;l=hl;var c=_t;if(hl=o,(_t=u)&&!c)for(q=s;q!==null;)o=q,u=o.child,o.tag===22&&o.memoizedState!==null?qg(s):u!==null?(u.return=o,q=u):qg(s);for(;i!==null;)q=i,V0(i),i=i.sibling;q=s,hl=l,_t=c}Wg(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,q=i):Wg(t)}}function Wg(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:_t||zu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!_t)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:rn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Cg(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Cg(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&Uo(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}_t||e.flags&512&&dh(e)}catch(g){je(e,e.return,g)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function Hg(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function qg(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{zu(4,e)}catch(u){je(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){je(e,s,u)}}var i=e.return;try{dh(e)}catch(u){je(e,i,u)}break;case 5:var o=e.return;try{dh(e)}catch(u){je(e,o,u)}}}catch(u){je(e,e.return,u)}if(e===t){q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,q=l;break}q=e.return}}var gk=Math.ceil,au=Xn.ReactCurrentDispatcher,Df=Xn.ReactCurrentOwner,Xt=Xn.ReactCurrentBatchConfig,de=0,nt=null,$e=null,ut=0,Ut=0,Ks=Fr(0),Ge=0,Xo=null,hs=0,$u=0,jf=0,Co=null,Pt=null,Of=0,di=1/0,bn=null,lu=!1,ph=null,kr=null,fl=!1,yr=null,uu=0,No=0,mh=null,Rl=-1,Pl=0;function At(){return de&6?Ve():Rl!==-1?Rl:Rl=Ve()}function xr(t){return t.mode&1?de&2&&ut!==0?ut&-ut:ZS.transition!==null?(Pl===0&&(Pl=E_()),Pl):(t=ye,t!==0||(t=window.event,t=t===void 0?16:C_(t.type)),t):1}function un(t,e,n,r){if(50<No)throw No=0,mh=null,Error(z(185));fa(t,n,r),(!(de&2)||t!==nt)&&(t===nt&&(!(de&2)&&($u|=n),Ge===4&&dr(t,ut)),Lt(t,r),n===1&&de===0&&!(e.mode&1)&&(di=Ve()+500,Fu&&Ur()))}function Lt(t,e){var n=t.callbackNode;ZI(t,e);var r=ql(t,t===nt?ut:0);if(r===0)n!==null&&tg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&tg(n),e===1)t.tag===0?JS(Kg.bind(null,t)):K_(Kg.bind(null,t)),GS(function(){!(de&6)&&Ur()}),n=null;else{switch(T_(r)){case 1:n=af;break;case 4:n=__;break;case 16:n=Hl;break;case 536870912:n=w_;break;default:n=Hl}n=H0(n,M0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function M0(t,e){if(Rl=-1,Pl=0,de&6)throw Error(z(327));var n=t.callbackNode;if(ei()&&t.callbackNode!==n)return null;var r=ql(t,t===nt?ut:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=cu(t,r);else{e=r;var s=de;de|=2;var i=U0();(nt!==t||ut!==e)&&(bn=null,di=Ve()+500,is(t,e));do try{_k();break}catch(l){F0(t,l)}while(!0);wf(),au.current=i,de=s,$e!==null?e=0:(nt=null,ut=0,e=Ge)}if(e!==0){if(e===2&&(s=zd(t),s!==0&&(r=s,e=gh(t,s))),e===1)throw n=Xo,is(t,0),dr(t,r),Lt(t,Ve()),n;if(e===6)dr(t,r);else{if(s=t.current.alternate,!(r&30)&&!yk(s)&&(e=cu(t,r),e===2&&(i=zd(t),i!==0&&(r=i,e=gh(t,i))),e===1))throw n=Xo,is(t,0),dr(t,r),Lt(t,Ve()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:Jr(t,Pt,bn);break;case 3:if(dr(t,r),(r&130023424)===r&&(e=Of+500-Ve(),10<e)){if(ql(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){At(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Yd(Jr.bind(null,t,Pt,bn),e);break}Jr(t,Pt,bn);break;case 4:if(dr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-ln(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ve()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*gk(r/1960))-r,10<r){t.timeoutHandle=Yd(Jr.bind(null,t,Pt,bn),r);break}Jr(t,Pt,bn);break;case 5:Jr(t,Pt,bn);break;default:throw Error(z(329))}}}return Lt(t,Ve()),t.callbackNode===n?M0.bind(null,t):null}function gh(t,e){var n=Co;return t.current.memoizedState.isDehydrated&&(is(t,e).flags|=256),t=cu(t,e),t!==2&&(e=Pt,Pt=n,e!==null&&yh(e)),t}function yh(t){Pt===null?Pt=t:Pt.push.apply(Pt,t)}function yk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!cn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function dr(t,e){for(e&=~jf,e&=~$u,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ln(e),r=1<<n;t[n]=-1,e&=~r}}function Kg(t){if(de&6)throw Error(z(327));ei();var e=ql(t,0);if(!(e&1))return Lt(t,Ve()),null;var n=cu(t,e);if(t.tag!==0&&n===2){var r=zd(t);r!==0&&(e=r,n=gh(t,r))}if(n===1)throw n=Xo,is(t,0),dr(t,e),Lt(t,Ve()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Jr(t,Pt,bn),Lt(t,Ve()),null}function Lf(t,e){var n=de;de|=1;try{return t(e)}finally{de=n,de===0&&(di=Ve()+500,Fu&&Ur())}}function fs(t){yr!==null&&yr.tag===0&&!(de&6)&&ei();var e=de;de|=1;var n=Xt.transition,r=ye;try{if(Xt.transition=null,ye=1,t)return t()}finally{ye=r,Xt.transition=n,de=e,!(de&6)&&Ur()}}function Vf(){Ut=Ks.current,xe(Ks)}function is(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,KS(n)),$e!==null)for(n=$e.return;n!==null;){var r=n;switch(yf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Xl();break;case 3:ui(),xe(jt),xe(Tt),xf();break;case 5:kf(r);break;case 4:ui();break;case 13:xe(Ne);break;case 19:xe(Ne);break;case 10:Ef(r.type._context);break;case 22:case 23:Vf()}n=n.return}if(nt=t,$e=t=Ar(t.current,null),ut=Ut=e,Ge=0,Xo=null,jf=$u=hs=0,Pt=Co=null,ns!==null){for(e=0;e<ns.length;e++)if(n=ns[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ns=null}return t}function F0(t,e){do{var n=$e;try{if(wf(),Al.current=ou,iu){for(var r=Re.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}iu=!1}if(ds=0,et=Ke=Re=null,xo=!1,Go=0,Df.current=null,n===null||n.return===null){Ge=1,Xo=e,$e=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=ut,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,f=l,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var I=jg(o);if(I!==null){I.flags&=-257,Og(I,o,l,i,e),I.mode&1&&Dg(i,c,e),e=I,u=c;var C=e.updateQueue;if(C===null){var D=new Set;D.add(u),e.updateQueue=D}else C.add(u);break e}else{if(!(e&1)){Dg(i,c,e),Mf();break e}u=Error(z(426))}}else if(Ae&&l.mode&1){var R=jg(o);if(R!==null){!(R.flags&65536)&&(R.flags|=256),Og(R,o,l,i,e),vf(ci(u,l));break e}}i=u=ci(u,l),Ge!==4&&(Ge=2),Co===null?Co=[i]:Co.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=T0(i,u,e);Ag(i,E);break e;case 1:l=u;var _=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(kr===null||!kr.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var b=I0(i,l,e);Ag(i,b);break e}}i=i.return}while(i!==null)}z0(n)}catch(O){e=O,$e===n&&n!==null&&($e=n=n.return);continue}break}while(!0)}function U0(){var t=au.current;return au.current=ou,t===null?ou:t}function Mf(){(Ge===0||Ge===3||Ge===2)&&(Ge=4),nt===null||!(hs&268435455)&&!($u&268435455)||dr(nt,ut)}function cu(t,e){var n=de;de|=2;var r=U0();(nt!==t||ut!==e)&&(bn=null,is(t,e));do try{vk();break}catch(s){F0(t,s)}while(!0);if(wf(),de=n,au.current=r,$e!==null)throw Error(z(261));return nt=null,ut=0,Ge}function vk(){for(;$e!==null;)B0($e)}function _k(){for(;$e!==null&&!WI();)B0($e)}function B0(t){var e=W0(t.alternate,t,Ut);t.memoizedProps=t.pendingProps,e===null?z0(t):$e=e,Df.current=null}function z0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=hk(n,e),n!==null){n.flags&=32767,$e=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ge=6,$e=null;return}}else if(n=dk(n,e,Ut),n!==null){$e=n;return}if(e=e.sibling,e!==null){$e=e;return}$e=e=t}while(e!==null);Ge===0&&(Ge=5)}function Jr(t,e,n){var r=ye,s=Xt.transition;try{Xt.transition=null,ye=1,wk(t,e,n,r)}finally{Xt.transition=s,ye=r}return null}function wk(t,e,n,r){do ei();while(yr!==null);if(de&6)throw Error(z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(eS(t,i),t===nt&&($e=nt=null,ut=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||fl||(fl=!0,H0(Hl,function(){return ei(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Xt.transition,Xt.transition=null;var o=ye;ye=1;var l=de;de|=4,Df.current=null,pk(t,n),L0(n,t),US(Gd),Kl=!!Kd,Gd=Kd=null,t.current=n,mk(n),HI(),de=l,ye=o,Xt.transition=i}else t.current=n;if(fl&&(fl=!1,yr=t,uu=s),i=t.pendingLanes,i===0&&(kr=null),GI(n.stateNode),Lt(t,Ve()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(lu)throw lu=!1,t=ph,ph=null,t;return uu&1&&t.tag!==0&&ei(),i=t.pendingLanes,i&1?t===mh?No++:(No=0,mh=t):No=0,Ur(),null}function ei(){if(yr!==null){var t=T_(uu),e=Xt.transition,n=ye;try{if(Xt.transition=null,ye=16>t?16:t,yr===null)var r=!1;else{if(t=yr,yr=null,uu=0,de&6)throw Error(z(331));var s=de;for(de|=4,q=t.current;q!==null;){var i=q,o=i.child;if(q.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(q=c;q!==null;){var f=q;switch(f.tag){case 0:case 11:case 15:Ao(8,f,i)}var m=f.child;if(m!==null)m.return=f,q=m;else for(;q!==null;){f=q;var g=f.sibling,I=f.return;if(D0(f),f===c){q=null;break}if(g!==null){g.return=I,q=g;break}q=I}}}var C=i.alternate;if(C!==null){var D=C.child;if(D!==null){C.child=null;do{var R=D.sibling;D.sibling=null,D=R}while(D!==null)}}q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,q=o;else e:for(;q!==null;){if(i=q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ao(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,q=E;break e}q=i.return}}var _=t.current;for(q=_;q!==null;){o=q;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,q=w;else e:for(o=_;q!==null;){if(l=q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:zu(9,l)}}catch(O){je(l,l.return,O)}if(l===o){q=null;break e}var b=l.sibling;if(b!==null){b.return=l.return,q=b;break e}q=l.return}}if(de=s,Ur(),wn&&typeof wn.onPostCommitFiberRoot=="function")try{wn.onPostCommitFiberRoot(ju,t)}catch{}r=!0}return r}finally{ye=n,Xt.transition=e}}return!1}function Gg(t,e,n){e=ci(n,e),e=T0(t,e,1),t=Sr(t,e,1),e=At(),t!==null&&(fa(t,1,e),Lt(t,e))}function je(t,e,n){if(t.tag===3)Gg(t,t,n);else for(;e!==null;){if(e.tag===3){Gg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(kr===null||!kr.has(r))){t=ci(n,t),t=I0(e,t,1),e=Sr(e,t,1),t=At(),e!==null&&(fa(e,1,t),Lt(e,t));break}}e=e.return}}function Ek(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=At(),t.pingedLanes|=t.suspendedLanes&n,nt===t&&(ut&n)===n&&(Ge===4||Ge===3&&(ut&130023424)===ut&&500>Ve()-Of?is(t,0):jf|=n),Lt(t,e)}function $0(t,e){e===0&&(t.mode&1?(e=rl,rl<<=1,!(rl&130023424)&&(rl=4194304)):e=1);var n=At();t=Wn(t,e),t!==null&&(fa(t,e,n),Lt(t,n))}function Tk(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),$0(t,n)}function Ik(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),$0(t,n)}var W0;W0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||jt.current)Dt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Dt=!1,ck(t,e,n);Dt=!!(t.flags&131072)}else Dt=!1,Ae&&e.flags&1048576&&G_(e,eu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Nl(t,e),t=e.pendingProps;var s=oi(e,Tt.current);Zs(e,n),s=Cf(null,e,r,t,s,n);var i=Nf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ot(r)?(i=!0,Jl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,If(e),s.updater=Bu,e.stateNode=s,s._reactInternals=e,rh(e,r,t,n),e=oh(null,e,r,!0,i,n)):(e.tag=0,Ae&&i&&gf(e),xt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Nl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=kk(r),t=rn(r,t),s){case 0:e=ih(null,e,r,t,n);break e;case 1:e=Mg(null,e,r,t,n);break e;case 11:e=Lg(null,e,r,t,n);break e;case 14:e=Vg(null,e,r,rn(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rn(r,s),ih(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rn(r,s),Mg(t,e,r,s,n);case 3:e:{if(A0(e),t===null)throw Error(z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,e0(t,e),ru(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ci(Error(z(423)),e),e=Fg(t,e,r,n,s);break e}else if(r!==s){s=ci(Error(z(424)),e),e=Fg(t,e,r,n,s);break e}else for(Bt=Ir(e.stateNode.containerInfo.firstChild),$t=e,Ae=!0,on=null,n=J_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ai(),r===s){e=Hn(t,e,n);break e}xt(t,e,r,n)}e=e.child}return e;case 5:return t0(e),t===null&&eh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Qd(r,s)?o=null:i!==null&&Qd(r,i)&&(e.flags|=32),x0(t,e),xt(t,e,o,n),e.child;case 6:return t===null&&eh(e),null;case 13:return C0(t,e,n);case 4:return Sf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=li(e,null,r,n):xt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rn(r,s),Lg(t,e,r,s,n);case 7:return xt(t,e,e.pendingProps,n),e.child;case 8:return xt(t,e,e.pendingProps.children,n),e.child;case 12:return xt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ee(tu,r._currentValue),r._currentValue=o,i!==null)if(cn(i.value,o)){if(i.children===s.children&&!jt.current){e=Hn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Fn(-1,n&-n),u.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?u.next=u:(u.next=f.next,f.next=u),c.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),th(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(z(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),th(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}xt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Zs(e,n),s=Zt(s),r=r(s),e.flags|=1,xt(t,e,r,n),e.child;case 14:return r=e.type,s=rn(r,e.pendingProps),s=rn(r.type,s),Vg(t,e,r,s,n);case 15:return S0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rn(r,s),Nl(t,e),e.tag=1,Ot(r)?(t=!0,Jl(e)):t=!1,Zs(e,n),E0(e,r,s),rh(e,r,s,n),oh(null,e,r,!0,t,n);case 19:return N0(t,e,n);case 22:return k0(t,e,n)}throw Error(z(156,e.tag))};function H0(t,e){return v_(t,e)}function Sk(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yt(t,e,n,r){return new Sk(t,e,n,r)}function Ff(t){return t=t.prototype,!(!t||!t.isReactComponent)}function kk(t){if(typeof t=="function")return Ff(t)?1:0;if(t!=null){if(t=t.$$typeof,t===rf)return 11;if(t===sf)return 14}return 2}function Ar(t,e){var n=t.alternate;return n===null?(n=Yt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function bl(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Ff(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Vs:return os(n.children,s,i,e);case nf:o=8,s|=8;break;case Ad:return t=Yt(12,n,e,s|2),t.elementType=Ad,t.lanes=i,t;case Cd:return t=Yt(13,n,e,s),t.elementType=Cd,t.lanes=i,t;case Nd:return t=Yt(19,n,e,s),t.elementType=Nd,t.lanes=i,t;case t_:return Wu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Zv:o=10;break e;case e_:o=9;break e;case rf:o=11;break e;case sf:o=14;break e;case lr:o=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=Yt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function os(t,e,n,r){return t=Yt(7,t,r,e),t.lanes=n,t}function Wu(t,e,n,r){return t=Yt(22,t,r,e),t.elementType=t_,t.lanes=n,t.stateNode={isHidden:!1},t}function ud(t,e,n){return t=Yt(6,t,null,e),t.lanes=n,t}function cd(t,e,n){return e=Yt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function xk(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wc(0),this.expirationTimes=Wc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wc(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Uf(t,e,n,r,s,i,o,l,u){return t=new xk(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Yt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},If(i),t}function Ak(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ls,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function q0(t){if(!t)return jr;t=t._reactInternals;e:{if(Es(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ot(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(Ot(n))return q_(t,n,e)}return e}function K0(t,e,n,r,s,i,o,l,u){return t=Uf(n,r,!0,t,s,i,o,l,u),t.context=q0(null),n=t.current,r=At(),s=xr(n),i=Fn(r,s),i.callback=e??null,Sr(n,i,s),t.current.lanes=s,fa(t,s,r),Lt(t,r),t}function Hu(t,e,n,r){var s=e.current,i=At(),o=xr(s);return n=q0(n),e.context===null?e.context=n:e.pendingContext=n,e=Fn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Sr(s,e,o),t!==null&&(un(t,s,o,i),xl(t,s,o)),o}function du(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Qg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Bf(t,e){Qg(t,e),(t=t.alternate)&&Qg(t,e)}function Ck(){return null}var G0=typeof reportError=="function"?reportError:function(t){console.error(t)};function zf(t){this._internalRoot=t}qu.prototype.render=zf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));Hu(t,e,null,null)};qu.prototype.unmount=zf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;fs(function(){Hu(null,t,null,null)}),e[$n]=null}};function qu(t){this._internalRoot=t}qu.prototype.unstable_scheduleHydration=function(t){if(t){var e=k_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<cr.length&&e!==0&&e<cr[n].priority;n++);cr.splice(n,0,t),n===0&&A_(t)}};function $f(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ku(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Yg(){}function Nk(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=du(o);i.call(c)}}var o=K0(e,r,t,0,null,!1,!1,"",Yg);return t._reactRootContainer=o,t[$n]=o.current,$o(t.nodeType===8?t.parentNode:t),fs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var c=du(u);l.call(c)}}var u=Uf(t,0,!1,null,null,!1,!1,"",Yg);return t._reactRootContainer=u,t[$n]=u.current,$o(t.nodeType===8?t.parentNode:t),fs(function(){Hu(e,u,n,r)}),u}function Gu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=du(o);l.call(u)}}Hu(e,o,t,s)}else o=Nk(n,e,t,s,r);return du(o)}I_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=fo(e.pendingLanes);n!==0&&(lf(e,n|1),Lt(e,Ve()),!(de&6)&&(di=Ve()+500,Ur()))}break;case 13:fs(function(){var r=Wn(t,1);if(r!==null){var s=At();un(r,t,1,s)}}),Bf(t,1)}};uf=function(t){if(t.tag===13){var e=Wn(t,134217728);if(e!==null){var n=At();un(e,t,134217728,n)}Bf(t,134217728)}};S_=function(t){if(t.tag===13){var e=xr(t),n=Wn(t,e);if(n!==null){var r=At();un(n,t,e,r)}Bf(t,e)}};k_=function(){return ye};x_=function(t,e){var n=ye;try{return ye=t,e()}finally{ye=n}};Fd=function(t,e,n){switch(e){case"input":if(bd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Mu(r);if(!s)throw Error(z(90));r_(r),bd(r,s)}}}break;case"textarea":i_(t,n);break;case"select":e=n.value,e!=null&&Qs(t,!!n.multiple,e,!1)}};h_=Lf;f_=fs;var Rk={usingClientEntryPoint:!1,Events:[ma,Bs,Mu,c_,d_,Lf]},lo={findFiberByHostInstance:ts,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Pk={bundleType:lo.bundleType,version:lo.version,rendererPackageName:lo.rendererPackageName,rendererConfig:lo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=g_(t),t===null?null:t.stateNode},findFiberByHostInstance:lo.findFiberByHostInstance||Ck,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pl.isDisabled&&pl.supportsFiber)try{ju=pl.inject(Pk),wn=pl}catch{}}Ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Rk;Ht.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$f(e))throw Error(z(200));return Ak(t,e,null,n)};Ht.createRoot=function(t,e){if(!$f(t))throw Error(z(299));var n=!1,r="",s=G0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Uf(t,1,!1,null,null,n,!1,r,s),t[$n]=e.current,$o(t.nodeType===8?t.parentNode:t),new zf(e)};Ht.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=g_(e),t=t===null?null:t.stateNode,t};Ht.flushSync=function(t){return fs(t)};Ht.hydrate=function(t,e,n){if(!Ku(e))throw Error(z(200));return Gu(null,t,e,!0,n)};Ht.hydrateRoot=function(t,e,n){if(!$f(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=G0;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=K0(e,null,t,1,n??null,s,!1,i,o),t[$n]=e.current,$o(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new qu(e)};Ht.render=function(t,e,n){if(!Ku(e))throw Error(z(200));return Gu(null,t,e,!1,n)};Ht.unmountComponentAtNode=function(t){if(!Ku(t))throw Error(z(40));return t._reactRootContainer?(fs(function(){Gu(null,null,t,!1,function(){t._reactRootContainer=null,t[$n]=null})}),!0):!1};Ht.unstable_batchedUpdates=Lf;Ht.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ku(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return Gu(t,e,n,!1,r)};Ht.version="18.3.1-next-f1338f8080-20240426";function Q0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Q0)}catch(t){console.error(t)}}Q0(),Qv.exports=Ht;var bk=Qv.exports,Xg=bk;kd.createRoot=Xg.createRoot,kd.hydrateRoot=Xg.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jo(){return Jo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jo.apply(this,arguments)}var vr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(vr||(vr={}));const Jg="popstate";function Dk(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return vh("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:hu(s)}return Ok(e,n,null,t)}function Fe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Wf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function jk(){return Math.random().toString(36).substr(2,8)}function Zg(t,e){return{usr:t.state,key:t.key,idx:e}}function vh(t,e,n,r){return n===void 0&&(n=null),Jo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ai(e):e,{state:n,key:e&&e.key||r||jk()})}function hu(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ai(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Ok(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=vr.Pop,u=null,c=f();c==null&&(c=0,o.replaceState(Jo({},o.state,{idx:c}),""));function f(){return(o.state||{idx:null}).idx}function m(){l=vr.Pop;let R=f(),E=R==null?null:R-c;c=R,u&&u({action:l,location:D.location,delta:E})}function g(R,E){l=vr.Push;let _=vh(D.location,R,E);c=f()+1;let w=Zg(_,c),b=D.createHref(_);try{o.pushState(w,"",b)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(b)}i&&u&&u({action:l,location:D.location,delta:1})}function I(R,E){l=vr.Replace;let _=vh(D.location,R,E);c=f();let w=Zg(_,c),b=D.createHref(_);o.replaceState(w,"",b),i&&u&&u({action:l,location:D.location,delta:0})}function C(R){let E=s.location.origin!=="null"?s.location.origin:s.location.href,_=typeof R=="string"?R:hu(R);return _=_.replace(/ $/,"%20"),Fe(E,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,E)}let D={get action(){return l},get location(){return t(s,o)},listen(R){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Jg,m),u=R,()=>{s.removeEventListener(Jg,m),u=null}},createHref(R){return e(s,R)},createURL:C,encodeLocation(R){let E=C(R);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:g,replace:I,go(R){return o.go(R)}};return D}var ey;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ey||(ey={}));function Lk(t,e,n){return n===void 0&&(n="/"),Vk(t,e,n)}function Vk(t,e,n,r){let s=typeof e=="string"?Ai(e):e,i=Hf(s.pathname||"/",n);if(i==null)return null;let o=Y0(t);Mk(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let c=Yk(i);l=Kk(o[u],c)}return l}function Y0(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let u={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(Fe(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let c=Cr([r,u.relativePath]),f=n.concat(u);i.children&&i.children.length>0&&(Fe(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Y0(i.children,e,f,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:Hk(c,i.index),routesMeta:f})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let u of X0(i.path))s(i,o,u)}),e}function X0(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=X0(r.join("/")),l=[];return l.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function Mk(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:qk(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Fk=/^:[\w-]+$/,Uk=3,Bk=2,zk=1,$k=10,Wk=-2,ty=t=>t==="*";function Hk(t,e){let n=t.split("/"),r=n.length;return n.some(ty)&&(r+=Wk),e&&(r+=Bk),n.filter(s=>!ty(s)).reduce((s,i)=>s+(Fk.test(i)?Uk:i===""?zk:$k),r)}function qk(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Kk(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],c=l===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",m=Gk({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},f),g=u.route;if(!m)return null;Object.assign(s,m.params),o.push({params:s,pathname:Cr([i,m.pathname]),pathnameBase:tx(Cr([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=Cr([i,m.pathnameBase]))}return o}function Gk(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Qk(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((c,f,m)=>{let{paramName:g,isOptional:I}=f;if(g==="*"){let D=l[m]||"";o=i.slice(0,i.length-D.length).replace(/(.)\/+$/,"$1")}const C=l[m];return I&&!C?c[g]=void 0:c[g]=(C||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function Qk(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Wf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Yk(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Wf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Hf(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const Xk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Jk=t=>Xk.test(t);function Zk(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Ai(t):t,i;if(n)if(Jk(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Wf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=ny(n.substring(1),"/"):i=ny(n,e)}else i=e;return{pathname:i,search:nx(r),hash:rx(s)}}function ny(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function dd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ex(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function qf(t,e){let n=ex(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Kf(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Ai(t):(s=Jo({},t),Fe(!s.pathname||!s.pathname.includes("?"),dd("?","pathname","search",s)),Fe(!s.pathname||!s.pathname.includes("#"),dd("#","pathname","hash",s)),Fe(!s.search||!s.search.includes("#"),dd("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;s.pathname=g.join("/")}l=m>=0?e[m]:"/"}let u=Zk(s,l),c=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||f)&&(u.pathname+="/"),u}const Cr=t=>t.join("/").replace(/\/\/+/g,"/"),tx=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),nx=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,rx=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function sx(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const J0=["post","put","patch","delete"];new Set(J0);const ix=["get",...J0];new Set(ix);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zo(){return Zo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zo.apply(this,arguments)}const Gf=A.createContext(null),ox=A.createContext(null),Br=A.createContext(null),Qu=A.createContext(null),Jn=A.createContext({outlet:null,matches:[],isDataRoute:!1}),Z0=A.createContext(null);function ax(t,e){let{relative:n}=e===void 0?{}:e;Ci()||Fe(!1);let{basename:r,navigator:s}=A.useContext(Br),{hash:i,pathname:o,search:l}=tw(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Cr([r,o])),s.createHref({pathname:u,search:l,hash:i})}function Ci(){return A.useContext(Qu)!=null}function ya(){return Ci()||Fe(!1),A.useContext(Qu).location}function ew(t){A.useContext(Br).static||A.useLayoutEffect(t)}function va(){let{isDataRoute:t}=A.useContext(Jn);return t?Ex():lx()}function lx(){Ci()||Fe(!1);let t=A.useContext(Gf),{basename:e,future:n,navigator:r}=A.useContext(Br),{matches:s}=A.useContext(Jn),{pathname:i}=ya(),o=JSON.stringify(qf(s,n.v7_relativeSplatPath)),l=A.useRef(!1);return ew(()=>{l.current=!0}),A.useCallback(function(c,f){if(f===void 0&&(f={}),!l.current)return;if(typeof c=="number"){r.go(c);return}let m=Kf(c,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Cr([e,m.pathname])),(f.replace?r.replace:r.push)(m,f.state,f)},[e,r,o,i,t])}function ux(){let{matches:t}=A.useContext(Jn),e=t[t.length-1];return e?e.params:{}}function tw(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=A.useContext(Br),{matches:s}=A.useContext(Jn),{pathname:i}=ya(),o=JSON.stringify(qf(s,r.v7_relativeSplatPath));return A.useMemo(()=>Kf(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function cx(t,e){return dx(t,e)}function dx(t,e,n,r){Ci()||Fe(!1);let{navigator:s}=A.useContext(Br),{matches:i}=A.useContext(Jn),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let c=ya(),f;if(e){var m;let R=typeof e=="string"?Ai(e):e;u==="/"||(m=R.pathname)!=null&&m.startsWith(u)||Fe(!1),f=R}else f=c;let g=f.pathname||"/",I=g;if(u!=="/"){let R=u.replace(/^\//,"").split("/");I="/"+g.replace(/^\//,"").split("/").slice(R.length).join("/")}let C=Lk(t,{pathname:I}),D=gx(C&&C.map(R=>Object.assign({},R,{params:Object.assign({},l,R.params),pathname:Cr([u,s.encodeLocation?s.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?u:Cr([u,s.encodeLocation?s.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),i,n,r);return e&&D?A.createElement(Qu.Provider,{value:{location:Zo({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:vr.Pop}},D):D}function hx(){let t=wx(),e=sx(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:s},n):null,null)}const fx=A.createElement(hx,null);class px extends A.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?A.createElement(Jn.Provider,{value:this.props.routeContext},A.createElement(Z0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function mx(t){let{routeContext:e,match:n,children:r}=t,s=A.useContext(Gf);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),A.createElement(Jn.Provider,{value:e},r)}function gx(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let f=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);f>=0||Fe(!1),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let m=o[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(c=f),m.route.id){let{loaderData:g,errors:I}=n,C=m.route.loader&&g[m.route.id]===void 0&&(!I||I[m.route.id]===void 0);if(m.route.lazy||C){u=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((f,m,g)=>{let I,C=!1,D=null,R=null;n&&(I=l&&m.route.id?l[m.route.id]:void 0,D=m.route.errorElement||fx,u&&(c<0&&g===0?(Tx("route-fallback"),C=!0,R=null):c===g&&(C=!0,R=m.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,g+1)),_=()=>{let w;return I?w=D:C?w=R:m.route.Component?w=A.createElement(m.route.Component,null):m.route.element?w=m.route.element:w=f,A.createElement(mx,{match:m,routeContext:{outlet:f,matches:E,isDataRoute:n!=null},children:w})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?A.createElement(px,{location:n.location,revalidation:n.revalidation,component:D,error:I,children:_(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):_()},null)}var nw=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(nw||{}),rw=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(rw||{});function yx(t){let e=A.useContext(Gf);return e||Fe(!1),e}function vx(t){let e=A.useContext(ox);return e||Fe(!1),e}function _x(t){let e=A.useContext(Jn);return e||Fe(!1),e}function sw(t){let e=_x(),n=e.matches[e.matches.length-1];return n.route.id||Fe(!1),n.route.id}function wx(){var t;let e=A.useContext(Z0),n=vx(),r=sw();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Ex(){let{router:t}=yx(nw.UseNavigateStable),e=sw(rw.UseNavigateStable),n=A.useRef(!1);return ew(()=>{n.current=!0}),A.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Zo({fromRouteId:e},i)))},[t,e])}const ry={};function Tx(t,e,n){ry[t]||(ry[t]=!0)}function Ix(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function _h(t){let{to:e,replace:n,state:r,relative:s}=t;Ci()||Fe(!1);let{future:i,static:o}=A.useContext(Br),{matches:l}=A.useContext(Jn),{pathname:u}=ya(),c=va(),f=Kf(e,qf(l,i.v7_relativeSplatPath),u,s==="path"),m=JSON.stringify(f);return A.useEffect(()=>c(JSON.parse(m),{replace:n,state:r,relative:s}),[c,m,s,n,r]),null}function Pn(t){Fe(!1)}function Sx(t){let{basename:e="/",children:n=null,location:r,navigationType:s=vr.Pop,navigator:i,static:o=!1,future:l}=t;Ci()&&Fe(!1);let u=e.replace(/^\/*/,"/"),c=A.useMemo(()=>({basename:u,navigator:i,static:o,future:Zo({v7_relativeSplatPath:!1},l)}),[u,l,i,o]);typeof r=="string"&&(r=Ai(r));let{pathname:f="/",search:m="",hash:g="",state:I=null,key:C="default"}=r,D=A.useMemo(()=>{let R=Hf(f,u);return R==null?null:{location:{pathname:R,search:m,hash:g,state:I,key:C},navigationType:s}},[u,f,m,g,I,C,s]);return D==null?null:A.createElement(Br.Provider,{value:c},A.createElement(Qu.Provider,{children:n,value:D}))}function kx(t){let{children:e,location:n}=t;return cx(wh(e),n)}new Promise(()=>{});function wh(t,e){e===void 0&&(e=[]);let n=[];return A.Children.forEach(t,(r,s)=>{if(!A.isValidElement(r))return;let i=[...e,s];if(r.type===A.Fragment){n.push.apply(n,wh(r.props.children,i));return}r.type!==Pn&&Fe(!1),!r.props.index||!r.props.children||Fe(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=wh(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Eh(){return Eh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Eh.apply(this,arguments)}function xx(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Ax(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Cx(t,e){return t.button===0&&(!e||e==="_self")&&!Ax(t)}const Nx=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Rx="6";try{window.__reactRouterVersion=Rx}catch{}const Px="startTransition",sy=EI[Px];function bx(t){let{basename:e,children:n,future:r,window:s}=t,i=A.useRef();i.current==null&&(i.current=Dk({window:s,v5Compat:!0}));let o=i.current,[l,u]=A.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},f=A.useCallback(m=>{c&&sy?sy(()=>u(m)):u(m)},[u,c]);return A.useLayoutEffect(()=>o.listen(f),[o,f]),A.useEffect(()=>Ix(r),[r]),A.createElement(Sx,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const Dx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",jx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,an=A.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:l,target:u,to:c,preventScrollReset:f,viewTransition:m}=e,g=xx(e,Nx),{basename:I}=A.useContext(Br),C,D=!1;if(typeof c=="string"&&jx.test(c)&&(C=c,Dx))try{let w=new URL(window.location.href),b=c.startsWith("//")?new URL(w.protocol+c):new URL(c),O=Hf(b.pathname,I);b.origin===w.origin&&O!=null?c=O+b.search+b.hash:D=!0}catch{}let R=ax(c,{relative:s}),E=Ox(c,{replace:o,state:l,target:u,preventScrollReset:f,relative:s,viewTransition:m});function _(w){r&&r(w),w.defaultPrevented||E(w)}return A.createElement("a",Eh({},g,{href:C||R,onClick:D||i?r:_,ref:n,target:u}))});var iy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(iy||(iy={}));var oy;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(oy||(oy={}));function Ox(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,u=va(),c=ya(),f=tw(t,{relative:o});return A.useCallback(m=>{if(Cx(m,n)){m.preventDefault();let g=r!==void 0?r:hu(c)===hu(f);u(t,{replace:g,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[c,u,f,r,s,n,t,i,o,l])}var ay={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Lx=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},ow={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,c=u?t[s+2]:0,f=i>>2,m=(i&3)<<4|l>>4;let g=(l&15)<<2|c>>6,I=c&63;u||(I=64,o||(g=64)),r.push(n[f],n[m],n[g],n[I])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(iw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Lx(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||c==null||m==null)throw new Vx;const g=i<<2|l>>4;if(r.push(g),c!==64){const I=l<<4&240|c>>2;if(r.push(I),m!==64){const C=c<<6&192|m;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Vx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Mx=function(t){const e=iw(t);return ow.encodeByteArray(e,!0)},fu=function(t){return Mx(t).replace(/\./g,"")},aw=function(t){try{return ow.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux=()=>Fx().__FIREBASE_DEFAULTS__,Bx=()=>{if(typeof process>"u"||typeof ay>"u")return;const t=ay.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},zx=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&aw(t[1]);return e&&JSON.parse(e)},Yu=()=>{try{return Ux()||Bx()||zx()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},lw=t=>{var e,n;return(n=(e=Yu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},$x=t=>{const e=lw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},uw=()=>{var t;return(t=Yu())===null||t===void 0?void 0:t.config},cw=t=>{var e;return(e=Yu())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hx(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[fu(JSON.stringify(n)),fu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(It())}function Kx(){var t;const e=(t=Yu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Gx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Qx(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Yx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Xx(){const t=It();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Jx(){return!Kx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Zx(){try{return typeof indexedDB=="object"}catch{return!1}}function e1(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1="FirebaseError";class Zn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=t1,Object.setPrototypeOf(this,Zn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_a.prototype.create)}}class _a{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?n1(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Zn(s,l,r)}}function n1(t,e){return t.replace(r1,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const r1=/\{\$([^}]+)}/g;function s1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ea(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(ly(i)&&ly(o)){if(!ea(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function ly(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wa(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function mo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function go(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function i1(t,e){const n=new o1(t,e);return n.subscribe.bind(n)}class o1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");a1(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=hd),s.error===void 0&&(s.error=hd),s.complete===void 0&&(s.complete=hd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function a1(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function hd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(t){return t&&t._delegate?t._delegate:t}class ps{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Wx;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(c1(e))try{this.getOrInitializeService({instanceIdentifier:Zr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Zr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Zr){return this.instances.has(e)}getOptions(e=Zr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:u1(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Zr){return this.component?this.component.multipleInstances?e:Zr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function u1(t){return t===Zr?void 0:t}function c1(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new l1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ue;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ue||(ue={}));const h1={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},f1=ue.INFO,p1={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},m1=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=p1[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Qf{constructor(e){this.name=e,this._logLevel=f1,this._logHandler=m1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?h1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}}const g1=(t,e)=>e.some(n=>t instanceof n);let uy,cy;function y1(){return uy||(uy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function v1(){return cy||(cy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dw=new WeakMap,Th=new WeakMap,hw=new WeakMap,fd=new WeakMap,Yf=new WeakMap;function _1(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Nr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&dw.set(n,t)}).catch(()=>{}),Yf.set(e,t),e}function w1(t){if(Th.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Th.set(t,e)}let Ih={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Th.get(t);if(e==="objectStoreNames")return t.objectStoreNames||hw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Nr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function E1(t){Ih=t(Ih)}function T1(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(pd(this),e,...n);return hw.set(r,e.sort?e.sort():[e]),Nr(r)}:v1().includes(t)?function(...e){return t.apply(pd(this),e),Nr(dw.get(this))}:function(...e){return Nr(t.apply(pd(this),e))}}function I1(t){return typeof t=="function"?T1(t):(t instanceof IDBTransaction&&w1(t),g1(t,y1())?new Proxy(t,Ih):t)}function Nr(t){if(t instanceof IDBRequest)return _1(t);if(fd.has(t))return fd.get(t);const e=I1(t);return e!==t&&(fd.set(t,e),Yf.set(e,t)),e}const pd=t=>Yf.get(t);function S1(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Nr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Nr(o.result),u.oldVersion,u.newVersion,Nr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const k1=["get","getKey","getAll","getAllKeys","count"],x1=["put","add","delete","clear"],md=new Map;function dy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(md.get(e))return md.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=x1.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||k1.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(l.shift())),(await Promise.all([c[n](...l),s&&u.done]))[0]};return md.set(e,i),i}E1(t=>({...t,get:(e,n,r)=>dy(e,n)||t.get(e,n,r),has:(e,n)=>!!dy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(C1(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function C1(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Sh="@firebase/app",hy="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qn=new Qf("@firebase/app"),N1="@firebase/app-compat",R1="@firebase/analytics-compat",P1="@firebase/analytics",b1="@firebase/app-check-compat",D1="@firebase/app-check",j1="@firebase/auth",O1="@firebase/auth-compat",L1="@firebase/database",V1="@firebase/data-connect",M1="@firebase/database-compat",F1="@firebase/functions",U1="@firebase/functions-compat",B1="@firebase/installations",z1="@firebase/installations-compat",$1="@firebase/messaging",W1="@firebase/messaging-compat",H1="@firebase/performance",q1="@firebase/performance-compat",K1="@firebase/remote-config",G1="@firebase/remote-config-compat",Q1="@firebase/storage",Y1="@firebase/storage-compat",X1="@firebase/firestore",J1="@firebase/vertexai-preview",Z1="@firebase/firestore-compat",eA="firebase",tA="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kh="[DEFAULT]",nA={[Sh]:"fire-core",[N1]:"fire-core-compat",[P1]:"fire-analytics",[R1]:"fire-analytics-compat",[D1]:"fire-app-check",[b1]:"fire-app-check-compat",[j1]:"fire-auth",[O1]:"fire-auth-compat",[L1]:"fire-rtdb",[V1]:"fire-data-connect",[M1]:"fire-rtdb-compat",[F1]:"fire-fn",[U1]:"fire-fn-compat",[B1]:"fire-iid",[z1]:"fire-iid-compat",[$1]:"fire-fcm",[W1]:"fire-fcm-compat",[H1]:"fire-perf",[q1]:"fire-perf-compat",[K1]:"fire-rc",[G1]:"fire-rc-compat",[Q1]:"fire-gcs",[Y1]:"fire-gcs-compat",[X1]:"fire-fst",[Z1]:"fire-fst-compat",[J1]:"fire-vertex","fire-js":"fire-js",[eA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pu=new Map,rA=new Map,xh=new Map;function fy(t,e){try{t.container.addComponent(e)}catch(n){qn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function hi(t){const e=t.name;if(xh.has(e))return qn.debug(`There were multiple attempts to register component ${e}.`),!1;xh.set(e,t);for(const n of pu.values())fy(n,t);for(const n of rA.values())fy(n,t);return!0}function Xf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function _n(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Rr=new _a("app","Firebase",sA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ps("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni=tA;function fw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:kh,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Rr.create("bad-app-name",{appName:String(s)});if(n||(n=uw()),!n)throw Rr.create("no-options");const i=pu.get(s);if(i){if(ea(n,i.options)&&ea(r,i.config))return i;throw Rr.create("duplicate-app",{appName:s})}const o=new d1(s);for(const u of xh.values())o.addComponent(u);const l=new iA(n,r,o);return pu.set(s,l),l}function pw(t=kh){const e=pu.get(t);if(!e&&t===kh&&uw())return fw();if(!e)throw Rr.create("no-app",{appName:t});return e}function Pr(t,e,n){var r;let s=(r=nA[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qn.warn(l.join(" "));return}hi(new ps(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA="firebase-heartbeat-database",aA=1,ta="firebase-heartbeat-store";let gd=null;function mw(){return gd||(gd=S1(oA,aA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ta)}catch(n){console.warn(n)}}}}).catch(t=>{throw Rr.create("idb-open",{originalErrorMessage:t.message})})),gd}async function lA(t){try{const n=(await mw()).transaction(ta),r=await n.objectStore(ta).get(gw(t));return await n.done,r}catch(e){if(e instanceof Zn)qn.warn(e.message);else{const n=Rr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});qn.warn(n.message)}}}async function py(t,e){try{const r=(await mw()).transaction(ta,"readwrite");await r.objectStore(ta).put(e,gw(t)),await r.done}catch(n){if(n instanceof Zn)qn.warn(n.message);else{const r=Rr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});qn.warn(r.message)}}}function gw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA=1024,cA=30*24*60*60*1e3;class dA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new fA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=my();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=cA}),this._storage.overwrite(this._heartbeatsCache))}catch(r){qn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=my(),{heartbeatsToSend:r,unsentEntries:s}=hA(this._heartbeatsCache.heartbeats),i=fu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return qn.warn(n),""}}}function my(){return new Date().toISOString().substring(0,10)}function hA(t,e=uA){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),gy(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),gy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class fA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Zx()?e1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await lA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return py(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return py(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function gy(t){return fu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(t){hi(new ps("platform-logger",e=>new A1(e),"PRIVATE")),hi(new ps("heartbeat",e=>new dA(e),"PRIVATE")),Pr(Sh,hy,t),Pr(Sh,hy,"esm2017"),Pr("fire-js","")}pA("");function Jf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function yw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const mA=yw,vw=new _a("auth","Firebase",yw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mu=new Qf("@firebase/auth");function gA(t,...e){mu.logLevel<=ue.WARN&&mu.warn(`Auth (${Ni}): ${t}`,...e)}function Dl(t,...e){mu.logLevel<=ue.ERROR&&mu.error(`Auth (${Ni}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(t,...e){throw Zf(t,...e)}function Tn(t,...e){return Zf(t,...e)}function _w(t,e,n){const r=Object.assign(Object.assign({},mA()),{[e]:n});return new _a("auth","Firebase",r).create(e,{appName:t.name})}function Un(t){return _w(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Zf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return vw.create(t,...e)}function J(t,e,...n){if(!t)throw Zf(e,...n)}function Ln(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Dl(e),new Error(e)}function Kn(t,e){t||Ln(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ah(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function yA(){return yy()==="http:"||yy()==="https:"}function yy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(yA()||Qx()||"connection"in navigator)?navigator.onLine:!0}function _A(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,n){this.shortDelay=e,this.longDelay=n,Kn(n>e,"Short delay should be less than long delay!"),this.isMobile=qx()||Yx()}get(){return vA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(t,e){Kn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ln("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ln("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ln("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA=new Ea(3e4,6e4);function zr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function $r(t,e,n,r,s={}){return Ew(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=wa(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:u},i);return Gx()||(c.referrerPolicy="no-referrer"),ww.fetch()(Tw(t,t.config.apiHost,n,l),c)})}async function Ew(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},wA),e);try{const s=new IA(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw ml(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[u,c]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw ml(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw ml(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw ml(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw _w(t,f,c);dn(t,f)}}catch(s){if(s instanceof Zn)throw s;dn(t,"network-request-failed",{message:String(s)})}}async function Ta(t,e,n,r,s={}){const i=await $r(t,e,n,r,s);return"mfaPendingCredential"in i&&dn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function Tw(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?ep(t.config,s):`${t.config.apiScheme}://${s}`}function TA(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class IA{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Tn(this.auth,"network-request-failed")),EA.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ml(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Tn(t,e,r);return s.customData._tokenResponse=n,s}function vy(t){return t!==void 0&&t.enterprise!==void 0}class SA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return TA(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function kA(t,e){return $r(t,"GET","/v2/recaptchaConfig",zr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xA(t,e){return $r(t,"POST","/v1/accounts:delete",e)}async function Iw(t,e){return $r(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ro(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function AA(t,e=!1){const n=Ye(t),r=await n.getIdToken(e),s=tp(r);J(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Ro(yd(s.auth_time)),issuedAtTime:Ro(yd(s.iat)),expirationTime:Ro(yd(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function yd(t){return Number(t)*1e3}function tp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Dl("JWT malformed, contained fewer than 3 sections"),null;try{const s=aw(n);return s?JSON.parse(s):(Dl("Failed to decode base64 JWT payload"),null)}catch(s){return Dl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function _y(t){const e=tp(t);return J(e,"internal-error"),J(typeof e.exp<"u","internal-error"),J(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function na(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Zn&&CA(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function CA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ro(this.lastLoginAt),this.creationTime=Ro(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gu(t){var e;const n=t.auth,r=await t.getIdToken(),s=await na(t,Iw(n,{idToken:r}));J(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Sw(i.providerUserInfo):[],l=PA(t.providerData,o),u=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),f=u?c:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Ch(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function RA(t){const e=Ye(t);await gu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function PA(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Sw(t){return t.map(e=>{var{providerId:n}=e,r=Jf(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bA(t,e){const n=await Ew(t,{},async()=>{const r=wa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=Tw(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",ww.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function DA(t,e){return $r(t,"POST","/v2/accounts:revokeToken",zr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){J(e.idToken,"internal-error"),J(typeof e.idToken<"u","internal-error"),J(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_y(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){J(e.length!==0,"internal-error");const n=_y(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await bA(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new ti;return r&&(J(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(J(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(J(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ti,this.toJSON())}_performRefresh(){return Ln("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(t,e){J(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Vn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Jf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new NA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ch(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await na(this,this.stsTokenManager.getToken(this.auth,e));return J(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return AA(this,e)}reload(){return RA(this)}_assign(e){this!==e&&(J(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Vn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await gu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_n(this.auth.app))return Promise.reject(Un(this.auth));const e=await this.getIdToken();return await na(this,xA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,u,c,f;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,I=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,C=(o=n.photoURL)!==null&&o!==void 0?o:void 0,D=(l=n.tenantId)!==null&&l!==void 0?l:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,E=(c=n.createdAt)!==null&&c!==void 0?c:void 0,_=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:w,emailVerified:b,isAnonymous:O,providerData:M,stsTokenManager:T}=n;J(w&&T,e,"internal-error");const y=ti.fromJSON(this.name,T);J(typeof w=="string",e,"internal-error"),ar(m,e.name),ar(g,e.name),J(typeof b=="boolean",e,"internal-error"),J(typeof O=="boolean",e,"internal-error"),ar(I,e.name),ar(C,e.name),ar(D,e.name),ar(R,e.name),ar(E,e.name),ar(_,e.name);const S=new Vn({uid:w,auth:e,email:g,emailVerified:b,displayName:m,isAnonymous:O,photoURL:C,phoneNumber:I,tenantId:D,stsTokenManager:y,createdAt:E,lastLoginAt:_});return M&&Array.isArray(M)&&(S.providerData=M.map(k=>Object.assign({},k))),R&&(S._redirectEventId=R),S}static async _fromIdTokenResponse(e,n,r=!1){const s=new ti;s.updateFromServerResponse(n);const i=new Vn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await gu(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];J(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Sw(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new ti;l.updateFromIdToken(r);const u=new Vn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Ch(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy=new Map;function Mn(t){Kn(t instanceof Function,"Expected a class definition");let e=wy.get(t);return e?(Kn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,wy.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}kw.type="NONE";const Ey=kw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jl(t,e,n){return`firebase:${t}:${e}:${n}`}class ni{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=jl(this.userKey,s.apiKey,i),this.fullPersistenceKey=jl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Vn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ni(Mn(Ey),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Mn(Ey);const o=jl(r,e.config.apiKey,e.name);let l=null;for(const c of n)try{const f=await c._get(o);if(f){const m=Vn._fromJSON(e,f);c!==i&&(l=m),i=c;break}}catch{}const u=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new ni(i,e,r):(i=u[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new ni(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ty(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Nw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(xw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Pw(e))return"Blackberry";if(bw(e))return"Webos";if(Aw(e))return"Safari";if((e.includes("chrome/")||Cw(e))&&!e.includes("edge/"))return"Chrome";if(Rw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function xw(t=It()){return/firefox\//i.test(t)}function Aw(t=It()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Cw(t=It()){return/crios\//i.test(t)}function Nw(t=It()){return/iemobile/i.test(t)}function Rw(t=It()){return/android/i.test(t)}function Pw(t=It()){return/blackberry/i.test(t)}function bw(t=It()){return/webos/i.test(t)}function np(t=It()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function jA(t=It()){var e;return np(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function OA(){return Xx()&&document.documentMode===10}function Dw(t=It()){return np(t)||Rw(t)||bw(t)||Pw(t)||/windows phone/i.test(t)||Nw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jw(t,e=[]){let n;switch(t){case"Browser":n=Ty(It());break;case"Worker":n=`${Ty(It())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ni}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const u=e(i);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VA(t,e={}){return $r(t,"GET","/v2/passwordPolicy",zr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA=6;class FA{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:MA,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Iy(this),this.idTokenSubscription=new Iy(this),this.beforeStateQueue=new LA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Mn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await ni.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Iw(this,{idToken:e}),r=await Vn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(_n(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await gu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_A()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_n(this.app))return Promise.reject(Un(this));const n=e?Ye(e):null;return n&&J(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&J(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _n(this.app)?Promise.reject(Un(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _n(this.app)?Promise.reject(Un(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Mn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await VA(this),n=new FA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new _a("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await DA(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Mn(e)||this._popupRedirectResolver;J(n,this,"argument-error"),this.redirectPersistenceManager=await ni.create(this,[Mn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&gA(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ts(t){return Ye(t)}class Iy{constructor(e){this.auth=e,this.observer=null,this.addObserver=i1(n=>this.observer=n)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function BA(t){Xu=t}function Ow(t){return Xu.loadJS(t)}function zA(){return Xu.recaptchaEnterpriseScript}function $A(){return Xu.gapiScript}function WA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const HA="recaptcha-enterprise",qA="NO_RECAPTCHA";class KA{constructor(e){this.type=HA,this.auth=Ts(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{kA(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const c=new SA(u);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(u=>{l(u)})})}function s(i,o,l){const u=window.grecaptcha;vy(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(qA)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&vy(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=zA();u.length!==0&&(u+=l),Ow(u).then(()=>{s(l,i,o)}).catch(c=>{o(c)})}}).catch(l=>{o(l)})})}}async function Sy(t,e,n,r=!1){const s=new KA(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Nh(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Sy(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Sy(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(t,e){const n=Xf(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(ea(i,e??{}))return s;dn(s,"already-initialized")}return n.initialize({options:e})}function QA(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Mn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function YA(t,e,n){const r=Ts(t);J(r._canInitEmulator,r,"emulator-config-failed"),J(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Lw(e),{host:o,port:l}=XA(e),u=l===null?"":`:${l}`;r.config.emulator={url:`${i}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),JA()}function Lw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function XA(t){const e=Lw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:ky(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:ky(o)}}}function ky(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function JA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ln("not implemented")}_getIdTokenResponse(e){return Ln("not implemented")}_linkToIdToken(e,n){return Ln("not implemented")}_getReauthenticationResolver(e){return Ln("not implemented")}}async function ZA(t,e){return $r(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eC(t,e){return Ta(t,"POST","/v1/accounts:signInWithPassword",zr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tC(t,e){return Ta(t,"POST","/v1/accounts:signInWithEmailLink",zr(t,e))}async function nC(t,e){return Ta(t,"POST","/v1/accounts:signInWithEmailLink",zr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra extends rp{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new ra(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ra(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nh(e,n,"signInWithPassword",eC);case"emailLink":return tC(e,{email:this._email,oobCode:this._password});default:dn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nh(e,r,"signUpPassword",ZA);case"emailLink":return nC(e,{idToken:n,email:this._email,oobCode:this._password});default:dn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ri(t,e){return Ta(t,"POST","/v1/accounts:signInWithIdp",zr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC="http://localhost";class ms extends rp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ms(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):dn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Jf(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new ms(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ri(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ri(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ri(e,n)}buildRequest(){const e={requestUri:rC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=wa(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sC(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function iC(t){const e=mo(go(t)).link,n=e?mo(go(e)).deep_link_id:null,r=mo(go(t)).deep_link_id;return(r?mo(go(r)).link:null)||r||n||e||t}class sp{constructor(e){var n,r,s,i,o,l;const u=mo(go(e)),c=(n=u.apiKey)!==null&&n!==void 0?n:null,f=(r=u.oobCode)!==null&&r!==void 0?r:null,m=sC((s=u.mode)!==null&&s!==void 0?s:null);J(c&&f&&m,"argument-error"),this.apiKey=c,this.operation=m,this.code=f,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=iC(e);try{return new sp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(){this.providerId=Ri.PROVIDER_ID}static credential(e,n){return ra._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=sp.parseLink(n);return J(r,"argument-error"),ra._fromEmailAndCode(e,r.code,r.tenantId)}}Ri.PROVIDER_ID="password";Ri.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ri.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia extends Vw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr extends Ia{constructor(){super("facebook.com")}static credential(e){return ms._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hr.credential(e.oauthAccessToken)}catch{return null}}}hr.FACEBOOK_SIGN_IN_METHOD="facebook.com";hr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr extends Ia{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ms._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return fr.credential(n,r)}catch{return null}}}fr.GOOGLE_SIGN_IN_METHOD="google.com";fr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends Ia{constructor(){super("github.com")}static credential(e){return ms._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pr.credentialFromTaggedObject(e)}static credentialFromError(e){return pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pr.credential(e.oauthAccessToken)}catch{return null}}}pr.GITHUB_SIGN_IN_METHOD="github.com";pr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends Ia{constructor(){super("twitter.com")}static credential(e,n){return ms._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return mr.credential(n,r)}catch{return null}}}mr.TWITTER_SIGN_IN_METHOD="twitter.com";mr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oC(t,e){return Ta(t,"POST","/v1/accounts:signUp",zr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Vn._fromIdTokenResponse(e,r,s),o=xy(r);return new gs({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=xy(r);return new gs({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function xy(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu extends Zn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,yu.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new yu(e,n,r,s)}}function Mw(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?yu._fromErrorAndOperation(t,i,e,r):i})}async function aC(t,e,n=!1){const r=await na(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return gs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lC(t,e,n=!1){const{auth:r}=t;if(_n(r.app))return Promise.reject(Un(r));const s="reauthenticate";try{const i=await na(t,Mw(r,s,e,t),n);J(i.idToken,r,"internal-error");const o=tp(i.idToken);J(o,r,"internal-error");const{sub:l}=o;return J(t.uid===l,r,"user-mismatch"),gs._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&dn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fw(t,e,n=!1){if(_n(t.app))return Promise.reject(Un(t));const r="signIn",s=await Mw(t,r,e),i=await gs._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function uC(t,e){return Fw(Ts(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uw(t){const e=Ts(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function cC(t,e,n){if(_n(t.app))return Promise.reject(Un(t));const r=Ts(t),o=await Nh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",oC).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Uw(t),u}),l=await gs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function dC(t,e,n){return _n(t.app)?Promise.reject(Un(t)):uC(Ye(t),Ri.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Uw(t),r})}function hC(t,e,n,r){return Ye(t).onIdTokenChanged(e,n,r)}function fC(t,e,n){return Ye(t).beforeAuthStateChanged(e,n)}function pC(t,e,n,r){return Ye(t).onAuthStateChanged(e,n,r)}function mC(t){return Ye(t).signOut()}const vu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(vu,"1"),this.storage.removeItem(vu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC=1e3,yC=10;class zw extends Bw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Dw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);OA()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,yC):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},gC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}zw.type="LOCAL";const vC=zw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w extends Bw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}$w.type="SESSION";const Ww=$w;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Ju(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async c=>c(n.origin,i)),u=await _C(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ju.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,u)=>{const c=ip("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===c)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(){return window}function EC(t){In().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hw(){return typeof In().WorkerGlobalScope<"u"&&typeof In().importScripts=="function"}async function TC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function IC(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function SC(){return Hw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw="firebaseLocalStorageDb",kC=1,_u="firebaseLocalStorage",Kw="fbase_key";class Sa{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Zu(t,e){return t.transaction([_u],e?"readwrite":"readonly").objectStore(_u)}function xC(){const t=indexedDB.deleteDatabase(qw);return new Sa(t).toPromise()}function Rh(){const t=indexedDB.open(qw,kC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(_u,{keyPath:Kw})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(_u)?e(r):(r.close(),await xC(),e(await Rh()))})})}async function Ay(t,e,n){const r=Zu(t,!0).put({[Kw]:e,value:n});return new Sa(r).toPromise()}async function AC(t,e){const n=Zu(t,!1).get(e),r=await new Sa(n).toPromise();return r===void 0?null:r.value}function Cy(t,e){const n=Zu(t,!0).delete(e);return new Sa(n).toPromise()}const CC=800,NC=3;class Gw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Rh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>NC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Hw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ju._getInstance(SC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await TC(),!this.activeServiceWorker)return;this.sender=new wC(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||IC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Rh();return await Ay(e,vu,"1"),await Cy(e,vu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Ay(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>AC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Cy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Zu(s,!1).getAll();return new Sa(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),CC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Gw.type="LOCAL";const RC=Gw;new Ea(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(t,e){return e?Mn(e):(J(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op extends rp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ri(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ri(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ri(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function bC(t){return Fw(t.auth,new op(t),t.bypassAuthState)}function DC(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),lC(n,new op(t),t.bypassAuthState)}async function jC(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),aC(n,new op(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return bC;case"linkViaPopup":case"linkViaRedirect":return jC;case"reauthViaPopup":case"reauthViaRedirect":return DC;default:dn(this.auth,"internal-error")}}resolve(e){Kn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Kn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC=new Ea(2e3,1e4);class Gs extends Qw{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Gs.currentPopupAction&&Gs.currentPopupAction.cancel(),Gs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return J(e,this.auth,"internal-error"),e}async onExecution(){Kn(this.filter.length===1,"Popup operations only handle one event");const e=ip();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Tn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Tn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Gs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Tn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,OC.get())};e()}}Gs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC="pendingRedirect",Ol=new Map;class VC extends Qw{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ol.get(this.auth._key());if(!e){try{const r=await MC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ol.set(this.auth._key(),e)}return this.bypassAuthState||Ol.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function MC(t,e){const n=BC(e),r=UC(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function FC(t,e){Ol.set(t._key(),e)}function UC(t){return Mn(t._redirectPersistence)}function BC(t){return jl(LC,t.config.apiKey,t.name)}async function zC(t,e,n=!1){if(_n(t.app))return Promise.reject(Un(t));const r=Ts(t),s=PC(r,e),o=await new VC(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C=10*60*1e3;class WC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!HC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Yw(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Tn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$C&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ny(e))}saveEventToCache(e){this.cachedEventUids.add(Ny(e)),this.lastProcessedEventTime=Date.now()}}function Ny(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Yw({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function HC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Yw(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qC(t,e={}){return $r(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,GC=/^https?/;async function QC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await qC(t);for(const n of e)try{if(YC(n))return}catch{}dn(t,"unauthorized-domain")}function YC(t){const e=Ah(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!GC.test(n))return!1;if(KC.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC=new Ea(3e4,6e4);function Ry(){const t=In().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function JC(t){return new Promise((e,n)=>{var r,s,i;function o(){Ry(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ry(),n(Tn(t,"network-request-failed"))},timeout:XC.get()})}if(!((s=(r=In().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=In().gapi)===null||i===void 0)&&i.load)o();else{const l=WA("iframefcb");return In()[l]=()=>{gapi.load?o():n(Tn(t,"network-request-failed"))},Ow(`${$A()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw Ll=null,e})}let Ll=null;function ZC(t){return Ll=Ll||JC(t),Ll}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN=new Ea(5e3,15e3),tN="__/auth/iframe",nN="emulator/auth/iframe",rN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function iN(t){const e=t.config;J(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ep(e,nN):`https://${t.config.authDomain}/${tN}`,r={apiKey:e.apiKey,appName:t.name,v:Ni},s=sN.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${wa(r).slice(1)}`}async function oN(t){const e=await ZC(t),n=In().gapi;return J(n,t,"internal-error"),e.open({where:document.body,url:iN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rN,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Tn(t,"network-request-failed"),l=In().setTimeout(()=>{i(o)},eN.get());function u(){In().clearTimeout(l),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},lN=500,uN=600,cN="_blank",dN="http://localhost";class Py{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function hN(t,e,n,r=lN,s=uN){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},aN),{width:r.toString(),height:s.toString(),top:i,left:o}),c=It().toLowerCase();n&&(l=Cw(c)?cN:n),xw(c)&&(e=e||dN,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[I,C])=>`${g}${I}=${C},`,"");if(jA(c)&&l!=="_self")return fN(e||"",l),new Py(null);const m=window.open(e||"",l,f);J(m,t,"popup-blocked");try{m.focus()}catch{}return new Py(m)}function fN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN="__/auth/handler",mN="emulator/auth/handler",gN=encodeURIComponent("fac");async function by(t,e,n,r,s,i){J(t.config.authDomain,t,"auth-domain-config-required"),J(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ni,eventId:s};if(e instanceof Vw){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",s1(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries({}))o[f]=m}if(e instanceof Ia){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const u=await t._getAppCheckToken(),c=u?`#${gN}=${encodeURIComponent(u)}`:"";return`${yN(t)}?${wa(l).slice(1)}${c}`}function yN({config:t}){return t.emulator?ep(t,mN):`https://${t.authDomain}/${pN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd="webStorageSupport";class vN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ww,this._completeRedirectFn=zC,this._overrideRedirectResult=FC}async _openPopup(e,n,r,s){var i;Kn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await by(e,n,r,Ah(),s);return hN(e,o,ip())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await by(e,n,r,Ah(),s);return EC(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Kn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await oN(e),r=new WC(e);return n.register("authEvent",s=>(J(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(vd,{type:vd},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[vd];o!==void 0&&n(!!o),dn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=QC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Dw()||Aw()||np()}}const _N=vN;var Dy="@firebase/auth",jy="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function TN(t){hi(new ps("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;J(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jw(t)},c=new UA(r,s,i,u);return QA(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),hi(new ps("auth-internal",e=>{const n=Ts(e.getProvider("auth").getImmediate());return(r=>new wN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Pr(Dy,jy,EN(t)),Pr(Dy,jy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN=5*60,SN=cw("authIdTokenMaxAge")||IN;let Oy=null;const kN=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>SN)return;const s=n==null?void 0:n.token;Oy!==s&&(Oy=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function xN(t=pw()){const e=Xf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=GA(t,{popupRedirectResolver:_N,persistence:[RC,vC,Ww]}),r=cw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=kN(i.toString());fC(n,o,()=>o(n.currentUser)),hC(n,l=>o(l))}}const s=lw("auth");return s&&YA(n,`http://${s}`),n}function AN(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}BA({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Tn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",AN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});TN("Browser");var Ly=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var as,Xw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,y){function S(){}S.prototype=y.prototype,T.D=y.prototype,T.prototype=new S,T.prototype.constructor=T,T.C=function(k,P,N){for(var x=Array(arguments.length-2),he=2;he<arguments.length;he++)x[he-2]=arguments[he];return y.prototype[P].apply(k,x)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,y,S){S||(S=0);var k=Array(16);if(typeof y=="string")for(var P=0;16>P;++P)k[P]=y.charCodeAt(S++)|y.charCodeAt(S++)<<8|y.charCodeAt(S++)<<16|y.charCodeAt(S++)<<24;else for(P=0;16>P;++P)k[P]=y[S++]|y[S++]<<8|y[S++]<<16|y[S++]<<24;y=T.g[0],S=T.g[1],P=T.g[2];var N=T.g[3],x=y+(N^S&(P^N))+k[0]+3614090360&4294967295;y=S+(x<<7&4294967295|x>>>25),x=N+(P^y&(S^P))+k[1]+3905402710&4294967295,N=y+(x<<12&4294967295|x>>>20),x=P+(S^N&(y^S))+k[2]+606105819&4294967295,P=N+(x<<17&4294967295|x>>>15),x=S+(y^P&(N^y))+k[3]+3250441966&4294967295,S=P+(x<<22&4294967295|x>>>10),x=y+(N^S&(P^N))+k[4]+4118548399&4294967295,y=S+(x<<7&4294967295|x>>>25),x=N+(P^y&(S^P))+k[5]+1200080426&4294967295,N=y+(x<<12&4294967295|x>>>20),x=P+(S^N&(y^S))+k[6]+2821735955&4294967295,P=N+(x<<17&4294967295|x>>>15),x=S+(y^P&(N^y))+k[7]+4249261313&4294967295,S=P+(x<<22&4294967295|x>>>10),x=y+(N^S&(P^N))+k[8]+1770035416&4294967295,y=S+(x<<7&4294967295|x>>>25),x=N+(P^y&(S^P))+k[9]+2336552879&4294967295,N=y+(x<<12&4294967295|x>>>20),x=P+(S^N&(y^S))+k[10]+4294925233&4294967295,P=N+(x<<17&4294967295|x>>>15),x=S+(y^P&(N^y))+k[11]+2304563134&4294967295,S=P+(x<<22&4294967295|x>>>10),x=y+(N^S&(P^N))+k[12]+1804603682&4294967295,y=S+(x<<7&4294967295|x>>>25),x=N+(P^y&(S^P))+k[13]+4254626195&4294967295,N=y+(x<<12&4294967295|x>>>20),x=P+(S^N&(y^S))+k[14]+2792965006&4294967295,P=N+(x<<17&4294967295|x>>>15),x=S+(y^P&(N^y))+k[15]+1236535329&4294967295,S=P+(x<<22&4294967295|x>>>10),x=y+(P^N&(S^P))+k[1]+4129170786&4294967295,y=S+(x<<5&4294967295|x>>>27),x=N+(S^P&(y^S))+k[6]+3225465664&4294967295,N=y+(x<<9&4294967295|x>>>23),x=P+(y^S&(N^y))+k[11]+643717713&4294967295,P=N+(x<<14&4294967295|x>>>18),x=S+(N^y&(P^N))+k[0]+3921069994&4294967295,S=P+(x<<20&4294967295|x>>>12),x=y+(P^N&(S^P))+k[5]+3593408605&4294967295,y=S+(x<<5&4294967295|x>>>27),x=N+(S^P&(y^S))+k[10]+38016083&4294967295,N=y+(x<<9&4294967295|x>>>23),x=P+(y^S&(N^y))+k[15]+3634488961&4294967295,P=N+(x<<14&4294967295|x>>>18),x=S+(N^y&(P^N))+k[4]+3889429448&4294967295,S=P+(x<<20&4294967295|x>>>12),x=y+(P^N&(S^P))+k[9]+568446438&4294967295,y=S+(x<<5&4294967295|x>>>27),x=N+(S^P&(y^S))+k[14]+3275163606&4294967295,N=y+(x<<9&4294967295|x>>>23),x=P+(y^S&(N^y))+k[3]+4107603335&4294967295,P=N+(x<<14&4294967295|x>>>18),x=S+(N^y&(P^N))+k[8]+1163531501&4294967295,S=P+(x<<20&4294967295|x>>>12),x=y+(P^N&(S^P))+k[13]+2850285829&4294967295,y=S+(x<<5&4294967295|x>>>27),x=N+(S^P&(y^S))+k[2]+4243563512&4294967295,N=y+(x<<9&4294967295|x>>>23),x=P+(y^S&(N^y))+k[7]+1735328473&4294967295,P=N+(x<<14&4294967295|x>>>18),x=S+(N^y&(P^N))+k[12]+2368359562&4294967295,S=P+(x<<20&4294967295|x>>>12),x=y+(S^P^N)+k[5]+4294588738&4294967295,y=S+(x<<4&4294967295|x>>>28),x=N+(y^S^P)+k[8]+2272392833&4294967295,N=y+(x<<11&4294967295|x>>>21),x=P+(N^y^S)+k[11]+1839030562&4294967295,P=N+(x<<16&4294967295|x>>>16),x=S+(P^N^y)+k[14]+4259657740&4294967295,S=P+(x<<23&4294967295|x>>>9),x=y+(S^P^N)+k[1]+2763975236&4294967295,y=S+(x<<4&4294967295|x>>>28),x=N+(y^S^P)+k[4]+1272893353&4294967295,N=y+(x<<11&4294967295|x>>>21),x=P+(N^y^S)+k[7]+4139469664&4294967295,P=N+(x<<16&4294967295|x>>>16),x=S+(P^N^y)+k[10]+3200236656&4294967295,S=P+(x<<23&4294967295|x>>>9),x=y+(S^P^N)+k[13]+681279174&4294967295,y=S+(x<<4&4294967295|x>>>28),x=N+(y^S^P)+k[0]+3936430074&4294967295,N=y+(x<<11&4294967295|x>>>21),x=P+(N^y^S)+k[3]+3572445317&4294967295,P=N+(x<<16&4294967295|x>>>16),x=S+(P^N^y)+k[6]+76029189&4294967295,S=P+(x<<23&4294967295|x>>>9),x=y+(S^P^N)+k[9]+3654602809&4294967295,y=S+(x<<4&4294967295|x>>>28),x=N+(y^S^P)+k[12]+3873151461&4294967295,N=y+(x<<11&4294967295|x>>>21),x=P+(N^y^S)+k[15]+530742520&4294967295,P=N+(x<<16&4294967295|x>>>16),x=S+(P^N^y)+k[2]+3299628645&4294967295,S=P+(x<<23&4294967295|x>>>9),x=y+(P^(S|~N))+k[0]+4096336452&4294967295,y=S+(x<<6&4294967295|x>>>26),x=N+(S^(y|~P))+k[7]+1126891415&4294967295,N=y+(x<<10&4294967295|x>>>22),x=P+(y^(N|~S))+k[14]+2878612391&4294967295,P=N+(x<<15&4294967295|x>>>17),x=S+(N^(P|~y))+k[5]+4237533241&4294967295,S=P+(x<<21&4294967295|x>>>11),x=y+(P^(S|~N))+k[12]+1700485571&4294967295,y=S+(x<<6&4294967295|x>>>26),x=N+(S^(y|~P))+k[3]+2399980690&4294967295,N=y+(x<<10&4294967295|x>>>22),x=P+(y^(N|~S))+k[10]+4293915773&4294967295,P=N+(x<<15&4294967295|x>>>17),x=S+(N^(P|~y))+k[1]+2240044497&4294967295,S=P+(x<<21&4294967295|x>>>11),x=y+(P^(S|~N))+k[8]+1873313359&4294967295,y=S+(x<<6&4294967295|x>>>26),x=N+(S^(y|~P))+k[15]+4264355552&4294967295,N=y+(x<<10&4294967295|x>>>22),x=P+(y^(N|~S))+k[6]+2734768916&4294967295,P=N+(x<<15&4294967295|x>>>17),x=S+(N^(P|~y))+k[13]+1309151649&4294967295,S=P+(x<<21&4294967295|x>>>11),x=y+(P^(S|~N))+k[4]+4149444226&4294967295,y=S+(x<<6&4294967295|x>>>26),x=N+(S^(y|~P))+k[11]+3174756917&4294967295,N=y+(x<<10&4294967295|x>>>22),x=P+(y^(N|~S))+k[2]+718787259&4294967295,P=N+(x<<15&4294967295|x>>>17),x=S+(N^(P|~y))+k[9]+3951481745&4294967295,T.g[0]=T.g[0]+y&4294967295,T.g[1]=T.g[1]+(P+(x<<21&4294967295|x>>>11))&4294967295,T.g[2]=T.g[2]+P&4294967295,T.g[3]=T.g[3]+N&4294967295}r.prototype.u=function(T,y){y===void 0&&(y=T.length);for(var S=y-this.blockSize,k=this.B,P=this.h,N=0;N<y;){if(P==0)for(;N<=S;)s(this,T,N),N+=this.blockSize;if(typeof T=="string"){for(;N<y;)if(k[P++]=T.charCodeAt(N++),P==this.blockSize){s(this,k),P=0;break}}else for(;N<y;)if(k[P++]=T[N++],P==this.blockSize){s(this,k),P=0;break}}this.h=P,this.o+=y},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var y=1;y<T.length-8;++y)T[y]=0;var S=8*this.o;for(y=T.length-8;y<T.length;++y)T[y]=S&255,S/=256;for(this.u(T),T=Array(16),y=S=0;4>y;++y)for(var k=0;32>k;k+=8)T[S++]=this.g[y]>>>k&255;return T};function i(T,y){var S=l;return Object.prototype.hasOwnProperty.call(S,T)?S[T]:S[T]=y(T)}function o(T,y){this.h=y;for(var S=[],k=!0,P=T.length-1;0<=P;P--){var N=T[P]|0;k&&N==y||(S[P]=N,k=!1)}this.g=S}var l={};function u(T){return-128<=T&&128>T?i(T,function(y){return new o([y|0],0>y?-1:0)}):new o([T|0],0>T?-1:0)}function c(T){if(isNaN(T)||!isFinite(T))return m;if(0>T)return R(c(-T));for(var y=[],S=1,k=0;T>=S;k++)y[k]=T/S|0,S*=4294967296;return new o(y,0)}function f(T,y){if(T.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(T.charAt(0)=="-")return R(f(T.substring(1),y));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=c(Math.pow(y,8)),k=m,P=0;P<T.length;P+=8){var N=Math.min(8,T.length-P),x=parseInt(T.substring(P,P+N),y);8>N?(N=c(Math.pow(y,N)),k=k.j(N).add(c(x))):(k=k.j(S),k=k.add(c(x)))}return k}var m=u(0),g=u(1),I=u(16777216);t=o.prototype,t.m=function(){if(D(this))return-R(this).m();for(var T=0,y=1,S=0;S<this.g.length;S++){var k=this.i(S);T+=(0<=k?k:4294967296+k)*y,y*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(C(this))return"0";if(D(this))return"-"+R(this).toString(T);for(var y=c(Math.pow(T,6)),S=this,k="";;){var P=b(S,y).g;S=E(S,P.j(y));var N=((0<S.g.length?S.g[0]:S.h)>>>0).toString(T);if(S=P,C(S))return N+k;for(;6>N.length;)N="0"+N;k=N+k}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function C(T){if(T.h!=0)return!1;for(var y=0;y<T.g.length;y++)if(T.g[y]!=0)return!1;return!0}function D(T){return T.h==-1}t.l=function(T){return T=E(this,T),D(T)?-1:C(T)?0:1};function R(T){for(var y=T.g.length,S=[],k=0;k<y;k++)S[k]=~T.g[k];return new o(S,~T.h).add(g)}t.abs=function(){return D(this)?R(this):this},t.add=function(T){for(var y=Math.max(this.g.length,T.g.length),S=[],k=0,P=0;P<=y;P++){var N=k+(this.i(P)&65535)+(T.i(P)&65535),x=(N>>>16)+(this.i(P)>>>16)+(T.i(P)>>>16);k=x>>>16,N&=65535,x&=65535,S[P]=x<<16|N}return new o(S,S[S.length-1]&-2147483648?-1:0)};function E(T,y){return T.add(R(y))}t.j=function(T){if(C(this)||C(T))return m;if(D(this))return D(T)?R(this).j(R(T)):R(R(this).j(T));if(D(T))return R(this.j(R(T)));if(0>this.l(I)&&0>T.l(I))return c(this.m()*T.m());for(var y=this.g.length+T.g.length,S=[],k=0;k<2*y;k++)S[k]=0;for(k=0;k<this.g.length;k++)for(var P=0;P<T.g.length;P++){var N=this.i(k)>>>16,x=this.i(k)&65535,he=T.i(P)>>>16,He=T.i(P)&65535;S[2*k+2*P]+=x*He,_(S,2*k+2*P),S[2*k+2*P+1]+=N*He,_(S,2*k+2*P+1),S[2*k+2*P+1]+=x*he,_(S,2*k+2*P+1),S[2*k+2*P+2]+=N*he,_(S,2*k+2*P+2)}for(k=0;k<y;k++)S[k]=S[2*k+1]<<16|S[2*k];for(k=y;k<2*y;k++)S[k]=0;return new o(S,0)};function _(T,y){for(;(T[y]&65535)!=T[y];)T[y+1]+=T[y]>>>16,T[y]&=65535,y++}function w(T,y){this.g=T,this.h=y}function b(T,y){if(C(y))throw Error("division by zero");if(C(T))return new w(m,m);if(D(T))return y=b(R(T),y),new w(R(y.g),R(y.h));if(D(y))return y=b(T,R(y)),new w(R(y.g),y.h);if(30<T.g.length){if(D(T)||D(y))throw Error("slowDivide_ only works with positive integers.");for(var S=g,k=y;0>=k.l(T);)S=O(S),k=O(k);var P=M(S,1),N=M(k,1);for(k=M(k,2),S=M(S,2);!C(k);){var x=N.add(k);0>=x.l(T)&&(P=P.add(S),N=x),k=M(k,1),S=M(S,1)}return y=E(T,P.j(y)),new w(P,y)}for(P=m;0<=T.l(y);){for(S=Math.max(1,Math.floor(T.m()/y.m())),k=Math.ceil(Math.log(S)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),N=c(S),x=N.j(y);D(x)||0<x.l(T);)S-=k,N=c(S),x=N.j(y);C(N)&&(N=g),P=P.add(N),T=E(T,x)}return new w(P,T)}t.A=function(T){return b(this,T).h},t.and=function(T){for(var y=Math.max(this.g.length,T.g.length),S=[],k=0;k<y;k++)S[k]=this.i(k)&T.i(k);return new o(S,this.h&T.h)},t.or=function(T){for(var y=Math.max(this.g.length,T.g.length),S=[],k=0;k<y;k++)S[k]=this.i(k)|T.i(k);return new o(S,this.h|T.h)},t.xor=function(T){for(var y=Math.max(this.g.length,T.g.length),S=[],k=0;k<y;k++)S[k]=this.i(k)^T.i(k);return new o(S,this.h^T.h)};function O(T){for(var y=T.g.length+1,S=[],k=0;k<y;k++)S[k]=T.i(k)<<1|T.i(k-1)>>>31;return new o(S,T.h)}function M(T,y){var S=y>>5;y%=32;for(var k=T.g.length-S,P=[],N=0;N<k;N++)P[N]=0<y?T.i(N+S)>>>y|T.i(N+S+1)<<32-y:T.i(N+S);return new o(P,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Xw=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=f,as=o}).apply(typeof Ly<"u"?Ly:typeof self<"u"?self:typeof window<"u"?window:{});var gl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Jw,yo,Zw,Vl,Ph,eE,tE,nE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,p){return a==Array.prototype||a==Object.prototype||(a[h]=p.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof gl=="object"&&gl];for(var h=0;h<a.length;++h){var p=a[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var p=r;a=a.split(".");for(var v=0;v<a.length-1;v++){var j=a[v];if(!(j in p))break e;p=p[j]}a=a[a.length-1],v=p[a],h=h(v),h!=v&&h!=null&&e(p,a,{configurable:!0,writable:!0,value:h})}}function i(a,h){a instanceof String&&(a+="");var p=0,v=!1,j={next:function(){if(!v&&p<a.length){var L=p++;return{value:h(L,a[L]),done:!1}}return v=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}s("Array.prototype.values",function(a){return a||function(){return i(this,function(h,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function c(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function f(a,h,p){return a.call.apply(a.bind,arguments)}function m(a,h,p){if(!a)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,v),a.apply(h,j)}}return function(){return a.apply(h,arguments)}}function g(a,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,g.apply(null,arguments)}function I(a,h){var p=Array.prototype.slice.call(arguments,1);return function(){var v=p.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function C(a,h){function p(){}p.prototype=h.prototype,a.aa=h.prototype,a.prototype=new p,a.prototype.constructor=a,a.Qb=function(v,j,L){for(var $=Array(arguments.length-2),we=2;we<arguments.length;we++)$[we-2]=arguments[we];return h.prototype[j].apply(v,$)}}function D(a){const h=a.length;if(0<h){const p=Array(h);for(let v=0;v<h;v++)p[v]=a[v];return p}return[]}function R(a,h){for(let p=1;p<arguments.length;p++){const v=arguments[p];if(u(v)){const j=a.length||0,L=v.length||0;a.length=j+L;for(let $=0;$<L;$++)a[j+$]=v[$]}else a.push(v)}}class E{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function _(a){return/^[\s\xa0]*$/.test(a)}function w(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function b(a){return b[" "](a),a}b[" "]=function(){};var O=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function M(a,h,p){for(const v in a)h.call(p,a[v],v,a)}function T(a,h){for(const p in a)h.call(void 0,a[p],p,a)}function y(a){const h={};for(const p in a)h[p]=a[p];return h}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(a,h){let p,v;for(let j=1;j<arguments.length;j++){v=arguments[j];for(p in v)a[p]=v[p];for(let L=0;L<S.length;L++)p=S[L],Object.prototype.hasOwnProperty.call(v,p)&&(a[p]=v[p])}}function P(a){var h=1;a=a.split(":");const p=[];for(;0<h&&a.length;)p.push(a.shift()),h--;return a.length&&p.push(a.join(":")),p}function N(a){l.setTimeout(()=>{throw a},0)}function x(){var a=W;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class he{constructor(){this.h=this.g=null}add(h,p){const v=He.get();v.set(h,p),this.h?this.h.next=v:this.g=v,this.h=v}}var He=new E(()=>new qe,a=>a.reset());class qe{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Oe,V=!1,W=new he,G=()=>{const a=l.Promise.resolve(void 0);Oe=()=>{a.then(Q)}};var Q=()=>{for(var a;a=x();){try{a.h.call(a.g)}catch(p){N(p)}var h=He;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}V=!1};function te(){this.s=this.s,this.C=this.C}te.prototype.s=!1,te.prototype.ma=function(){this.s||(this.s=!0,this.N())},te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Z(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}Z.prototype.h=function(){this.defaultPrevented=!0};var se=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const p=()=>{};l.addEventListener("test",p,h),l.removeEventListener("test",p,h)}catch{}return a}();function Te(a,h){if(Z.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var p=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(O){e:{try{b(h.nodeName);var j=!0;break e}catch{}j=!1}j||(h=null)}}else p=="mouseover"?h=a.fromElement:p=="mouseout"&&(h=a.toElement);this.relatedTarget=h,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Ue[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Te.aa.h.call(this)}}C(Te,Z);var Ue={2:"touch",3:"pen",4:"mouse"};Te.prototype.h=function(){Te.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Be="closure_listenable_"+(1e6*Math.random()|0),Hr=0;function qr(a,h,p,v,j){this.listener=a,this.proxy=null,this.src=h,this.type=p,this.capture=!!v,this.ha=j,this.key=++Hr,this.da=this.fa=!1}function Mt(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function tr(a){this.src=a,this.g={},this.h=0}tr.prototype.add=function(a,h,p,v,j){var L=a.toString();a=this.g[L],a||(a=this.g[L]=[],this.h++);var $=nr(a,h,v,j);return-1<$?(h=a[$],p||(h.fa=!1)):(h=new qr(h,this.src,L,!!v,j),h.fa=p,a.push(h)),h};function rt(a,h){var p=h.type;if(p in a.g){var v=a.g[p],j=Array.prototype.indexOf.call(v,h,void 0),L;(L=0<=j)&&Array.prototype.splice.call(v,j,1),L&&(Mt(h),a.g[p].length==0&&(delete a.g[p],a.h--))}}function nr(a,h,p,v){for(var j=0;j<a.length;++j){var L=a[j];if(!L.da&&L.listener==h&&L.capture==!!p&&L.ha==v)return j}return-1}var pn="closure_lm_"+(1e6*Math.random()|0),Vi={};function Mi(a,h,p,v,j){if(Array.isArray(h)){for(var L=0;L<h.length;L++)Mi(a,h[L],p,v,j);return null}return p=La(p),a&&a[Be]?a.K(h,p,c(v)?!!v.capture:!1,j):Ec(a,h,p,!1,v,j)}function Ec(a,h,p,v,j,L){if(!h)throw Error("Invalid event type");var $=c(j)?!!j.capture:!!j,we=Bi(a);if(we||(a[pn]=we=new tr(a)),p=we.add(h,p,v,$,L),p.proxy)return p;if(v=Oa(),p.proxy=v,v.src=a,v.listener=p,a.addEventListener)se||(j=$),j===void 0&&(j=!1),a.addEventListener(h.toString(),v,j);else if(a.attachEvent)a.attachEvent(Ui(h.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return p}function Oa(){function a(p){return h.call(a.src,a.listener,p)}const h=Tc;return a}function Fi(a,h,p,v,j){if(Array.isArray(h))for(var L=0;L<h.length;L++)Fi(a,h[L],p,v,j);else v=c(v)?!!v.capture:!!v,p=La(p),a&&a[Be]?(a=a.i,h=String(h).toString(),h in a.g&&(L=a.g[h],p=nr(L,p,v,j),-1<p&&(Mt(L[p]),Array.prototype.splice.call(L,p,1),L.length==0&&(delete a.g[h],a.h--)))):a&&(a=Bi(a))&&(h=a.g[h.toString()],a=-1,h&&(a=nr(h,p,v,j)),(p=-1<a?h[a]:null)&&ks(p))}function ks(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[Be])rt(h.i,a);else{var p=a.type,v=a.proxy;h.removeEventListener?h.removeEventListener(p,v,a.capture):h.detachEvent?h.detachEvent(Ui(p),v):h.addListener&&h.removeListener&&h.removeListener(v),(p=Bi(h))?(rt(p,a),p.h==0&&(p.src=null,h[pn]=null)):Mt(a)}}}function Ui(a){return a in Vi?Vi[a]:Vi[a]="on"+a}function Tc(a,h){if(a.da)a=!0;else{h=new Te(h,this);var p=a.listener,v=a.ha||a.src;a.fa&&ks(a),a=p.call(v,h)}return a}function Bi(a){return a=a[pn],a instanceof tr?a:null}var xs="__closure_events_fn_"+(1e9*Math.random()>>>0);function La(a){return typeof a=="function"?a:(a[xs]||(a[xs]=function(h){return a.handleEvent(h)}),a[xs])}function Je(){te.call(this),this.i=new tr(this),this.M=this,this.F=null}C(Je,te),Je.prototype[Be]=!0,Je.prototype.removeEventListener=function(a,h,p,v){Fi(this,a,h,p,v)};function B(a,h){var p,v=a.F;if(v)for(p=[];v;v=v.F)p.push(v);if(a=a.M,v=h.type||h,typeof h=="string")h=new Z(h,a);else if(h instanceof Z)h.target=h.target||a;else{var j=h;h=new Z(v,a),k(h,j)}if(j=!0,p)for(var L=p.length-1;0<=L;L--){var $=h.g=p[L];j=ie($,v,!0,h)&&j}if($=h.g=a,j=ie($,v,!0,h)&&j,j=ie($,v,!1,h)&&j,p)for(L=0;L<p.length;L++)$=h.g=p[L],j=ie($,v,!1,h)&&j}Je.prototype.N=function(){if(Je.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var p=a.g[h],v=0;v<p.length;v++)Mt(p[v]);delete a.g[h],a.h--}}this.F=null},Je.prototype.K=function(a,h,p,v){return this.i.add(String(a),h,!1,p,v)},Je.prototype.L=function(a,h,p,v){return this.i.add(String(a),h,!0,p,v)};function ie(a,h,p,v){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var j=!0,L=0;L<h.length;++L){var $=h[L];if($&&!$.da&&$.capture==p){var we=$.listener,it=$.ha||$.src;$.fa&&rt(a.i,$),j=we.call(it,v)!==!1&&j}}return j&&!v.defaultPrevented}function _e(a,h,p){if(typeof a=="function")p&&(a=g(a,p));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(a,h||0)}function ge(a){a.g=_e(()=>{a.g=null,a.i&&(a.i=!1,ge(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class st extends te{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:ge(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function St(a){te.call(this),this.h=a,this.g={}}C(St,te);var mn=[];function zi(a){M(a.g,function(h,p){this.g.hasOwnProperty(p)&&ks(h)},a),a.g={}}St.prototype.N=function(){St.aa.N.call(this),zi(this)},St.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ic=l.JSON.stringify,DT=l.JSON.parse,jT=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Sc(){}Sc.prototype.h=null;function Jp(a){return a.h||(a.h=a.i())}function Zp(){}var $i={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function kc(){Z.call(this,"d")}C(kc,Z);function xc(){Z.call(this,"c")}C(xc,Z);var Kr={},em=null;function Va(){return em=em||new Je}Kr.La="serverreachability";function tm(a){Z.call(this,Kr.La,a)}C(tm,Z);function Wi(a){const h=Va();B(h,new tm(h))}Kr.STAT_EVENT="statevent";function nm(a,h){Z.call(this,Kr.STAT_EVENT,a),this.stat=h}C(nm,Z);function kt(a){const h=Va();B(h,new nm(h,a))}Kr.Ma="timingevent";function rm(a,h){Z.call(this,Kr.Ma,a),this.size=h}C(rm,Z);function Hi(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},h)}function qi(){this.g=!0}qi.prototype.xa=function(){this.g=!1};function OT(a,h,p,v,j,L){a.info(function(){if(a.g)if(L)for(var $="",we=L.split("&"),it=0;it<we.length;it++){var fe=we[it].split("=");if(1<fe.length){var ft=fe[0];fe=fe[1];var pt=ft.split("_");$=2<=pt.length&&pt[1]=="type"?$+(ft+"="+fe+"&"):$+(ft+"=redacted&")}}else $=null;else $=L;return"XMLHTTP REQ ("+v+") [attempt "+j+"]: "+h+`
`+p+`
`+$})}function LT(a,h,p,v,j,L,$){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+j+"]: "+h+`
`+p+`
`+L+" "+$})}function As(a,h,p,v){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+MT(a,p)+(v?" "+v:"")})}function VT(a,h){a.info(function(){return"TIMEOUT: "+h})}qi.prototype.info=function(){};function MT(a,h){if(!a.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(a=0;a<p.length;a++)if(Array.isArray(p[a])){var v=p[a];if(!(2>v.length)){var j=v[1];if(Array.isArray(j)&&!(1>j.length)){var L=j[0];if(L!="noop"&&L!="stop"&&L!="close")for(var $=1;$<j.length;$++)j[$]=""}}}}return Ic(p)}catch{return h}}var Ma={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},sm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ac;function Fa(){}C(Fa,Sc),Fa.prototype.g=function(){return new XMLHttpRequest},Fa.prototype.i=function(){return{}},Ac=new Fa;function rr(a,h,p,v){this.j=a,this.i=h,this.l=p,this.R=v||1,this.U=new St(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new im}function im(){this.i=null,this.g="",this.h=!1}var om={},Cc={};function Nc(a,h,p){a.L=1,a.v=$a(Cn(h)),a.m=p,a.P=!0,am(a,null)}function am(a,h){a.F=Date.now(),Ua(a),a.A=Cn(a.v);var p=a.A,v=a.R;Array.isArray(v)||(v=[String(v)]),Em(p.i,"t",v),a.C=0,p=a.j.J,a.h=new im,a.g=Fm(a.j,p?h:null,!a.m),0<a.O&&(a.M=new st(g(a.Y,a,a.g),a.O)),h=a.U,p=a.g,v=a.ca;var j="readystatechange";Array.isArray(j)||(j&&(mn[0]=j.toString()),j=mn);for(var L=0;L<j.length;L++){var $=Mi(p,j[L],v||h.handleEvent,!1,h.h||h);if(!$)break;h.g[$.key]=$}h=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),Wi(),OT(a.i,a.u,a.A,a.l,a.R,a.m)}rr.prototype.ca=function(a){a=a.target;const h=this.M;h&&Nn(a)==3?h.j():this.Y(a)},rr.prototype.Y=function(a){try{if(a==this.g)e:{const pt=Nn(this.g);var h=this.g.Ba();const Rs=this.g.Z();if(!(3>pt)&&(pt!=3||this.g&&(this.h.h||this.g.oa()||Cm(this.g)))){this.J||pt!=4||h==7||(h==8||0>=Rs?Wi(3):Wi(2)),Rc(this);var p=this.g.Z();this.X=p;t:if(lm(this)){var v=Cm(this.g);a="";var j=v.length,L=Nn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Gr(this),Ki(this);var $="";break t}this.h.i=new l.TextDecoder}for(h=0;h<j;h++)this.h.h=!0,a+=this.h.i.decode(v[h],{stream:!(L&&h==j-1)});v.length=0,this.h.g+=a,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=p==200,LT(this.i,this.u,this.A,this.l,this.R,pt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var we,it=this.g;if((we=it.g?it.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(we)){var fe=we;break t}}fe=null}if(p=fe)As(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Pc(this,p);else{this.o=!1,this.s=3,kt(12),Gr(this),Ki(this);break e}}if(this.P){p=!0;let tn;for(;!this.J&&this.C<$.length;)if(tn=FT(this,$),tn==Cc){pt==4&&(this.s=4,kt(14),p=!1),As(this.i,this.l,null,"[Incomplete Response]");break}else if(tn==om){this.s=4,kt(15),As(this.i,this.l,$,"[Invalid Chunk]"),p=!1;break}else As(this.i,this.l,tn,null),Pc(this,tn);if(lm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pt!=4||$.length!=0||this.h.h||(this.s=1,kt(16),p=!1),this.o=this.o&&p,!p)As(this.i,this.l,$,"[Invalid Chunked Response]"),Gr(this),Ki(this);else if(0<$.length&&!this.W){this.W=!0;var ft=this.j;ft.g==this&&ft.ba&&!ft.M&&(ft.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),Vc(ft),ft.M=!0,kt(11))}}else As(this.i,this.l,$,null),Pc(this,$);pt==4&&Gr(this),this.o&&!this.J&&(pt==4?Om(this.j,this):(this.o=!1,Ua(this)))}else nI(this.g),p==400&&0<$.indexOf("Unknown SID")?(this.s=3,kt(12)):(this.s=0,kt(13)),Gr(this),Ki(this)}}}catch{}finally{}};function lm(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function FT(a,h){var p=a.C,v=h.indexOf(`
`,p);return v==-1?Cc:(p=Number(h.substring(p,v)),isNaN(p)?om:(v+=1,v+p>h.length?Cc:(h=h.slice(v,v+p),a.C=v+p,h)))}rr.prototype.cancel=function(){this.J=!0,Gr(this)};function Ua(a){a.S=Date.now()+a.I,um(a,a.I)}function um(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Hi(g(a.ba,a),h)}function Rc(a){a.B&&(l.clearTimeout(a.B),a.B=null)}rr.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(VT(this.i,this.A),this.L!=2&&(Wi(),kt(17)),Gr(this),this.s=2,Ki(this)):um(this,this.S-a)};function Ki(a){a.j.G==0||a.J||Om(a.j,a)}function Gr(a){Rc(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,zi(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function Pc(a,h){try{var p=a.j;if(p.G!=0&&(p.g==a||bc(p.h,a))){if(!a.K&&bc(p.h,a)&&p.G==3){try{var v=p.Da.g.parse(h)}catch{v=null}if(Array.isArray(v)&&v.length==3){var j=v;if(j[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<a.F)Qa(p),Ka(p);else break e;Lc(p),kt(18)}}else p.za=j[1],0<p.za-p.T&&37500>j[2]&&p.F&&p.v==0&&!p.C&&(p.C=Hi(g(p.Za,p),6e3));if(1>=hm(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Yr(p,11)}else if((a.K||p.g==a)&&Qa(p),!_(h))for(j=p.Da.g.parse(h),h=0;h<j.length;h++){let fe=j[h];if(p.T=fe[0],fe=fe[1],p.G==2)if(fe[0]=="c"){p.K=fe[1],p.ia=fe[2];const ft=fe[3];ft!=null&&(p.la=ft,p.j.info("VER="+p.la));const pt=fe[4];pt!=null&&(p.Aa=pt,p.j.info("SVER="+p.Aa));const Rs=fe[5];Rs!=null&&typeof Rs=="number"&&0<Rs&&(v=1.5*Rs,p.L=v,p.j.info("backChannelRequestTimeoutMs_="+v)),v=p;const tn=a.g;if(tn){const Xa=tn.g?tn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xa){var L=v.h;L.g||Xa.indexOf("spdy")==-1&&Xa.indexOf("quic")==-1&&Xa.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(Dc(L,L.h),L.h=null))}if(v.D){const Mc=tn.g?tn.g.getResponseHeader("X-HTTP-Session-Id"):null;Mc&&(v.ya=Mc,Ie(v.I,v.D,Mc))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-a.F,p.j.info("Handshake RTT: "+p.R+"ms")),v=p;var $=a;if(v.qa=Mm(v,v.J?v.ia:null,v.W),$.K){fm(v.h,$);var we=$,it=v.L;it&&(we.I=it),we.B&&(Rc(we),Ua(we)),v.g=$}else Dm(v);0<p.i.length&&Ga(p)}else fe[0]!="stop"&&fe[0]!="close"||Yr(p,7);else p.G==3&&(fe[0]=="stop"||fe[0]=="close"?fe[0]=="stop"?Yr(p,7):Oc(p):fe[0]!="noop"&&p.l&&p.l.ta(fe),p.v=0)}}Wi(4)}catch{}}var UT=class{constructor(a,h){this.g=a,this.map=h}};function cm(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function dm(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function hm(a){return a.h?1:a.g?a.g.size:0}function bc(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function Dc(a,h){a.g?a.g.add(h):a.h=h}function fm(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}cm.prototype.cancel=function(){if(this.i=pm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function pm(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const p of a.g.values())h=h.concat(p.D);return h}return D(a.i)}function BT(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var h=[],p=a.length,v=0;v<p;v++)h.push(a[v]);return h}h=[],p=0;for(v in a)h[p++]=a[v];return h}function zT(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var h=[];a=a.length;for(var p=0;p<a;p++)h.push(p);return h}h=[],p=0;for(const v in a)h[p++]=v;return h}}}function mm(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var p=zT(a),v=BT(a),j=v.length,L=0;L<j;L++)h.call(void 0,v[L],p&&p[L],a)}var gm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $T(a,h){if(a){a=a.split("&");for(var p=0;p<a.length;p++){var v=a[p].indexOf("="),j=null;if(0<=v){var L=a[p].substring(0,v);j=a[p].substring(v+1)}else L=a[p];h(L,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Qr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Qr){this.h=a.h,Ba(this,a.j),this.o=a.o,this.g=a.g,za(this,a.s),this.l=a.l;var h=a.i,p=new Yi;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),ym(this,p),this.m=a.m}else a&&(h=String(a).match(gm))?(this.h=!1,Ba(this,h[1]||"",!0),this.o=Gi(h[2]||""),this.g=Gi(h[3]||"",!0),za(this,h[4]),this.l=Gi(h[5]||"",!0),ym(this,h[6]||"",!0),this.m=Gi(h[7]||"")):(this.h=!1,this.i=new Yi(null,this.h))}Qr.prototype.toString=function(){var a=[],h=this.j;h&&a.push(Qi(h,vm,!0),":");var p=this.g;return(p||h=="file")&&(a.push("//"),(h=this.o)&&a.push(Qi(h,vm,!0),"@"),a.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&a.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(Qi(p,p.charAt(0)=="/"?qT:HT,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",Qi(p,GT)),a.join("")};function Cn(a){return new Qr(a)}function Ba(a,h,p){a.j=p?Gi(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function za(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function ym(a,h,p){h instanceof Yi?(a.i=h,QT(a.i,a.h)):(p||(h=Qi(h,KT)),a.i=new Yi(h,a.h))}function Ie(a,h,p){a.i.set(h,p)}function $a(a){return Ie(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Gi(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Qi(a,h,p){return typeof a=="string"?(a=encodeURI(a).replace(h,WT),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function WT(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var vm=/[#\/\?@]/g,HT=/[#\?:]/g,qT=/[#\?]/g,KT=/[#\?@]/g,GT=/#/g;function Yi(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function sr(a){a.g||(a.g=new Map,a.h=0,a.i&&$T(a.i,function(h,p){a.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=Yi.prototype,t.add=function(a,h){sr(this),this.i=null,a=Cs(this,a);var p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(h),this.h+=1,this};function _m(a,h){sr(a),h=Cs(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function wm(a,h){return sr(a),h=Cs(a,h),a.g.has(h)}t.forEach=function(a,h){sr(this),this.g.forEach(function(p,v){p.forEach(function(j){a.call(h,j,v,this)},this)},this)},t.na=function(){sr(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let v=0;v<h.length;v++){const j=a[v];for(let L=0;L<j.length;L++)p.push(h[v])}return p},t.V=function(a){sr(this);let h=[];if(typeof a=="string")wm(this,a)&&(h=h.concat(this.g.get(Cs(this,a))));else{a=Array.from(this.g.values());for(let p=0;p<a.length;p++)h=h.concat(a[p])}return h},t.set=function(a,h){return sr(this),this.i=null,a=Cs(this,a),wm(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function Em(a,h,p){_m(a,h),0<p.length&&(a.i=null,a.g.set(Cs(a,h),D(p)),a.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var v=h[p];const L=encodeURIComponent(String(v)),$=this.V(v);for(v=0;v<$.length;v++){var j=L;$[v]!==""&&(j+="="+encodeURIComponent(String($[v]))),a.push(j)}}return this.i=a.join("&")};function Cs(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function QT(a,h){h&&!a.j&&(sr(a),a.i=null,a.g.forEach(function(p,v){var j=v.toLowerCase();v!=j&&(_m(this,v),Em(this,j,p))},a)),a.j=h}function YT(a,h){const p=new qi;if(l.Image){const v=new Image;v.onload=I(ir,p,"TestLoadImage: loaded",!0,h,v),v.onerror=I(ir,p,"TestLoadImage: error",!1,h,v),v.onabort=I(ir,p,"TestLoadImage: abort",!1,h,v),v.ontimeout=I(ir,p,"TestLoadImage: timeout",!1,h,v),l.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else h(!1)}function XT(a,h){const p=new qi,v=new AbortController,j=setTimeout(()=>{v.abort(),ir(p,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:v.signal}).then(L=>{clearTimeout(j),L.ok?ir(p,"TestPingServer: ok",!0,h):ir(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(j),ir(p,"TestPingServer: error",!1,h)})}function ir(a,h,p,v,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),v(p)}catch{}}function JT(){this.g=new jT}function ZT(a,h,p){const v=p||"";try{mm(a,function(j,L){let $=j;c(j)&&($=Ic(j)),h.push(v+L+"="+encodeURIComponent($))})}catch(j){throw h.push(v+"type="+encodeURIComponent("_badmap")),j}}function Wa(a){this.l=a.Ub||null,this.j=a.eb||!1}C(Wa,Sc),Wa.prototype.g=function(){return new Ha(this.l,this.j)},Wa.prototype.i=function(a){return function(){return a}}({});function Ha(a,h){Je.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Ha,Je),t=Ha.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,Ji(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Xi(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Ji(this)),this.g&&(this.readyState=3,Ji(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Tm(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Tm(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?Xi(this):Ji(this),this.readyState==3&&Tm(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Xi(this))},t.Qa=function(a){this.g&&(this.response=a,Xi(this))},t.ga=function(){this.g&&Xi(this)};function Xi(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Ji(a)}t.setRequestHeader=function(a,h){this.u.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=h.next();return a.join(`\r
`)};function Ji(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Ha.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Im(a){let h="";return M(a,function(p,v){h+=v,h+=":",h+=p,h+=`\r
`}),h}function jc(a,h,p){e:{for(v in p){var v=!1;break e}v=!0}v||(p=Im(p),typeof a=="string"?p!=null&&encodeURIComponent(String(p)):Ie(a,h,p))}function De(a){Je.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(De,Je);var eI=/^https?$/i,tI=["POST","PUT"];t=De.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,h,p,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ac.g(),this.v=this.o?Jp(this.o):Jp(Ac),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(L){Sm(this,L);return}if(a=p||"",p=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var j in v)p.set(j,v[j]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const L of v.keys())p.set(L,v.get(L));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(p.keys()).find(L=>L.toLowerCase()=="content-type"),j=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(tI,h,void 0))||v||j||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,$]of p)this.g.setRequestHeader(L,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Am(this),this.u=!0,this.g.send(a),this.u=!1}catch(L){Sm(this,L)}};function Sm(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,km(a),qa(a)}function km(a){a.A||(a.A=!0,B(a,"complete"),B(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,B(this,"complete"),B(this,"abort"),qa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qa(this,!0)),De.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?xm(this):this.bb())},t.bb=function(){xm(this)};function xm(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Nn(a)!=4||a.Z()!=2)){if(a.u&&Nn(a)==4)_e(a.Ea,0,a);else if(B(a,"readystatechange"),Nn(a)==4){a.h=!1;try{const $=a.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var v;if(v=$===0){var j=String(a.D).match(gm)[1]||null;!j&&l.self&&l.self.location&&(j=l.self.location.protocol.slice(0,-1)),v=!eI.test(j?j.toLowerCase():"")}p=v}if(p)B(a,"complete"),B(a,"success");else{a.m=6;try{var L=2<Nn(a)?a.g.statusText:""}catch{L=""}a.l=L+" ["+a.Z()+"]",km(a)}}finally{qa(a)}}}}function qa(a,h){if(a.g){Am(a);const p=a.g,v=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||B(a,"ready");try{p.onreadystatechange=v}catch{}}}function Am(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Nn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Nn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),DT(h)}};function Cm(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function nI(a){const h={};a=(a.g&&2<=Nn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(_(a[v]))continue;var p=P(a[v]);const j=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const L=h[j]||[];h[j]=L,L.push(p)}T(h,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Zi(a,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||h}function Nm(a){this.Aa=0,this.i=[],this.j=new qi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Zi("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Zi("baseRetryDelayMs",5e3,a),this.cb=Zi("retryDelaySeedMs",1e4,a),this.Wa=Zi("forwardChannelMaxRetries",2,a),this.wa=Zi("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new cm(a&&a.concurrentRequestLimit),this.Da=new JT,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Nm.prototype,t.la=8,t.G=1,t.connect=function(a,h,p,v){kt(0),this.W=a,this.H=h||{},p&&v!==void 0&&(this.H.OSID=p,this.H.OAID=v),this.F=this.X,this.I=Mm(this,null,this.W),Ga(this)};function Oc(a){if(Rm(a),a.G==3){var h=a.U++,p=Cn(a.I);if(Ie(p,"SID",a.K),Ie(p,"RID",h),Ie(p,"TYPE","terminate"),eo(a,p),h=new rr(a,a.j,h),h.L=2,h.v=$a(Cn(p)),p=!1,l.navigator&&l.navigator.sendBeacon)try{p=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&l.Image&&(new Image().src=h.v,p=!0),p||(h.g=Fm(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Ua(h)}Vm(a)}function Ka(a){a.g&&(Vc(a),a.g.cancel(),a.g=null)}function Rm(a){Ka(a),a.u&&(l.clearTimeout(a.u),a.u=null),Qa(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function Ga(a){if(!dm(a.h)&&!a.s){a.s=!0;var h=a.Ga;Oe||G(),V||(Oe(),V=!0),W.add(h,a),a.B=0}}function rI(a,h){return hm(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Hi(g(a.Ga,a,h),Lm(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const j=new rr(this,this.j,a);let L=this.o;if(this.S&&(L?(L=y(L),k(L,this.S)):L=this.S),this.m!==null||this.O||(j.H=L,L=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var v=this.i[p];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(h+=v,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=bm(this,j,h),p=Cn(this.I),Ie(p,"RID",a),Ie(p,"CVER",22),this.D&&Ie(p,"X-HTTP-Session-Id",this.D),eo(this,p),L&&(this.O?h="headers="+encodeURIComponent(String(Im(L)))+"&"+h:this.m&&jc(p,this.m,L)),Dc(this.h,j),this.Ua&&Ie(p,"TYPE","init"),this.P?(Ie(p,"$req",h),Ie(p,"SID","null"),j.T=!0,Nc(j,p,null)):Nc(j,p,h),this.G=2}}else this.G==3&&(a?Pm(this,a):this.i.length==0||dm(this.h)||Pm(this))};function Pm(a,h){var p;h?p=h.l:p=a.U++;const v=Cn(a.I);Ie(v,"SID",a.K),Ie(v,"RID",p),Ie(v,"AID",a.T),eo(a,v),a.m&&a.o&&jc(v,a.m,a.o),p=new rr(a,a.j,p,a.B+1),a.m===null&&(p.H=a.o),h&&(a.i=h.D.concat(a.i)),h=bm(a,p,1e3),p.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Dc(a.h,p),Nc(p,v,h)}function eo(a,h){a.H&&M(a.H,function(p,v){Ie(h,v,p)}),a.l&&mm({},function(p,v){Ie(h,v,p)})}function bm(a,h,p){p=Math.min(a.i.length,p);var v=a.l?g(a.l.Na,a.l,a):null;e:{var j=a.i;let L=-1;for(;;){const $=["count="+p];L==-1?0<p?(L=j[0].g,$.push("ofs="+L)):L=0:$.push("ofs="+L);let we=!0;for(let it=0;it<p;it++){let fe=j[it].g;const ft=j[it].map;if(fe-=L,0>fe)L=Math.max(0,j[it].g-100),we=!1;else try{ZT(ft,$,"req"+fe+"_")}catch{v&&v(ft)}}if(we){v=$.join("&");break e}}}return a=a.i.splice(0,p),h.D=a,v}function Dm(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;Oe||G(),V||(Oe(),V=!0),W.add(h,a),a.v=0}}function Lc(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Hi(g(a.Fa,a),Lm(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,jm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Hi(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,kt(10),Ka(this),jm(this))};function Vc(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function jm(a){a.g=new rr(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=Cn(a.qa);Ie(h,"RID","rpc"),Ie(h,"SID",a.K),Ie(h,"AID",a.T),Ie(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&Ie(h,"TO",a.ja),Ie(h,"TYPE","xmlhttp"),eo(a,h),a.m&&a.o&&jc(h,a.m,a.o),a.L&&(a.g.I=a.L);var p=a.g;a=a.ia,p.L=1,p.v=$a(Cn(h)),p.m=null,p.P=!0,am(p,a)}t.Za=function(){this.C!=null&&(this.C=null,Ka(this),Lc(this),kt(19))};function Qa(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Om(a,h){var p=null;if(a.g==h){Qa(a),Vc(a),a.g=null;var v=2}else if(bc(a.h,h))p=h.D,fm(a.h,h),v=1;else return;if(a.G!=0){if(h.o)if(v==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var j=a.B;v=Va(),B(v,new rm(v,p)),Ga(a)}else Dm(a);else if(j=h.s,j==3||j==0&&0<h.X||!(v==1&&rI(a,h)||v==2&&Lc(a)))switch(p&&0<p.length&&(h=a.h,h.i=h.i.concat(p)),j){case 1:Yr(a,5);break;case 4:Yr(a,10);break;case 3:Yr(a,6);break;default:Yr(a,2)}}}function Lm(a,h){let p=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(p*=2),p*h}function Yr(a,h){if(a.j.info("Error code "+h),h==2){var p=g(a.fb,a),v=a.Xa;const j=!v;v=new Qr(v||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ba(v,"https"),$a(v),j?YT(v.toString(),p):XT(v.toString(),p)}else kt(2);a.G=0,a.l&&a.l.sa(h),Vm(a),Rm(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function Vm(a){if(a.G=0,a.ka=[],a.l){const h=pm(a.h);(h.length!=0||a.i.length!=0)&&(R(a.ka,h),R(a.ka,a.i),a.h.i.length=0,D(a.i),a.i.length=0),a.l.ra()}}function Mm(a,h,p){var v=p instanceof Qr?Cn(p):new Qr(p);if(v.g!="")h&&(v.g=h+"."+v.g),za(v,v.s);else{var j=l.location;v=j.protocol,h=h?h+"."+j.hostname:j.hostname,j=+j.port;var L=new Qr(null);v&&Ba(L,v),h&&(L.g=h),j&&za(L,j),p&&(L.l=p),v=L}return p=a.D,h=a.ya,p&&h&&Ie(v,p,h),Ie(v,"VER",a.la),eo(a,v),v}function Fm(a,h,p){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new De(new Wa({eb:p})):new De(a.pa),h.Ha(a.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Um(){}t=Um.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ya(){}Ya.prototype.g=function(a,h){return new Ft(a,h)};function Ft(a,h){Je.call(this),this.g=new Nm(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!_(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!_(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new Ns(this)}C(Ft,Je),Ft.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ft.prototype.close=function(){Oc(this.g)},Ft.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.u&&(p={},p.__data__=Ic(a),a=p);h.i.push(new UT(h.Ya++,a)),h.G==3&&Ga(h)},Ft.prototype.N=function(){this.g.l=null,delete this.j,Oc(this.g),delete this.g,Ft.aa.N.call(this)};function Bm(a){kc.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const p in h){a=p;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}C(Bm,kc);function zm(){xc.call(this),this.status=1}C(zm,xc);function Ns(a){this.g=a}C(Ns,Um),Ns.prototype.ua=function(){B(this.g,"a")},Ns.prototype.ta=function(a){B(this.g,new Bm(a))},Ns.prototype.sa=function(a){B(this.g,new zm)},Ns.prototype.ra=function(){B(this.g,"b")},Ya.prototype.createWebChannel=Ya.prototype.g,Ft.prototype.send=Ft.prototype.o,Ft.prototype.open=Ft.prototype.m,Ft.prototype.close=Ft.prototype.close,nE=function(){return new Ya},tE=function(){return Va()},eE=Kr,Ph={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ma.NO_ERROR=0,Ma.TIMEOUT=8,Ma.HTTP_ERROR=6,Vl=Ma,sm.COMPLETE="complete",Zw=sm,Zp.EventType=$i,$i.OPEN="a",$i.CLOSE="b",$i.ERROR="c",$i.MESSAGE="d",Je.prototype.listen=Je.prototype.K,yo=Zp,De.prototype.listenOnce=De.prototype.L,De.prototype.getLastError=De.prototype.Ka,De.prototype.getLastErrorCode=De.prototype.Ba,De.prototype.getStatus=De.prototype.Z,De.prototype.getResponseJson=De.prototype.Oa,De.prototype.getResponseText=De.prototype.oa,De.prototype.send=De.prototype.ea,De.prototype.setWithCredentials=De.prototype.Ha,Jw=De}).apply(typeof gl<"u"?gl:typeof self<"u"?self:typeof window<"u"?window:{});const Vy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};vt.UNAUTHENTICATED=new vt(null),vt.GOOGLE_CREDENTIALS=new vt("google-credentials-uid"),vt.FIRST_PARTY=new vt("first-party-uid"),vt.MOCK_USER=new vt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pi="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys=new Qf("@firebase/firestore");function uo(){return ys.logLevel}function K(t,...e){if(ys.logLevel<=ue.DEBUG){const n=e.map(ap);ys.debug(`Firestore (${Pi}): ${t}`,...n)}}function Gn(t,...e){if(ys.logLevel<=ue.ERROR){const n=e.map(ap);ys.error(`Firestore (${Pi}): ${t}`,...n)}}function fi(t,...e){if(ys.logLevel<=ue.WARN){const n=e.map(ap);ys.warn(`Firestore (${Pi}): ${t}`,...n)}}function ap(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(t="Unexpected state"){const e=`FIRESTORE (${Pi}) INTERNAL ASSERTION FAILED: `+t;throw Gn(e),new Error(e)}function ve(t,e){t||ee()}function re(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class H extends Zn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class CN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(vt.UNAUTHENTICATED))}shutdown(){}}class NN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class RN{constructor(e){this.t=e,this.currentUser=vt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ve(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Bn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Bn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Bn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ve(typeof r.accessToken=="string"),new rE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string"),new vt(e)}}class PN{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=vt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class bN{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new PN(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(vt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class DN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jN{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ve(this.o===void 0);const r=i=>{i.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,K("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ve(typeof n.token=="string"),this.R=n.token,new DN(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ON(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=ON(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function me(t,e){return t<e?-1:t>e?1:0}function pi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new H(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new H(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new H(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Qe.fromMillis(Date.now())}static fromDate(e){return Qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Qe(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ne(e)}static min(){return new ne(new Qe(0,0))}static max(){return new ne(new Qe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,n,r){n===void 0?n=0:n>e.length&&ee(),r===void 0?r=e.length-n:r>e.length-n&&ee(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return sa.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof sa?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ke extends sa{construct(e,n,r){return new ke(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new H(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ke(n)}static emptyPath(){return new ke([])}}const LN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lt extends sa{construct(e,n,r){return new lt(e,n,r)}static isValidIdentifier(e){return LN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new lt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new H(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new H(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new H(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new H(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lt(n)}static emptyPath(){return new lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.path=e}static fromPath(e){return new X(ke.fromString(e))}static fromName(e){return new X(ke.fromString(e).popFirst(5))}static empty(){return new X(ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ke.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new X(new ke(e.slice()))}}function VN(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ne.fromTimestamp(r===1e9?new Qe(n+1,0):new Qe(n,r));return new Or(s,X.empty(),e)}function MN(t){return new Or(t.readTime,t.key,-1)}class Or{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Or(ne.min(),X.empty(),-1)}static max(){return new Or(ne.max(),X.empty(),-1)}}function FN(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=X.comparator(t.documentKey,e.documentKey),n!==0?n:me(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class BN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ka(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==UN)throw t;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const c=u;n(e[c]).next(f=>{o[c]=f,++l,l===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new U((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function zN(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function xa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}lp.oe=-1;function ec(t){return t==null}function wu(t){return t===0&&1/t==-1/0}function $N(t){return typeof t=="number"&&Number.isInteger(t)&&!wu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function My(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Is(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function iE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e,n){this.comparator=e,this.root=n||at.EMPTY}insert(e,n){return new be(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,at.BLACK,null,null))}remove(e){return new be(this.comparator,this.root.remove(e,this.comparator).copy(null,null,at.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yl(this.root,e,this.comparator,!1)}getReverseIterator(){return new yl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yl(this.root,e,this.comparator,!0)}}class yl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class at{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??at.RED,this.left=s??at.EMPTY,this.right=i??at.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new at(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return at.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return at.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,at.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,at.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ee();const e=this.left.check();if(e!==this.right.check())throw ee();return e+(this.isRed()?0:1)}}at.EMPTY=null,at.RED=!0,at.BLACK=!1;at.EMPTY=new class{constructor(){this.size=0}get key(){throw ee()}get value(){throw ee()}get color(){throw ee()}get left(){throw ee()}get right(){throw ee()}copy(e,n,r,s,i){return this}insert(e,n,r){return new at(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.comparator=e,this.data=new be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Fy(this.data.getIterator())}getIteratorFrom(e){return new Fy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ct)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ct(this.comparator);return n.data=e,n}}class Fy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.fields=e,e.sort(lt.comparator)}static empty(){return new zt([])}unionWith(e){let n=new ct(lt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new zt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return pi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new oE("Invalid base64 string: "+i):i}}(e);return new ht(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new ht(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ht.EMPTY_BYTE_STRING=new ht("");const WN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Lr(t){if(ve(!!t),typeof t=="string"){let e=0;const n=WN.exec(t);if(ve(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Le(t.seconds),nanos:Le(t.nanos)}}function Le(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function vs(t){return typeof t=="string"?ht.fromBase64String(t):ht.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function cp(t){const e=t.mapValue.fields.__previous_value__;return up(e)?cp(e):e}function ia(t){const e=Lr(t.mapValue.fields.__local_write_time__.timestampValue);return new Qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(e,n,r,s,i,o,l,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c}}class oa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new oa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof oa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vl={mapValue:{}};function _s(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?up(t)?4:KN(t)?9007199254740991:qN(t)?10:11:ee()}function xn(t,e){if(t===e)return!0;const n=_s(t);if(n!==_s(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ia(t).isEqual(ia(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Lr(s.timestampValue),l=Lr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return vs(s.bytesValue).isEqual(vs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Le(s.geoPointValue.latitude)===Le(i.geoPointValue.latitude)&&Le(s.geoPointValue.longitude)===Le(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Le(s.integerValue)===Le(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Le(s.doubleValue),l=Le(i.doubleValue);return o===l?wu(o)===wu(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return pi(t.arrayValue.values||[],e.arrayValue.values||[],xn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(My(o)!==My(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!xn(o[u],l[u])))return!1;return!0}(t,e);default:return ee()}}function aa(t,e){return(t.values||[]).find(n=>xn(n,e))!==void 0}function mi(t,e){if(t===e)return 0;const n=_s(t),r=_s(e);if(n!==r)return me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return me(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Le(i.integerValue||i.doubleValue),u=Le(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Uy(t.timestampValue,e.timestampValue);case 4:return Uy(ia(t),ia(e));case 5:return me(t.stringValue,e.stringValue);case 6:return function(i,o){const l=vs(i),u=vs(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let c=0;c<l.length&&c<u.length;c++){const f=me(l[c],u[c]);if(f!==0)return f}return me(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=me(Le(i.latitude),Le(o.latitude));return l!==0?l:me(Le(i.longitude),Le(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return By(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,u,c,f;const m=i.fields||{},g=o.fields||{},I=(l=m.value)===null||l===void 0?void 0:l.arrayValue,C=(u=g.value)===null||u===void 0?void 0:u.arrayValue,D=me(((c=I==null?void 0:I.values)===null||c===void 0?void 0:c.length)||0,((f=C==null?void 0:C.values)===null||f===void 0?void 0:f.length)||0);return D!==0?D:By(I,C)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===vl.mapValue&&o===vl.mapValue)return 0;if(i===vl.mapValue)return 1;if(o===vl.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),c=o.fields||{},f=Object.keys(c);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const g=me(u[m],f[m]);if(g!==0)return g;const I=mi(l[u[m]],c[f[m]]);if(I!==0)return I}return me(u.length,f.length)}(t.mapValue,e.mapValue);default:throw ee()}}function Uy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return me(t,e);const n=Lr(t),r=Lr(e),s=me(n.seconds,r.seconds);return s!==0?s:me(n.nanos,r.nanos)}function By(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=mi(n[s],r[s]);if(i)return i}return me(n.length,r.length)}function gi(t){return bh(t)}function bh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Lr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return vs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return X.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=bh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${bh(n.fields[o])}`;return s+"}"}(t.mapValue):ee()}function zy(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Dh(t){return!!t&&"integerValue"in t}function dp(t){return!!t&&"arrayValue"in t}function $y(t){return!!t&&"nullValue"in t}function Wy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ml(t){return!!t&&"mapValue"in t}function qN(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Po(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Is(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Po(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Po(t.arrayValue.values[n]);return e}return Object.assign({},t)}function KN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.value=e}static empty(){return new bt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ml(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Po(n)}setAll(e){let n=lt.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=Po(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Ml(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return xn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Ml(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Is(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new bt(Po(this.value))}}function aE(t){const e=[];return Is(t.fields,(n,r)=>{const s=new lt([n]);if(Ml(r)){const i=aE(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new zt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new wt(e,0,ne.min(),ne.min(),ne.min(),bt.empty(),0)}static newFoundDocument(e,n,r,s){return new wt(e,1,n,ne.min(),r,s,0)}static newNoDocument(e,n){return new wt(e,2,n,ne.min(),ne.min(),bt.empty(),0)}static newUnknownDocument(e,n){return new wt(e,3,n,ne.min(),ne.min(),bt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,n){this.position=e,this.inclusive=n}}function Hy(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=X.comparator(X.fromName(o.referenceValue),n.key):r=mi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function qy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!xn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,n="asc"){this.field=e,this.dir=n}}function GN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{}class We extends lE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new YN(e,n,r):n==="array-contains"?new ZN(e,r):n==="in"?new eR(e,r):n==="not-in"?new tR(e,r):n==="array-contains-any"?new nR(e,r):new We(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new XN(e,r):new JN(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(mi(n,this.value)):n!==null&&_s(this.value)===_s(n)&&this.matchesComparison(mi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hn extends lE{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new hn(e,n)}matches(e){return uE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function uE(t){return t.op==="and"}function cE(t){return QN(t)&&uE(t)}function QN(t){for(const e of t.filters)if(e instanceof hn)return!1;return!0}function jh(t){if(t instanceof We)return t.field.canonicalString()+t.op.toString()+gi(t.value);if(cE(t))return t.filters.map(e=>jh(e)).join(",");{const e=t.filters.map(n=>jh(n)).join(",");return`${t.op}(${e})`}}function dE(t,e){return t instanceof We?function(r,s){return s instanceof We&&r.op===s.op&&r.field.isEqual(s.field)&&xn(r.value,s.value)}(t,e):t instanceof hn?function(r,s){return s instanceof hn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&dE(o,s.filters[l]),!0):!1}(t,e):void ee()}function hE(t){return t instanceof We?function(n){return`${n.field.canonicalString()} ${n.op} ${gi(n.value)}`}(t):t instanceof hn?function(n){return n.op.toString()+" {"+n.getFilters().map(hE).join(" ,")+"}"}(t):"Filter"}class YN extends We{constructor(e,n,r){super(e,n,r),this.key=X.fromName(r.referenceValue)}matches(e){const n=X.comparator(e.key,this.key);return this.matchesComparison(n)}}class XN extends We{constructor(e,n){super(e,"in",n),this.keys=fE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class JN extends We{constructor(e,n){super(e,"not-in",n),this.keys=fE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function fE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>X.fromName(r.referenceValue))}class ZN extends We{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return dp(n)&&aa(n.arrayValue,this.value)}}class eR extends We{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&aa(this.value.arrayValue,n)}}class tR extends We{constructor(e,n){super(e,"not-in",n)}matches(e){if(aa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!aa(this.value.arrayValue,n)}}class nR extends We{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!dp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>aa(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.ue=null}}function Ky(t,e=null,n=[],r=[],s=null,i=null,o=null){return new rR(t,e,n,r,s,i,o)}function hp(t){const e=re(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>jh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),ec(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>gi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>gi(r)).join(",")),e.ue=n}return e.ue}function fp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!GN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!dE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!qy(t.startAt,e.startAt)&&qy(t.endAt,e.endAt)}function Oh(t){return X.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function sR(t,e,n,r,s,i,o,l){return new bi(t,e,n,r,s,i,o,l)}function tc(t){return new bi(t)}function Gy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function pE(t){return t.collectionGroup!==null}function bo(t){const e=re(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new ct(lt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new la(i,r))}),n.has(lt.keyField().canonicalString())||e.ce.push(new la(lt.keyField(),r))}return e.ce}function Sn(t){const e=re(t);return e.le||(e.le=iR(e,bo(t))),e.le}function iR(t,e){if(t.limitType==="F")return Ky(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new la(s.field,i)});const n=t.endAt?new Eu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Eu(t.startAt.position,t.startAt.inclusive):null;return Ky(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Lh(t,e){const n=t.filters.concat([e]);return new bi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Tu(t,e,n){return new bi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function nc(t,e){return fp(Sn(t),Sn(e))&&t.limitType===e.limitType}function mE(t){return`${hp(Sn(t))}|lt:${t.limitType}`}function Ds(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>hE(s)).join(", ")}]`),ec(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>gi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>gi(s)).join(",")),`Target(${r})`}(Sn(t))}; limitType=${t.limitType})`}function rc(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):X.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of bo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const c=Hy(o,l,u);return o.inclusive?c<=0:c<0}(r.startAt,bo(r),s)||r.endAt&&!function(o,l,u){const c=Hy(o,l,u);return o.inclusive?c>=0:c>0}(r.endAt,bo(r),s))}(t,e)}function oR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function gE(t){return(e,n)=>{let r=!1;for(const s of bo(t)){const i=aR(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function aR(t,e,n){const r=t.field.isKeyField()?X.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),c=l.data.field(i);return u!==null&&c!==null?mi(u,c):ee()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ee()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Is(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return iE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR=new be(X.comparator);function Qn(){return lR}const yE=new be(X.comparator);function vo(...t){let e=yE;for(const n of t)e=e.insert(n.key,n);return e}function vE(t){let e=yE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ss(){return Do()}function _E(){return Do()}function Do(){return new Di(t=>t.toString(),(t,e)=>t.isEqual(e))}const uR=new be(X.comparator),cR=new ct(X.comparator);function le(...t){let e=cR;for(const n of t)e=e.add(n);return e}const dR=new ct(me);function hR(){return dR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wu(e)?"-0":e}}function wE(t){return{integerValue:""+t}}function fR(t,e){return $N(e)?wE(e):pp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(){this._=void 0}}function pR(t,e,n){return t instanceof ua?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&up(i)&&(i=cp(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof yi?TE(t,e):t instanceof ca?IE(t,e):function(s,i){const o=EE(s,i),l=Qy(o)+Qy(s.Pe);return Dh(o)&&Dh(s.Pe)?wE(l):pp(s.serializer,l)}(t,e)}function mR(t,e,n){return t instanceof yi?TE(t,e):t instanceof ca?IE(t,e):n}function EE(t,e){return t instanceof Iu?function(r){return Dh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class ua extends sc{}class yi extends sc{constructor(e){super(),this.elements=e}}function TE(t,e){const n=SE(e);for(const r of t.elements)n.some(s=>xn(s,r))||n.push(r);return{arrayValue:{values:n}}}class ca extends sc{constructor(e){super(),this.elements=e}}function IE(t,e){let n=SE(e);for(const r of t.elements)n=n.filter(s=>!xn(s,r));return{arrayValue:{values:n}}}class Iu extends sc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Qy(t){return Le(t.integerValue||t.doubleValue)}function SE(t){return dp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e,n){this.field=e,this.transform=n}}function gR(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof yi&&s instanceof yi||r instanceof ca&&s instanceof ca?pi(r.elements,s.elements,xn):r instanceof Iu&&s instanceof Iu?xn(r.Pe,s.Pe):r instanceof ua&&s instanceof ua}(t.transform,e.transform)}class yR{constructor(e,n){this.version=e,this.transformResults=n}}class Jt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Jt}static exists(e){return new Jt(void 0,e)}static updateTime(e){return new Jt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ic{}function xE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new mp(t.key,Jt.none()):new Aa(t.key,t.data,Jt.none());{const n=t.data,r=bt.empty();let s=new ct(lt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Wr(t.key,r,new zt(s.toArray()),Jt.none())}}function vR(t,e,n){t instanceof Aa?function(s,i,o){const l=s.value.clone(),u=Xy(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Wr?function(s,i,o){if(!Fl(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Xy(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(AE(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function jo(t,e,n,r){return t instanceof Aa?function(i,o,l,u){if(!Fl(i.precondition,o))return l;const c=i.value.clone(),f=Jy(i.fieldTransforms,u,o);return c.setAll(f),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Wr?function(i,o,l,u){if(!Fl(i.precondition,o))return l;const c=Jy(i.fieldTransforms,u,o),f=o.data;return f.setAll(AE(i)),f.setAll(c),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,l){return Fl(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function _R(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=EE(r.transform,s||null);i!=null&&(n===null&&(n=bt.empty()),n.set(r.field,i))}return n||null}function Yy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&pi(r,s,(i,o)=>gR(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Aa extends ic{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Wr extends ic{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function AE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Xy(t,e,n){const r=new Map;ve(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,mR(o,l,n[s]))}return r}function Jy(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,pR(i,o,e))}return r}class mp extends ic{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wR extends ic{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&vR(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=jo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=jo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=_E();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=xE(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(ne.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),le())}isEqual(e){return this.batchId===e.batchId&&pi(this.mutations,e.mutations,(n,r)=>Yy(n,r))&&pi(this.baseMutations,e.baseMutations,(n,r)=>Yy(n,r))}}class gp{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ve(e.mutations.length===r.length);let s=function(){return uR}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new gp(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze,ce;function SR(t){switch(t){default:return ee();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function CE(t){if(t===void 0)return Gn("GRPC error has no .code"),F.UNKNOWN;switch(t){case ze.OK:return F.OK;case ze.CANCELLED:return F.CANCELLED;case ze.UNKNOWN:return F.UNKNOWN;case ze.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case ze.INTERNAL:return F.INTERNAL;case ze.UNAVAILABLE:return F.UNAVAILABLE;case ze.UNAUTHENTICATED:return F.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case ze.NOT_FOUND:return F.NOT_FOUND;case ze.ALREADY_EXISTS:return F.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return F.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case ze.ABORTED:return F.ABORTED;case ze.OUT_OF_RANGE:return F.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return F.UNIMPLEMENTED;case ze.DATA_LOSS:return F.DATA_LOSS;default:return ee()}}(ce=ze||(ze={}))[ce.OK=0]="OK",ce[ce.CANCELLED=1]="CANCELLED",ce[ce.UNKNOWN=2]="UNKNOWN",ce[ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ce[ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ce[ce.NOT_FOUND=5]="NOT_FOUND",ce[ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",ce[ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",ce[ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",ce[ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ce[ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ce[ce.ABORTED=10]="ABORTED",ce[ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",ce[ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",ce[ce.INTERNAL=13]="INTERNAL",ce[ce.UNAVAILABLE=14]="UNAVAILABLE",ce[ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR=new as([4294967295,4294967295],0);function Zy(t){const e=kR().encode(t),n=new Xw;return n.update(e),new Uint8Array(n.digest())}function ev(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new as([n,r],0),new as([s,i],0)]}class yp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new _o(`Invalid padding: ${n}`);if(r<0)throw new _o(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new _o(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new _o(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=as.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(as.fromNumber(r)));return s.compare(xR)===1&&(s=new as([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Zy(e),[r,s]=ev(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new yp(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=Zy(e),[r,s]=ev(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class _o extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Ca.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new oc(ne.min(),s,new be(me),Qn(),le())}}class Ca{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ca(r,n,le(),le(),le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class NE{constructor(e,n){this.targetId=e,this.me=n}}class RE{constructor(e,n,r=ht.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class tv{constructor(){this.fe=0,this.ge=rv(),this.pe=ht.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=le(),n=le(),r=le();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ee()}}),new Ca(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=rv()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ve(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class AR{constructor(e){this.Le=e,this.Be=new Map,this.ke=Qn(),this.qe=nv(),this.Qe=new be(me)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ee()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Oh(i))if(r===0){const o=new X(i.path);this.Ue(n,o,wt.newNoDocument(o,ne.min()))}else ve(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=vs(r).toUint8Array()}catch(u){if(u instanceof oE)return fi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new yp(o,s,i)}catch(u){return fi(u instanceof _o?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const l=this.Je(o);if(l){if(i.current&&Oh(l.target)){const u=new X(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,wt.newNoDocument(u,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=le();this.qe.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new oc(e,n,this.Qe,this.ke,r);return this.ke=Qn(),this.qe=nv(),this.Qe=new be(me),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new tv,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ct(me),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new tv),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function nv(){return new be(X.comparator)}function rv(){return new be(X.comparator)}const CR={asc:"ASCENDING",desc:"DESCENDING"},NR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},RR={and:"AND",or:"OR"};class PR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Vh(t,e){return t.useProto3Json||ec(e)?e:{value:e}}function Su(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function PE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function bR(t,e){return Su(t,e.toTimestamp())}function kn(t){return ve(!!t),ne.fromTimestamp(function(n){const r=Lr(n);return new Qe(r.seconds,r.nanos)}(t))}function vp(t,e){return Mh(t,e).canonicalString()}function Mh(t,e){const n=function(s){return new ke(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function bE(t){const e=ke.fromString(t);return ve(VE(e)),e}function Fh(t,e){return vp(t.databaseId,e.path)}function _d(t,e){const n=bE(e);if(n.get(1)!==t.databaseId.projectId)throw new H(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new H(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new X(jE(n))}function DE(t,e){return vp(t.databaseId,e)}function DR(t){const e=bE(t);return e.length===4?ke.emptyPath():jE(e)}function Uh(t){return new ke(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function jE(t){return ve(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function sv(t,e,n){return{name:Fh(t,e),fields:n.value.mapValue.fields}}function jR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ee()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,f){return c.useProto3Json?(ve(f===void 0||typeof f=="string"),ht.fromBase64String(f||"")):(ve(f===void 0||f instanceof Buffer||f instanceof Uint8Array),ht.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(c){const f=c.code===void 0?F.UNKNOWN:CE(c.code);return new H(f,c.message||"")}(o);n=new RE(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=_d(t,r.document.name),i=kn(r.document.updateTime),o=r.document.createTime?kn(r.document.createTime):ne.min(),l=new bt({mapValue:{fields:r.document.fields}}),u=wt.newFoundDocument(s,i,o,l),c=r.targetIds||[],f=r.removedTargetIds||[];n=new Ul(c,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=_d(t,r.document),i=r.readTime?kn(r.readTime):ne.min(),o=wt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Ul([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=_d(t,r.document),i=r.removedTargetIds||[];n=new Ul([],i,s,null)}else{if(!("filter"in e))return ee();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new IR(s,i),l=r.targetId;n=new NE(l,o)}}return n}function OR(t,e){let n;if(e instanceof Aa)n={update:sv(t,e.key,e.value)};else if(e instanceof mp)n={delete:Fh(t,e.key)};else if(e instanceof Wr)n={update:sv(t,e.key,e.data),updateMask:WR(e.fieldMask)};else{if(!(e instanceof wR))return ee();n={verify:Fh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof ua)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof yi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ca)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Iu)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw ee()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:bR(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ee()}(t,e.precondition)),n}function LR(t,e){return t&&t.length>0?(ve(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?kn(s.updateTime):kn(i);return o.isEqual(ne.min())&&(o=kn(i)),new yR(o,s.transformResults||[])}(n,e))):[]}function VR(t,e){return{documents:[DE(t,e.path)]}}function MR(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=DE(t,s);const i=function(c){if(c.length!==0)return LE(hn.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(f=>function(g){return{field:js(g.field),direction:BR(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Vh(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:s}}function FR(t){let e=DR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ve(r===1);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(m){const g=OE(m);return g instanceof hn&&cE(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(C){return new la(Os(C.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(m){let g;return g=typeof m=="object"?m.value:m,ec(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,I=m.values||[];return new Eu(I,g)}(n.startAt));let c=null;return n.endAt&&(c=function(m){const g=!m.before,I=m.values||[];return new Eu(I,g)}(n.endAt)),sR(e,s,o,i,l,"F",u,c)}function UR(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ee()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function OE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Os(n.unaryFilter.field);return We.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Os(n.unaryFilter.field);return We.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Os(n.unaryFilter.field);return We.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Os(n.unaryFilter.field);return We.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ee()}}(t):t.fieldFilter!==void 0?function(n){return We.create(Os(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ee()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return hn.create(n.compositeFilter.filters.map(r=>OE(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ee()}}(n.compositeFilter.op))}(t):ee()}function BR(t){return CR[t]}function zR(t){return NR[t]}function $R(t){return RR[t]}function js(t){return{fieldPath:t.canonicalString()}}function Os(t){return lt.fromServerFormat(t.fieldPath)}function LE(t){return t instanceof We?function(n){if(n.op==="=="){if(Wy(n.value))return{unaryFilter:{field:js(n.field),op:"IS_NAN"}};if($y(n.value))return{unaryFilter:{field:js(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Wy(n.value))return{unaryFilter:{field:js(n.field),op:"IS_NOT_NAN"}};if($y(n.value))return{unaryFilter:{field:js(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:js(n.field),op:zR(n.op),value:n.value}}}(t):t instanceof hn?function(n){const r=n.getFilters().map(s=>LE(s));return r.length===1?r[0]:{compositeFilter:{op:$R(n.op),filters:r}}}(t):ee()}function WR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function VE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e,n,r,s,i=ne.min(),o=ne.min(),l=ht.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new _r(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new _r(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e){this.ct=e}}function qR(t){const e=FR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Tu(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(){this.un=new GR}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Or.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Or.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class GR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ct(ke.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ct(ke.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new vi(0)}static kn(){return new vi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(){this.changes=new Di(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,wt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&jo(r.mutation,s,zt.empty(),Qe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,le()).next(()=>r))}getLocalViewOfDocuments(e,n,r=le()){const s=ss();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=vo();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ss();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,le()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Qn();const o=Do(),l=function(){return Do()}();return n.forEach((u,c)=>{const f=r.get(c.key);s.has(c.key)&&(f===void 0||f.mutation instanceof Wr)?i=i.insert(c.key,c):f!==void 0?(o.set(c.key,f.mutation.getFieldMask()),jo(f.mutation,c,f.mutation.getFieldMask(),Qe.now())):o.set(c.key,zt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((c,f)=>o.set(c,f)),n.forEach((c,f)=>{var m;return l.set(c,new YR(f,(m=o.get(c))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Do();let s=new be((o,l)=>o-l),i=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let f=r.get(u)||zt.empty();f=l.applyToLocalView(c,f),r.set(u,f);const m=(s.get(l.batchId)||le()).add(u);s=s.insert(l.batchId,m)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,f=u.value,m=_E();f.forEach(g=>{if(!i.has(g)){const I=xE(n.get(g),r.get(g));I!==null&&m.set(g,I),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,m))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return X.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):pE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(ss());let l=-1,u=i;return o.next(c=>U.forEach(c,(f,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(f)?U.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,u,c,le())).next(f=>({batchId:l,changes:vE(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new X(n)).next(r=>{let s=vo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=vo();return this.indexManager.getCollectionParents(e,i).next(l=>U.forEach(l,u=>{const c=function(m,g){return new bi(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(f=>{f.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,c)=>{const f=c.getKey();o.get(f)===null&&(o=o.insert(f,wt.newInvalidDocument(f)))});let l=vo();return o.forEach((u,c)=>{const f=i.get(u);f!==void 0&&jo(f.mutation,c,zt.empty(),Qe.now()),rc(n,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:kn(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:qR(s.bundledQuery),readTime:kn(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(){this.overlays=new be(X.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ss();return U.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=ss(),i=n.length+1,o=new X(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new be((c,f)=>c-f);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let f=i.get(c.largestBatchId);f===null&&(f=ss(),i=i.insert(c.largestBatchId,f)),f.set(c.getKey(),c)}}const l=ss(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,f)=>l.set(c,f)),!(l.size()>=s)););return U.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new TR(n,r));let i=this.Ir.get(n);i===void 0&&(i=le(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(){this.sessionToken=ht.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(){this.Tr=new ct(Ze.Er),this.dr=new ct(Ze.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Ze(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ze(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new X(new ke([])),r=new Ze(n,e),s=new Ze(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new X(new ke([])),r=new Ze(n,e),s=new Ze(n,e+1);let i=le();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ze(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ze{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return X.comparator(e.key,n.key)||me(e.wr,n.wr)}static Ar(e,n){return me(e.wr,n.wr)||X.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ct(Ze.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new ER(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new Ze(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ze(n,0),s=new Ze(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const l=this.Dr(o.wr);i.push(l)}),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ct(me);return n.forEach(s=>{const i=new Ze(s,0),o=new Ze(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],l=>{r=r.add(l.wr)})}),U.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;X.isDocumentKey(i)||(i=i.child(""));const o=new Ze(new X(i),0);let l=new ct(me);return this.br.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(l=l.add(u.wr)),!0)},o),U.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ve(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return U.forEach(n.mutations,s=>{const i=new Ze(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Ze(n,0),s=this.br.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e){this.Mr=e,this.docs=function(){return new be(X.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():wt.newInvalidDocument(n))}getEntries(e,n){let r=Qn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():wt.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Qn();const o=n.path,l=new X(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:f}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||FN(MN(f),r)<=0||(s.has(f.key)||rc(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ee()}Or(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new rP(this)}getSize(e){return U.resolve(this.size)}}class rP extends QR{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e){this.persistence=e,this.Nr=new Di(n=>hp(n),fp),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.Lr=0,this.Br=new _p,this.targetCount=0,this.kr=vi.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new vi(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),U.waitFor(i).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e,n){this.qr={},this.overlays={},this.Qr=new lp(0),this.Kr=!1,this.Kr=!0,this.$r=new eP,this.referenceDelegate=e(this),this.Ur=new sP(this),this.indexManager=new KR,this.remoteDocumentCache=function(s){return new nP(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new HR(n),this.Gr=new JR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new ZR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new tP(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){K("MemoryPersistence","Starting transaction:",e);const s=new oP(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return U.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class oP extends BN{constructor(e){super(),this.currentSequenceNumber=e}}class wp{constructor(e){this.persistence=e,this.Jr=new _p,this.Yr=null}static Zr(e){return new wp(e)}get Xr(){if(this.Yr)return this.Yr;throw ee()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,r=>{const s=X.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,ne.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=le(),s=le();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Ep(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Jx()?8:zN(It())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new aP;return this.Xi(e,n,o).next(l=>{if(i.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(uo()<=ue.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",Ds(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(uo()<=ue.DEBUG&&K("QueryEngine","Query:",Ds(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(uo()<=ue.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",Ds(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Sn(n))):U.resolve())}Yi(e,n){if(Gy(n))return U.resolve(null);let r=Sn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Tu(n,null,"F"),r=Sn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=le(...i);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.ts(n,l);return this.ns(n,c,o,u.readTime)?this.Yi(e,Tu(n,null,"F")):this.rs(e,c,n,u)}))})))}Zi(e,n,r,s){return Gy(n)||s.isEqual(ne.min())?U.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?U.resolve(null):(uo()<=ue.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ds(n)),this.rs(e,o,n,VN(s,-1)).next(l=>l))})}ts(e,n){let r=new ct(gE(e));return n.forEach((s,i)=>{rc(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return uo()<=ue.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",Ds(n)),this.Ji.getDocumentsMatchingQuery(e,n,Or.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new be(me),this._s=new Di(i=>hp(i),fp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new XR(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function cP(t,e,n,r){return new uP(t,e,n,r)}async function ME(t,e){const n=re(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=le();for(const c of s){o.push(c.batchId);for(const f of c.mutations)u=u.add(f.key)}for(const c of i){l.push(c.batchId);for(const f of c.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:l}))})})}function dP(t,e){const n=re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,c,f){const m=c.batch,g=m.keys();let I=U.resolve();return g.forEach(C=>{I=I.next(()=>f.getEntry(u,C)).next(D=>{const R=c.docVersions.get(C);ve(R!==null),D.version.compareTo(R)<0&&(m.applyToRemoteDocument(D,c),D.isValidDocument()&&(D.setReadTime(c.commitVersion),f.addEntry(D)))})}),I.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=le();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function FE(t){const e=re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function hP(t,e){const n=re(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((f,m)=>{const g=s.get(m);if(!g)return;l.push(n.Ur.removeMatchingKeys(i,f.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(i,f.addedDocuments,m)));let I=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?I=I.withResumeToken(ht.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):f.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(f.resumeToken,r)),s=s.insert(m,I),function(D,R,E){return D.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(g,I,f)&&l.push(n.Ur.updateTargetData(i,I))});let u=Qn(),c=le();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(fP(i,o,e.documentUpdates).next(f=>{u=f.Ps,c=f.Is})),!r.isEqual(ne.min())){const f=n.Ur.getLastRemoteSnapshotVersion(i).next(m=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(f)}return U.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,c)).next(()=>u)}).then(i=>(n.os=s,i))}function fP(t,e,n){let r=le(),s=le();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Qn();return n.forEach((l,u)=>{const c=i.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(ne.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):K("LocalStore","Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function pP(t,e){const n=re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function mP(t,e){const n=re(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,U.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new _r(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Bh(t,e,n){const r=re(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!xa(o))throw o;K("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function iv(t,e,n){const r=re(t);let s=ne.min(),i=le();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,f){const m=re(u),g=m._s.get(f);return g!==void 0?U.resolve(m.os.get(g)):m.Ur.getTargetData(c,f)}(r,o,Sn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ne.min(),n?i:le())).next(l=>(gP(r,oR(e),l),{documents:l,Ts:i})))}function gP(t,e,n){let r=t.us.get(e)||ne.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class ov{constructor(){this.activeTargetIds=hR()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yP{constructor(){this.so=new ov,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new ov,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){K("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){K("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _l=null;function wd(){return _l===null?_l=function(){return 268435456+Math.round(2147483648*Math.random())}():_l++,"0x"+_l.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _P={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yt="WebChannelConnection";class EP extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const l=wd(),u=this.xo(n,r.toUriEncodedString());K("RestConnection",`Sending RPC '${n}' ${l}:`,u,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,o),this.No(n,u,c,s).then(f=>(K("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw fi("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",u,"request:",s),f})}Lo(n,r,s,i,o,l){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Pi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=_P[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=wd();return new Promise((o,l)=>{const u=new Jw;u.setWithCredentials(!0),u.listenOnce(Zw.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Vl.NO_ERROR:const f=u.getResponseJson();K(yt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),o(f);break;case Vl.TIMEOUT:K(yt,`RPC '${e}' ${i} timed out`),l(new H(F.DEADLINE_EXCEEDED,"Request time out"));break;case Vl.HTTP_ERROR:const m=u.getStatus();if(K(yt,`RPC '${e}' ${i} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const I=g==null?void 0:g.error;if(I&&I.status&&I.message){const C=function(R){const E=R.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(E)>=0?E:F.UNKNOWN}(I.status);l(new H(C,I.message))}else l(new H(F.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new H(F.UNAVAILABLE,"Connection failed."));break;default:ee()}}finally{K(yt,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);K(yt,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",c,r,15)})}Bo(e,n,r){const s=wd(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=nE(),l=tE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");K(yt,`Creating RPC '${e}' stream ${s}: ${f}`,u);const m=o.createWebChannel(f,u);let g=!1,I=!1;const C=new wP({Io:R=>{I?K(yt,`Not sending because RPC '${e}' stream ${s} is closed:`,R):(g||(K(yt,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),K(yt,`RPC '${e}' stream ${s} sending:`,R),m.send(R))},To:()=>m.close()}),D=(R,E,_)=>{R.listen(E,w=>{try{_(w)}catch(b){setTimeout(()=>{throw b},0)}})};return D(m,yo.EventType.OPEN,()=>{I||(K(yt,`RPC '${e}' stream ${s} transport opened.`),C.yo())}),D(m,yo.EventType.CLOSE,()=>{I||(I=!0,K(yt,`RPC '${e}' stream ${s} transport closed`),C.So())}),D(m,yo.EventType.ERROR,R=>{I||(I=!0,fi(yt,`RPC '${e}' stream ${s} transport errored:`,R),C.So(new H(F.UNAVAILABLE,"The operation could not be completed")))}),D(m,yo.EventType.MESSAGE,R=>{var E;if(!I){const _=R.data[0];ve(!!_);const w=_,b=w.error||((E=w[0])===null||E===void 0?void 0:E.error);if(b){K(yt,`RPC '${e}' stream ${s} received error:`,b);const O=b.status;let M=function(S){const k=ze[S];if(k!==void 0)return CE(k)}(O),T=b.message;M===void 0&&(M=F.INTERNAL,T="Unknown error status: "+O+" with message "+b.message),I=!0,C.So(new H(M,T)),m.close()}else K(yt,`RPC '${e}' stream ${s} received:`,_),C.bo(_)}}),D(l,eE.STAT_EVENT,R=>{R.stat===Ph.PROXY?K(yt,`RPC '${e}' stream ${s} detected buffering proxy`):R.stat===Ph.NOPROXY&&K(yt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{C.wo()},0),C}}function Ed(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ac(t){return new PR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&K("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(e,n,r,s,i,o,l,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new UE(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(Gn(n.toString()),Gn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new H(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return K("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(K("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class TP extends BE{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=jR(this.serializer,e),r=function(i){if(!("targetChange"in i))return ne.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ne.min():o.readTime?kn(o.readTime):ne.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Uh(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=Oh(u)?{documents:VR(i,u)}:{query:MR(i,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=PE(i,o.resumeToken);const c=Vh(i,o.expectedCount);c!==null&&(l.expectedCount=c)}else if(o.snapshotVersion.compareTo(ne.min())>0){l.readTime=Su(i,o.snapshotVersion.toTimestamp());const c=Vh(i,o.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const r=UR(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Uh(this.serializer),n.removeTarget=e,this.a_(n)}}class IP extends BE{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ve(!!e.streamToken),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ve(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=LR(e.writeResults,e.commitTime),r=kn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Uh(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>OR(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new H(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Mh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new H(F.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,Mh(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class kP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Gn(n),this.D_=!1):K("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Ss(this)&&(K("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=re(u);c.L_.add(4),await Na(c),c.q_.set("Unknown"),c.L_.delete(4),await lc(c)}(this))})}),this.q_=new kP(r,s)}}async function lc(t){if(Ss(t))for(const e of t.B_)await e(!0)}async function Na(t){for(const e of t.B_)await e(!1)}function zE(t,e){const n=re(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),kp(n)?Sp(n):ji(n).r_()&&Ip(n,e))}function Tp(t,e){const n=re(t),r=ji(n);n.N_.delete(e),r.r_()&&$E(n,e),n.N_.size===0&&(r.r_()?r.o_():Ss(n)&&n.q_.set("Unknown"))}function Ip(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ji(t).A_(e)}function $E(t,e){t.Q_.xe(e),ji(t).R_(e)}function Sp(t){t.Q_=new AR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ji(t).start(),t.q_.v_()}function kp(t){return Ss(t)&&!ji(t).n_()&&t.N_.size>0}function Ss(t){return re(t).L_.size===0}function WE(t){t.Q_=void 0}async function AP(t){t.q_.set("Online")}async function CP(t){t.N_.forEach((e,n)=>{Ip(t,e)})}async function NP(t,e){WE(t),kp(t)?(t.q_.M_(e),Sp(t)):t.q_.set("Unknown")}async function RP(t,e,n){if(t.q_.set("Online"),e instanceof RE&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){K("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ku(t,r)}else if(e instanceof Ul?t.Q_.Ke(e):e instanceof NE?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ne.min()))try{const r=await FE(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Q_.rt(o);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.N_.get(c);f&&i.N_.set(c,f.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,c)=>{const f=i.N_.get(u);if(!f)return;i.N_.set(u,f.withResumeToken(ht.EMPTY_BYTE_STRING,f.snapshotVersion)),$E(i,u);const m=new _r(f.target,u,c,f.sequenceNumber);Ip(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){K("RemoteStore","Failed to raise snapshot:",r),await ku(t,r)}}async function ku(t,e,n){if(!xa(e))throw e;t.L_.add(1),await Na(t),t.q_.set("Offline"),n||(n=()=>FE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{K("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await lc(t)})}function HE(t,e){return e().catch(n=>ku(t,n,e))}async function uc(t){const e=re(t),n=Vr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;PP(e);)try{const s=await pP(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,bP(e,s)}catch(s){await ku(e,s)}qE(e)&&KE(e)}function PP(t){return Ss(t)&&t.O_.length<10}function bP(t,e){t.O_.push(e);const n=Vr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function qE(t){return Ss(t)&&!Vr(t).n_()&&t.O_.length>0}function KE(t){Vr(t).start()}async function DP(t){Vr(t).p_()}async function jP(t){const e=Vr(t);for(const n of t.O_)e.m_(n.mutations)}async function OP(t,e,n){const r=t.O_.shift(),s=gp.from(r,e,n);await HE(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await uc(t)}async function LP(t,e){e&&Vr(t).V_&&await async function(r,s){if(function(o){return SR(o)&&o!==F.ABORTED}(s.code)){const i=r.O_.shift();Vr(r).s_(),await HE(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await uc(r)}}(t,e),qE(t)&&KE(t)}async function lv(t,e){const n=re(t);n.asyncQueue.verifyOperationInProgress(),K("RemoteStore","RemoteStore received new credentials");const r=Ss(n);n.L_.add(3),await Na(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await lc(n)}async function VP(t,e){const n=re(t);e?(n.L_.delete(2),await lc(n)):e||(n.L_.add(2),await Na(n),n.q_.set("Unknown"))}function ji(t){return t.K_||(t.K_=function(n,r,s){const i=re(n);return i.w_(),new TP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:AP.bind(null,t),Ro:CP.bind(null,t),mo:NP.bind(null,t),d_:RP.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),kp(t)?Sp(t):t.q_.set("Unknown")):(await t.K_.stop(),WE(t))})),t.K_}function Vr(t){return t.U_||(t.U_=function(n,r,s){const i=re(n);return i.w_(),new IP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:DP.bind(null,t),mo:LP.bind(null,t),f_:jP.bind(null,t),g_:OP.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await uc(t)):(await t.U_.stop(),t.O_.length>0&&(K("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Bn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new xp(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ap(t,e){if(Gn("AsyncQueue",`${e}: ${t}`),xa(t))return new H(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e){this.comparator=e?(n,r)=>e(n,r)||X.comparator(n.key,r.key):(n,r)=>X.comparator(n.key,r.key),this.keyedMap=vo(),this.sortedSet=new be(this.comparator)}static emptySet(e){return new si(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof si)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new si;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(){this.W_=new be(X.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ee():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class _i{constructor(e,n,r,s,i,o,l,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new _i(e,n,si.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class FP{constructor(){this.queries=cv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=re(n),i=s.queries;s.queries=cv(),i.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new H(F.ABORTED,"Firestore shutting down"))}}function cv(){return new Di(t=>mE(t),nc)}async function Cp(t,e){const n=re(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new MP,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=Ap(o,`Initialization of query '${Ds(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Rp(n)}async function Np(t,e){const n=re(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function UP(t,e){const n=re(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.j_)l.X_(s)&&(r=!0);o.z_=s}}r&&Rp(n)}function BP(t,e,n){const r=re(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Rp(t){t.Y_.forEach(e=>{e.next()})}var zh,dv;(dv=zh||(zh={})).ea="default",dv.Cache="cache";class Pp{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new _i(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=_i.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==zh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e){this.key=e}}class QE{constructor(e){this.key=e}}class zP{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=le(),this.mutatedKeys=le(),this.Aa=gE(e),this.Ra=new si(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new uv,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,m)=>{const g=s.get(f),I=rc(this.query,m)?m:null,C=!!g&&this.mutatedKeys.has(g.key),D=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let R=!1;g&&I?g.data.isEqual(I.data)?C!==D&&(r.track({type:3,doc:I}),R=!0):this.ga(g,I)||(r.track({type:2,doc:I}),R=!0,(u&&this.Aa(I,u)>0||c&&this.Aa(I,c)<0)&&(l=!0)):!g&&I?(r.track({type:0,doc:I}),R=!0):g&&!I&&(r.track({type:1,doc:g}),R=!0,(u||c)&&(l=!0)),R&&(I?(o=o.add(I),i=D?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,m)=>function(I,C){const D=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ee()}};return D(I)-D(C)}(f.type,m.type)||this.Aa(f.doc,m.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,c=u!==this.Ea;return this.Ea=u,o.length!==0||c?{snapshot:new _i(this.query,e.Ra,i,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new uv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=le(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new QE(r))}),this.da.forEach(r=>{e.has(r)||n.push(new GE(r))}),n}ba(e){this.Ta=e.Ts,this.da=le();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return _i.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class $P{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class WP{constructor(e){this.key=e,this.va=!1}}class HP{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Di(l=>mE(l),nc),this.Ma=new Map,this.xa=new Set,this.Oa=new be(X.comparator),this.Na=new Map,this.La=new _p,this.Ba={},this.ka=new Map,this.qa=vi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function qP(t,e,n=!0){const r=tT(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await YE(r,e,n,!0),s}async function KP(t,e){const n=tT(t);await YE(n,e,!0,!1)}async function YE(t,e,n,r){const s=await mP(t.localStore,Sn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await GP(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&zE(t.remoteStore,s),l}async function GP(t,e,n,r,s){t.Ka=(m,g,I)=>async function(D,R,E,_){let w=R.view.ma(E);w.ns&&(w=await iv(D.localStore,R.query,!1).then(({documents:T})=>R.view.ma(T,w)));const b=_&&_.targetChanges.get(R.targetId),O=_&&_.targetMismatches.get(R.targetId)!=null,M=R.view.applyChanges(w,D.isPrimaryClient,b,O);return fv(D,R.targetId,M.wa),M.snapshot}(t,m,g,I);const i=await iv(t.localStore,e,!0),o=new zP(e,i.Ts),l=o.ma(i.documents),u=Ca.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(l,t.isPrimaryClient,u);fv(t,n,c.wa);const f=new $P(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function QP(t,e,n){const r=re(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!nc(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Bh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Tp(r.remoteStore,s.targetId),$h(r,s.targetId)}).catch(ka)):($h(r,s.targetId),await Bh(r.localStore,s.targetId,!0))}async function YP(t,e){const n=re(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Tp(n.remoteStore,r.targetId))}async function XP(t,e,n){const r=sb(t);try{const s=await function(o,l){const u=re(o),c=Qe.now(),f=l.reduce((I,C)=>I.add(C.key),le());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",I=>{let C=Qn(),D=le();return u.cs.getEntries(I,f).next(R=>{C=R,C.forEach((E,_)=>{_.isValidDocument()||(D=D.add(E))})}).next(()=>u.localDocuments.getOverlayedDocuments(I,C)).next(R=>{m=R;const E=[];for(const _ of l){const w=_R(_,m.get(_.key).overlayedDocument);w!=null&&E.push(new Wr(_.key,w,aE(w.value.mapValue),Jt.exists(!0)))}return u.mutationQueue.addMutationBatch(I,c,E,l)}).next(R=>{g=R;const E=R.applyToLocalDocumentSet(m,D);return u.documentOverlayCache.saveOverlays(I,R.batchId,E)})}).then(()=>({batchId:g.batchId,changes:vE(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let c=o.Ba[o.currentUser.toKey()];c||(c=new be(me)),c=c.insert(l,u),o.Ba[o.currentUser.toKey()]=c}(r,s.batchId,n),await Ra(r,s.changes),await uc(r.remoteStore)}catch(s){const i=Ap(s,"Failed to persist write");n.reject(i)}}async function XE(t,e){const n=re(t);try{const r=await hP(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(ve(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?ve(o.va):s.removedDocuments.size>0&&(ve(o.va),o.va=!1))}),await Ra(n,r,e)}catch(r){await ka(r)}}function hv(t,e,n){const r=re(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=re(o);u.onlineState=l;let c=!1;u.queries.forEach((f,m)=>{for(const g of m.j_)g.Z_(l)&&(c=!0)}),c&&Rp(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function JP(t,e,n){const r=re(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new be(X.comparator);o=o.insert(i,wt.newNoDocument(i,ne.min()));const l=le().add(i),u=new oc(ne.min(),new Map,new be(me),o,l);await XE(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),bp(r)}else await Bh(r.localStore,e,!1).then(()=>$h(r,e,n)).catch(ka)}async function ZP(t,e){const n=re(t),r=e.batch.batchId;try{const s=await dP(n.localStore,e);ZE(n,r,null),JE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ra(n,s)}catch(s){await ka(s)}}async function eb(t,e,n){const r=re(t);try{const s=await function(o,l){const u=re(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let f;return u.mutationQueue.lookupMutationBatch(c,l).next(m=>(ve(m!==null),f=m.keys(),u.mutationQueue.removeMutationBatch(c,m))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,f)).next(()=>u.localDocuments.getDocuments(c,f))})}(r.localStore,e);ZE(r,e,n),JE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ra(r,s)}catch(s){await ka(s)}}function JE(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function ZE(t,e,n){const r=re(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function $h(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||eT(t,r)})}function eT(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Tp(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),bp(t))}function fv(t,e,n){for(const r of n)r instanceof GE?(t.La.addReference(r.key,e),tb(t,r)):r instanceof QE?(K("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||eT(t,r.key)):ee()}function tb(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(K("SyncEngine","New document in limbo: "+n),t.xa.add(r),bp(t))}function bp(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new X(ke.fromString(e)),r=t.qa.next();t.Na.set(r,new WP(n)),t.Oa=t.Oa.insert(n,r),zE(t.remoteStore,new _r(Sn(tc(n.path)),r,"TargetPurposeLimboResolution",lp.oe))}}async function Ra(t,e,n){const r=re(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(c=>{var f;if((c||n)&&r.isPrimaryClient){const m=c?!c.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(c){s.push(c);const m=Ep.Wi(u.targetId,c);i.push(m)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,c){const f=re(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>U.forEach(c,g=>U.forEach(g.$i,I=>f.persistence.referenceDelegate.addReference(m,g.targetId,I)).next(()=>U.forEach(g.Ui,I=>f.persistence.referenceDelegate.removeReference(m,g.targetId,I)))))}catch(m){if(!xa(m))throw m;K("LocalStore","Failed to update sequence numbers: "+m)}for(const m of c){const g=m.targetId;if(!m.fromCache){const I=f.os.get(g),C=I.snapshotVersion,D=I.withLastLimboFreeSnapshotVersion(C);f.os=f.os.insert(g,D)}}}(r.localStore,i))}async function nb(t,e){const n=re(t);if(!n.currentUser.isEqual(e)){K("SyncEngine","User change. New user:",e.toKey());const r=await ME(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(l=>{l.forEach(u=>{u.reject(new H(F.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ra(n,r.hs)}}function rb(t,e){const n=re(t),r=n.Na.get(e);if(r&&r.va)return le().add(r.key);{let s=le();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const l=n.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}function tT(t){const e=re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=XE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=JP.bind(null,e),e.Ca.d_=UP.bind(null,e.eventManager),e.Ca.$a=BP.bind(null,e.eventManager),e}function sb(t){const e=re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ZP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=eb.bind(null,e),e}class xu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ac(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return cP(this.persistence,new lP,e.initialUser,this.serializer)}Ga(e){return new iP(wp.Zr,this.serializer)}Wa(e){return new yP}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}xu.provider={build:()=>new xu};class Wh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>hv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=nb.bind(null,this.syncEngine),await VP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new FP}()}createDatastore(e){const n=ac(e.databaseInfo.databaseId),r=function(i){return new EP(i)}(e.databaseInfo);return function(i,o,l,u){return new SP(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new xP(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>hv(this.syncEngine,n,0),function(){return av.D()?new av:new vP}())}createSyncEngine(e,n){return function(s,i,o,l,u,c,f){const m=new HP(s,i,o,l,u,c);return f&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=re(s);K("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Na(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Wh.provider={build:()=>new Wh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Gn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=vt.UNAUTHENTICATED,this.clientId=sE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{K("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(K("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Bn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ap(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Td(t,e){t.asyncQueue.verifyOperationInProgress(),K("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await ME(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function pv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await ob(t);K("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>lv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>lv(e.remoteStore,s)),t._onlineComponents=e}async function ob(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K("FirestoreClient","Using user provided OfflineComponentProvider");try{await Td(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;fi("Error using user provided cache. Falling back to memory cache: "+n),await Td(t,new xu)}}else K("FirestoreClient","Using default OfflineComponentProvider"),await Td(t,new xu);return t._offlineComponents}async function nT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(K("FirestoreClient","Using user provided OnlineComponentProvider"),await pv(t,t._uninitializedComponentsProvider._online)):(K("FirestoreClient","Using default OnlineComponentProvider"),await pv(t,new Wh))),t._onlineComponents}function ab(t){return nT(t).then(e=>e.syncEngine)}async function Au(t){const e=await nT(t),n=e.eventManager;return n.onListen=qP.bind(null,e.syncEngine),n.onUnlisten=QP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=KP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=YP.bind(null,e.syncEngine),n}function lb(t,e,n={}){const r=new Bn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,c){const f=new Dp({next:g=>{f.Za(),o.enqueueAndForget(()=>Np(i,m));const I=g.docs.has(l);!I&&g.fromCache?c.reject(new H(F.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&g.fromCache&&u&&u.source==="server"?c.reject(new H(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(g)},error:g=>c.reject(g)}),m=new Pp(tc(l.path),f,{includeMetadataChanges:!0,_a:!0});return Cp(i,m)}(await Au(t),t.asyncQueue,e,n,r)),r.promise}function ub(t,e,n={}){const r=new Bn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,c){const f=new Dp({next:g=>{f.Za(),o.enqueueAndForget(()=>Np(i,m)),g.fromCache&&u.source==="server"?c.reject(new H(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(g)},error:g=>c.reject(g)}),m=new Pp(l,f,{includeMetadataChanges:!0,_a:!0});return Cp(i,m)}(await Au(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sT(t,e,n){if(!n)throw new H(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function cb(t,e,n,r){if(e===!0&&r===!0)throw new H(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function gv(t){if(!X.isDocumentKey(t))throw new H(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function yv(t){if(X.isDocumentKey(t))throw new H(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function cc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ee()}function Vt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new H(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=cc(t);throw new H(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function db(t,e){if(e<=0)throw new H(F.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new H(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new H(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new H(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new H(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new H(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class dc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vv(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new CN;switch(r.type){case"firstParty":return new bN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=mv.get(n);r&&(K("ComponentProvider","Removing Datastore"),mv.delete(n),r.terminate())}(this),Promise.resolve()}}function hb(t,e,n,r={}){var s;const i=(t=Vt(t,dc))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&fi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=vt.MOCK_USER;else{l=Hx(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new H(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new vt(c)}t._authCredentials=new NN(new rE(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new er(this.firestore,e,this._query)}}class Et{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new br(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Et(this.firestore,e,this._key)}}class br extends er{constructor(e,n,r){super(e,n,tc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Et(this.firestore,null,new X(e))}withConverter(e){return new br(this.firestore,e,this._path)}}function Me(t,e,...n){if(t=Ye(t),sT("collection","path",e),t instanceof dc){const r=ke.fromString(e,...n);return yv(r),new br(t,null,r)}{if(!(t instanceof Et||t instanceof br))throw new H(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ke.fromString(e,...n));return yv(r),new br(t.firestore,null,r)}}function pe(t,e,...n){if(t=Ye(t),arguments.length===1&&(e=sE.newId()),sT("doc","path",e),t instanceof dc){const r=ke.fromString(e,...n);return gv(r),new Et(t,null,new X(r))}{if(!(t instanceof Et||t instanceof br))throw new H(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ke.fromString(e,...n));return gv(r),new Et(t.firestore,t instanceof br?t.converter:null,new X(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new UE(this,"async_queue_retry"),this.Vu=()=>{const r=Ed();r&&K("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Ed();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Ed();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Bn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!xa(e))throw e;K("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw Gn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=xp.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&ee()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function wv(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Yn extends dc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new _v,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new _v(e),this._firestoreClient=void 0,await e}}}function fb(t,e){const n=typeof t=="object"?t:pw(),r=typeof t=="string"?t:"(default)",s=Xf(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=$x("firestore");i&&hb(s,...i)}return s}function hc(t){if(t._terminated)throw new H(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||pb(t),t._firestoreClient}function pb(t){var e,n,r;const s=t._freezeSettings(),i=function(l,u,c,f){return new HN(l,u,c,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,rT(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new ib(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wi(ht.fromBase64String(e))}catch(n){throw new H(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new wi(ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new H(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new H(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new H(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb=/^__.*__$/;class gb{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Wr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Aa(e,this.data,n,this.fieldTransforms)}}class iT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Wr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function oT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ee()}}class pc{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new pc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Cu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(oT(this.Cu)&&mb.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class yb{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ac(e)}Qu(e,n,r,s=!1){return new pc({Cu:e,methodName:n,qu:r,path:lt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mc(t){const e=t._freezeSettings(),n=ac(t._databaseId);return new yb(t._databaseId,!!e.ignoreUndefinedProperties,n)}function aT(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Mp("Data must be an object, but it was:",o,r);const l=lT(r,o);let u,c;if(i.merge)u=new zt(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const m of i.mergeFields){const g=Hh(e,m,n);if(!o.contains(g))throw new H(F.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);cT(f,g)||f.push(g)}u=new zt(f),c=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,c=o.fieldTransforms;return new gb(new bt(l),u,c)}class gc extends Pa{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gc}}function vb(t,e,n){return new pc({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Lp extends Pa{_toFieldTransform(e){return new kE(e.path,new ua)}isEqual(e){return e instanceof Lp}}class Vp extends Pa{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=vb(this,e,!0),r=this.Ku.map(i=>Oi(i,n)),s=new yi(r);return new kE(e.path,s)}isEqual(e){return e instanceof Vp&&ea(this.Ku,e.Ku)}}function _b(t,e,n,r){const s=t.Qu(1,e,n);Mp("Data must be an object, but it was:",s,r);const i=[],o=bt.empty();Is(r,(u,c)=>{const f=Fp(e,u,n);c=Ye(c);const m=s.Nu(f);if(c instanceof gc)i.push(f);else{const g=Oi(c,m);g!=null&&(i.push(f),o.set(f,g))}});const l=new zt(i);return new iT(o,l,s.fieldTransforms)}function wb(t,e,n,r,s,i){const o=t.Qu(1,e,n),l=[Hh(e,r,n)],u=[s];if(i.length%2!=0)throw new H(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(Hh(e,i[g])),u.push(i[g+1]);const c=[],f=bt.empty();for(let g=l.length-1;g>=0;--g)if(!cT(c,l[g])){const I=l[g];let C=u[g];C=Ye(C);const D=o.Nu(I);if(C instanceof gc)c.push(I);else{const R=Oi(C,D);R!=null&&(c.push(I),f.set(I,R))}}const m=new zt(c);return new iT(f,m,o.fieldTransforms)}function Eb(t,e,n,r=!1){return Oi(n,t.Qu(r?4:3,e))}function Oi(t,e){if(uT(t=Ye(t)))return Mp("Unsupported field value:",e,t),lT(t,e);if(t instanceof Pa)return function(r,s){if(!oT(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=Oi(l,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ye(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return fR(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Qe.fromDate(r);return{timestampValue:Su(s.serializer,i)}}if(r instanceof Qe){const i=new Qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Su(s.serializer,i)}}if(r instanceof jp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof wi)return{bytesValue:PE(s.serializer,r._byteString)};if(r instanceof Et){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:vp(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Op)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return pp(l.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${cc(r)}`)}(t,e)}function lT(t,e){const n={};return iE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Is(t,(r,s)=>{const i=Oi(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function uT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Qe||t instanceof jp||t instanceof wi||t instanceof Et||t instanceof Pa||t instanceof Op)}function Mp(t,e,n){if(!uT(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=cc(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Hh(t,e,n){if((e=Ye(e))instanceof fc)return e._internalPath;if(typeof e=="string")return Fp(t,e);throw Cu("Field path arguments must be of type string or ",t,!1,void 0,n)}const Tb=new RegExp("[~\\*/\\[\\]]");function Fp(t,e,n){if(e.search(Tb)>=0)throw Cu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new fc(...e.split("."))._internalPath}catch{throw Cu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Cu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new H(F.INVALID_ARGUMENT,l+t+u)}function cT(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Et(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Ib(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(yc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Ib extends dT{data(){return super.data()}}function yc(t,e){return typeof e=="string"?Fp(t,e):e instanceof fc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new H(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Up{}class Bp extends Up{}function Ct(t,e,...n){let r=[];e instanceof Up&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof zp).length,l=i.filter(u=>u instanceof vc).length;if(o>1||o>0&&l>0)throw new H(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class vc extends Bp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new vc(e,n,r)}_apply(e){const n=this._parse(e);return fT(e._query,n),new er(e.firestore,e.converter,Lh(e._query,n))}_parse(e){const n=mc(e.firestore);return function(i,o,l,u,c,f,m){let g;if(c.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new H(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Tv(m,f);const I=[];for(const C of m)I.push(Ev(u,i,C));g={arrayValue:{values:I}}}else g=Ev(u,i,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Tv(m,f),g=Eb(l,o,m,f==="in"||f==="not-in");return We.create(c,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ce(t,e,n){const r=e,s=yc("where",t);return vc._create(s,r,n)}class zp extends Up{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new zp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:hn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const u of l)fT(o,u),o=Lh(o,u)}(e._query,n),new er(e.firestore,e.converter,Lh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class $p extends Bp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new $p(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new H(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new H(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new la(i,o)}(e._query,this._field,this._direction);return new er(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new bi(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function da(t,e="asc"){const n=e,r=yc("orderBy",t);return $p._create(r,n)}class Wp extends Bp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Wp(e,n,r)}_apply(e){return new er(e.firestore,e.converter,Tu(e._query,this._limit,this._limitType))}}function Hp(t){return db("limit",t),Wp._create("limit",t,"F")}function Ev(t,e,n){if(typeof(n=Ye(n))=="string"){if(n==="")throw new H(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pE(e)&&n.indexOf("/")!==-1)throw new H(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ke.fromString(n));if(!X.isDocumentKey(r))throw new H(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return zy(t,new X(r))}if(n instanceof Et)return zy(t,n._key);throw new H(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cc(n)}.`)}function Tv(t,e){if(!Array.isArray(t)||t.length===0)throw new H(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function fT(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new H(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Sb{convertValue(e,n="none"){switch(_s(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Le(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(vs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ee()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Is(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Le(o.doubleValue));return new Op(i)}convertGeoPoint(e){return new jp(Le(e.latitude),Le(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=cp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ia(e));default:return null}}convertTimestamp(e){const n=Lr(e);return new Qe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ke.fromString(e);ve(VE(r));const s=new oa(r.get(1),r.get(3)),i=new X(r.popFirst(5));return s.isEqual(n)||Gn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class mT extends dT{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Bl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(yc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Bl extends mT{data(e={}){return super.data(e)}}class gT{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new wo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Bl(this._firestore,this._userDataWriter,r.key,r,new wo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new H(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new Bl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new wo(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new Bl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new wo(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,f=-1;return l.type!==0&&(c=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:kb(l.type),doc:u,oldIndex:c,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function kb(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ee()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(t){t=Vt(t,Et);const e=Vt(t.firestore,Yn);return lb(hc(e),t._key).then(n=>yT(e,t,n))}class qp extends Sb{constructor(e){super(),this.firestore=e}convertBytes(e){return new wi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Et(this.firestore,null,n)}}function fn(t){t=Vt(t,er);const e=Vt(t.firestore,Yn),n=hc(e),r=new qp(e);return hT(t._query),ub(n,t._query).then(s=>new gT(e,r,t,s))}function ls(t,e,n){t=Vt(t,Et);const r=Vt(t.firestore,Yn),s=pT(t.converter,e,n);return _c(r,[aT(mc(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Jt.none())])}function An(t,e,n,...r){t=Vt(t,Et);const s=Vt(t.firestore,Yn),i=mc(s);let o;return o=typeof(e=Ye(e))=="string"||e instanceof fc?wb(i,"updateDoc",t._key,e,n,r):_b(i,"updateDoc",t._key,e),_c(s,[o.toMutation(t._key,Jt.exists(!0))])}function Ei(t){return _c(Vt(t.firestore,Yn),[new mp(t._key,Jt.none())])}function Ti(t,e){const n=Vt(t.firestore,Yn),r=pe(t),s=pT(t.converter,e);return _c(n,[aT(mc(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Jt.exists(!1))]).then(()=>r)}function Ii(t,...e){var n,r,s;t=Ye(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||wv(e[o])||(i=e[o],o++);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(wv(e[o])){const m=e[o];e[o]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[o+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[o+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let u,c,f;if(t instanceof Et)c=Vt(t.firestore,Yn),f=tc(t._key.path),u={next:m=>{e[o]&&e[o](yT(c,t,m))},error:e[o+1],complete:e[o+2]};else{const m=Vt(t,er);c=Vt(m.firestore,Yn),f=m._query;const g=new qp(c);u={next:I=>{e[o]&&e[o](new gT(c,g,m,I))},error:e[o+1],complete:e[o+2]},hT(t._query)}return function(g,I,C,D){const R=new Dp(D),E=new Pp(I,R,C);return g.asyncQueue.enqueueAndForget(async()=>Cp(await Au(g),E)),()=>{R.Za(),g.asyncQueue.enqueueAndForget(async()=>Np(await Au(g),E))}}(hc(c),f,l,u)}function _c(t,e){return function(r,s){const i=new Bn;return r.asyncQueue.enqueueAndForget(async()=>XP(await ab(r),s,i)),i.promise}(hc(t),e)}function yT(t,e,n){const r=n.docs.get(e._key),s=new qp(t);return new mT(t,s,e._key,r,new wo(n.hasPendingWrites,n.fromCache),e.converter)}function tt(){return new Lp("serverTimestamp")}function Iv(...t){return new Vp("arrayUnion",t)}(function(e,n=!0){(function(s){Pi=s})(Ni),hi(new ps("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Yn(new RN(r.getProvider("auth-internal")),new jN(r.getProvider("app-check-internal")),function(c,f){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new H(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oa(c.options.projectId,f)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Pr(Vy,"4.7.3",e),Pr(Vy,"4.7.3","esm2017")})();var xb="firebase",Ab="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pr(xb,Ab,"app");const Cb={apiKey:"AIzaSyAgbLkut_IDZRB9Ej8Srx5dEUYCy7zxja4",authDomain:"togo-bc8aa.firebaseapp.com",projectId:"togo-bc8aa",storageBucket:"togo-bc8aa.firebasestorage.app",messagingSenderId:"367980048662",appId:"1:367980048662:web:453b441cdb692584752037"},vT=fw(Cb),wl=xN(vT),Y=fb(vT),Nb="alexjmilano@gmail.com",_T=A.createContext(null);function Kt(){return A.useContext(_T)}function Rb({children:t}){const[e,n]=A.useState(null),[r,s]=A.useState(null),[i,o]=A.useState(null),[l,u]=A.useState(!0);async function c(R,E,_,w){const b=await cC(wl,R,E),O=R.toLowerCase()===Nb.toLowerCase()?"admin":"user",M=_.trim().toLowerCase();return await ls(pe(Y,"users",b.user.uid),{uid:b.user.uid,email:R.toLowerCase(),role:O,handle:M,displayName:w.trim(),bio:"",createdAt:tt()}),await ls(pe(Y,"userSettings",b.user.uid),{userId:b.user.uid,theme:"normal",streak:0,lastPeakDay:null,createdAt:tt(),updatedAt:tt()}),b}function f(R,E){return dC(wl,R,E)}function m(){return mC(wl)}async function g(R){try{const E=await es(pe(Y,"users",R));if(E.exists())return E.data().role||"user"}catch(E){console.warn("AuthContext: could not fetch role",E)}return"user"}async function I(R){e&&await An(pe(Y,"users",e.uid),{...R,updatedAt:tt()})}A.useEffect(()=>pC(wl,async E=>{if(n(E),E){const _=await g(E.uid);s(_)}else s(null),o(null);u(!1)}),[]),A.useEffect(()=>{if(!e){o(null);return}return Ii(pe(Y,"users",e.uid),E=>{E.exists()?o({id:E.id,...E.data()}):o(null)})},[e]);const C=!!e&&!!i&&!i.handle,D={currentUser:e,userRole:r,userProfile:i,authLoading:l,needsHandle:C,register:c,login:f,logout:m,updateUserProfile:I};return d.jsx(_T.Provider,{value:D,children:t})}const oe=(t,e,n)=>({name:t,sub:e,icon:n}),Sv={normal:{name:"Default",icon:"",worker:{headerLabel:" WORKER MODE",locked:oe("Locked In","To Do",""),progress:oe("In The Zone","In Progress",""),touchdown:oe("Touchdown","Done","")},life:{headerLabel:" LIFE MODE",locked:oe("To Do","Planned",""),progress:oe("Doing","In Progress",""),touchdown:oe("Done","Completed","")},ice:oe("Ice Bucket","Frozen / Paused","")},aesthetic:{name:"Aesthetic",icon:"",worker:{headerLabel:" WORKER MODE",locked:oe("Dreaming","Ideas",""),progress:oe("Flowing","In Progress",""),touchdown:oe("Glowing","Done","")},life:{headerLabel:" LIFE MODE",locked:oe("Wishlist","Planned",""),progress:oe("Working On","Ongoing",""),touchdown:oe("Achieved","Done","")},ice:oe("On Hold","Paused ","")},football:{name:"Football",icon:"",worker:{headerLabel:" GAME TIME",locked:oe("Pre-Game","Ready",""),progress:oe("On The Field","In Play",""),touchdown:oe("Touchdown","Scored","")},life:{headerLabel:" OFF FIELD",locked:oe("Off-Season","Planned",""),progress:oe("Training","In Progress",""),touchdown:oe("Victory","Done","")},ice:oe("On Bench","Benched","")},soccer:{name:"Soccer",icon:"",worker:{headerLabel:" MATCH DAY",locked:oe("Warm Up","Ready",""),progress:oe("On The Pitch","In Play",""),touchdown:oe("GOAL!","Scored","")},life:{headerLabel:" LOCKER ROOM",locked:oe("Locker Room","Planned",""),progress:oe("Practicing","In Progress",""),touchdown:oe("Win","Done","")},ice:oe("Injured List","Paused","")},basketball:{name:"Basketball",icon:"",worker:{headerLabel:" GAME ON",locked:oe("Bench","Ready",""),progress:oe("On Court","In Play",""),touchdown:oe("Slam Dunk","Scored","")},life:{headerLabel:" OFF COURT",locked:oe("Practice","Planned",""),progress:oe("Playing","In Progress",""),touchdown:oe("Swish","Done","")},ice:oe("Timeout","Paused","")},baseball:{name:"Baseball",icon:"",worker:{headerLabel:" PLAY BALL",locked:oe("Dugout","Ready",""),progress:oe("At Bat","In Play",""),touchdown:oe("Home Run","Scored","")},life:{headerLabel:" BULLPEN",locked:oe("Bullpen","Planned",""),progress:oe("On Base","In Progress",""),touchdown:oe("Score","Done","")},ice:oe("Disabled List","Paused","")}};function wT(t){return Sv[t]||Sv.normal}const kv={normal:{"--bg":"#f4f6fb","--bg2":"#eef1f8","--bg3":"#e8ecf4","--card":"#ffffff","--card-h":"#f0f4ff","--border":"rgba(15,23,42,0.08)","--border2":"rgba(15,23,42,0.14)","--text":"#0f172a","--text2":"#475569","--text3":"#94a3b8","--shadow":"0 4px 24px rgba(0,0,0,0.08)","--navbar-bg":"rgba(244,246,251,0.92)"},aesthetic:{"--bg":"#fdf4ff","--bg2":"#f9eeff","--bg3":"#f3e8ff","--card":"#ffffff","--card-h":"#fce7ff","--border":"rgba(168,85,247,0.1)","--border2":"rgba(168,85,247,0.18)","--text":"#3b0764","--text2":"#7c3aed","--text3":"#a78bfa","--shadow":"0 4px 24px rgba(168,85,247,0.1)","--navbar-bg":"rgba(253,244,255,0.92)"},football:{"--bg":"#f0fdf4","--bg2":"#e8f9ed","--bg3":"#dcf5e5","--card":"#ffffff","--card-h":"#d1fae5","--border":"rgba(16,185,129,0.1)","--border2":"rgba(16,185,129,0.18)","--text":"#064e3b","--text2":"#065f46","--text3":"#6ee7b7","--shadow":"0 4px 24px rgba(16,185,129,0.1)","--navbar-bg":"rgba(240,253,244,0.92)"},soccer:{"--bg":"#f0fdf4","--bg2":"#e6fbf0","--bg3":"#d1f5e0","--card":"#ffffff","--card-h":"#bbf7d0","--border":"rgba(34,197,94,0.1)","--border2":"rgba(34,197,94,0.18)","--text":"#14532d","--text2":"#166534","--text3":"#86efac","--shadow":"0 4px 24px rgba(34,197,94,0.1)","--navbar-bg":"rgba(240,253,244,0.92)"},basketball:{"--bg":"#fff7ed","--bg2":"#ffedd5","--bg3":"#fed7aa","--card":"#ffffff","--card-h":"#ffedd5","--border":"rgba(249,115,22,0.1)","--border2":"rgba(249,115,22,0.18)","--text":"#431407","--text2":"#7c2d12","--text3":"#fdba74","--shadow":"0 4px 24px rgba(249,115,22,0.1)","--navbar-bg":"rgba(255,247,237,0.92)"},baseball:{"--bg":"#fefce8","--bg2":"#fef9c3","--bg3":"#fef08a","--card":"#ffffff","--card-h":"#fef9c3","--border":"rgba(202,138,4,0.1)","--border2":"rgba(202,138,4,0.18)","--text":"#422006","--text2":"#713f12","--text3":"#fbbf24","--shadow":"0 4px 24px rgba(202,138,4,0.1)","--navbar-bg":"rgba(254,252,232,0.92)"}};function xv(t){return kv[t]||kv.normal}const ET=A.createContext({themeName:"normal",themeData:wT("normal"),lightMode:!1,toggleLightMode:()=>{}});function ba(){return A.useContext(ET)}function Pb({children:t}){const{currentUser:e}=Kt(),[n,r]=A.useState("normal"),[s,i]=A.useState(!1);A.useEffect(()=>{if(!e){r("normal"),i(!1);return}return Ii(pe(Y,"userSettings",e.uid),u=>{u.exists()&&(r(u.data().theme||"normal"),i(u.data().lightMode??!1))})},[e]),A.useEffect(()=>{const l=document.documentElement;if(n==="normal"?l.removeAttribute("data-theme"):l.setAttribute("data-theme",n),s){l.setAttribute("data-light","true");const u=xv(n);Object.entries(u).forEach(([c,f])=>{l.style.setProperty(c,f)})}else{l.removeAttribute("data-light");const u=xv(n);Object.keys(u).forEach(c=>{l.style.removeProperty(c)})}},[n,s]);async function o(){const l=!s;i(l),e&&await ls(pe(Y,"userSettings",e.uid),{lightMode:l,updatedAt:tt()},{merge:!0})}return d.jsx(ET.Provider,{value:{themeName:n,themeData:wT(n),lightMode:s,toggleLightMode:o},children:t})}function bs({children:t,requireAdmin:e=!1}){const{currentUser:n,userRole:r,authLoading:s}=Kt();return s?d.jsxs("div",{className:"loading-screen",children:[d.jsx("div",{className:"loading-logo",children:"5toGo"}),d.jsx("div",{className:"spinner"})]}):n?e&&r!=="admin"?d.jsx(_h,{to:"/app",replace:!0}):t:d.jsx(_h,{to:"/login",replace:!0})}const bb=/^[a-z0-9_]{3,20}$/;function Kp(t){if(!t||t.trim().length===0)return"Handle is required.";const e=t.trim().toLowerCase();return e.length<3?"Handle must be at least 3 characters.":e.length>20?"Handle must be 20 characters or less.":bb.test(e)?null:"Only lowercase letters, numbers, and underscores allowed."}async function Gp(t,e,n=null){const r=e.trim().toLowerCase();try{const s=Ct(Me(t,"users"),Ce("handle","==",r)),i=await fn(s);return!!(i.empty||n&&i.docs.length===1&&i.docs[0].id===n)}catch(s){return console.warn("checkHandleAvailable error:",s),!1}}function Db(){const{currentUser:t,updateUserProfile:e,logout:n}=Kt(),[r,s]=A.useState(""),[i,o]=A.useState(""),[l,u]=A.useState(""),[c,f]=A.useState(!1),[m,g]=A.useState(!1),[I,C]=A.useState("");A.useEffect(()=>{f(!1);const R=Kp(i);if(i.length===0){u("");return}if(R){u(R);return}u("Checking");const E=setTimeout(async()=>{await Gp(Y,i,t==null?void 0:t.uid)?(u(" Available"),f(!0)):(u("Handle already taken."),f(!1))},500);return()=>clearTimeout(E)},[i,t==null?void 0:t.uid]);async function D(R){if(R.preventDefault(),!(!c||!r.trim())){g(!0),C("");try{await e({handle:i.trim().toLowerCase(),displayName:r.trim(),bio:""})}catch{C("Something went wrong. Please try again.")}finally{g(!1)}}}return d.jsx("div",{className:"modal-overlay open",children:d.jsxs("div",{className:"modal-box set-handle-modal",children:[d.jsxs("div",{className:"shm-header",children:[d.jsxs("span",{className:"shm-logo",children:["5",d.jsx("span",{children:"to"}),"Go"]}),d.jsx("p",{className:"shm-title",children:"Set Up Your Profile"}),d.jsx("p",{className:"shm-sub",children:"Choose a handle to identify yourself. This cannot be changed easily."})]}),I&&d.jsx("div",{className:"auth-error",children:I}),d.jsxs("form",{className:"sched-form",onSubmit:D,children:[d.jsxs("div",{className:"sched-field",children:[d.jsx("label",{className:"sched-field-label",children:"Display Name"}),d.jsx("input",{className:"auth-input",placeholder:"Your name",value:r,onChange:R=>s(R.target.value),maxLength:40,required:!0,autoFocus:!0})]}),d.jsxs("div",{className:"sched-field",children:[d.jsx("label",{className:"sched-field-label",children:"Handle"}),d.jsxs("div",{className:"handle-input-wrap",children:[d.jsx("span",{className:"handle-at",children:"@"}),d.jsx("input",{className:`auth-input handle-input ${c?"handle-ok":l&&!c?"handle-err":""}`,placeholder:"your_handle",value:i,onChange:R=>o(R.target.value.toLowerCase()),maxLength:20,required:!0,autoComplete:"off"})]}),l&&d.jsx("span",{className:`handle-hint ${c?"handle-hint-ok":"handle-hint-err"}`,children:l}),d.jsx("span",{className:"sched-field-label",style:{marginTop:2},children:"320 chars. Letters, numbers, underscore only."})]}),d.jsx("button",{className:"auth-submit",type:"submit",disabled:m||!c||!r.trim(),children:m?"Saving":"Set Handle & Continue"})]}),d.jsx("button",{className:"shm-logout",onClick:n,children:"Sign out instead"})]})})}function jb(){const{login:t,register:e}=Kt(),n=va(),[r,s]=A.useState(!1),[i,o]=A.useState(""),[l,u]=A.useState(""),[c,f]=A.useState(""),[m,g]=A.useState(""),[I,C]=A.useState(""),[D,R]=A.useState(""),[E,_]=A.useState(!1),[w,b]=A.useState(""),[O,M]=A.useState(!1);A.useEffect(()=>{if(!r)return;_(!1);const N=Kp(I);if(I.length===0){R("");return}if(N){R(N);return}R("Checking");const x=setTimeout(async()=>{await Gp(Y,I)?(R(" Available"),_(!0)):(R("Handle already taken."),_(!1))},500);return()=>clearTimeout(x)},[I,r]);const T=r?"Create your account":"Sign in to your account",y=r?"Create Account":"Sign In";function S(N){switch(N){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":return"Invalid email or password.";case"auth/email-already-in-use":return"An account with this email already exists.";case"auth/weak-password":return"Password must be at least 6 characters.";case"auth/invalid-email":return"Please enter a valid email address.";case"auth/too-many-requests":return"Too many attempts. Try again later.";default:return"Something went wrong. Please try again."}}async function k(N){if(N.preventDefault(),b(""),r&&l!==c){b("Passwords do not match.");return}if(r&&l.length<6){b("Password must be at least 6 characters.");return}if(r&&!m.trim()){b("Display name is required.");return}if(r&&!E){b("Please choose a valid, available handle.");return}M(!0);try{r?await e(i.trim(),l,I.trim(),m.trim()):await t(i.trim(),l),n("/app",{replace:!0})}catch(x){b(S(x.code))}finally{M(!1)}}function P(){s(N=>!N),b(""),u(""),f(""),C(""),g(""),R(""),_(!1)}return d.jsx("div",{className:"auth-page",children:d.jsxs("div",{className:"auth-card",children:[d.jsx("div",{className:"auth-logo",children:d.jsx("div",{className:"auth-logo-text",children:"5toGo"})}),d.jsx("p",{className:"auth-tagline",children:"5 YARDS TO TOUCHDOWN"}),d.jsx("p",{className:"auth-title",children:T}),w&&d.jsx("div",{className:"auth-error",children:w}),d.jsxs("form",{className:"auth-form",onSubmit:k,noValidate:!0,children:[d.jsxs("div",{className:"auth-field",children:[d.jsx("label",{className:"auth-label",children:"Email"}),d.jsx("input",{className:"auth-input",type:"email",placeholder:"you@example.com",value:i,onChange:N=>o(N.target.value),required:!0,autoComplete:"email",autoFocus:!0})]}),d.jsxs("div",{className:"auth-field",children:[d.jsx("label",{className:"auth-label",children:"Password"}),d.jsx("input",{className:"auth-input",type:"password",placeholder:r?"Min. 6 characters":"",value:l,onChange:N=>u(N.target.value),required:!0,autoComplete:r?"new-password":"current-password"})]}),r&&d.jsxs("div",{className:"auth-field",children:[d.jsx("label",{className:"auth-label",children:"Confirm Password"}),d.jsx("input",{className:"auth-input",type:"password",placeholder:"Repeat your password",value:c,onChange:N=>f(N.target.value),required:!0,autoComplete:"new-password"})]}),r&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"auth-field",children:[d.jsx("label",{className:"auth-label",children:"Display Name"}),d.jsx("input",{className:"auth-input",type:"text",placeholder:"Your full name or nickname",value:m,onChange:N=>g(N.target.value),maxLength:40,required:!0,autoComplete:"name"})]}),d.jsxs("div",{className:"auth-field",children:[d.jsx("label",{className:"auth-label",children:"Handle"}),d.jsxs("div",{className:"handle-input-wrap",children:[d.jsx("span",{className:"handle-at",children:"@"}),d.jsx("input",{className:`auth-input handle-input ${E?"handle-ok":""}`,type:"text",placeholder:"your_handle",value:I,onChange:N=>C(N.target.value.toLowerCase()),maxLength:20,required:!0,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1})]}),D&&d.jsx("span",{className:`handle-hint ${E?"handle-hint-ok":"handle-hint-err"}`,children:D})]})]}),d.jsx("button",{className:"auth-submit",type:"submit",disabled:O,children:O?r?"Creating account":"Signing in":y})]}),d.jsxs("div",{className:"auth-toggle",children:[r?"Already have an account?":"Don't have an account?",d.jsx("button",{onClick:P,children:r?"Sign in":"Create one"})]})]})})}/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ob=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),TT=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Lb={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vb=A.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...l},u)=>A.createElement("svg",{ref:u,...Lb,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:TT("lucide",s),...l},[...o.map(([c,f])=>A.createElement(c,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=(t,e)=>{const n=A.forwardRef(({className:r,...s},i)=>A.createElement(Vb,{ref:i,iconNode:e,className:TT(`lucide-${Ob(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=Xe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mb=Xe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fb=Xe("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ub=Xe("CalendarPlus",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"3spt84"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M16 19h6",key:"xwg31i"}],["path",{d:"M19 16v6",key:"tddt3s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bb=Xe("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IT=Xe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ST=Xe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Av=Xe("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zb=Xe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $b=Xe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wb=Xe("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hb=Xe("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qb=Xe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kb=Xe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gb=Xe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kT=Xe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xT=Xe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qb=Xe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=Xe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Nu={empty:{key:"empty",label:"Ready to start",msg:"Add your first task!",cls:"zone-empty"},green:{key:"green",label:"Peak performance",msg:"Peak performance zone ",cls:"zone-green"},yellow:{key:"yellow",label:"High workload",msg:" High workload. Don't overcommit.",cls:"zone-yellow"},red:{key:"red",label:"Burnout risk",msg:" Burnout risk! Consider moving tasks to Life.",cls:"zone-red"}};function AT(t){return t===0?"empty":t<=5?"green":t<=7?"yellow":"red"}const Id=[{min:15,label:"OVERACHIEVER",icon:"",cls:"sc-over",note:"Remember to rest tomorrow "},{min:10,label:"PEAK DAY",icon:"",cls:"sc-peak",note:""},{min:7,label:"SOLID DAY",icon:"",cls:"sc-solid",note:""},{min:4,label:"GOOD EFFORT",icon:"",cls:"sc-good",note:""},{min:0,label:"OFF DAY",icon:"",cls:"sc-off",note:""}];function Ru(t){for(const e of Id)if(t>=e.min)return e;return Id[Id.length-1]}function Qp(t){return t.reduce((e,n)=>e+(Number(n.difficulty)||1),0)}const Cv=[{bg:"rgba(76,201,240,0.15)",text:"#4cc9f0",border:"rgba(76,201,240,0.3)"},{bg:"rgba(255,107,53,0.15)",text:"#ff6b35",border:"rgba(255,107,53,0.3)"},{bg:"rgba(45,198,83,0.15)",text:"#2dc653",border:"rgba(45,198,83,0.3)"},{bg:"rgba(155,93,229,0.15)",text:"#9b5de5",border:"rgba(155,93,229,0.3)"},{bg:"rgba(255,215,0,0.15)",text:"#ffd700",border:"rgba(255,215,0,0.3)"},{bg:"rgba(240,76,201,0.15)",text:"#f04cc9",border:"rgba(240,76,201,0.3)"},{bg:"rgba(76,240,201,0.15)",text:"#4cf0c9",border:"rgba(76,240,201,0.3)"},{bg:"rgba(255,165,0,0.15)",text:"#ffa500",border:"rgba(255,165,0,0.3)"}];function wc(t){let e=0;for(let n=0;n<t.length;n++)e=e*31+t.charCodeAt(n)|0;return Cv[Math.abs(e)%Cv.length]}function Yb(t,e){const n=t+e;if(n===0)return{icon:"",label:"No activity",cls:"bs-empty"};const r=e/n;return r>=.35?{icon:"",label:"Balanced",cls:"bs-balanced"}:r>=.15?{icon:"",label:"Work-focused",cls:"bs-focused"}:e===0?{icon:"",label:"Workaholic",cls:"bs-workaholic"}:{icon:"",label:"Work-heavy",cls:"bs-focused"}}function Xb(){const{lightMode:t,toggleLightMode:e}=ba();return d.jsxs("button",{className:"theme-toggle-btn",onClick:e,title:t?"Switch to Dark Mode":"Switch to Light Mode","aria-label":t?"Switch to Dark Mode":"Switch to Light Mode",children:[d.jsx("span",{className:"theme-toggle-icon",children:t?"":""}),d.jsx("span",{className:"theme-toggle-label",children:t?"Dark":"Light"})]})}async function Jb(t,e,n,r){if(!e.length)return;const s=e.map(l=>l.handle),i=e.map(l=>l.userId);await An(pe(Y,"tasks",t),{sharedWith:Iv(...s),sharedWithUids:Iv(...i),isShared:!0,sharedBy:r,sharedAt:tt()});const o=e.map(l=>Ti(Me(Y,"sharedTaskNotifications"),{userId:l.userId,taskId:t,sharedBy:r,sharedByHandle:r,taskText:n.text,read:!1,createdAt:tt()}));await Promise.all(o)}async function Zb(t){await An(pe(Y,"sharedTaskNotifications",t),{read:!0})}async function e2(t){const e=t.filter(n=>!n.read);e.length&&await Promise.all(e.map(n=>An(pe(Y,"sharedTaskNotifications",n.id),{read:!0})))}function t2(t){if(!t)return"";const e=t.seconds?t.seconds*1e3:t,r=Date.now()-e,s=Math.floor(r/6e4),i=Math.floor(r/36e5),o=Math.floor(r/864e5);return s<1?"just now":s<60?`${s}m ago`:i<24?`${i}h ago`:o<7?new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"}):new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}function n2({currentUser:t}){const[e,n]=A.useState([]),[r,s]=A.useState(!1),i=A.useRef(null),o=e.filter(c=>!c.read).length;A.useEffect(()=>{if(!t)return;const c=Ct(Me(Y,"sharedTaskNotifications"),Ce("userId","==",t.uid),da("createdAt","desc"),Hp(20));return Ii(c,f=>{const m=f.docs.map(g=>({id:g.id,...g.data()}));n(m)})},[t]),A.useEffect(()=>{if(!r)return;const c=f=>{i.current&&!i.current.contains(f.target)&&s(!1)};return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[r]);async function l(c){await Zb(c)}async function u(){await e2(e)}return d.jsxs("div",{className:"notif-bell",ref:i,children:[d.jsxs("button",{className:"nav-btn notif-bell-btn",onClick:()=>s(!r),children:[d.jsx(Mb,{size:14}),o>0&&d.jsx("span",{className:"notif-badge",children:o>9?"9+":o})]}),r&&d.jsxs("div",{className:"notif-panel",children:[d.jsxs("div",{className:"np-header",children:[d.jsx("span",{className:"np-title",children:"Notifications"}),o>0&&d.jsx("button",{className:"np-mark-all",onClick:u,children:"Mark all read"})]}),d.jsx("div",{className:"np-list",children:e.length===0?d.jsx("div",{className:"np-empty",children:"No notifications yet"}):e.map(c=>d.jsxs("div",{className:`np-item ${c.read?"":"unread"}`,onClick:()=>!c.read&&l(c.id),children:[d.jsxs("div",{className:"np-from",children:["Shared by ",d.jsxs("strong",{children:["@",c.sharedByHandle]})]}),d.jsx("div",{className:"np-item-task",children:c.taskText}),d.jsx("div",{className:"np-item-time",children:t2(c.createdAt)})]},c.id))})]})]})}function Yp({todayPoints:t=0,streak:e=0,zone:n="empty",onOpenSettings:r}){var m;const{currentUser:s,userRole:i,userProfile:o,logout:l}=Kt();va();const u=Ru(t),c=Nu[n]||Nu.empty;async function f(){try{await l()}catch(g){console.error(g)}}return d.jsxs("nav",{className:"navbar",children:[d.jsxs("div",{className:"navbar-left",children:[d.jsxs(an,{to:"/app",className:"nav-logo",children:["5",d.jsx("span",{className:"nav-logo-accent",children:"to"}),"Go"]}),d.jsx("span",{className:"nav-tagline",children:"5 YARDS TO TOUCHDOWN"})]}),d.jsxs("div",{className:"navbar-center",children:[d.jsxs("div",{className:"nav-score",children:[d.jsx("span",{className:"nav-score-label",children:"TODAY"}),d.jsx("span",{className:`nav-score-value ${u.cls}`,children:t}),d.jsx("span",{className:"nav-score-sep",children:"/10 pts"}),d.jsx("div",{className:"nav-score-divider"}),d.jsxs("span",{className:`nav-score-status ${u.cls}`,children:[u.icon," ",u.label]})]}),d.jsx("div",{className:`nav-zone-pill ${c.cls}`,children:c.label}),e>0&&d.jsxs("div",{className:"nav-streak",children:[d.jsx("span",{children:""}),d.jsx("span",{className:"nav-streak-num",children:e}),d.jsx("span",{className:"nav-streak-label",children:"day streak"})]})]}),d.jsxs("div",{className:"navbar-right",children:[d.jsx(Xb,{}),d.jsx(n2,{currentUser:s}),(o==null?void 0:o.handle)&&d.jsxs(an,{to:`/profile/${o.handle}`,className:"nav-btn",children:[d.jsx(Qb,{size:14})," Profile"]}),d.jsxs(an,{to:"/calendar",className:"nav-btn",children:[d.jsx(Fb,{size:14})," Calendar"]}),d.jsxs(an,{to:"/history",className:"nav-btn",children:[d.jsx(Bb,{size:14})," History"]}),d.jsxs("button",{className:"nav-btn",onClick:r,children:[d.jsx(Gb,{size:14})," Settings"]}),i==="admin"&&d.jsxs(an,{to:"/admin",className:"nav-btn admin",children:[d.jsx(kT,{size:14})," Admin"]}),d.jsxs("button",{className:"nav-btn logout",onClick:f,children:[d.jsx(zb,{size:14})," ",o!=null&&o.handle?`@${o.handle}`:(m=s==null?void 0:s.email)==null?void 0:m.split("@")[0]]})]})]})}function Li(){return new Date().toISOString().split("T")[0]}function r2(){const t=new Date;return t.setDate(t.getDate()-1),t.toISOString().split("T")[0]}function qh(t=new Date){const e=new Date(t);e.setHours(0,0,0,0),e.setDate(e.getDate()+4-(e.getDay()||7));const n=new Date(e.getFullYear(),0,1);return Math.ceil(((e-n)/864e5+1)/7)}function CT(t){return t?(t.toDate?t.toDate():new Date(t)).toLocaleDateString("en-US",{month:"short",day:"numeric"}):""}function Nv(t){const e=new Date;return e.setDate(e.getDate()-t),e.toISOString().split("T")[0]}function s2(t=0){const e=new Date,n=e.getDay()||7,r=new Date(e);return r.setDate(e.getDate()-n+1+t*7),r.setHours(0,0,0,0),Array.from({length:7},(s,i)=>{const o=new Date(r);return o.setDate(r.getDate()+i),o.toISOString().split("T")[0]})}function NT(t){return new Date(t+"T00:00:00").toLocaleDateString("en-US",{weekday:"short",day:"numeric"})}function i2(t){if(!t||t.length===0)return"";const e=n=>new Date(n+"T00:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"});return`${e(t[0])}  ${e(t[6])}`}const Rv={locked:"progress",progress:"touchdown",ice:"locked"},Pv={progress:"locked",touchdown:"progress"},o2={locked:" Start",progress:" Done",ice:" Activate"},a2={progress:" Back",touchdown:" Undo"},l2={1:"",2:"",3:""},u2=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function c2(t){const e=new Date(t+"T00:00:00");return`${u2[e.getMonth()]} ${e.getDate()}`}function d2({task:t,onMove:e,onDelete:n,onDragStart:r,onDragEnd:s,isDragging:i,currentUser:o,userProfile:l,onShare:u}){const c=Li(),f=t.dateStr&&t.dateStr<c,m=t.dateStr&&t.dateStr>c,g=(l==null?void 0:l.handle)||null,I=(o==null?void 0:o.uid)||null,C=t.userId===I,R=(t.sharedWith||[]).includes(g)&&!C,E=C||R,_=C,w=C;let b=`task-card m-${t.mode} s-${t.status}`;i&&(b+=" is-dragging"),f&&(b+=" old-task"),m&&(b+=" future-task");const O=Array.isArray(t.tags)?t.tags.filter(Boolean):[];return d.jsxs("div",{className:b,draggable:!0,"data-id":t.id,onDragStart:M=>{M.dataTransfer.effectAllowed="move",M.dataTransfer.setData("text/plain",t.id),r(t.id)},onDragEnd:s,children:[m&&d.jsxs("div",{className:"task-future-badge",children:[" ",c2(t.dateStr)]}),t.isShared&&d.jsx("div",{className:"task-shared-badge",children:C?` Shared with ${(t.sharedWith||[]).length} ${(t.sharedWith||[]).length===1?"person":"people"}`:` Shared by @${t.sharedBy}`}),d.jsx("div",{className:"task-title",children:t.text}),O.length>0&&d.jsx("div",{className:"task-tags",children:O.map((M,T)=>{const y=wc(M);return d.jsxs("span",{className:"tag-chip",style:{background:y.bg,color:y.text,borderColor:y.border},children:["#",M]},T)})}),d.jsxs("div",{className:"task-footer",children:[d.jsx("span",{className:`mode-badge badge-${t.mode}`,children:t.mode==="worker"?"WORKER":"LIFE"}),t.mode==="worker"&&t.difficulty&&d.jsx("span",{className:"task-stars",title:`Difficulty ${t.difficulty}`,children:l2[t.difficulty]||""}),d.jsxs("div",{className:"task-actions",children:[E&&Rv[t.status]&&d.jsx("button",{className:"act fwd",onClick:()=>e(t.id,Rv[t.status]),children:o2[t.status]}),E&&Pv[t.status]&&d.jsx("button",{className:"act back",onClick:()=>e(t.id,Pv[t.status]),children:a2[t.status]}),E&&(t.status==="locked"||t.status==="progress")&&d.jsx("button",{className:"act ice",onClick:()=>e(t.id,"ice"),children:""}),w&&u&&d.jsx("button",{className:"act share",onClick:()=>u(t.id),children:""}),_&&d.jsx("button",{className:"act del",onClick:()=>n(t.id),children:""})]})]})]})}const h2={locked:{icon:"",text:"Add tasks above to lock in"},progress:{icon:"",text:"Drag a task here to start"},touchdown:{icon:"",text:"Complete tasks to score points"},ice:{icon:"",text:"Frozen or paused tasks live here"}};function Pu({title:t,subtitle:e,icon:n,status:r,colorClass:s,tasks:i,onMove:o,onDelete:l,draggingId:u,onDragStart:c,onDragEnd:f,currentUser:m,userProfile:g,onShare:I}){const[C,D]=A.useState(!1),R=h2[r]||{icon:"",text:"Empty"};function E(b){b.preventDefault(),b.dataTransfer.dropEffect="move",D(!0)}function _(b){b.currentTarget.contains(b.relatedTarget)||D(!1)}function w(b){b.preventDefault(),D(!1);const O=b.dataTransfer.getData("text/plain")||u;O&&o(O,r)}return d.jsxs("div",{className:`column ${s} ${C?"drop-target":""}`,children:[d.jsxs("div",{className:"col-header",children:[d.jsxs("div",{className:"col-title-row",children:[d.jsx("span",{className:"col-icon",children:n}),d.jsx("span",{className:"col-name",children:t}),d.jsx("span",{className:"col-count",children:i.length})]}),d.jsx("span",{className:"col-sub",children:e})]}),d.jsx("div",{className:`task-list ${C?"drag-over":""}`,onDragOver:E,onDragLeave:_,onDrop:w,children:i.length===0?d.jsxs("div",{className:"col-empty",children:[d.jsx("span",{className:"col-empty-icon",children:R.icon}),R.text]}):i.map(b=>d.jsx(d2,{task:b,onMove:o,onDelete:l,onDragStart:c,onDragEnd:f,isDragging:u===b.id,currentUser:m,userProfile:g,onShare:I},b.id))})]})}const f2=[{value:1,label:" Easy",cls:"diff-easy"},{value:2,label:" Med",cls:"diff-medium"},{value:3,label:" Hard",cls:"diff-hard"}];function RT({value:t,onChange:e}){return d.jsx("div",{className:"diff-selector",children:f2.map(n=>d.jsx("button",{type:"button",className:`diff-opt ${n.cls} ${t===n.value?"selected":""}`,onClick:()=>e(n.value),children:n.label},n.value))})}function Xp({tags:t,onChange:e,placeholder:n="Add tag"}){const[r,s]=A.useState("");function i(u){const c=u.trim().toLowerCase().replace(/[^a-z0-9_-]/g,"");c&&!t.includes(c)&&e([...t,c]),s("")}function o(u){(u.key==="Enter"||u.key===",")&&(u.preventDefault(),i(r)),u.key==="Backspace"&&r===""&&t.length>0&&e(t.slice(0,-1))}function l(u){e(t.filter(c=>c!==u))}return d.jsxs("div",{className:"tag-input-wrap",children:[t.map(u=>{const c=wc(u);return d.jsxs("span",{className:"tag-pill",style:{background:c.bg,color:c.text,borderColor:c.border},children:["#",u,d.jsx("button",{type:"button",className:"tag-pill-remove",onClick:()=>l(u),style:{color:c.text},children:""})]},u)}),d.jsx("input",{className:"tag-input-field",value:r,onChange:u=>s(u.target.value),onKeyDown:o,onBlur:()=>r.trim()&&i(r),placeholder:t.length===0?n:"",maxLength:30})]})}function p2({zone:t,activeCount:e}){const n=Nu[t]||Nu.empty;return d.jsxs("div",{className:`zone-badge ${n.cls}`,children:[d.jsx("span",{className:"zone-count",children:e}),d.jsx("span",{className:"zone-msg",children:n.msg})]})}function m2({tasks:t,iceTasks:e,activeWorkerCount:n,todayPoints:r,streak:s,draggingId:i,onMove:o,onDelete:l,onDragStart:u,onDragEnd:c,onAddTask:f,currentUser:m,userProfile:g,onShare:I}){const{themeData:C}=ba(),D=C.worker,R=C.ice||{name:"Ice Bucket",sub:"Frozen",icon:""},[E,_]=A.useState(""),[w,b]=A.useState(2),[O,M]=A.useState([]),[T,y]=A.useState(null),[S,k]=A.useState(!1),[P,N]=A.useState(null),x=AT(n),he=Ru(r),He=Math.min(r/10*100,100),qe=A.useMemo(()=>{const se=new Set;return t.forEach(Te=>(Te.tags||[]).forEach(Ue=>se.add(Ue))),[...se]},[t]),Oe=T?t.filter(se=>(se.tags||[]).includes(T)):t;async function V(se){if(se.preventDefault(),!!E.trim()){if(n>=7){N({text:E.trim(),difficulty:w,tags:O}),k(!0);return}await W("worker",E.trim(),w,O)}}async function W(se,Te,Ue,Be){await f({text:Te,mode:se,difficulty:Ue,tags:Be}),_(""),M([])}async function G(){P&&(await W("life",P.text,P.difficulty,P.tags),Z())}function Q(){Z()}async function te(){P&&(await W("worker",P.text,P.difficulty,P.tags),Z())}function Z(){k(!1),N(null)}return d.jsxs("div",{className:`worker-side zone-border-${x}`,children:[d.jsxs("div",{className:"board-header worker-header",children:[d.jsxs("div",{className:"bh-top",children:[d.jsx("span",{className:"bh-title",children:D.headerLabel}),d.jsx(p2,{zone:x,activeCount:n})]}),d.jsxs("div",{className:"bh-score",children:[d.jsxs("div",{className:"bh-score-row",children:[d.jsxs("span",{className:`bh-pts ${he.cls}`,children:[r,d.jsx("span",{className:"bh-pts-max",children:"/10 pts"})]}),d.jsxs("span",{className:`bh-level-badge ${he.cls}`,children:[he.icon," ",he.label]}),s>0&&d.jsxs("span",{className:"bh-streak",children:[" ",s,"d"]})]}),d.jsx("div",{className:"bh-bar-track",children:d.jsx("div",{className:`bh-bar-fill ${he.cls}`,style:{width:`${He}%`}})}),he.note&&d.jsx("span",{className:"bh-note",children:he.note})]})]}),d.jsxs("form",{className:"board-add-form",onSubmit:V,children:[d.jsxs("div",{className:"baf-row1",children:[d.jsx("input",{className:"baf-input",placeholder:"Add a worker task",value:E,onChange:se=>_(se.target.value),maxLength:140}),d.jsx("button",{className:"baf-btn worker-btn",type:"submit",children:"+ Add"})]}),d.jsxs("div",{className:"baf-row2",children:[d.jsx(RT,{value:w,onChange:b}),d.jsx(Xp,{tags:O,onChange:M,placeholder:"tags"})]})]}),qe.length>0&&d.jsxs("div",{className:"tag-filter-bar",children:[d.jsx("button",{className:`tf-chip ${T?"":"tf-active"}`,onClick:()=>y(null),children:"All"}),qe.map(se=>{const Te=wc(se);return d.jsxs("button",{className:`tf-chip ${T===se?"tf-active":""}`,style:{background:Te.bg,color:Te.text,borderColor:Te.border},onClick:()=>y(T===se?null:se),children:["#",se]},se)})]}),d.jsxs("div",{className:"board-cols",children:[["locked","progress","touchdown"].map(se=>{const Te=D[se];return d.jsx(Pu,{title:Te.name,subtitle:Te.sub,icon:Te.icon,status:se,colorClass:`col-${se}`,tasks:Oe.filter(Ue=>Ue.status===se),onMove:o,onDelete:l,draggingId:i,onDragStart:u,onDragEnd:c,currentUser:m,userProfile:g,onShare:I},se)}),d.jsx(Pu,{title:R.name,subtitle:R.sub,icon:R.icon,status:"ice",colorClass:"col-ice",tasks:T?e.filter(se=>(se.tags||[]).includes(T)):e,onMove:o,onDelete:l,draggingId:i,onDragStart:u,onDragEnd:c,currentUser:m,userProfile:g,onShare:I})]}),S&&d.jsx("div",{className:"modal-overlay open",onClick:Z,children:d.jsxs("div",{className:"modal-box burnout-box",onClick:se=>se.stopPropagation(),children:[d.jsx("div",{className:"burnout-icon",children:""}),d.jsx("h2",{className:"burnout-title",children:"BURNOUT RISK!"}),d.jsx("p",{className:"burnout-msg",children:"You're pushing too hard. 8+ active tasks could affect your wellbeing and performance."}),d.jsxs("div",{className:"burnout-actions",children:[d.jsx("button",{className:"bb-btn bb-life",onClick:G,children:" Move to Life mode instead"}),d.jsx("button",{className:"bb-btn bb-tomorrow",onClick:Q,children:" Schedule for tomorrow"}),d.jsx("button",{className:"bb-btn bb-force",onClick:te,children:" I understand the risk"})]})]})})]})}function g2({tasks:t,iceTasks:e,completedToday:n,draggingId:r,onMove:s,onDelete:i,onDragStart:o,onDragEnd:l,onAddTask:u,currentUser:c,userProfile:f,onShare:m}){const{themeData:g}=ba(),I=g.life,C=g.ice||{name:"Ice Bucket",sub:"Frozen",icon:""},[D,R]=A.useState(""),[E,_]=A.useState([]),[w,b]=A.useState(null),O=A.useMemo(()=>{const y=new Set;return t.forEach(S=>(S.tags||[]).forEach(k=>y.add(k))),[...y]},[t]),M=w?t.filter(y=>(y.tags||[]).includes(w)):t;async function T(y){y.preventDefault(),D.trim()&&(await u({text:D.trim(),mode:"life",difficulty:1,tags:E}),R(""),_([]))}return d.jsxs("div",{className:"life-side",children:[d.jsxs("div",{className:"board-header life-header",children:[d.jsxs("div",{className:"bh-top",children:[d.jsx("span",{className:"bh-title",children:I.headerLabel}),n>0&&d.jsxs("span",{className:"life-completed-badge",children:[n," completed today "]})]}),d.jsx("p",{className:"life-tagline",children:"No pressure, just progress"})]}),d.jsxs("form",{className:"board-add-form",onSubmit:T,children:[d.jsxs("div",{className:"baf-row1",children:[d.jsx("input",{className:"baf-input",placeholder:"Add a life task",value:D,onChange:y=>R(y.target.value),maxLength:140}),d.jsx("button",{className:"baf-btn life-btn",type:"submit",children:"+ Add"})]}),d.jsx("div",{className:"baf-row2",children:d.jsx(Xp,{tags:E,onChange:_,placeholder:"tags: health, family"})})]}),O.length>0&&d.jsxs("div",{className:"tag-filter-bar",children:[d.jsx("button",{className:`tf-chip ${w?"":"tf-active"}`,onClick:()=>b(null),children:"All"}),O.map(y=>{const S=wc(y);return d.jsxs("button",{className:`tf-chip ${w===y?"tf-active":""}`,style:{background:S.bg,color:S.text,borderColor:S.border},onClick:()=>b(w===y?null:y),children:["#",y]},y)})]}),d.jsxs("div",{className:"board-cols",children:[["locked","progress","touchdown"].map(y=>{const S=I[y];return d.jsx(Pu,{title:S.name,subtitle:S.sub,icon:S.icon,status:y,colorClass:`col-life-${y}`,tasks:M.filter(k=>k.status===y),onMove:s,onDelete:i,draggingId:r,onDragStart:o,onDragEnd:l,currentUser:c,userProfile:f,onShare:m},y)}),d.jsx(Pu,{title:C.name,subtitle:C.sub,icon:C.icon,status:"ice",colorClass:"col-life-ice",tasks:w?e.filter(y=>(y.tags||[]).includes(w)):e,onMove:s,onDelete:i,draggingId:r,onDragStart:o,onDragEnd:l,currentUser:c,userProfile:f,onShare:m})]})]})}const y2=[{id:"normal",icon:"",name:"Default",desc:"Classic sports dark theme"},{id:"aesthetic",icon:"",name:"Aesthetic",desc:"Soft pastel vibes"},{id:"football",icon:"",name:"Football",desc:"Green field energy"},{id:"soccer",icon:"",name:"Soccer",desc:"Pitch-ready look"},{id:"basketball",icon:"",name:"Basketball",desc:"Court colors"},{id:"baseball",icon:"",name:"Baseball",desc:"Diamond classic"}];function v2({isOpen:t,onClose:e}){const{currentUser:n}=Kt(),{themeName:r}=ba(),[s,i]=A.useState(!1),[o,l]=A.useState(!1);async function u(c){if(!(!n||s||c===r)){i(!0);try{await An(pe(Y,"userSettings",n.uid),{theme:c,updatedAt:tt()}),l(!0),setTimeout(()=>l(!1),1500)}catch(f){console.error("Settings save error:",f)}finally{i(!1)}}}return d.jsx("div",{className:`settings-overlay ${t?"open":""}`,onClick:c=>{c.target===c.currentTarget&&e()},children:d.jsxs("div",{className:"settings-box",children:[d.jsxs("div",{className:"settings-header",children:[d.jsx("span",{className:"settings-title",children:" Settings"}),d.jsx("button",{className:"settings-close",onClick:e,children:d.jsx(ja,{size:18})})]}),d.jsx("p",{className:"settings-section-label",children:"Visual Theme"}),d.jsx("p",{style:{fontSize:"0.72rem",color:"var(--text2)",marginBottom:14},children:"Theme changes apply instantly  column names, colors and accents all update."}),d.jsx("div",{className:"theme-grid",children:y2.map(c=>d.jsxs("button",{className:`theme-btn ${r===c.id?"active":""}`,onClick:()=>u(c.id),disabled:s,title:c.desc,children:[d.jsx("span",{className:"theme-btn-icon",children:c.icon}),d.jsx("span",{className:"theme-btn-name",children:c.name}),r===c.id&&d.jsx("span",{className:"theme-btn-check",children:""})]},c.id))}),o&&d.jsx("div",{className:"settings-saved",children:" Theme applied!"}),d.jsxs("div",{className:"settings-user",children:["Signed in as ",d.jsx("strong",{children:n==null?void 0:n.email})]})]})})}const bv=["#ff6b35","#ffd700","#2dc653","#4cc9f0","#e63946","#9b5de5","#ff8fab"],_2=80;function Rn(t,e){return Math.random()*(e-t)+t}function w2({active:t}){const e=A.useRef(null),n=A.useRef([]),r=A.useRef(null);return A.useEffect(()=>{if(!t){cancelAnimationFrame(r.current);return}const s=e.current;if(!s)return;const i=s.getContext("2d");s.width=window.innerWidth,s.height=window.innerHeight,n.current=Array.from({length:_2},()=>({x:Rn(0,s.width),y:Rn(-s.height,0),r:Rn(6,14),d:Rn(0,Math.PI*2),color:bv[Math.floor(Rn(0,bv.length))],tilt:Rn(-10,10),tiltAngle:0,tiltAngleInc:Rn(.05,.12),speed:Rn(2,5)}));function o(){i.clearRect(0,0,s.width,s.height),n.current.forEach(u=>{i.beginPath(),i.lineWidth=u.r/2,i.strokeStyle=u.color,i.moveTo(u.x+u.tilt+u.r/4,u.y),i.lineTo(u.x+u.tilt,u.y+u.tilt+u.r/4),i.stroke(),u.tiltAngle+=u.tiltAngleInc,u.y+=u.speed,u.tilt=Math.sin(u.tiltAngle)*15,u.y>s.height&&(u.x=Rn(0,s.width),u.y=-20)}),r.current=requestAnimationFrame(o)}o();const l=setTimeout(()=>cancelAnimationFrame(r.current),4e3);return()=>{cancelAnimationFrame(r.current),clearTimeout(l)}},[t]),t?d.jsx("canvas",{ref:e,style:{position:"fixed",inset:0,pointerEvents:"none",zIndex:300}}):null}const E2=[{key:"worker",icon:"",label:"Worker"},{key:"split",icon:"",label:"Split"},{key:"life",icon:"",label:"Life"}];function T2({viewMode:t,onChange:e}){return d.jsx("div",{className:"view-selector",role:"group","aria-label":"Panel view mode",children:E2.map(n=>d.jsxs("button",{className:`vs-btn ${t===n.key?"vs-active":""}`,onClick:()=>e(n.key),title:`${n.label} view`,children:[d.jsx("span",{className:"vs-icon",children:n.icon}),d.jsx("span",{className:"vs-label",children:n.label})]},n.key))})}function I2(t){if(!t.length)return null;const e=new Date(new Date().getFullYear(),0,0),n=Math.floor((Date.now()-e)/864e5);return t[n%t.length]}function S2(){const[t,e]=A.useState(null),[n,r]=A.useState(!0);return A.useEffect(()=>{async function s(){try{const i=Ct(Me(Y,"motivationalMessages"),Ce("isActive","==",!0)),l=(await fn(i)).docs.map(u=>({id:u.id,...u.data()}));e(I2(l))}catch(i){console.warn("DailyMotivation: could not load messages",i)}finally{r(!1)}}s()},[]),n||!t?null:d.jsxs("div",{className:"daily-motivation",children:[d.jsx("span",{className:"dm-icon",children:""}),d.jsxs("div",{className:"dm-body",children:[d.jsx("p",{className:"dm-text",children:t.text}),t.author&&d.jsxs("span",{className:"dm-author",children:[" ",t.author]})]})]})}const k2=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function Kh(t,e,n){return`${t}-${String(e).padStart(2,"0")}-${String(n).padStart(2,"0")}`}function PT(t,e){return new Date(t,e,0).getDate()}function x2(t,e){return new Date(t,e-1,1).getDay()}function Dv(t,e){const n=PT(t,e),r=x2(t,e),s=[];for(let i=0;i<r;i++)s.push(null);for(let i=1;i<=n;i++)s.push(Kh(t,e,i));for(;s.length%7!==0;)s.push(null);return s}function A2(t,e){return new Date(t,e-1,1).toLocaleDateString("en-US",{month:"long",year:"numeric"})}function C2(t,e){const n=Kh(t,e,1),r=Kh(t,e,PT(t,e));return{first:n,last:r}}function N2({score:t,hasAnyTasks:e,isRestDay:n,isFuture:r,hasFutureTasks:s,isToday:i}){return n?"rest":r?s?"planned":"future":i?t>=10?"peak":t>=7?"solid":t>=4?"good":"today":t>=10?"peak":t>=7?"solid":t>=4?"good":t>0||e?"off":"nodata"}const bu={peak:{cls:"ds-peak",icon:"",label:"Peak Day",color:"var(--orange)"},solid:{cls:"ds-solid",icon:"",label:"Solid Day",color:"var(--green)"},good:{cls:"ds-good",icon:"",label:"Good Effort",color:"var(--blue)"},off:{cls:"ds-off",icon:"",label:"Off Day",color:"var(--gray2)"},rest:{cls:"ds-rest",icon:"",label:"Rest Day",color:"#06d6a0"},planned:{cls:"ds-planned",icon:"",label:"Tasks Planned",color:"var(--purple)"},future:{cls:"ds-future",icon:"",label:"Future",color:"var(--text3)"},today:{cls:"ds-today",icon:"",label:"Today",color:"var(--orange)"},nodata:{cls:"ds-nodata",icon:"",label:"No Data",color:"var(--border)"}};function R2(t,e){let n=0,r=0,s=0,i=0,o=0,l=0,u=0,c=0;const f=Object.keys(t).sort();for(const m of f){const g=t[m];if(g.status==="rest"){s++,c=0;continue}if(g.status==="planned"){i++;continue}g.status!=="future"&&(m>e||(g.status==="peak"?(n++,c++,u=Math.max(u,c)):g.status==="solid"?(r++,c++,u=Math.max(u,c)):c=0,g.score!==void 0&&(o+=g.score,l++)))}return{peakDays:n,solidDays:r,restDays:s,plannedDays:i,avgScore:l>0?Math.round(o/l*10)/10:0,longestStreak:u}}function P2(){const t=new Date;return t.setDate(t.getDate()+1),t.toISOString().split("T")[0]}function bT(t){return new Date(t+"T00:00:00").toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}function b2(t,e){if(t===e)return"Today";const n=new Date(t+"T00:00:00"),r=new Date(e+"T00:00:00"),s=Math.round((n-r)/864e5);return s===1?"Tomorrow":s===-1?"Yesterday":n.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}const D2={1:"",2:"",3:""};function j2({tasks:t,onOpenSchedule:e}){const n=Li(),r=t.filter(i=>i.dateStr>n&&(i.status==="locked"||i.status==="progress")).sort((i,o)=>i.dateStr.localeCompare(o.dateStr));if(r.length===0)return null;const s={};for(const i of r)s[i.dateStr]||(s[i.dateStr]=[]),s[i.dateStr].push(i);return d.jsxs("div",{className:"upcoming-section",children:[d.jsxs("div",{className:"upcoming-header",children:[d.jsx("span",{className:"upcoming-title",children:" Upcoming Scheduled Tasks"}),d.jsx("button",{className:"upcoming-add-btn",onClick:e,children:"+ Schedule"})]}),d.jsx("div",{className:"upcoming-groups",children:Object.entries(s).map(([i,o])=>d.jsx(O2,{dateStr:i,tasks:o,today:n},i))})]})}function O2({dateStr:t,tasks:e,today:n}){const[r,s]=A.useState(null);async function i(l){await An(pe(Y,"tasks",l.id),{dateStr:n})}async function o(l){await Ei(pe(Y,"tasks",l)),s(null)}return d.jsxs("div",{className:"upcoming-group",children:[d.jsx("div",{className:"upcoming-day-label",children:b2(t,n)}),e.map(l=>d.jsxs("div",{className:"upcoming-task-row",children:[d.jsx("span",{className:"utr-mode",children:l.mode==="worker"?"":""}),d.jsx("span",{className:"utr-text",children:l.text}),l.mode==="worker"&&l.difficulty&&d.jsx("span",{className:"utr-stars",children:D2[l.difficulty]||""}),d.jsxs("div",{className:"utr-actions",children:[d.jsx("button",{className:"utr-btn move-btn",onClick:()=>i(l),title:"Move to Today",children:" Today"}),r===l.id?d.jsxs(d.Fragment,{children:[d.jsx("button",{className:"utr-btn del-confirm",onClick:()=>o(l.id),children:"Confirm"}),d.jsx("button",{className:"utr-btn",onClick:()=>s(null),children:"Cancel"})]}):d.jsx("button",{className:"utr-btn del-btn",onClick:()=>s(l.id),children:""})]})]},l.id))]})}function Gh({initialDate:t,onSchedule:e,onClose:n}){const r=P2(),s=Li(),[i,o]=A.useState(""),[l,u]=A.useState("worker"),[c,f]=A.useState(2),[m,g]=A.useState([]),[I,C]=A.useState(t||r),[D,R]=A.useState(!1);async function E(b){if(b.preventDefault(),!(!i.trim()||!I)){R(!0);try{await e({text:i.trim(),mode:l,difficulty:c,tags:m,date:I}),n()}finally{R(!1)}}}const _=I===s,w=I?bT(I):"";return d.jsx("div",{className:"modal-overlay open",onClick:n,children:d.jsxs("div",{className:"modal-box schedule-modal",onClick:b=>b.stopPropagation(),children:[d.jsxs("div",{className:"sched-header",children:[d.jsx("h3",{className:"sched-title",children:" Schedule Task"}),d.jsx("button",{className:"modal-close-btn",onClick:n,children:d.jsx(ja,{size:16})})]}),w&&d.jsx("div",{className:"sched-date-label",children:w}),d.jsxs("form",{className:"sched-form",onSubmit:E,children:[d.jsx("input",{className:"add-input",placeholder:"Task description",value:i,onChange:b=>o(b.target.value),autoFocus:!0,required:!0}),d.jsxs("div",{className:"sched-field",children:[d.jsx("label",{className:"sched-field-label",children:"Schedule for"}),d.jsx("input",{type:"date",className:"sched-date-input",value:I,min:_?s:r,onChange:b=>C(b.target.value),required:!0})]}),d.jsxs("div",{className:"sched-field",children:[d.jsx("label",{className:"sched-field-label",children:"Mode"}),d.jsx("div",{className:"sched-mode-row",children:[["worker"," Worker"],["life"," Life"]].map(([b,O])=>d.jsx("button",{type:"button",className:`sched-mode-btn ${l===b?"sched-mode-active":""}`,onClick:()=>u(b),children:O},b))})]}),l==="worker"&&d.jsxs("div",{className:"sched-field",children:[d.jsx("label",{className:"sched-field-label",children:"Difficulty"}),d.jsx(RT,{value:c,onChange:f})]}),d.jsxs("div",{className:"sched-field",children:[d.jsx("label",{className:"sched-field-label",children:"Tags (optional)"}),d.jsx(Xp,{tags:m,onChange:g})]}),d.jsxs("div",{className:"sched-actions",children:[d.jsx("button",{type:"button",className:"msg-cancel-btn",onClick:n,children:"Cancel"}),d.jsx("button",{type:"submit",className:"msg-save-btn",disabled:D||!i.trim()||!I,children:D?"Scheduling":" Schedule Task"})]})]})]})})}function L2({task:t,currentUser:e,userProfile:n,onClose:r}){const[s,i]=A.useState(""),[o,l]=A.useState([]),[u,c]=A.useState([]),[f,m]=A.useState(!1),[g,I]=A.useState(!1),C=A.useRef(null),D=(n==null?void 0:n.handle)||null;A.useEffect(()=>{if(clearTimeout(C.current),!s.trim()||s.trim().length<2){l([]);return}I(!0),C.current=setTimeout(async()=>{const w=s.trim().toLowerCase();try{const M=(await fn(Ct(Me(Y,"users"),Ce("handle",">=",w),Ce("handle","<=",w+""),da("handle"),Hp(5)))).docs.map(T=>({id:T.id,...T.data()})).filter(T=>T.handle!==D&&!(t.sharedWith||[]).includes(T.handle)&&!u.some(y=>y.handle===T.handle));l(M)}catch(b){console.error("Search error:",b),l([])}finally{I(!1)}},400)},[s,D,t.sharedWith,u]);function R(w){c([...u,{handle:w.handle,userId:w.uid,displayName:w.displayName}]),i(""),l([])}function E(w){c(u.filter(b=>b.handle!==w))}async function _(){if(u.length){m(!0);try{await Jb(t.id,u,t,D),r()}catch(w){console.error("Share failed:",w)}finally{m(!1)}}}return d.jsx("div",{className:"modal-overlay open",onClick:w=>{w.target===w.currentTarget&&r()},children:d.jsxs("div",{className:"modal-box share-modal",onClick:w=>w.stopPropagation(),children:[d.jsxs("div",{className:"sched-header",children:[d.jsx("h3",{className:"sched-title",children:"Share Task"}),d.jsx("button",{className:"modal-close-btn",onClick:r,children:d.jsx(ja,{size:16})})]}),d.jsx("div",{className:"share-task-text",children:t.text}),(t.sharedWith||[]).length>0&&d.jsxs("div",{className:"share-existing-section",children:[d.jsx("div",{className:"share-label",children:"Already shared with:"}),d.jsx("div",{className:"share-chips",children:(t.sharedWith||[]).map(w=>d.jsxs("span",{className:"share-chip-existing",children:["@",w]},w))})]}),u.length>0&&d.jsxs("div",{className:"share-selected-section",children:[d.jsx("div",{className:"share-label",children:"Adding:"}),d.jsx("div",{className:"share-chips",children:u.map(w=>d.jsxs("span",{className:"share-chip-selected",children:["@",w.handle,d.jsx("button",{className:"chip-remove",onClick:()=>E(w.handle),type:"button",children:""})]},w.handle))})]}),d.jsx("div",{className:"share-search-wrap",children:d.jsx("input",{className:"share-search-input",placeholder:"Search by handle (min 2 chars)",value:s,onChange:w=>i(w.target.value),autoFocus:!0,autoComplete:"off"})}),g&&d.jsx("div",{className:"share-results",children:d.jsx("div",{className:"share-loading",children:"Searching"})}),!g&&s.length>=2&&o.length===0&&d.jsx("div",{className:"share-results",children:d.jsx("div",{className:"share-no-results",children:"No users found"})}),!g&&o.length>0&&d.jsx("div",{className:"share-results",children:o.map(w=>{var b,O;return d.jsxs("button",{className:"share-result-item",onClick:()=>R(w),type:"button",children:[d.jsx("div",{className:"sri-avatar",children:((O=(b=w.displayName)==null?void 0:b[0])==null?void 0:O.toUpperCase())||w.handle[0].toUpperCase()}),d.jsxs("div",{className:"sri-info",children:[d.jsxs("div",{className:"sri-handle",children:["@",w.handle]}),d.jsx("div",{className:"sri-name",children:w.displayName||""})]})]},w.id)})}),d.jsxs("div",{className:"share-actions",children:[d.jsx("button",{type:"button",className:"msg-cancel-btn",onClick:r,children:"Cancel"}),d.jsx("button",{type:"button",className:"msg-save-btn",onClick:_,disabled:f||u.length===0,children:f?"Sharing":`Share (${u.length})`})]})]})})}const jv="5togo_viewMode",Ov=["Recovery","Vacation","Weekend","Sick Day","Personal Day"];function V2(){const{currentUser:t,userProfile:e}=Kt(),{themeData:n}=ba(),[r,s]=A.useState([]),[i,o]=A.useState([]),[l,u]=A.useState(0),[c,f]=A.useState(!1),[m,g]=A.useState(!1),[I,C]=A.useState(!1),[D,R]=A.useState(!1),[E,_]=A.useState("worker"),[w,b]=A.useState(()=>localStorage.getItem(jv)||"split"),[O,M]=A.useState(null),[T,y]=A.useState(null),[S,k]=A.useState(!1),[P,N]=A.useState(Ov[0]),[x,he]=A.useState(!1),[He,qe]=A.useState(!1),[Oe,V]=A.useState(!1),W=A.useRef(null),G=A.useRef(!1),Q=Li();function te(B){b(B),localStorage.setItem(jv,B)}A.useEffect(()=>{if(!t)return;const B=Ct(Me(Y,"tasks"),Ce("userId","==",t.uid));return Ii(B,ie=>{const _e=ie.docs.map(ge=>({id:ge.id,...ge.data()}));_e.sort((ge,st)=>{var St,mn;return ge.status==="touchdown"&&st.status!=="touchdown"?1:st.status==="touchdown"&&ge.status!=="touchdown"?-1:(((St=st.createdAt)==null?void 0:St.seconds)??0)-(((mn=ge.createdAt)==null?void 0:mn.seconds)??0)}),s(_e)})},[t]),A.useEffect(()=>{if(!t||!(e!=null&&e.handle))return;const B=Ct(Me(Y,"tasks"),Ce("sharedWithUids","array-contains",t.uid));return Ii(B,ie=>{const _e=ie.docs.map(ge=>({id:ge.id,...ge.data()}));_e.sort((ge,st)=>{var St,mn;return ge.status==="touchdown"&&st.status!=="touchdown"?1:st.status==="touchdown"&&ge.status!=="touchdown"?-1:(((St=st.createdAt)==null?void 0:St.seconds)??0)-(((mn=ge.createdAt)==null?void 0:mn.seconds)??0)}),o(_e)})},[t,e==null?void 0:e.handle]),A.useEffect(()=>{t&&(es(pe(Y,"userSettings",t.uid)).then(B=>{B.exists()&&(u(B.data().streak||0),W.current=B.data().peakModalShownDate||null)}),es(pe(Y,"restDays",`${t.uid}_${Q}`)).then(B=>{he(B.exists())}))},[t,Q]),A.useEffect(()=>{if(!r.length||G.current)return;const B=r.filter(ie=>ie.mode==="worker"&&ie.dateStr&&ie.dateStr<Q&&(ie.status==="locked"||ie.status==="progress")&&ie.userId===t.uid);B.length!==0&&(G.current=!0,Promise.all(B.map(ie=>An(pe(Y,"tasks",ie.id),{status:"ice"}))).finally(()=>setTimeout(()=>{G.current=!1},5e3)))},[r,Q,t==null?void 0:t.uid]);const Z=A.useMemo(()=>{const B={};return i.forEach(ie=>{B[ie.id]=ie}),r.forEach(ie=>{B[ie.id]=ie}),Object.values(B)},[r,i]),se=Z.filter(B=>B.mode==="worker"&&B.status!=="ice"),Te=Z.filter(B=>B.mode==="life"&&B.status!=="ice"),Ue=Z.filter(B=>B.mode==="worker"&&B.status==="ice"),Be=Z.filter(B=>B.mode==="life"&&B.status==="ice"),Hr=Z.filter(B=>B.dateStr>Q&&B.status!=="ice"&&B.status!=="touchdown"),qr=Z.filter(B=>B.mode==="worker"&&B.dateStr===Q),Mt=qr.filter(B=>B.status!=="ice"&&B.userId===(t==null?void 0:t.uid)).length,tr=qr.filter(B=>B.status==="touchdown"),rt=Qp(tr),nr=Z.filter(B=>B.mode==="life"&&B.dateStr===Q&&B.status==="touchdown"),pn=AT(Mt);A.useEffect(()=>{rt>=10&&W.current!==Q&&(W.current=Q,Vi(),g(!0),C(!0),setTimeout(()=>C(!1),4500))},[rt]);async function Vi(){if(!t)return;const B=pe(Y,"userSettings",t.uid),ie=await es(B),_e=ie.exists()?ie.data():{},ge=_e.lastPeakDay||null,st=r2(),mn=(await es(pe(Y,"restDays",`${t.uid}_${st}`))).exists(),zi=ge===Q?_e.streak||1:ge===st||mn?(_e.streak||0)+1:1;await ls(B,{streak:zi,lastPeakDay:Q,peakModalShownDate:Q,updatedAt:tt()},{merge:!0}),u(zi)}A.useEffect(()=>{if(!t||pn==="empty"||pn==="green")return;const B=`${t.uid}_${Q}`;ls(pe(Y,"burnoutTracking",B),{userId:t.uid,date:Q,tasksCount:Mt,zone:pn},{merge:!0}),pn==="red"&&Promise.all([es(pe(Y,"burnoutTracking",`${t.uid}_${Nv(1)}`)),es(pe(Y,"burnoutTracking",`${t.uid}_${Nv(2)}`))]).then(([ie,_e])=>{ie.exists()&&ie.data().zone==="red"&&_e.exists()&&_e.data().zone==="red"&&R(!0)})},[pn,t,Q]);const Mi=A.useCallback(async({text:B,mode:ie,difficulty:_e,tags:ge})=>{await Ti(Me(Y,"tasks"),{userId:t.uid,text:B,mode:ie,status:"locked",difficulty:Number(_e)||1,tags:ge||[],createdAt:tt(),completedAt:null,weekNumber:qh(),year:new Date().getFullYear(),dateStr:Q})},[t,Q]),Ec=A.useCallback(async({text:B,mode:ie,difficulty:_e,tags:ge,date:st})=>{const St=new Date(st+"T00:00:00");await Ti(Me(Y,"tasks"),{userId:t.uid,text:B,mode:ie,status:"locked",difficulty:Number(_e)||1,tags:ge||[],createdAt:tt(),completedAt:null,dateStr:st,weekNumber:qh(St),year:St.getFullYear()})},[t]),Oa=A.useCallback(async(B,ie)=>{const _e=Z.find(st=>st.id===B);if(!_e)return;const ge={status:ie};ie==="touchdown"?(ge.completedAt=tt(),_e.status==="ice"&&_e.dateStr!==Q&&(ge.dateStr=Q)):ge.completedAt=null,_e.status==="ice"&&ie==="locked"&&(ge.dateStr=Q),await An(pe(Y,"tasks",B),ge)},[Z,Q]),Fi=A.useCallback(async B=>{await Ei(pe(Y,"tasks",B))},[]),ks=A.useCallback(B=>M(B),[]),Ui=A.useCallback(()=>M(null),[]);async function Tc(){if(t){qe(!0);try{await ls(pe(Y,"restDays",`${t.uid}_${Q}`),{userId:t.uid,date:Q,reason:P||null,createdAt:tt()}),he(!0),k(!1)}finally{qe(!1)}}}async function Bi(){t&&(await Ei(pe(Y,"restDays",`${t.uid}_${Q}`)),he(!1))}const xs=A.useCallback(B=>{const ie=Z.find(_e=>_e.id===B);ie&&y(ie)},[Z]);A.useEffect(()=>{const B=ie=>{ie.key==="Escape"&&(g(!1),f(!1),k(!1),V(!1),y(null))};return window.addEventListener("keydown",B),()=>window.removeEventListener("keydown",B)},[]),n.ice;const La=w==="split"||w==="worker",Je=w==="split"||w==="life";return d.jsxs("div",{className:"app-layout",children:[d.jsx(Yp,{todayPoints:rt,streak:l,zone:pn,onOpenSettings:()=>f(!0)}),d.jsx(S2,{}),d.jsxs("div",{className:"dashboard-controls",children:[d.jsx(T2,{viewMode:w,onChange:te}),d.jsxs("div",{className:"day-controls",children:[x?d.jsxs("div",{className:"rest-active-pill",children:[" Rest Day",d.jsx("button",{className:"rest-remove-btn",onClick:Bi,children:""})]}):d.jsx("button",{className:"rest-day-btn",onClick:()=>k(!0),children:" Rest Day"}),d.jsx("button",{className:"schedule-btn",onClick:()=>V(!0),children:" Schedule Task"})]})]}),d.jsxs("div",{className:"mobile-toggle",children:[d.jsx("button",{className:`mt-btn ${E==="worker"?"mt-active":""}`,onClick:()=>_("worker"),children:" Worker"}),d.jsx("button",{className:`mt-btn ${E==="life"?"mt-active":""}`,onClick:()=>_("life"),children:" Life"})]}),D&&d.jsxs("div",{className:"recovery-alert",children:[d.jsx("span",{children:" Recovery Day Recommended  3 consecutive Red Zone days detected."}),d.jsx("span",{className:"recovery-tip",children:"Focus on Life tasks today. Your health matters."}),d.jsx("button",{className:"recovery-close",onClick:()=>R(!1),children:""})]}),x&&d.jsxs("div",{className:"rest-day-banner",children:[" ",d.jsx("strong",{children:"Rest Day Active"}),"  Focus on recovery and life balance today."]}),d.jsxs("div",{className:`dual-board ${w==="split"?"split-mode":""}`,children:[La&&d.jsx("div",{className:`worker-panel ${E==="worker"?"mobile-visible":"mobile-hidden"}`,children:d.jsx(m2,{tasks:se,iceTasks:Ue,activeWorkerCount:Mt,todayPoints:rt,streak:l,draggingId:O,onMove:Oa,onDelete:Fi,onDragStart:ks,onDragEnd:Ui,onAddTask:Mi,currentUser:t,userProfile:e,onShare:xs})}),Je&&d.jsx("div",{className:`life-panel ${E==="life"?"mobile-visible":"mobile-hidden"}`,children:d.jsx(g2,{tasks:Te,iceTasks:Be,completedToday:nr.length,draggingId:O,onMove:Oa,onDelete:Fi,onDragStart:ks,onDragEnd:Ui,onAddTask:Mi,currentUser:t,userProfile:e,onShare:xs})})]}),d.jsx(j2,{tasks:Hr,onOpenSchedule:()=>V(!0)}),d.jsx("div",{className:`modal-overlay ${m?"open":""}`,onClick:()=>g(!1),children:d.jsxs("div",{className:"modal-box",onClick:B=>B.stopPropagation(),children:[d.jsx("span",{className:"modal-trophy",children:""}),d.jsx("h2",{className:"modal-title",children:"PEAK DAY!"}),d.jsx("p",{className:"modal-sub",children:"10+ points earned. You're on fire."}),d.jsxs("div",{className:"modal-streak",children:[" ",l,"-day streak!"]}),d.jsx("button",{className:"modal-btn",onClick:()=>g(!1),children:"Keep Going! "})]})}),S&&d.jsx("div",{className:"modal-overlay open",onClick:()=>k(!1),children:d.jsxs("div",{className:"modal-box rest-modal",onClick:B=>B.stopPropagation(),children:[d.jsx("span",{className:"modal-trophy",children:""}),d.jsx("h2",{className:"modal-title",style:{color:"#06d6a0"},children:"Mark Rest Day"}),d.jsx("p",{className:"modal-sub",children:"Rest days don't break your streak. Recovery is growth."}),d.jsx("select",{className:"sched-date-input",value:P,onChange:B=>N(B.target.value),style:{marginBottom:16},children:Ov.map(B=>d.jsx("option",{children:B},B))}),d.jsxs("div",{style:{display:"flex",gap:10},children:[d.jsx("button",{className:"msg-cancel-btn",onClick:()=>k(!1),children:"Cancel"}),d.jsx("button",{className:"modal-btn",style:{background:"linear-gradient(135deg, #06d6a0, #0aab82)"},onClick:Tc,disabled:He,children:He?"Saving":" Mark as Rest Day"})]})]})}),Oe&&d.jsx(Gh,{initialDate:null,onSchedule:Ec,onClose:()=>V(!1)}),T&&d.jsx(L2,{task:T,currentUser:t,userProfile:e,onClose:()=>y(null)}),d.jsx(v2,{isOpen:c,onClose:()=>f(!1)}),d.jsx(w2,{active:I})]})}function M2(){const{currentUser:t}=Kt(),[e,n]=A.useState(0),[r,s]=A.useState("work"),[i,o]=A.useState([]),[l,u]=A.useState({}),[c,f]=A.useState(!0),m=s2(e);A.useEffect(()=>{if(!t)return;f(!0);const _=Ct(Me(Y,"tasks"),Ce("userId","==",t.uid),Ce("dateStr",">=",m[0]),Ce("dateStr","<=",m[6])),w=Ct(Me(Y,"restDays"),Ce("userId","==",t.uid),Ce("date",">=",m[0]),Ce("date","<=",m[6]));Promise.all([fn(_),fn(w)]).then(([b,O])=>{o(b.docs.map(T=>({id:T.id,...T.data()})));const M={};O.docs.forEach(T=>{M[T.data().date]=T.data().reason||"Rest"}),u(M),f(!1)})},[t,m[0]]);const g=m.map(_=>{const w=!!l[_],b=l[_]||null,O=i.filter(x=>x.dateStr===_),M=O.filter(x=>x.mode==="worker"&&x.status==="touchdown"),T=O.filter(x=>x.mode==="worker"),y=O.filter(x=>x.mode==="life"&&x.status==="touchdown"),S=O.filter(x=>x.mode==="life"),k=w?0:Qp(M),P=Ru(k),N=Yb(T.length,S.length);return{dateStr:_,workerDone:M,workerTotal:T,lifeDone:y,lifeTotal:S,pts:k,level:P,balance:N,isRest:w,restReason:b}}),I=g.reduce((_,w)=>_+w.pts,0),C=g.filter(_=>_.pts>=10).length,D=g.reduce((_,w)=>_+w.workerDone.length,0),R=g.reduce((_,w)=>_+w.lifeDone.length,0),E=Ru(Math.round(I/7));return d.jsxs("div",{className:"history-page",children:[d.jsx("div",{className:"history-nav",children:d.jsxs(an,{to:"/app",className:"history-back",children:[d.jsx(Da,{size:14})," Back to Dashboard"]})}),d.jsxs("div",{className:"history-title-row",children:[d.jsx("h1",{className:"history-title",children:" Weekly History"}),d.jsxs("div",{className:"week-nav",children:[d.jsx("button",{className:"week-nav-btn",onClick:()=>n(_=>_-1),children:d.jsx(IT,{size:16})}),d.jsx("span",{className:"week-nav-label",children:i2(m)}),d.jsx("button",{className:"week-nav-btn",onClick:()=>n(_=>_+1),disabled:e>=0,children:d.jsx(ST,{size:16})})]})]}),d.jsxs("div",{className:"week-summary",children:[d.jsxs("div",{className:"ws-chip",children:[d.jsx("span",{className:"ws-chip-val",children:I}),d.jsx("span",{className:"ws-chip-lbl",children:"Total pts"})]}),d.jsxs("div",{className:"ws-chip",children:[d.jsx("span",{className:"ws-chip-val",children:C}),d.jsx("span",{className:"ws-chip-lbl",children:"Peak Days"})]}),d.jsxs("div",{className:"ws-chip",children:[d.jsx("span",{className:"ws-chip-val",children:D}),d.jsx("span",{className:"ws-chip-lbl",children:"Worker Done"})]}),d.jsxs("div",{className:"ws-chip",children:[d.jsx("span",{className:"ws-chip-val",children:R}),d.jsx("span",{className:"ws-chip-lbl",children:"Life Done"})]}),d.jsxs("div",{className:`ws-chip ws-level ${E.cls}`,children:[d.jsx("span",{className:"ws-chip-val",children:E.icon}),d.jsxs("span",{className:"ws-chip-lbl",children:["Week: ",E.label]})]})]}),d.jsxs("div",{className:"history-tabs",children:[d.jsx("button",{className:`htab ${r==="work"?"htab-active":""}`,onClick:()=>s("work"),children:" Work History"}),d.jsx("button",{className:`htab ${r==="life"?"htab-active":""}`,onClick:()=>s("life"),children:" Life Balance"})]}),c?d.jsx("div",{className:"history-loading",children:d.jsx("div",{className:"spinner"})}):r==="work"?d.jsx(F2,{dayRows:g}):d.jsx(U2,{dayRows:g})]})}function F2({dayRows:t}){const e=Math.max(...t.map(n=>n.pts),10);return d.jsx("div",{className:"history-tab-content",children:t.map(({dateStr:n,pts:r,level:s,workerDone:i,workerTotal:o,isRest:l,restReason:u})=>d.jsxs("div",{className:`day-row ${l?"day-row-rest":""}`,children:[d.jsxs("div",{className:"day-row-left",children:[d.jsx("span",{className:"day-label",children:NT(n)}),l?d.jsxs("span",{className:"day-level-badge rest-badge",children:[" Rest Day",u?`  ${u}`:""]}):d.jsxs("span",{className:`day-level-badge ${s.cls}`,children:[s.icon," ",s.label]})]}),!l&&d.jsx("div",{className:"day-bar-wrap",children:d.jsxs("div",{className:"day-bar-track",children:[d.jsx("div",{className:`day-bar-fill ${s.cls}`,style:{width:`${Math.min(r/e*100,100)}%`}}),d.jsx("div",{className:"day-bar-target",style:{left:`${10/e*100}%`}})]})}),!l&&d.jsxs("div",{className:"day-row-right",children:[d.jsxs("span",{className:"day-pts",children:[r,d.jsx("span",{className:"day-pts-label",children:"pts"})]}),d.jsxs("span",{className:"day-tasks-done",children:[i.length,"/",o.length," done"]})]}),!l&&i.length>0&&d.jsx("div",{className:"day-task-list",children:i.map(c=>d.jsxs("span",{className:"day-task-chip",children:["".repeat(c.difficulty||1)," ",c.text]},c.id))})]},n))})}function U2({dayRows:t}){return d.jsx("div",{className:"history-tab-content",children:t.map(({dateStr:e,lifeDone:n,lifeTotal:r,workerTotal:s,balance:i})=>d.jsxs("div",{className:"life-day-row",children:[d.jsxs("div",{className:"day-row-left",children:[d.jsx("span",{className:"day-label",children:NT(e)}),d.jsxs("span",{className:`balance-badge ${i.cls}`,children:[i.icon," ",i.label]})]}),d.jsxs("div",{className:"life-bar-group",children:[d.jsxs("div",{className:"life-bar-item",children:[d.jsx("span",{className:"life-bar-lbl",children:" Worker"}),d.jsx("div",{className:"day-bar-track",children:d.jsx("div",{className:"day-bar-fill worker-fill",style:{width:`${Math.min(s.length*14,100)}%`}})}),d.jsx("span",{className:"life-bar-count",children:s.length})]}),d.jsxs("div",{className:"life-bar-item",children:[d.jsx("span",{className:"life-bar-lbl",children:" Life"}),d.jsx("div",{className:"day-bar-track",children:d.jsx("div",{className:"day-bar-fill life-fill",style:{width:`${Math.min(r.length*14,100)}%`}})}),d.jsx("span",{className:"life-bar-count",children:r.length})]})]}),d.jsx("div",{className:"day-row-right",children:d.jsxs("span",{className:"life-done-badge",children:[n.length," life done"]})}),n.length>0&&d.jsx("div",{className:"day-task-list",children:n.map(o=>d.jsxs("span",{className:"day-task-chip life-chip",children:[" ",o.text]},o.id))})]},e))})}function B2({dateStr:t,status:e,score:n,futureTaskCount:r,isToday:s,onClick:i}){if(!t)return d.jsx("div",{className:"day-cell day-cell-empty"});const o=bu[e]||bu.nodata,l=parseInt(t.split("-")[2],10);return d.jsxs("button",{className:`day-cell ${o.cls} ${s?"dc-today":""}`,onClick:()=>i(t),title:o.label,children:[d.jsx("span",{className:"dc-num",children:l}),!["future","planned","nodata"].includes(e)&&n>0&&d.jsx("span",{className:"dc-score",children:n}),e==="planned"&&r>0&&d.jsxs("span",{className:"dc-badge planned-badge",children:[" ",r]}),e!=="nodata"&&e!=="future"&&d.jsx("span",{className:"dc-icon",children:o.icon}),s&&d.jsx("span",{className:"dc-today-dot"})]})}function z2({cells:t,dayDataMap:e,today:n,onDayClick:r}){return d.jsxs("div",{className:"calendar-grid",children:[d.jsx("div",{className:"cgrid-headers",children:k2.map(s=>d.jsx("div",{className:"cgrid-day-label",children:s},s))}),d.jsx("div",{className:"cgrid-cells",children:t.map((s,i)=>{if(!s)return d.jsx("div",{className:"day-cell day-cell-empty"},i);const o=e[s]||{};return d.jsx(B2,{dateStr:s,status:o.status||"nodata",score:o.score||0,futureTaskCount:o.futureTaskCount||0,isToday:s===n,onClick:r},s)})})]})}function $2({stats:t}){const e=[{icon:"",label:"Peak Days",value:t.peakDays},{icon:"",label:"Solid Days",value:t.solidDays},{icon:"",label:"Rest Days",value:t.restDays},{icon:"",label:"Planned",value:t.plannedDays},{icon:"",label:"Avg Score",value:t.avgScore},{icon:"",label:"Best Streak",value:t.longestStreak}];return d.jsx("div",{className:"month-stats",children:e.map(n=>d.jsxs("div",{className:"ms-card",children:[d.jsx("span",{className:"ms-icon",children:n.icon}),d.jsx("span",{className:"ms-value",children:n.value}),d.jsx("span",{className:"ms-label",children:n.label})]},n.label))})}const Lv=["Recovery","Vacation","Weekend","Sick Day","Personal Day"],W2={1:"",2:"",3:""};function H2({dateStr:t,status:e,score:n,tasks:r,isRestDay:s,restReason:i,onClose:o,onMarkRest:l,onRemoveRest:u,onAddTask:c,onDeleteTask:f}){const m=Li(),g=t<m,I=t===m,C=t>m,D=bu[e]||bu.nodata,[R,E]=A.useState(!1),[_,w]=A.useState(i||Lv[0]),[b,O]=A.useState(null),M=bT(t);return d.jsx("div",{className:"modal-overlay open",onClick:o,children:d.jsxs("div",{className:"modal-box day-detail-modal",onClick:T=>T.stopPropagation(),children:[d.jsxs("div",{className:"ddm-header",children:[d.jsx("div",{className:"ddm-date-label",children:M}),d.jsx("button",{className:"modal-close-btn",onClick:o,children:d.jsx(ja,{size:16})})]}),d.jsxs("div",{className:`ddm-status ${D.cls}`,children:[d.jsx("span",{children:D.icon}),d.jsx("span",{children:D.label}),n>0&&!["rest","planned","future","today","nodata"].includes(e)&&d.jsxs("span",{className:"ddm-score",children:[n," pts"]}),I&&n>0&&d.jsxs("span",{className:"ddm-score",children:[n," pts so far"]})]}),r.length>0&&d.jsxs("div",{className:"ddm-tasks",children:[d.jsx("div",{className:"ddm-section-label",children:C?" Scheduled Tasks":I?" Today's Tasks":" Completed Tasks"}),r.map(T=>d.jsxs("div",{className:"ddm-task-row",children:[d.jsx("span",{className:"ddm-task-icon",children:T.mode==="worker"?"":""}),d.jsx("span",{className:"ddm-task-text",children:T.text}),T.mode==="worker"&&T.difficulty&&d.jsx("span",{className:"ddm-task-stars",children:W2[T.difficulty]||""}),C&&(b===T.id?d.jsxs(d.Fragment,{children:[d.jsx("button",{className:"msg-icon-btn delete-btn",onClick:()=>{f(T.id),O(null)},children:"Confirm"}),d.jsx("button",{className:"msg-icon-btn",onClick:()=>O(null),children:"Cancel"})]}):d.jsx("button",{className:"msg-icon-btn delete-btn",onClick:()=>O(T.id),children:d.jsx(xT,{size:11})}))]},T.id))]}),r.length===0&&(I||g)&&!s&&d.jsx("div",{className:"ddm-empty-note",children:I?"No tasks completed yet today.":"No completed tasks recorded."}),C&&d.jsxs("button",{className:"ddm-add-task-btn",onClick:()=>{o(),c(t)},children:[d.jsx(Ub,{size:14})," Add Task for This Day"]}),d.jsx("div",{className:"ddm-rest-section",children:s?d.jsxs("div",{className:"ddm-rest-active",children:[d.jsxs("span",{className:"ddm-rest-pill",children:[" Rest Day",i?`  ${i}`:""]}),d.jsx("button",{className:"msg-icon-btn delete-btn",onClick:()=>u(t),children:"Remove"})]}):R?d.jsxs("div",{className:"ddm-rest-form",children:[d.jsx("select",{className:"sched-date-input",value:_,onChange:T=>w(T.target.value),children:Lv.map(T=>d.jsx("option",{children:T},T))}),d.jsxs("div",{style:{display:"flex",gap:8},children:[d.jsx("button",{className:"msg-cancel-btn",onClick:()=>E(!1),children:"Cancel"}),d.jsxs("button",{className:"msg-save-btn",onClick:()=>{l(t,_),E(!1)},children:[d.jsx(Av,{size:12})," Mark as Rest Day"]})]})]}):d.jsxs("button",{className:"ddm-rest-btn",onClick:()=>E(!0),children:[d.jsx(Av,{size:13})," Mark as Rest Day"]})}),d.jsx("button",{className:"modal-close-full-btn",onClick:o,children:"Close"})]})})}const q2=[{cls:"ds-peak",icon:"",label:"Peak Day (10+ pts)"},{cls:"ds-solid",icon:"",label:"Solid (7-9 pts)"},{cls:"ds-good",icon:"",label:"Good (4-6 pts)"},{cls:"ds-off",icon:"",label:"Off Day"},{cls:"ds-rest",icon:"",label:"Rest Day"},{cls:"ds-planned",icon:"",label:"Tasks Scheduled"}];function K2(){const{currentUser:t}=Kt(),e=Li(),n=new Date(e+"T00:00:00"),[r,s]=A.useState(n.getFullYear()),[i,o]=A.useState(n.getMonth()+1),[l,u]=A.useState({}),[c,f]=A.useState({peakDays:0,solidDays:0,restDays:0,plannedDays:0,avgScore:0,longestStreak:0}),[m,g]=A.useState(!0),[I,C]=A.useState(null),[D,R]=A.useState(null),E=A.useCallback(async(N,x)=>{if(!t)return;g(!0);const{first:he,last:He}=C2(N,x);try{const Oe=(await fn(Ct(Me(Y,"tasks"),Ce("userId","==",t.uid),Ce("dateStr",">=",he),Ce("dateStr","<=",He)))).docs.map(te=>({id:te.id,...te.data()})),V=await fn(Ct(Me(Y,"restDays"),Ce("userId","==",t.uid),Ce("date",">=",he),Ce("date","<=",He))),W={};V.docs.forEach(te=>{const Z=te.data();W[Z.date]={id:te.id,reason:Z.reason}});const G={},Q=Dv(N,x);for(const te of Q){if(!te)continue;const Z=Oe.filter(rt=>rt.dateStr===te),se=te>e,Te=te===e,Ue=!!W[te],Be=W[te]||null;let Hr=0,qr=Z.length>0,Mt=[];if(se)Mt=Z.filter(rt=>rt.status==="locked"||rt.status==="progress");else{const rt=Z.filter(nr=>nr.mode==="worker"&&nr.status==="touchdown");Hr=Qp(rt)}const tr=N2({score:Hr,hasAnyTasks:qr,isRestDay:Ue,isFuture:se,hasFutureTasks:Mt.length>0,isToday:Te});G[te]={status:tr,score:Hr,hasAnyTasks:qr,futureTasks:Mt,futureTaskCount:Mt.length,completedTasks:se?[]:Z.filter(rt=>rt.status==="touchdown"),allDayTasks:Z,isRestDay:Ue,restReason:(Be==null?void 0:Be.reason)||null,restDocId:(Be==null?void 0:Be.id)||null}}u(G),f(R2(G,e))}catch(qe){console.error("Calendar loadMonth:",qe)}finally{g(!1)}},[t,e]);A.useEffect(()=>{E(r,i)},[r,i,E]);function _(){i===1?(s(N=>N-1),o(12)):o(N=>N-1)}function w(){i===12?(s(N=>N+1),o(1)):o(N=>N+1)}function b(){s(n.getFullYear()),o(n.getMonth()+1)}async function O(N,x){await ls(pe(Y,"restDays",`${t.uid}_${N}`),{userId:t.uid,date:N,reason:x||null,createdAt:tt()}),E(r,i)}async function M(N){await Ei(pe(Y,"restDays",`${t.uid}_${N}`)),E(r,i)}async function T({text:N,mode:x,difficulty:he,tags:He,date:qe}){const Oe=new Date(qe+"T00:00:00");await Ti(Me(Y,"tasks"),{userId:t.uid,text:N,mode:x,status:"locked",difficulty:Number(he)||1,tags:He||[],createdAt:tt(),completedAt:null,dateStr:qe,weekNumber:qh(Oe),year:Oe.getFullYear()}),E(r,i)}async function y(N){await Ei(pe(Y,"tasks",N)),E(r,i)}function S(N){C(N)}const k=Dv(r,i),P=I?l[I]||{}:null;return d.jsxs("div",{className:"app-layout",children:[d.jsx(Yp,{todayPoints:0,streak:0,zone:"empty",onOpenSettings:()=>{}}),d.jsxs("div",{className:"calendar-page",children:[d.jsx("div",{className:"cal-back-nav",children:d.jsxs(an,{to:"/app",className:"history-back",children:[d.jsx(Da,{size:14})," Back to Dashboard"]})}),d.jsxs("div",{className:"cal-header",children:[d.jsx("button",{className:"cal-nav-btn",onClick:_,children:d.jsx(IT,{size:18})}),d.jsx("div",{className:"cal-month-title",children:A2(r,i)}),d.jsx("button",{className:"cal-nav-btn",onClick:w,children:d.jsx(ST,{size:18})}),d.jsx("button",{className:"cal-today-btn",onClick:b,disabled:r===n.getFullYear()&&i===n.getMonth()+1,children:"Today"}),d.jsx("button",{className:"cal-schedule-btn",onClick:()=>R(null),children:" Schedule Task"})]}),d.jsx($2,{stats:c}),m?d.jsx("div",{className:"cal-loading",children:d.jsx("div",{className:"spinner"})}):d.jsx(z2,{cells:k,dayDataMap:l,today:e,onDayClick:S}),d.jsx("div",{className:"calendar-legend",children:q2.map(N=>d.jsxs("div",{className:"leg-item",children:[d.jsx("span",{className:`leg-dot ${N.cls}`}),d.jsx("span",{className:"leg-icon",children:N.icon}),d.jsx("span",{className:"leg-label",children:N.label})]},N.label))})]}),I&&P&&d.jsx(H2,{dateStr:I,status:P.status||"nodata",score:P.score||0,tasks:I>e?P.futureTasks||[]:P.completedTasks||[],isRestDay:P.isRestDay||!1,restReason:P.restReason,onClose:()=>C(null),onMarkRest:O,onRemoveRest:M,onAddTask:N=>{C(null),R(N)},onDeleteTask:y}),D!==void 0&&(D===null?d.jsx(Gh,{initialDate:null,onSchedule:T,onClose:()=>R(void 0)}):D&&d.jsx(Gh,{initialDate:D,onSchedule:T,onClose:()=>R(void 0)}))]})}const G2=[{text:"Peak performance is a choice, not a chance.",author:null},{text:"Your 5 tasks today shape your tomorrow.",author:null},{text:"Balance is not something you find, it's something you create.",author:null},{text:"Every touchdown brings you closer to mastery.",author:null},{text:"Rest is productive. Recovery is growth.",author:null},{text:"Your streak is proof of your commitment.",author:null},{text:"High performance requires high intention.",author:null},{text:"Small consistent wins compound into greatness.",author:null},{text:"The grind today is the glory tomorrow.",author:null},{text:"Discipline is the bridge between goals and accomplishment.",author:"Jim Rohn"},{text:"Don't wish for fewer problems. Wish for more skills.",author:"Jim Rohn"},{text:"Success is the sum of small efforts repeated daily.",author:"Robert Collier"},{text:"Do the hard things first. Your future self will thank you.",author:null},{text:"Progress, not perfection, is the goal.",author:null},{text:"Energy flows where attention goes.",author:null},{text:"A champion is made in the moments nobody is watching.",author:null},{text:"If it was easy, everyone would do it.",author:null},{text:"Momentum is built one completed task at a time.",author:null},{text:"Your best investment is in your daily routine.",author:null},{text:"Focus on systems, not just goals.",author:"James Clear"},{text:"You don't rise to the level of your goals. You fall to the level of your systems.",author:"James Clear"},{text:"Every rep counts. Every task matters.",author:null},{text:"The secret of getting ahead is getting started.",author:"Mark Twain"},{text:"Clarity fuels performance. Know your 5.",author:null},{text:"Protect your energy like it's your most valuable asset.",author:null},{text:"A good day starts with a clear game plan.",author:null},{text:"Win the morning, win the day.",author:null},{text:"You are always one decision away from a completely different life.",author:null},{text:"Life balance isn't a luxury  it's a performance strategy.",author:null},{text:"One day or day one. You decide.",author:null},{text:"Consistency beats intensity every time.",author:null},{text:"The pain of discipline weighs ounces. The pain of regret weighs tons.",author:null},{text:"Make today a peak day.",author:null}];async function Q2(t,e){const n=Me(t,"motivationalMessages"),r=[];for(const s of G2){const i=await Ti(n,{text:s.text,author:s.author||null,createdBy:e,isActive:!0,createdAt:tt()});r.push(i.id)}return r}const Sd={text:"",author:"",isActive:!0};function Y2(){const{currentUser:t}=Kt(),[e,n]=A.useState([]),[r,s]=A.useState(!0),[i,o]=A.useState(""),[l,u]=A.useState([]),[c,f]=A.useState(!0),[m,g]=A.useState(!1),[I,C]=A.useState(null),[D,R]=A.useState(Sd),[E,_]=A.useState(!1),[w,b]=A.useState(!1),[O,M]=A.useState(null);A.useEffect(()=>{async function V(){try{const W=Ct(Me(Y,"users"),da("createdAt","desc")),G=await fn(W);n(G.docs.map(Q=>({id:Q.id,...Q.data()})))}catch(W){o("Could not load users. Check Firestore security rules."),console.error(W)}finally{s(!1)}}V()},[]),A.useEffect(()=>{const V=Ct(Me(Y,"motivationalMessages"),da("createdAt","desc"));return Ii(V,G=>{u(G.docs.map(Q=>({id:Q.id,...Q.data()}))),f(!1)},G=>{console.error("AdminPanel messages:",G),f(!1)})},[]);function T(){C(null),R(Sd),g(!0)}function y(V){C(V.id),R({text:V.text||"",author:V.author||"",isActive:V.isActive??!0}),g(!0)}function S(){g(!1),C(null),R(Sd)}async function k(V){V.preventDefault();const W=D.text.trim();if(W){_(!0);try{I?await An(pe(Y,"motivationalMessages",I),{text:W,author:D.author.trim()||null,isActive:D.isActive,updatedAt:tt()}):await Ti(Me(Y,"motivationalMessages"),{text:W,author:D.author.trim()||null,isActive:D.isActive,createdBy:t.uid,createdAt:tt()}),S()}catch(G){console.error(G)}finally{_(!1)}}}async function P(V){await An(pe(Y,"motivationalMessages",V.id),{isActive:!V.isActive})}async function N(V){await Ei(pe(Y,"motivationalMessages",V)),M(null)}async function x(){if(t){b(!0);try{await Q2(Y,t.uid)}catch(V){console.error(V)}finally{b(!1)}}}const he=e.filter(V=>V.role==="admin").length,He=e.filter(V=>V.role!=="admin").length,qe=l.filter(V=>V.isActive).length,Oe=D.text.length>200;return d.jsxs("div",{className:"app-layout",children:[d.jsx(Yp,{completedToday:0,streak:0,onOpenSettings:()=>{}}),d.jsxs("div",{className:"admin-page",children:[d.jsxs("div",{className:"admin-header",children:[d.jsxs(an,{to:"/app",className:"nav-btn",style:{display:"inline-flex",marginBottom:16},children:[d.jsx(Da,{size:14})," Back to App"]}),d.jsxs("div",{className:"admin-title",children:[d.jsx(kT,{size:22}),"Admin Panel",d.jsx("span",{className:"admin-badge",children:"ADMIN"})]}),d.jsxs("p",{className:"admin-sub",children:["Signed in as ",d.jsx("strong",{children:t==null?void 0:t.email})]})]}),!r&&!i&&d.jsxs("div",{className:"admin-stats",children:[d.jsxs("div",{className:"stat-card",children:[d.jsx("div",{className:"stat-value",children:e.length}),d.jsx("div",{className:"stat-label",children:"Total Users"})]}),d.jsxs("div",{className:"stat-card",children:[d.jsx("div",{className:"stat-value",style:{color:"var(--green)"},children:He}),d.jsx("div",{className:"stat-label",children:"Regular Users"})]}),d.jsxs("div",{className:"stat-card",children:[d.jsx("div",{className:"stat-value",style:{color:"var(--purple)"},children:he}),d.jsx("div",{className:"stat-label",children:"Admins"})]})]}),r&&d.jsx("div",{style:{padding:32,textAlign:"center"},children:d.jsx("div",{className:"spinner",style:{margin:"0 auto"}})}),i&&d.jsx("div",{className:"auth-error",children:i}),!r&&!i&&d.jsx("div",{className:"admin-table-wrap",children:d.jsxs("table",{className:"admin-table",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"Email"}),d.jsx("th",{children:"Role"}),d.jsx("th",{children:"User ID"}),d.jsx("th",{children:"Joined"})]})}),d.jsx("tbody",{children:e.map(V=>d.jsxs("tr",{children:[d.jsx("td",{style:{color:"var(--text)",fontWeight:500},children:V.email}),d.jsx("td",{children:d.jsx("span",{className:`admin-role-badge role-${V.role}`,children:(V.role||"user").toUpperCase()})}),d.jsx("td",{style:{fontFamily:"monospace",fontSize:"0.72rem"},children:V.uid}),d.jsx("td",{children:CT(V.createdAt)})]},V.id))})]})}),d.jsxs("div",{className:"admin-section-header",children:[d.jsxs("div",{className:"admin-section-title",children:[d.jsx($b,{size:16}),"Motivational Messages",d.jsxs("span",{className:"admin-section-count",children:[qe," active / ",l.length," total"]})]}),d.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[l.length===0&&!c&&d.jsx("button",{className:"msg-seed-btn",onClick:x,disabled:w,children:w?"Seeding":" Seed 33 Default Messages"}),d.jsxs("button",{className:"msg-save-btn",onClick:T,style:{display:"flex",alignItems:"center",gap:6},children:[d.jsx(qb,{size:13})," New Message"]})]})]}),m&&d.jsxs("form",{className:"msg-form",onSubmit:k,children:[d.jsx("div",{className:"msg-form-title",children:I?" Edit Message":" New Message"}),d.jsxs("div",{children:[d.jsx("textarea",{className:"msg-textarea",placeholder:"Enter motivational message (max 200 chars)",value:D.text,onChange:V=>R(W=>({...W,text:V.target.value})),maxLength:210,required:!0}),d.jsxs("div",{className:`msg-char-count ${Oe?"over-limit":""}`,children:[D.text.length,"/200"]})]}),d.jsx("input",{className:"msg-author-input",placeholder:"Author (optional, max 50 chars)",value:D.author,onChange:V=>R(W=>({...W,author:V.target.value})),maxLength:50}),d.jsxs("div",{className:"msg-form-row",children:[d.jsxs("label",{className:"msg-form-active-label",children:[d.jsx("input",{type:"checkbox",checked:D.isActive,onChange:V=>R(W=>({...W,isActive:V.target.checked}))}),"Active (shown as daily message)"]}),d.jsxs("div",{className:"msg-form-actions",children:[d.jsx("button",{type:"button",className:"msg-cancel-btn",onClick:S,children:"Cancel"}),d.jsx("button",{type:"submit",className:"msg-save-btn",disabled:E||Oe||!D.text.trim(),children:E?"Saving":I?"Update":"Add"})]})]})]}),c?d.jsx("div",{style:{padding:"16px 0",textAlign:"center"},children:d.jsx("div",{className:"spinner",style:{margin:"0 auto"}})}):d.jsxs("div",{className:"msg-list",children:[l.length===0&&d.jsx("div",{style:{color:"var(--text3)",fontSize:"0.82rem",padding:"8px 0"},children:"No messages yet. Add one above or seed default messages."}),l.map(V=>d.jsxs("div",{className:`msg-row ${V.isActive?"":"msg-inactive"}`,children:[d.jsxs("div",{className:"msg-body",children:[d.jsxs("div",{className:"msg-text",children:['"',V.text,'"']}),V.author&&d.jsxs("div",{className:"msg-author",children:[" ",V.author]})]}),d.jsxs("div",{className:"msg-actions",children:[d.jsx("button",{className:`msg-active-badge ${V.isActive?"is-active":"is-inactive"}`,onClick:()=>P(V),title:V.isActive?"Deactivate":"Activate",children:V.isActive?" Active":" Off"}),d.jsx("button",{className:"msg-icon-btn",onClick:()=>y(V),title:"Edit",children:d.jsx(Hb,{size:11})}),O===V.id?d.jsxs(d.Fragment,{children:[d.jsx("button",{className:"msg-icon-btn delete-btn",onClick:()=>N(V.id),children:"Confirm"}),d.jsx("button",{className:"msg-icon-btn",onClick:()=>M(null),children:"Cancel"})]}):d.jsx("button",{className:"msg-icon-btn delete-btn",onClick:()=>M(V.id),title:"Delete",children:d.jsx(xT,{size:11})})]})]},V.id))]})]})]})}function X2({profile:t,onClose:e,onSaved:n}){const{currentUser:r,updateUserProfile:s}=Kt(),[i,o]=A.useState(t.displayName||""),[l,u]=A.useState(t.handle||""),[c,f]=A.useState(t.bio||""),[m,g]=A.useState(""),[I,C]=A.useState(!0),[D,R]=A.useState(!1),[E,_]=A.useState("");A.useEffect(()=>{if(l===t.handle){g(""),C(!0);return}C(!1);const b=Kp(l);if(!l){g("");return}if(b){g(b);return}g("Checking");const O=setTimeout(async()=>{await Gp(Y,l,r==null?void 0:r.uid)?(g(" Available"),C(!0)):(g("Already taken."),C(!1))},500);return()=>clearTimeout(O)},[l,t.handle,r==null?void 0:r.uid]);async function w(b){if(b.preventDefault(),!(!I||!i.trim())){R(!0),_("");try{const O={displayName:i.trim(),handle:l.trim().toLowerCase(),bio:c.trim()};await s(O),n(O)}catch{_("Save failed. Try again.")}finally{R(!1)}}}return d.jsx("div",{className:"modal-overlay open",onClick:b=>{b.target===b.currentTarget&&e()},children:d.jsxs("div",{className:"modal-box edit-profile-modal",onClick:b=>b.stopPropagation(),children:[d.jsxs("div",{className:"sched-header",children:[d.jsx("h3",{className:"sched-title",children:"Edit Profile"}),d.jsx("button",{className:"modal-close-btn",onClick:e,children:d.jsx(ja,{size:16})})]}),E&&d.jsx("div",{className:"auth-error",style:{marginBottom:12},children:E}),d.jsxs("form",{className:"sched-form",onSubmit:w,children:[d.jsxs("div",{className:"sched-field",children:[d.jsx("label",{className:"sched-field-label",children:"Display Name"}),d.jsx("input",{className:"auth-input",value:i,onChange:b=>o(b.target.value),maxLength:40,required:!0})]}),d.jsxs("div",{className:"sched-field",children:[d.jsx("label",{className:"sched-field-label",children:"Handle"}),d.jsxs("div",{className:"handle-input-wrap",children:[d.jsx("span",{className:"handle-at",children:"@"}),d.jsx("input",{className:`auth-input handle-input ${I?"handle-ok":""}`,value:l,onChange:b=>u(b.target.value.toLowerCase()),maxLength:20,required:!0,autoComplete:"off"})]}),m&&d.jsx("span",{className:`handle-hint ${I?"handle-hint-ok":"handle-hint-err"}`,children:m})]}),d.jsxs("div",{className:"sched-field",children:[d.jsx("label",{className:"sched-field-label",children:"Bio (optional)"}),d.jsx("textarea",{className:"msg-textarea",value:c,onChange:b=>f(b.target.value),maxLength:200,rows:3,placeholder:"Tell people about yourself"})]}),d.jsxs("div",{className:"sched-actions",children:[d.jsx("button",{type:"button",className:"msg-cancel-btn",onClick:e,children:"Cancel"}),d.jsx("button",{type:"submit",className:"msg-save-btn",disabled:D||!I||!i.trim(),children:D?"Saving":"Save Changes"})]})]})]})})}function J2(){var I,C,D;const{handle:t}=ux(),{currentUser:e}=Kt(),[n,r]=A.useState(null),[s,i]=A.useState(null),[o,l]=A.useState(!0),[u,c]=A.useState(!1),[f,m]=A.useState(!1);A.useEffect(()=>{async function R(){l(!0);try{const E=Ct(Me(Y,"users"),Ce("handle","==",t.toLowerCase())),_=await fn(E);if(_.empty){c(!0),l(!1);return}const w={id:_.docs[0].id,..._.docs[0].data()};r(w);const O=(await fn(Ct(Me(Y,"tasks"),Ce("userId","==",w.uid),Ce("status","==","touchdown")))).docs.map(k=>k.data()),M={};O.forEach(k=>{!k.dateStr||k.mode!=="worker"||(M[k.dateStr]=(M[k.dateStr]||0)+(k.difficulty||1))});const T=Object.values(M).filter(k=>k>=10).length,y={};O.forEach(k=>{(k.tags||[]).forEach(P=>{y[P]=(y[P]||0)+1})});const S=Object.entries(y).sort((k,P)=>P[1]-k[1]).slice(0,5).map(([k])=>k);i({completedCount:O.length,topTags:S,peakDays:T})}catch(E){console.error("Profile load error:",E)}finally{l(!1)}}R()},[t]);const g=e&&n&&e.uid===n.uid;return o?d.jsx("div",{className:"profile-page",children:d.jsx("div",{className:"cal-loading",children:d.jsx("div",{className:"spinner"})})}):u?d.jsx("div",{className:"profile-page",children:d.jsxs("div",{className:"profile-not-found",children:[d.jsxs("p",{children:["No user found with handle ",d.jsxs("strong",{children:["@",t]})]}),d.jsx(an,{to:"/app",className:"nav-btn",children:"Back to App"})]})}):d.jsxs("div",{className:"profile-page",children:[d.jsx("div",{className:"profile-back",children:d.jsxs(an,{to:"/app",className:"nav-btn",children:[d.jsx(Da,{size:14})," Back"]})}),d.jsxs("div",{className:"profile-card",children:[d.jsx("div",{className:"profile-avatar",children:((C=(I=n.displayName)==null?void 0:I[0])==null?void 0:C.toUpperCase())||"@"}),d.jsxs("div",{className:"profile-info",children:[d.jsx("div",{className:"profile-display-name",children:n.displayName}),d.jsxs("div",{className:"profile-handle",children:["@",n.handle]}),n.bio&&d.jsx("p",{className:"profile-bio",children:n.bio}),d.jsxs("div",{className:"profile-meta",children:["Member since ",CT(n.createdAt)]})]}),g&&d.jsxs("button",{className:"nav-btn",onClick:()=>m(!0),children:[d.jsx(Wb,{size:13})," Edit Profile"]})]}),s&&d.jsxs("div",{className:"profile-stats",children:[d.jsxs("div",{className:"stat-card",children:[d.jsx("div",{className:"stat-value",children:s.completedCount}),d.jsx("div",{className:"stat-label",children:"Completed Tasks"})]}),d.jsxs("div",{className:"stat-card",children:[d.jsx("div",{className:"stat-value",style:{color:"var(--gold)"},children:s.peakDays}),d.jsx("div",{className:"stat-label",children:"Peak Days"})]})]}),((D=s==null?void 0:s.topTags)==null?void 0:D.length)>0&&d.jsxs("div",{className:"profile-tags-section",children:[d.jsx("div",{className:"sched-field-label",children:"Top Tags"}),d.jsx("div",{className:"profile-tags",children:s.topTags.map(R=>d.jsx("span",{className:"tag-chip",children:R},R))})]}),f&&d.jsx(X2,{profile:n,onClose:()=>m(!1),onSaved:R=>{r(E=>({...E,...R})),m(!1)}})]})}function Z2({user:t}){var r,s,i,o;const e=va(),n=((s=(r=t.displayName)==null?void 0:r[0])==null?void 0:s.toUpperCase())||((o=(i=t.handle)==null?void 0:i[0])==null?void 0:o.toUpperCase())||"?";return d.jsxs("div",{className:"user-card",onClick:()=>e(`/profile/${t.handle}`),children:[d.jsx("div",{className:"uc-avatar",children:n}),d.jsxs("div",{className:"uc-info",children:[d.jsx("div",{className:"uc-display-name",children:t.displayName||""}),d.jsxs("div",{className:"uc-handle",children:["@",t.handle]})]})]})}function eD(){const[t,e]=A.useState(""),[n,r]=A.useState([]),[s,i]=A.useState(!1),[o,l]=A.useState(!1),u=A.useRef(null);return A.useEffect(()=>{if(clearTimeout(u.current),!t.trim()||t.trim().length<2){r([]),l(!1);return}i(!0),u.current=setTimeout(async()=>{const c=t.trim().toLowerCase();try{const f=await fn(Ct(Me(Y,"users"),Ce("handle",">=",c),Ce("handle","<=",c+""),da("handle"),Hp(20)));r(f.docs.map(m=>({id:m.id,...m.data()})))}catch(f){console.error("Search error:",f),r([])}finally{i(!1),l(!0)}},400)},[t]),d.jsxs("div",{className:"search-page",children:[d.jsx("div",{className:"search-back",children:d.jsxs(an,{to:"/app",className:"nav-btn",children:[d.jsx(Da,{size:14})," Back"]})}),d.jsx("div",{className:"search-header",children:d.jsx("h1",{className:"history-title",children:"Search Users"})}),d.jsxs("div",{className:"search-input-wrap",children:[d.jsx(Kb,{size:15,className:"search-icon"}),d.jsx("input",{className:"search-input",placeholder:"Search by handle",value:t,onChange:c=>e(c.target.value),autoFocus:!0,autoComplete:"off"})]}),s&&d.jsx("div",{className:"cal-loading",children:d.jsx("div",{className:"spinner"})}),!s&&o&&n.length===0&&d.jsxs("div",{className:"search-empty",children:['No users found for "',t,'"']}),d.jsx("div",{className:"search-results",children:n.map(c=>d.jsx(Z2,{user:c},c.id))})]})}function tD(){const{needsHandle:t,authLoading:e}=Kt();return d.jsxs(d.Fragment,{children:[t&&!e&&d.jsx(Db,{}),d.jsxs(kx,{children:[d.jsx(Pn,{path:"/login",element:d.jsx(jb,{})}),d.jsx(Pn,{path:"/app",element:d.jsx(bs,{children:d.jsx(V2,{})})}),d.jsx(Pn,{path:"/history",element:d.jsx(bs,{children:d.jsx(M2,{})})}),d.jsx(Pn,{path:"/calendar",element:d.jsx(bs,{children:d.jsx(K2,{})})}),d.jsx(Pn,{path:"/admin",element:d.jsx(bs,{requireAdmin:!0,children:d.jsx(Y2,{})})}),d.jsx(Pn,{path:"/profile/:handle",element:d.jsx(bs,{children:d.jsx(J2,{})})}),d.jsx(Pn,{path:"/search",element:d.jsx(bs,{children:d.jsx(eD,{})})}),d.jsx(Pn,{path:"*",element:d.jsx(_h,{to:"/app",replace:!0})})]})]})}function nD(){return d.jsx(bx,{children:d.jsx(Rb,{children:d.jsx(Pb,{children:d.jsx(tD,{})})})})}kd.createRoot(document.getElementById("root")).render(d.jsx(Kv.StrictMode,{children:d.jsx(nD,{})}));
